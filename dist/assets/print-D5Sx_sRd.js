import{j as e,Q as $,r as j,F as N,a as V,b as I,A as F,i as z,R as M,k as A,X as G,l as B}from"./vendor-BGAm2JFI.js";import{u as E,R as T}from"./core-CNLpyEEB.js";const Z=({patient:s,onClose:t})=>{const{state:r}=E(),a=()=>{window.print()},m=(()=>{const x={Doctor:"طبيب",Nurse:"ممرض","Physical Therapist":"أخصائي علاج طبيعي","Social Worker":"أخصائي اجتماعي"};return r.staff.find(d=>d.المهنة===x[r.currentRole])||r.staff[0]})();return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-auto",children:[e.jsxs("div",{className:"no-print p-4 border-b border-gray-200 flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"طباعة بطاقة المريض"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:a,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"طباعة"}),e.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"إغلاق"})]})]}),e.jsxs("div",{className:"print-page p-8",children:[e.jsxs("div",{className:"text-center mb-8 print-header",children:[e.jsx("img",{src:"/logo.png",alt:"Aseer Health Cluster Logo",className:"h-16 mx-auto mb-4",onError:x=>{x.currentTarget.style.display="none"}}),e.jsx("h1",{className:"text-2xl font-bold text-blue-800 mb-2",children:"تجمع عسير الصحي – مستشفى الملك عبدالله ببيشة"}),e.jsx("h2",{className:"text-lg text-gray-600 mb-1",children:"Aseer Health Cluster – King Abdullah Hospital, Bishah"}),e.jsx("h3",{className:"text-base text-blue-600 font-semibold",children:"الرعاية الصحية المنزلية - Home Healthcare Department"})]}),e.jsxs("div",{className:"border-2 border-blue-600 rounded-xl p-6 mb-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"بيانات المريض"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-blue-800",children:"الاسم:"}),e.jsx("span",{className:"mr-2 text-lg font-semibold",children:s.nameAr})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-blue-800",children:"رقم الهوية:"}),e.jsx("span",{className:"mr-2 font-mono",children:s.nationalId})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-blue-800",children:"الجنس:"}),e.jsx("span",{className:"mr-2",children:s.sex==="Male"?"ذكر":"أنثى"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-blue-800",children:"العمر:"}),e.jsx("span",{className:"mr-2",children:s.age||"غير محدد"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-blue-800",children:"رقم الجوال:"}),e.jsx("span",{className:"mr-2 font-mono",dir:"ltr",children:s.phone||"غير محدد"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-blue-800",children:"المنطقة:"}),e.jsx("span",{className:"mr-2",children:s.areaId||"غير محدد"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"font-bold text-blue-800",children:"العنوان:"}),e.jsx("span",{className:"mr-2",children:s.address||"غير محدد"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"font-bold text-blue-800",children:"التشخيص الطبي:"}),e.jsx("span",{className:"mr-2",children:s.medicalDiagnosis||"غير محدد"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-blue-800",children:"تاريخ القبول:"}),e.jsx("span",{className:"mr-2",children:s.admissionDate||"غير محدد"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-blue-800",children:"نقاط برادن:"}),e.jsx("span",{className:"mr-2 font-bold text-lg",children:s.bradenScore||"غير محدد"})]})]})]}),e.jsxs("div",{className:"flex flex-col items-center ml-6",children:[e.jsx("div",{className:"w-32 h-32 border-2 border-gray-300 rounded-lg flex items-center justify-center bg-gray-50",children:e.jsx($,{size:80,className:"text-gray-400"})}),e.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"باركود موقع المريض"})]})]}),s.tags&&s.tags.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsx("span",{className:"font-bold text-blue-800 block mb-2",children:"الحالات الطبية:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.tags.map((x,d)=>e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-sm font-medium rounded-full border border-blue-200",children:x},d))})]})]}),e.jsxs("div",{className:"print-footer text-center text-xs text-gray-500 mt-8 pt-4 border-t border-gray-200",children:[e.jsxs("p",{children:["تم إنشاء هذه البطاقة بواسطة: ",m.الاسم," - ",m.المهنة]}),e.jsxs("p",{children:["تاريخ الإنشاء: ",new Date().toLocaleDateString("ar-SA")]}),e.jsx("p",{children:"نظام إدارة الرعاية الصحية المنزلية - الإصدار 1.0"})]})]})]})})},w=({patient:s,title:t,subtitle:r})=>e.jsxs("div",{className:"print-header bg-gradient-to-r from-blue-600 to-blue-700 text-white p-6 rounded-t-lg mb-6 no-print-color-adjust",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"w-20 h-20 bg-white rounded-lg flex items-center justify-center shadow-lg p-2",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-green-600 font-bold text-lg",children:"🇸🇦"}),e.jsx("div",{className:"text-xs text-green-600 font-bold mt-1",children:"MOH"})]})}),e.jsx("div",{className:"w-16 h-16 bg-white rounded-lg flex items-center justify-center shadow-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-blue-600 font-bold text-sm",children:"KAH"}),e.jsx("div",{className:"text-xs text-blue-600",children:"Bisha"})]})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-3 mb-2",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-1",children:"King Abdullah Hospital - Bisha"}),e.jsx("p",{className:"text-blue-100 text-lg",children:"مستشفى الملك عبدالله - بيشه"})]})}),e.jsxs("div",{className:"text-blue-200 text-sm",children:[e.jsx("p",{className:"font-medium",children:"Home Healthcare Division"}),e.jsx("p",{children:"قسم الرعاية الصحية المنزلية"}),e.jsx("p",{className:"mt-1",children:"Aseer Health Cluster | تجمع عسير الصحي"})]})]})]}),e.jsxs("div",{className:"text-right bg-white/10 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-blue-100 mb-1",children:"Print Date | تاريخ الطباعة"}),e.jsx("p",{className:"font-bold text-lg",children:new Date().toLocaleDateString()}),e.jsx("p",{className:"text-xs text-blue-200",children:new Date().toLocaleDateString("ar-SA")}),e.jsx("div",{className:"mt-2 text-xs text-blue-200",children:e.jsxs("p",{children:["Document ID: DOC-",Date.now().toString().slice(-6)]})})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-blue-500",children:[e.jsx("h2",{className:"text-xl font-bold",children:t}),r&&e.jsx("p",{className:"text-blue-100",children:r})]})]}),D=({patient:s})=>e.jsxs("div",{className:"patient-info bg-gradient-to-br from-gray-50 to-white p-6 rounded-lg mb-6 border border-gray-200 shadow-sm print-no-break",children:[e.jsxs("h3",{className:"font-bold text-lg text-gray-800 mb-4 border-b border-gray-300 pb-2 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-600 rounded-full"}),"Patient Information | معلومات المريض"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"bg-white p-3 rounded border-l-4 border-blue-500",children:[e.jsx("span",{className:"font-semibold text-gray-600 block mb-1",children:"Name | الاسم"}),e.jsx("p",{className:"font-bold text-blue-900",children:s.nameAr})]}),e.jsxs("div",{className:"bg-white p-3 rounded border-l-4 border-green-500",children:[e.jsx("span",{className:"font-semibold text-gray-600 block mb-1",children:"National ID | رقم الهوية"}),e.jsx("p",{className:"font-bold text-green-900",children:s.nationalId})]}),e.jsxs("div",{className:"bg-white p-3 rounded border-l-4 border-purple-500",children:[e.jsx("span",{className:"font-semibold text-gray-600 block mb-1",children:"Phone | الهاتف"}),e.jsx("p",{className:"font-bold text-purple-900",children:s.phone||"N/A"})]}),e.jsxs("div",{className:"bg-white p-3 rounded border-l-4 border-orange-500",children:[e.jsx("span",{className:"font-semibold text-gray-600 block mb-1",children:"Area | المنطقة"}),e.jsx("p",{className:"font-bold text-orange-900",children:s.areaId||"N/A"})]}),e.jsxs("div",{className:"bg-white p-3 rounded border-l-4 border-pink-500",children:[e.jsx("span",{className:"font-semibold text-gray-600 block mb-1",children:"Sex | الجنس"}),e.jsx("p",{className:"font-bold text-pink-900",children:s.sex||"N/A"})]}),e.jsxs("div",{className:"bg-white p-3 rounded border-l-4 border-indigo-500",children:[e.jsx("span",{className:"font-semibold text-gray-600 block mb-1",children:"Level | المستوى"}),e.jsx("p",{className:"font-bold text-indigo-900",children:s.level||"N/A"})]}),e.jsxs("div",{className:"bg-white p-3 rounded border-l-4 border-red-500",children:[e.jsx("span",{className:"font-semibold text-gray-600 block mb-1",children:"Admission | القبول"}),e.jsx("p",{className:"font-bold text-red-900",children:s.admissionDate?new Date(s.admissionDate).toLocaleDateString():"N/A"})]}),e.jsxs("div",{className:"bg-white p-3 rounded border-l-4 border-yellow-500",children:[e.jsx("span",{className:"font-semibold text-gray-600 block mb-1",children:"Braden Score | نقاط برادن"}),e.jsx("p",{className:"font-bold text-yellow-900",children:s.bradenScore||"N/A"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:"Medical Indicators | المؤشرات الطبية"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.hasCatheter&&e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full border border-blue-200",children:"🩺 Catheter | قسطرة"}),s.wounds&&s.wounds.presentCount&&s.wounds.presentCount>0&&e.jsxs("span",{className:"px-3 py-1 bg-red-100 text-red-800 text-xs font-medium rounded-full border border-red-200",children:["🩹 Wounds (",s.wounds.presentCount,") | جروح"]}),s.ngTube&&e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full border border-green-200",children:"🔗 NG Tube | أنبوب أنفي"}),s.gTube&&e.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 text-xs font-medium rounded-full border border-purple-200",children:"🔗 G-Tube | أنبوب معدي"}),s.fallHighRisk&&e.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-800 text-xs font-medium rounded-full border border-orange-200",children:"⚠️ Fall Risk | خطر السقوط"}),s.ivTherapy&&e.jsx("span",{className:"px-3 py-1 bg-indigo-100 text-indigo-800 text-xs font-medium rounded-full border border-indigo-200",children:"💉 IV Therapy | العلاج الوريدي"}),s.ventSupport&&e.jsx("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-800 text-xs font-medium rounded-full border border-yellow-200",children:"🫁 Vent Support | دعم تنفسي"})]})]}),s.tags.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("span",{className:"font-semibold text-gray-600 block mb-2",children:"Tags | العلامات"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.tags.map(t=>e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full border border-blue-200",children:t},t))})]})]}),H=({vitals:s,title:t="Vital Signs | العلامات الحيوية"})=>s?e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-white p-4 rounded-lg border border-blue-200 mb-4",children:[e.jsxs("h4",{className:"font-bold text-blue-800 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-600 rounded-full"}),t]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-3",children:[s.bp&&e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-red-200 text-center",children:[e.jsx("div",{className:"text-xs font-bold text-red-600 mb-1",children:"BP | ضغط الدم"}),e.jsx("div",{className:"font-mono text-lg font-bold text-red-800",children:s.bp})]}),s.hr&&e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-blue-200 text-center",children:[e.jsx("div",{className:"text-xs font-bold text-blue-600 mb-1",children:"HR | النبض"}),e.jsx("div",{className:"font-mono text-lg font-bold text-blue-800",children:s.hr})]}),s.rr&&e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-green-200 text-center",children:[e.jsx("div",{className:"text-xs font-bold text-green-600 mb-1",children:"RR | التنفس"}),e.jsx("div",{className:"font-mono text-lg font-bold text-green-800",children:s.rr})]}),s.temp&&e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-orange-200 text-center",children:[e.jsx("div",{className:"text-xs font-bold text-orange-600 mb-1",children:"Temp | الحرارة"}),e.jsxs("div",{className:"font-mono text-lg font-bold text-orange-800",children:[s.temp,"°C"]})]}),s.o2sat&&e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-purple-200 text-center",children:[e.jsx("div",{className:"text-xs font-bold text-purple-600 mb-1",children:"SpO₂ | الأكسجين"}),e.jsxs("div",{className:"font-mono text-lg font-bold text-purple-800",children:[s.o2sat,"%"]})]}),s.pain&&e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-pink-200 text-center",children:[e.jsx("div",{className:"text-xs font-bold text-pink-600 mb-1",children:"Pain | الألم"}),e.jsxs("div",{className:"font-mono text-lg font-bold text-pink-800",children:[s.pain,"/10"]})]})]})]}):null,g=({title:s,children:t,color:r="blue"})=>e.jsxs("div",{className:`bg-gradient-to-br from-${r}-50 to-white p-4 rounded-lg border border-${r}-200 mb-4 print-no-break`,children:[e.jsxs("h4",{className:`font-bold text-${r}-800 mb-3 flex items-center gap-2`,children:[e.jsx("span",{className:`w-2 h-2 bg-${r}-600 rounded-full`}),s]}),e.jsx("div",{className:"space-y-2 text-sm",children:t})]}),l=({label:s,value:t,icon:r,highlight:a})=>{if(!t||Array.isArray(t)&&t.length===0)return null;const o=Array.isArray(t)?t.join(", "):t;return e.jsxs("div",{className:`flex items-start gap-2 p-2 rounded ${a?"bg-yellow-50 border border-yellow-200":""}`,children:[r&&e.jsx("span",{className:"text-sm",children:r}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("span",{className:"font-semibold text-gray-700",children:[s,":"]}),e.jsx("span",{className:`ml-2 ${a?"font-bold text-yellow-800":"text-gray-900"}`,children:o})]})]})},O=({assessment:s,patient:t})=>e.jsxs("div",{className:"print-page",children:[e.jsx(w,{patient:t,title:"Medical Assessment Report",subtitle:"تقرير التقييم الطبي"}),e.jsx(D,{patient:t}),e.jsxs("div",{className:"assessment-details space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-blue-800",children:"Medical Assessment Details"}),e.jsx("p",{className:"text-blue-600",children:"تفاصيل التقييم الطبي"})]}),e.jsxs("div",{className:"text-right text-sm text-blue-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",new Date(s.date).toLocaleDateString()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Assessor:"})," ",s.assessorName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ID:"})," ",s.assessorId]})]})]}),e.jsxs(g,{title:"Clinical Focus | التركيز السريري",color:"blue",children:[e.jsx(l,{label:"Chief Focus",value:s.chiefFocus,icon:"🎯"}),s.redFlags&&s.redFlags.length>0&&e.jsx(l,{label:"Red Flags",value:s.redFlags,icon:"🚨",highlight:!0}),e.jsx(l,{label:"Red Flag Action",value:s.redFlagAction,icon:"⚡"})]}),e.jsxs(g,{title:"Clinical Assessment | التقييم السريري",color:"green",children:[e.jsx(l,{label:"Status",value:s.status,icon:"📊"}),e.jsx(l,{label:"Plan",value:s.plan,icon:"📋"}),e.jsx(l,{label:"Etiology",value:s.assessment.etiology,icon:"🔍"}),e.jsx(l,{label:"Severity",value:s.assessment.severity,icon:"⚖️"}),s.worsenedCause&&e.jsx(l,{label:"Worsened Cause",value:s.worsenedCause,icon:"⚠️"})]}),s.orders&&e.jsxs(g,{title:"Orders & Interventions | الطلبات والتدخلات",color:"purple",children:[s.orders.labs&&e.jsx(l,{label:"Laboratory Tests",value:s.orders.labs,icon:"🧪"}),s.orders.imaging&&e.jsx(l,{label:"Imaging Studies",value:s.orders.imaging,icon:"📷"}),s.orders.antibiotic&&e.jsx(l,{label:"Antibiotics",value:s.orders.antibiotic,icon:"💊"}),s.orders.customAntibiotic&&e.jsx(l,{label:"Custom Antibiotic",value:s.orders.customAntibiotic,icon:"💊"})]}),e.jsxs(g,{title:"Medications & Plan | الأدوية والخطة",color:"orange",children:[e.jsx(l,{label:"Medication Changes",value:s.medChanges,icon:"💊"}),e.jsx(l,{label:"High-Risk Medications",value:s.highRiskMeds,icon:"⚠️"}),e.jsx(l,{label:"Plan Details",value:s.planDetails,icon:"📝"}),e.jsx(l,{label:"Follow-up Timing",value:s.followUpTiming,icon:"⏰"}),e.jsx(l,{label:"Entitlement",value:s.entitlement,icon:"🎫"})]}),s.mdNote&&e.jsx(g,{title:"Physician Notes | ملاحظات الطبيب",color:"indigo",children:e.jsx("div",{className:"bg-white p-4 rounded border border-gray-200",children:e.jsx("pre",{className:"whitespace-pre-wrap text-sm leading-relaxed",children:s.mdNote})})})]}),e.jsx("div",{className:"print-footer mt-8 pt-4 border-t-2 border-gray-300",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:"Digital Assessment Record"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Aseer Health Cluster – King Abdullah Hospital, Bishah"}),e.jsx("p",{className:"text-xs text-gray-500",children:"تجمع عسير الصحي – مستشفى الملك عبدالله ببيشة"})]}),e.jsxs("div",{className:"text-right text-xs text-gray-500",children:[e.jsxs("p",{children:["Generated: ",new Date().toLocaleString()]}),e.jsxs("p",{children:["Assessment ID: ",s.id]})]})]})})]}),U=({assessment:s,patient:t})=>e.jsxs("div",{className:"print-page",children:[e.jsx(w,{patient:t,title:"Nursing Assessment Report",subtitle:"تقرير التقييم التمريضي"}),e.jsx(D,{patient:t}),e.jsx(H,{vitals:s.vitals}),e.jsxs("div",{className:"assessment-details space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-green-800",children:"Nursing Assessment Details"}),e.jsx("p",{className:"text-green-600",children:"تفاصيل التقييم التمريضي"})]}),e.jsxs("div",{className:"text-right text-sm text-green-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",new Date(s.date).toLocaleDateString()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Nurse:"})," ",s.assessorName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ID:"})," ",s.assessorId]})]})]}),e.jsxs(g,{title:"Clinical Status | الحالة السريرية",color:"green",children:[e.jsx(l,{label:"Overall Status",value:s.status,icon:"📊"}),e.jsx(l,{label:"Plan",value:s.plan,icon:"📋"}),e.jsx(l,{label:"Impression",value:s.impression,icon:"💭"}),e.jsx(l,{label:"Braden Score",value:s.bradenScore,icon:"📏"})]}),s.devices&&s.devices.length>0&&e.jsxs(g,{title:"Medical Devices | الأجهزة الطبية",color:"blue",children:[e.jsx(l,{label:"Devices Present",value:s.devices,icon:"🔗"}),s.catheterDetails&&e.jsxs("div",{className:"bg-blue-50 p-3 rounded border border-blue-200",children:[e.jsx("h5",{className:"font-semibold text-blue-800 mb-2",children:"Catheter Care | رعاية القسطرة"}),e.jsx(l,{label:"Care Done",value:s.catheterDetails.careDone}),e.jsx(l,{label:"Issues",value:s.catheterDetails.issues})]}),s.pegNgDetails&&e.jsxs("div",{className:"bg-blue-50 p-3 rounded border border-blue-200",children:[e.jsx("h5",{className:"font-semibold text-blue-800 mb-2",children:"PEG/NG Tube | الأنبوب الأنفي/المعدي"}),e.jsx(l,{label:"Site Condition",value:s.pegNgDetails.site}),e.jsx(l,{label:"Feeding Given",value:s.pegNgDetails.feedingGiven})]}),s.ivPortDetails&&e.jsxs("div",{className:"bg-blue-50 p-3 rounded border border-blue-200",children:[e.jsx("h5",{className:"font-semibold text-blue-800 mb-2",children:"IV/Port Care | رعاية الوريد"}),e.jsx(l,{label:"Site Condition",value:s.ivPortDetails.site}),e.jsx(l,{label:"Dressing Changed",value:s.ivPortDetails.dressingChanged}),e.jsx(l,{label:"Flush Done",value:s.ivPortDetails.flush})]})]}),s.woundStatus&&s.woundStatus!=="None"&&e.jsxs(g,{title:"Wound Assessment | تقييم الجروح",color:"red",children:[e.jsx(l,{label:"Wound Status",value:s.woundStatus,icon:"🩹"}),s.woundDetails&&e.jsxs("div",{className:"bg-red-50 p-3 rounded border border-red-200",children:[e.jsx(l,{label:"Sites",value:s.woundDetails.sites}),e.jsx(l,{label:"Other Site",value:s.woundDetails.otherSite}),e.jsx(l,{label:"Stage",value:s.woundDetails.stage}),e.jsx(l,{label:"Exudate",value:s.woundDetails.exudate}),e.jsx(l,{label:"Infection Signs",value:s.woundDetails.infectionSigns}),e.jsx(l,{label:"Care Provided",value:s.woundDetails.careToday})]})]}),e.jsxs(g,{title:"Nursing Tasks | المهام التمريضية",color:"purple",children:[e.jsx(l,{label:"Tasks Performed",value:s.nursingTasks,icon:"✅"}),s.vaccinationDetails&&e.jsx(l,{label:"Vaccination Details",value:s.vaccinationDetails,icon:"💉"}),s.glucoseValue&&e.jsx(l,{label:"Glucose Value",value:s.glucoseValue,icon:"🩸"})]}),s.nurseNote&&e.jsx(g,{title:"Nursing Notes | ملاحظات التمريض",color:"indigo",children:e.jsx("div",{className:"bg-white p-4 rounded border border-gray-200",children:e.jsx("pre",{className:"whitespace-pre-wrap text-sm leading-relaxed",children:s.nurseNote})})})]}),e.jsx("div",{className:"print-footer mt-8 pt-4 border-t-2 border-gray-300",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:"Digital Nursing Record"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Aseer Health Cluster – King Abdullah Hospital, Bishah"}),e.jsx("p",{className:"text-xs text-gray-500",children:"تجمع عسير الصحي – مستشفى الملك عبدالله ببيشة"})]}),e.jsxs("div",{className:"text-right text-xs text-gray-500",children:[e.jsxs("p",{children:["Generated: ",new Date().toLocaleString()]}),e.jsxs("p",{children:["Assessment ID: ",s.id]})]})]})})]}),q=({visit:s,patient:t})=>e.jsxs("div",{className:"print-page",children:[e.jsx(w,{patient:t,title:"Home Healthcare Visit Report",subtitle:"تقرير زيارة الرعاية المنزلية"}),e.jsx(D,{patient:t}),e.jsxs("div",{className:"visit-details space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-purple-800",children:"Visit Information"}),e.jsx("p",{className:"text-purple-600",children:"معلومات الزيارة"})]}),e.jsxs("div",{className:"text-right text-sm text-purple-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",new Date(s.date).toLocaleDateString()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Team:"})," ",s.teamId]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"})," ",s.status]})]})]}),s.nurseNote?.vitals&&e.jsx(H,{vitals:s.nurseNote.vitals}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.nurseNote&&e.jsxs(g,{title:"Nursing Assessment | التقييم التمريضي",color:"green",children:[e.jsx(l,{label:"Status",value:s.nurseNote.status,icon:"📊"}),e.jsx(l,{label:"Wound Delta",value:s.nurseNote.woundDelta,icon:"🩹"}),e.jsx(l,{label:"Device Delta",value:s.nurseNote.deviceDelta,icon:"🔗"}),e.jsx(l,{label:"Tasks Completed",value:s.nurseNote.tasks,icon:"✅"}),e.jsx(l,{label:"Escalation",value:s.nurseNote.escalation,icon:"📞"}),s.nurseNote.nurseNote&&e.jsxs("div",{className:"mt-2 p-3 bg-white rounded border border-gray-200",children:[e.jsx("strong",{className:"text-green-700",children:"Notes:"}),e.jsx("p",{className:"text-sm mt-1",children:s.nurseNote.nurseNote})]})]}),s.doctorNote&&e.jsxs(g,{title:"Medical Assessment | التقييم الطبي",color:"blue",children:[e.jsx(l,{label:"Status",value:s.doctorNote.status,icon:"📊"}),e.jsx(l,{label:"Response to Plan",value:s.doctorNote.responseToPlan,icon:"📈"}),e.jsx(l,{label:"Adherence",value:s.doctorNote.adherence,icon:"💊"}),e.jsx(l,{label:"New Issues",value:s.doctorNote.newIssues,icon:"⚠️"}),e.jsx(l,{label:"Plan",value:s.doctorNote.plan,icon:"📋"}),e.jsx(l,{label:"Plan Details",value:s.doctorNote.planDetails,icon:"📝"}),e.jsx(l,{label:"Next Follow-up",value:s.doctorNote.nextFollowUp,icon:"⏰"}),s.doctorNote.mdNote&&e.jsxs("div",{className:"mt-2 p-3 bg-white rounded border border-gray-200",children:[e.jsx("strong",{className:"text-blue-700",children:"Notes:"}),e.jsx("p",{className:"text-sm mt-1",children:s.doctorNote.mdNote})]})]})]}),(s.ptNote||s.swNote)&&e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.ptNote&&e.jsxs(g,{title:"Physical Therapy | العلاج الطبيعي",color:"orange",children:[e.jsx(l,{label:"Status",value:s.ptNote.status,icon:"🏃"}),e.jsx(l,{label:"Pain Change",value:s.ptNote.changeSinceLast?.pain,icon:"💊"}),e.jsx(l,{label:"Function Change",value:s.ptNote.changeSinceLast?.function,icon:"🎯"}),e.jsx(l,{label:"Tolerance",value:s.ptNote.tolerance,icon:"💪"}),e.jsx(l,{label:"Plan",value:s.ptNote.plan,icon:"📋"}),s.ptNote.ptNote&&e.jsxs("div",{className:"mt-2 p-3 bg-white rounded border border-gray-200",children:[e.jsx("strong",{className:"text-orange-700",children:"Notes:"}),e.jsx("p",{className:"text-sm mt-1",children:s.ptNote.ptNote})]})]}),s.swNote&&e.jsxs(g,{title:"Social Work | الخدمة الاجتماعية",color:"teal",children:[e.jsx(l,{label:"Situation Change",value:s.swNote.situationChange,icon:"🏠"}),e.jsx(l,{label:"Actions Taken",value:s.swNote.actionsTaken,icon:"🛠️"}),e.jsx(l,{label:"Plan",value:s.swNote.plan,icon:"📋"}),s.swNote.swNote&&e.jsxs("div",{className:"mt-2 p-3 bg-white rounded border border-gray-200",children:[e.jsx("strong",{className:"text-teal-700",children:"Notes:"}),e.jsx("p",{className:"text-sm mt-1",children:s.swNote.swNote})]})]})]})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t-2 border-gray-300",children:[e.jsx("h4",{className:"font-bold text-gray-800 mb-4",children:"Team Signatures | توقيعات الفريق"}),e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[s.nurseSign&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"border-b border-gray-400 pb-2 mb-2",children:e.jsx("p",{className:"font-semibold text-lg",children:s.nurseSign})}),e.jsx("p",{className:"text-sm text-gray-600",children:"Nurse | ممرض/ة"})]}),s.doctorSign&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"border-b border-gray-400 pb-2 mb-2",children:e.jsx("p",{className:"font-semibold text-lg",children:s.doctorSign})}),e.jsx("p",{className:"text-sm text-gray-600",children:"Doctor | طبيب"})]}),s.ptSign&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"border-b border-gray-400 pb-2 mb-2",children:e.jsx("p",{className:"font-semibold text-lg",children:s.ptSign})}),e.jsx("p",{className:"text-sm text-gray-600",children:"Physical Therapist | أخصائي علاج طبيعي"})]}),s.swSign&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"border-b border-gray-400 pb-2 mb-2",children:e.jsx("p",{className:"font-semibold text-lg",children:s.swSign})}),e.jsx("p",{className:"text-sm text-gray-600",children:"Social Worker | أخصائي اجتماعي"})]})]})]}),e.jsx("div",{className:"print-footer mt-8 pt-4 border-t-2 border-gray-300",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:"Digital Visit Record"}),e.jsx("p",{className:"text-xs text-gray-600",children:"This document was generated electronically and is valid without signature."}),e.jsx("p",{className:"text-xs text-gray-500",children:"Aseer Health Cluster – King Abdullah Hospital, Bishah - Home Healthcare Department"}),e.jsx("p",{className:"text-xs text-gray-500",children:"تجمع عسير الصحي – مستشفى الملك عبدالله ببيشة - الرعاية الصحية المنزلية"})]}),e.jsxs("div",{className:"text-right text-xs text-gray-500",children:[e.jsxs("p",{children:["Generated: ",new Date().toLocaleString()]}),e.jsxs("p",{children:["Visit Date: ",s.date]})]})]})})]}),K=({patient:s,visit:t,assessment:r,type:a,additionalData:o})=>{switch(a){case"visit":return t?e.jsx(q,{patient:s,visit:t}):null;case"assessment":if(!r)return null;switch(r.role){case"Doctor":return e.jsx(O,{assessment:r,patient:s});case"Nurse":return e.jsx(U,{assessment:r,patient:s});default:return e.jsxs("div",{className:"print-page",children:[e.jsx(w,{patient:s,title:`${r.role} Assessment`}),e.jsx(D,{patient:s}),e.jsxs("div",{className:"text-center text-gray-600 py-8",children:[e.jsxs("p",{children:["Assessment details for ",r.role," are being developed."]}),e.jsxs("p",{children:["تفاصيل التقييم لـ ",r.role," قيد التطوير."]})]})]})}default:return e.jsxs("div",{className:"print-page",children:[e.jsx(w,{patient:s,title:"Healthcare Document"}),e.jsx(D,{patient:s}),e.jsxs("div",{className:"text-center text-gray-600 py-8",children:[e.jsxs("p",{children:['Document type "',a,'" is not yet implemented.']}),e.jsxs("p",{children:['نوع المستند "',a,'" غير متاح حالياً.']})]})]})}},ee=({patient:s,patients:t,visit:r,assessment:a,staff:o,onClose:m})=>{const[x,d]=j.useState("visit"),[p,u]=j.useState(!1),[f,y]=j.useState(!1),i=j.useRef(null),v=[{type:"visit",label:"Visit Report",description:"Complete visit documentation with all team assessments",icon:N,color:"blue",available:!!r&&!!s,requiresData:["visit","patient"]},{type:"assessment",label:"Assessment Report",description:"Detailed clinical assessment by specific role",icon:V,color:"green",available:!!a&&!!s,requiresData:["assessment","patient"]},{type:"visit-history",label:"سجل الزيارات | Visit History",description:"Complete history of all patient visits",icon:N,color:"teal",available:!!s,requiresData:["patient"]},{type:"assessment-history",label:"سجل التقييم | Assessment History",description:"Complete history of all assessments",icon:I,color:"cyan",available:!!s,requiresData:["patient"]},{type:"patient-summary",label:"Patient Summary",description:"Comprehensive patient overview with history",icon:F,color:"purple",available:!!s,requiresData:["patient"]},{type:"care-plan",label:"Care Plan",description:"Individualized care plan and goals",icon:z,color:"orange",available:!!s,requiresData:["patient"]},{type:"driver-route",label:"Driver Route",description:"Optimized route for patient visits",icon:M,color:"indigo",available:!!t&&t.length>0,requiresData:["patients"]}],R=async()=>{x&&(u(!0),await new Promise(n=>setTimeout(n,500)),y(!0),u(!1))},L=()=>{const n=window.open("","_blank");if(!n)return;const k=i.current?.innerHTML||"";n.document.write(`
      <!DOCTYPE html>
      <html dir="rtl">
        <head>
          <title>Healthcare Report - King Abdullah Hospital</title>
          <meta charset="utf-8">
          <style>
            * {
              margin: 0;
              padding: 0;
              box-sizing: border-box;
            }
            
            body {
              font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
              line-height: 1.6;
              color: #333;
              background: white;
            }
            
            .print-page {
              max-width: none;
              margin: 0;
              padding: 20px;
              font-size: 14px;
              background: white;
            }
            
            .print-header {
              background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%) !important;
              -webkit-print-color-adjust: exact !important;
              color-adjust: exact !important;
              color: white !important;
            }
            
            .print-no-break {
              page-break-inside: avoid;
              break-inside: avoid;
            }
            
            .print-footer {
              page-break-inside: avoid;
              margin-top: 2rem;
            }
            
            /* Color preservation for print */
            .bg-blue-50, .bg-blue-100 { background-color: #eff6ff !important; }
            .bg-green-50, .bg-green-100 { background-color: #f0fdf4 !important; }
            .bg-red-50, .bg-red-100 { background-color: #fef2f2 !important; }
            .bg-purple-50, .bg-purple-100 { background-color: #faf5ff !important; }
            .bg-orange-50, .bg-orange-100 { background-color: #fff7ed !important; }
            .bg-indigo-50, .bg-indigo-100 { background-color: #eef2ff !important; }
            .bg-yellow-50, .bg-yellow-100 { background-color: #fefce8 !important; }
            .bg-pink-50, .bg-pink-100 { background-color: #fdf2f8 !important; }
            .bg-teal-50, .bg-teal-100 { background-color: #f0fdfa !important; }
            
            .text-blue-600 { color: #2563eb !important; }
            .text-blue-700 { color: #1d4ed8 !important; }
            .text-blue-800 { color: #1e40af !important; }
            .text-green-600 { color: #16a34a !important; }
            .text-green-700 { color: #15803d !important; }
            .text-green-800 { color: #166534 !important; }
            .text-red-600 { color: #dc2626 !important; }
            .text-red-700 { color: #b91c1c !important; }
            .text-red-800 { color: #991b1b !important; }
            
            .border-blue-200 { border-color: #bfdbfe !important; }
            .border-green-200 { border-color: #bbf7d0 !important; }
            .border-red-200 { border-color: #fecaca !important; }
            .border-purple-200 { border-color: #e9d5ff !important; }
            .border-orange-200 { border-color: #fed7aa !important; }
            .border-indigo-200 { border-color: #c7d2fe !important; }
            .border-yellow-200 { border-color: #fef08a !important; }
            .border-pink-200 { border-color: #fbcfe8 !important; }
            .border-teal-200 { border-color: #99f6e4 !important; }
            
            .border-l-4 { border-left-width: 4px !important; }
            .border-blue-500 { border-color: #3b82f6 !important; }
            .border-green-500 { border-color: #22c55e !important; }
            .border-red-500 { border-color: #ef4444 !important; }
            .border-purple-500 { border-color: #a855f7 !important; }
            .border-orange-500 { border-color: #f97316 !important; }
            .border-pink-500 { border-color: #ec4899 !important; }
            .border-indigo-500 { border-color: #6366f1 !important; }
            .border-yellow-500 { border-color: #eab308 !important; }
            
            .rounded, .rounded-lg, .rounded-xl { border-radius: 8px; }
            .rounded-full { border-radius: 50%; }
            
            .shadow-sm { box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); }
            .shadow-lg { box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); }
            
            .grid { display: grid; }
            .grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
            .grid-cols-4 { grid-template-columns: repeat(4, minmax(0, 1fr)); }
            .grid-cols-6 { grid-template-columns: repeat(6, minmax(0, 1fr)); }
            .gap-2 { gap: 0.5rem; }
            .gap-3 { gap: 0.75rem; }
            .gap-4 { gap: 1rem; }
            .gap-8 { gap: 2rem; }
            
            .flex { display: flex; }
            .items-center { align-items: center; }
            .items-start { align-items: flex-start; }
            .justify-between { justify-content: space-between; }
            .flex-1 { flex: 1 1 0%; }
            
            .p-2 { padding: 0.5rem; }
            .p-3 { padding: 0.75rem; }
            .p-4 { padding: 1rem; }
            .p-6 { padding: 1.5rem; }
            .px-3 { padding-left: 0.75rem; padding-right: 0.75rem; }
            .py-1 { padding-top: 0.25rem; padding-bottom: 0.25rem; }
            .pt-4 { padding-top: 1rem; }
            .pb-2 { padding-bottom: 0.5rem; }
            .ml-2 { margin-left: 0.5rem; }
            .mb-1 { margin-bottom: 0.25rem; }
            .mb-2 { margin-bottom: 0.5rem; }
            .mb-3 { margin-bottom: 0.75rem; }
            .mb-4 { margin-bottom: 1rem; }
            .mb-6 { margin-bottom: 1.5rem; }
            .mt-1 { margin-top: 0.25rem; }
            .mt-2 { margin-top: 0.5rem; }
            .mt-4 { margin-top: 1rem; }
            .mt-8 { margin-top: 2rem; }
            
            .text-xs { font-size: 0.75rem; }
            .text-sm { font-size: 0.875rem; }
            .text-base { font-size: 1rem; }
            .text-lg { font-size: 1.125rem; }
            .text-xl { font-size: 1.25rem; }
            .text-2xl { font-size: 1.5rem; }
            
            .font-bold { font-weight: 700; }
            .font-semibold { font-weight: 600; }
            .font-medium { font-weight: 500; }
            .font-mono { font-family: monospace; }
            
            .text-center { text-align: center; }
            .text-right { text-align: right; }
            
            .border { border-width: 1px; }
            .border-t { border-top-width: 1px; }
            .border-t-2 { border-top-width: 2px; }
            .border-b { border-bottom-width: 1px; }
            
            .space-y-2 > * + * { margin-top: 0.5rem; }
            .space-y-4 > * + * { margin-top: 1rem; }
            .gap-2 { gap: 0.5rem; }
            
            .w-2 { width: 0.5rem; }
            .h-2 { height: 0.5rem; }
            .w-16 { width: 4rem; }
            .h-16 { height: 4rem; }
            
            .whitespace-pre-wrap { white-space: pre-wrap; }
            .leading-relaxed { line-height: 1.625; }
            
            @page {
              margin: 0.75in;
              size: A4;
            }
            
            @media print {
              .print-page {
                margin: 0;
                padding: 0;
              }
              
              .print-no-break {
                page-break-inside: avoid !important;
                break-inside: avoid !important;
              }
              
              .print-header {
                -webkit-print-color-adjust: exact !important;
                color-adjust: exact !important;
              }
            }
          </style>
        </head>
        <body>
          ${k}
        </body>
      </html>
    `),n.document.close(),n.focus(),setTimeout(()=>{n.print(),n.close()},500)},S=v.find(n=>n.type===x);return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-6xl w-full max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(A,{className:"text-blue-600",size:20})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Print Manager"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Generate professional healthcare reports"})]})]}),e.jsx("button",{onClick:m,className:"text-gray-400 hover:text-gray-600 text-2xl font-bold w-8 h-8 flex items-center justify-center",children:"×"})]}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsxs("div",{className:"w-1/3 border-r border-gray-200 p-6 overflow-y-auto",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Select Report Type"}),e.jsx("div",{className:"space-y-3",children:v.map(n=>{const k=n.icon;return e.jsx("button",{onClick:()=>d(n.type),disabled:!n.available,className:`w-full text-left p-4 rounded-lg border-2 transition-all ${x===n.type?`border-${n.color}-500 bg-${n.color}-50`:n.available?"border-gray-200 hover:border-gray-300 bg-white":"border-gray-100 bg-gray-50 opacity-50 cursor-not-allowed"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${x===n.type?`bg-${n.color}-500 text-white`:`bg-${n.color}-100 text-${n.color}-600`}`,children:e.jsx(k,{size:16})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:n.label}),e.jsx("p",{className:"text-sm text-gray-600",children:n.description}),!n.available&&e.jsxs("p",{className:"text-xs text-red-500 mt-1",children:["Missing required data: ",n.requiresData?.join(", ")]})]})]})},n.type)})}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("button",{onClick:R,disabled:!S?.available||p,className:"w-full bg-blue-600 text-white px-4 py-3 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 transition-all",children:p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(N,{size:16}),"Generate Preview"]})}),f&&e.jsxs("button",{onClick:L,className:"w-full mt-3 bg-green-600 text-white px-4 py-3 rounded-lg font-medium hover:bg-green-700 flex items-center justify-center gap-2 transition-all",children:[e.jsx(A,{size:16}),"Print Document"]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-50",children:f&&S?.available?e.jsx("div",{ref:i,className:"h-full",children:e.jsx(K,{patient:s,patients:t,visit:r,assessment:a,staff:o,type:x})}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(N,{className:"text-gray-400",size:24})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Preview Area"}),e.jsx("p",{className:"text-gray-600 max-w-sm",children:S?.available?'Click "Generate Preview" to see your document':"Select an available report type to continue"})]})})})]})]})})},W=[{type:"assessments",title:"Medical Assessments",titleAr:"التقييمات الطبية",description:"Complete assessment history and current status",icon:I,color:"blue"},{type:"visit-notes",title:"Visit Notes History",titleAr:"سجل ملاحظات الزيارات",description:"All previous visit notes and observations",icon:N,color:"green"},{type:"contact-log",title:"Contact Attempts Log",titleAr:"سجل محاولات الاتصال",description:"Communication history and contact attempts",icon:B,color:"orange"}],P=({title:s,titleAr:t,patient:r})=>e.jsxs("div",{className:"print-header bg-gradient-to-r from-blue-600 to-blue-700 text-white p-4 md:p-6 rounded-t-lg mb-4 md:mb-6 no-print-color-adjust print:bg-blue-700",style:{pageBreakInside:"avoid",marginTop:"10mm",marginLeft:"10mm",marginRight:"10mm"},children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"w-20 h-20 bg-white rounded-lg flex items-center justify-center shadow-lg p-2",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-green-600 font-bold text-lg",children:"🇸🇦"}),e.jsx("div",{className:"text-xs text-green-600 font-bold mt-1",children:"MOH"})]})}),e.jsx("div",{className:"w-16 h-16 bg-white rounded-lg flex items-center justify-center shadow-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-blue-600 font-bold text-sm",children:"KAH"}),e.jsx("div",{className:"text-xs text-blue-600",children:"Bisha"})]})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-3 mb-2",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-1",children:"King Abdullah Hospital - Bisha"}),e.jsx("p",{className:"text-blue-100 text-lg",children:"مستشفى الملك عبدالله - بيشه"})]})}),e.jsxs("div",{className:"text-blue-200 text-sm",children:[e.jsx("p",{className:"font-medium",children:"Home Healthcare Division | قسم الرعاية الصحية المنزلية"}),e.jsx("p",{className:"mt-1",children:"Aseer Health Cluster | تجمع عسير الصحي"})]})]})]}),e.jsxs("div",{className:"text-right bg-white/10 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-blue-100 mb-1",children:"Print Date | تاريخ الطباعة"}),e.jsx("p",{className:"font-bold text-lg",children:new Date().toLocaleDateString()}),e.jsx("p",{className:"text-xs text-blue-200",children:new Date().toLocaleDateString("ar-SA")}),e.jsx("div",{className:"mt-2 text-xs text-blue-200",children:e.jsxs("p",{children:["Document ID: DOC-",Date.now().toString().slice(-6)]})})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-blue-500",children:[e.jsx("h2",{className:"text-xl font-bold",children:s}),e.jsx("p",{className:"text-blue-100",children:t})]})]}),C=({patient:s})=>e.jsxs("div",{className:"patient-info bg-gradient-to-br from-gray-50 to-white p-6 rounded-lg mb-6 border border-gray-200 shadow-sm print-no-break",children:[e.jsxs("h3",{className:"font-bold text-lg text-gray-800 mb-4 border-b border-gray-300 pb-2 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-600 rounded-full"}),"Patient Information | معلومات المريض"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"bg-white p-3 rounded border-l-4 border-blue-500",children:[e.jsx("span",{className:"font-semibold text-gray-600 block mb-1",children:"Name | الاسم"}),e.jsx("p",{className:"font-bold text-blue-900",children:s.nameAr})]}),e.jsxs("div",{className:"bg-white p-3 rounded border-l-4 border-green-500",children:[e.jsx("span",{className:"font-semibold text-gray-600 block mb-1",children:"National ID | رقم الهوية"}),e.jsx("p",{className:"font-bold text-green-900",children:s.nationalId})]}),e.jsxs("div",{className:"bg-white p-3 rounded border-l-4 border-purple-500",children:[e.jsx("span",{className:"font-semibold text-gray-600 block mb-1",children:"Phone | الهاتف"}),e.jsx("p",{className:"font-bold text-purple-900",children:s.phone||"N/A"})]}),e.jsxs("div",{className:"bg-white p-3 rounded border-l-4 border-orange-500",children:[e.jsx("span",{className:"font-semibold text-gray-600 block mb-1",children:"Area | المنطقة"}),e.jsx("p",{className:"font-bold text-orange-900",children:s.areaId||"N/A"})]})]})]}),Q=({patient:s})=>e.jsxs("div",{className:"print-page",children:[e.jsx(P,{title:"Medical Assessments Report",titleAr:"تقرير التقييمات الطبية",patient:s}),e.jsx(C,{patient:s}),e.jsx("div",{className:"assessment-details space-y-6",children:e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("h3",{className:"font-bold text-lg text-blue-800 mb-4",children:"Assessment Summary | ملخص التقييمات"}),s.assessments&&s.assessments.length>0?e.jsx("div",{className:"space-y-4",children:s.assessments.map((t,r)=>e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-blue-800",children:[t.role," Assessment"]}),e.jsxs("p",{className:"text-sm text-blue-600",children:["تقييم ",t.role]})]}),e.jsxs("div",{className:"text-right text-sm text-blue-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",new Date(t.date).toLocaleDateString()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Assessor:"})," ",t.assessorName]})]})]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[t.role==="Doctor"&&e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Status:"}),e.jsx("span",{className:"ml-2",children:t.status||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Plan:"}),e.jsx("span",{className:"ml-2",children:t.plan||"N/A"})]})]}),t.role==="Nurse"&&e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Status:"}),e.jsx("span",{className:"ml-2",children:t.status||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Braden Score:"}),e.jsx("span",{className:"ml-2",children:t.bradenScore||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Wound Status:"}),e.jsx("span",{className:"ml-2",children:t.woundStatus||"N/A"})]})]}),t.nurseNote&&e.jsxs("div",{className:"bg-gray-50 p-3 rounded border-l-4 border-green-500",children:[e.jsx("span",{className:"font-medium text-gray-700 block mb-1",children:"Notes:"}),e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:t.nurseNote})]}),t.mdNote&&e.jsxs("div",{className:"bg-gray-50 p-3 rounded border-l-4 border-blue-500",children:[e.jsx("span",{className:"font-medium text-gray-700 block mb-1",children:"Medical Notes:"}),e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:t.mdNote})]})]})]},t.id))}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:"No assessments recorded | لا توجد تقييمات مسجلة"})})]})}),e.jsx("div",{className:"print-footer mt-8 pt-4 border-t-2 border-gray-300",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:"Digital Assessment Record"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Aseer Health Cluster – King Abdullah Hospital, Bishah"}),e.jsx("p",{className:"text-xs text-gray-500",children:"تجمع عسير الصحي – مستشفى الملك عبدالله ببيشة"})]}),e.jsxs("div",{className:"text-right text-xs text-gray-500",children:[e.jsxs("p",{children:["Generated: ",new Date().toLocaleString()]}),e.jsxs("p",{children:["Patient ID: ",s.nationalId]})]})]})})]}),_=({patient:s})=>e.jsxs("div",{className:"print-page",children:[e.jsx(P,{title:"Visit Notes History",titleAr:"سجل ملاحظات الزيارات",patient:s}),e.jsx(C,{patient:s}),e.jsx("div",{className:"visit-notes-details space-y-6",children:e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("h3",{className:"font-bold text-lg text-green-800 mb-4",children:"All Visit Notes | جميع ملاحظات الزيارات"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-800",children:"Doctor Follow-up Visit"}),e.jsx("p",{className:"text-sm text-green-600",children:"زيارة متابعة طبية"})]}),e.jsxs("div",{className:"text-right text-sm text-green-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",new Date().toLocaleDateString()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"})," Improved"]})]})]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"bg-gray-50 p-3 rounded border-l-4 border-blue-500",children:[e.jsx("span",{className:"font-medium text-gray-700 block mb-1",children:"Clinical Impression:"}),e.jsx("p",{className:"text-gray-600",children:"Patient stable with current management plan. Response to treatment is good."})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded border-l-4 border-green-500",children:[e.jsx("span",{className:"font-medium text-gray-700 block mb-1",children:"Treatment Rationale:"}),e.jsx("p",{className:"text-gray-600",children:"Continue current treatment approach based on patient response."})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-800",children:"Nursing Care Visit"}),e.jsx("p",{className:"text-sm text-green-600",children:"زيارة رعاية تمريضية"})]}),e.jsxs("div",{className:"text-right text-sm text-green-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",new Date(Date.now()-1440*60*1e3).toLocaleDateString()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"})," Unchanged"]})]})]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"bg-gray-50 p-3 rounded border-l-4 border-emerald-500",children:[e.jsx("span",{className:"font-medium text-gray-700 block mb-1",children:"Clinical Findings:"}),e.jsx("p",{className:"text-gray-600",children:"Patient presents with stable vital signs. No acute distress noted."})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded border-l-4 border-teal-500",children:[e.jsx("span",{className:"font-medium text-gray-700 block mb-1",children:"Interventions Provided:"}),e.jsx("p",{className:"text-gray-600",children:"Routine nursing care provided. Medication compliance discussed."})]})]})]})]})]})}),e.jsx("div",{className:"print-footer mt-8 pt-4 border-t-2 border-gray-300",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:"Digital Visit Record"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Aseer Health Cluster – King Abdullah Hospital, Bishah"}),e.jsx("p",{className:"text-xs text-gray-500",children:"تجمع عسير الصحي – مستشفى الملك عبدالله ببيشة"})]}),e.jsxs("div",{className:"text-right text-xs text-gray-500",children:[e.jsxs("p",{children:["Generated: ",new Date().toLocaleString()]}),e.jsxs("p",{children:["Patient ID: ",s.nationalId]})]})]})})]}),Y=({patient:s})=>e.jsxs("div",{className:"print-page",children:[e.jsx(P,{title:"Contact Attempts Log",titleAr:"سجل محاولات الاتصال",patient:s}),e.jsx(C,{patient:s}),e.jsx("div",{className:"contact-log-details space-y-6",children:e.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:[e.jsx("h3",{className:"font-bold text-lg text-orange-800 mb-4",children:"Communication History | تاريخ التواصل"}),e.jsxs("div",{className:"space-y-4",children:[s.contactAttempts&&s.contactAttempts.length>0?s.contactAttempts.map((t,r)=>e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-orange-200",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-orange-800",children:["Contact Attempt #",r+1]}),e.jsxs("p",{className:"text-sm text-orange-600",children:["محاولة اتصال رقم ",r+1]})]}),e.jsxs("div",{className:"text-right text-sm text-orange-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",new Date(t.date).toLocaleDateString()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Staff:"})," ",t.staffName]})]})]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Attempt Type:"}),e.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs font-medium ${t.outcome==="Successful"?"bg-green-100 text-green-800":t.outcome==="Rescheduled"?"bg-blue-100 text-blue-800":t.type==="No Answer"||t.type==="Busy"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:t.type})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Time:"}),e.jsx("span",{className:"ml-2",children:new Date(t.date).toLocaleTimeString()})]})]}),t.notes&&e.jsxs("div",{className:"bg-gray-50 p-3 rounded border-l-4 border-orange-500",children:[e.jsx("span",{className:"font-medium text-gray-700 block mb-1",children:"Notes:"}),e.jsx("p",{className:"text-gray-600",children:t.notes})]})]})]},r)):e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:"No contact attempts recorded | لا توجد محاولات اتصال مسجلة"})}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border-2 border-orange-300 mt-6",children:[e.jsx("h4",{className:"font-semibold text-orange-800 mb-3",children:"Contact Recommendations | توصيات التواصل"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Best Contact Time:"}),e.jsx("span",{className:"ml-2",children:"Morning (8 AM - 12 PM)"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Preferred Method:"}),e.jsx("span",{className:"ml-2",children:"Phone Call"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Total Attempts:"}),e.jsx("span",{className:"ml-2",children:s.contactAttempts?.length||0})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Success Rate:"}),e.jsx("span",{className:"ml-2",children:s.contactAttempts?.length>0?`${Math.round(s.contactAttempts.filter(t=>t.type!=="No Answer"&&t.type!=="Door Not Opened").length/s.contactAttempts.length*100)}%`:"0%"})]})]})]})]})]})}),e.jsx("div",{className:"print-footer mt-8 pt-4 border-t-2 border-gray-300",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:"Digital Communication Record"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Aseer Health Cluster – King Abdullah Hospital, Bishah"}),e.jsx("p",{className:"text-xs text-gray-500",children:"تجمع عسير الصحي – مستشفى الملك عبدالله ببيشة"})]}),e.jsxs("div",{className:"text-right text-xs text-gray-500",children:[e.jsxs("p",{children:["Generated: ",new Date().toLocaleString()]}),e.jsxs("p",{children:["Patient ID: ",s.nationalId]})]})]})})]}),se=({patient:s,onClose:t})=>{const[r,a]=j.useState("assessments"),[o,m]=j.useState(!1),[x,d]=j.useState(!1),p=j.useRef(null),u=async()=>{d(!0),await new Promise(i=>setTimeout(i,500)),m(!0),d(!1)},f=()=>{const i=window.open("","_blank");if(!i)return;const v=p.current?.innerHTML||"";i.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Healthcare Report - King Abdullah Hospital</title>
          <meta charset="utf-8">
          <style>
            * { margin: 0; padding: 0; box-sizing: border-box; }
            body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.6; color: #333; background: white; }
            .print-page { max-width: none; margin: 0; padding: 20px; font-size: 14px; background: white; }
            .print-header { background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%) !important; -webkit-print-color-adjust: exact !important; color-adjust: exact !important; color: white !important; }
            .print-no-break { page-break-inside: avoid; break-inside: avoid; }
            .print-footer { page-break-inside: avoid; margin-top: 2rem; }
            
            /* Color preservation */
            .bg-blue-50, .bg-blue-100 { background-color: #eff6ff !important; }
            .bg-green-50, .bg-green-100 { background-color: #f0fdf4 !important; }
            .bg-orange-50, .bg-orange-100 { background-color: #fff7ed !important; }
            .bg-gray-50 { background-color: #f9fafb !important; }
            
            .text-blue-600 { color: #2563eb !important; }
            .text-blue-700 { color: #1d4ed8 !important; }
            .text-blue-800 { color: #1e40af !important; }
            .text-green-600 { color: #16a34a !important; }
            .text-green-700 { color: #15803d !important; }
            .text-green-800 { color: #166534 !important; }
            .text-orange-600 { color: #ea580c !important; }
            .text-orange-700 { color: #c2410c !important; }
            .text-orange-800 { color: #9a3412 !important; }
            
            .border-blue-200 { border-color: #bfdbfe !important; }
            .border-green-200 { border-color: #bbf7d0 !important; }
            .border-orange-200 { border-color: #fed7aa !important; }
            .border-gray-300 { border-color: #d1d5db !important; }
            
            .border-l-4 { border-left-width: 4px !important; }
            .border-blue-500 { border-color: #3b82f6 !important; }
            .border-green-500 { border-color: #22c55e !important; }
            .border-orange-500 { border-color: #f97316 !important; }
            
            .rounded, .rounded-lg { border-radius: 8px; }
            .grid { display: grid; }
            .grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
            .grid-cols-4 { grid-template-columns: repeat(4, minmax(0, 1fr)); }
            .gap-4 { gap: 1rem; }
            .flex { display: flex; }
            .items-center { align-items: center; }
            .items-start { align-items: flex-start; }
            .justify-between { justify-content: space-between; }
            .p-3 { padding: 0.75rem; }
            .p-4 { padding: 1rem; }
            .p-6 { padding: 1.5rem; }
            .mb-1 { margin-bottom: 0.25rem; }
            .mb-3 { margin-bottom: 0.75rem; }
            .mb-4 { margin-bottom: 1rem; }
            .mb-6 { margin-bottom: 1.5rem; }
            .mt-6 { margin-top: 1.5rem; }
            .mt-8 { margin-top: 2rem; }
            .text-xs { font-size: 0.75rem; }
            .text-sm { font-size: 0.875rem; }
            .text-lg { font-size: 1.125rem; }
            .text-xl { font-size: 1.25rem; }
            .text-2xl { font-size: 1.5rem; }
            .font-bold { font-weight: 700; }
            .font-semibold { font-weight: 600; }
            .font-medium { font-weight: 500; }
            .text-center { text-align: center; }
            .text-right { text-align: right; }
            .border-t-2 { border-top-width: 2px; }
            .border-b { border-bottom-width: 1px; }
            .pt-4 { padding-top: 1rem; }
            .pb-2 { padding-bottom: 0.5rem; }
            .space-y-3 > * + * { margin-top: 0.75rem; }
            .space-y-4 > * + * { margin-top: 1rem; }
            .space-y-6 > * + * { margin-top: 1.5rem; }
            .w-2 { width: 0.5rem; }
            .h-2 { height: 0.5rem; }
            .w-16 { width: 4rem; }
            .h-16 { height: 4rem; }
            .w-20 { width: 5rem; }
            .h-20 { height: 5rem; }
            .shadow-lg { box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); }
            
            @page { margin: 0.75in; size: A4; }
            @media print {
              .print-page { margin: 0; padding: 0; }
              .print-no-break { page-break-inside: avoid !important; break-inside: avoid !important; }
              .print-header { -webkit-print-color-adjust: exact !important; color-adjust: exact !important; }
            }
          </style>
        </head>
        <body>
          ${v}
        </body>
      </html>
    `),i.document.close(),i.focus(),setTimeout(()=>{i.print(),i.close()},500)},y=()=>{switch(r){case"assessments":return e.jsx(Q,{patient:s});case"visit-notes":return e.jsx(_,{patient:s});case"contact-log":return e.jsx(Y,{patient:s});default:return null}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-7xl w-full max-h-[95vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(A,{className:"text-blue-600",size:20})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Enhanced Print Manager"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["مدير الطباعة المحسن - ",s.nameAr]})]})]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(G,{size:20})})]}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsxs("div",{className:"w-1/3 border-r border-gray-200 p-6 overflow-y-auto",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Select Document | اختر المستند"}),e.jsx("div",{className:"space-y-3",children:W.map(i=>{const v=i.icon;return e.jsx("button",{onClick:()=>a(i.type),className:`w-full text-left p-4 rounded-lg border-2 transition-all ${r===i.type?`border-${i.color}-500 bg-${i.color}-50`:"border-gray-200 hover:border-gray-300 bg-white"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${r===i.type?`bg-${i.color}-500 text-white`:`bg-${i.color}-100 text-${i.color}-600`}`,children:e.jsx(v,{size:16})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:i.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:i.titleAr}),e.jsx("p",{className:"text-xs text-gray-500",children:i.description})]})]})},i.type)})}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 space-y-3",children:[e.jsx("button",{onClick:u,disabled:x,className:"w-full bg-blue-600 text-white px-4 py-3 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 transition-all",children:x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(N,{size:16}),"Generate Preview | معاينة"]})}),o&&e.jsxs("button",{onClick:f,className:"w-full bg-green-600 text-white px-4 py-3 rounded-lg font-medium hover:bg-green-700 flex items-center justify-center gap-2 transition-all",children:[e.jsx(A,{size:16}),"Print Document | طباعة"]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-50",children:o?e.jsx("div",{ref:p,className:"h-full",children:y()}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(N,{className:"text-gray-400",size:24})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Document Preview"}),e.jsx("p",{className:"text-gray-600 max-w-sm",children:'Click "Generate Preview" to see your document'}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:'اضغط "معاينة" لعرض المستند'})]})})})]})]})})},c=({label:s,value:t})=>{if(!t||Array.isArray(t)&&t.length===0)return null;const r=Array.isArray(t)?t.join(", "):t;return e.jsxs("p",{children:[e.jsxs("strong",{className:"font-semibold",children:[s,":"]})," ",r]})},te=({visit:s,patient:t})=>{const{doctorNote:r,nurseNote:a}=s;return e.jsxs("div",{className:"p-8 font-sans text-sm",style:{width:"210mm",height:"297mm"},children:[e.jsxs("header",{className:"flex items-center justify-between pb-4 border-b",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:"/logo.png",alt:"Aseer Health Cluster Logo",className:"h-16 w-16 object-contain",onError:o=>{o.currentTarget.style.display="none"}}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Home Healthcare Visit Note"}),e.jsx("p",{className:"text-lg text-gray-600",children:"تجمع عسير الصحي – مستشفى الملك عبدالله ببيشة"}),e.jsx("p",{className:"text-sm text-gray-500",children:"الرعاية الصحية المنزلية"})]})]}),e.jsxs("div",{className:"text-right text-xs text-gray-500",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",new Date(s.date).toLocaleDateString()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Team:"})," ",s.teamId]})]})]}),e.jsxs("section",{className:"grid grid-cols-2 gap-x-8 gap-y-2 mt-4 pb-4 border-b text-sm",children:[e.jsx("h2",{className:"col-span-2 text-base font-bold text-gray-700 mb-1",children:"Patient Information"}),e.jsx(c,{label:"Name (EN)",value:t.nameAr}),e.jsx(c,{label:"Name (AR)",value:t.nameAr}),e.jsx(c,{label:"National ID",value:t.nationalId}),e.jsx(c,{label:"MRN",value:t.nationalId}),e.jsx(c,{label:"Area",value:t.areaId}),e.jsx(c,{label:"Phone",value:t.phone})]}),a?.vitals&&e.jsxs("section",{className:"mt-4 pb-4 border-b",children:[e.jsx("h2",{className:"text-base font-bold text-gray-700 mb-2",children:"Vital Signs"}),e.jsxs("div",{className:"grid grid-cols-6 gap-2 text-center",children:[e.jsxs("div",{className:"bg-gray-50 p-1 rounded-md",children:[e.jsx("div",{className:"text-xs font-bold text-gray-500",children:"BP"}),e.jsx("div",{className:"font-mono text-base",children:a.vitals.bp||"-"})]}),e.jsxs("div",{className:"bg-gray-50 p-1 rounded-md",children:[e.jsx("div",{className:"text-xs font-bold text-gray-500",children:"HR"}),e.jsx("div",{className:"font-mono text-base",children:a.vitals.hr||"-"})]}),e.jsxs("div",{className:"bg-gray-50 p-1 rounded-md",children:[e.jsx("div",{className:"text-xs font-bold text-gray-500",children:"RR"}),e.jsx("div",{className:"font-mono text-base",children:a.vitals.rr||"-"})]}),e.jsxs("div",{className:"bg-gray-50 p-1 rounded-md",children:[e.jsx("div",{className:"text-xs font-bold text-gray-500",children:"Temp"}),e.jsx("div",{className:"font-mono text-base",children:a.vitals.temp?`${a.vitals.temp}°C`:"-"})]}),e.jsxs("div",{className:"bg-gray-50 p-1 rounded-md",children:[e.jsx("div",{className:"text-xs font-bold text-gray-500",children:"SpO₂"}),e.jsx("div",{className:"font-mono text-base",children:a.vitals.o2sat?`${a.vitals.o2sat}%`:"-"})]}),e.jsxs("div",{className:"bg-gray-50 p-1 rounded-md",children:[e.jsx("div",{className:"text-xs font-bold text-gray-500",children:"Pain"}),e.jsx("div",{className:"font-mono text-base",children:a.vitals.pain?`${a.vitals.pain}/10`:"-"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-8 mt-4",children:[a&&e.jsxs("section",{children:[e.jsx("h2",{className:"text-base font-bold text-gray-700 mb-2",children:"Nursing Section"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(c,{label:"Status",value:a.status}),e.jsx(c,{label:"Wound Delta",value:a.woundDelta}),e.jsx(c,{label:"Device Delta",value:a.deviceDelta}),e.jsx(c,{label:"Tasks",value:a.tasks}),e.jsx(c,{label:"Escalation",value:a.escalation}),e.jsx(c,{label:"Note",value:a.nurseNote})]})]}),r&&e.jsxs("section",{children:[e.jsx("h2",{className:"text-base font-bold text-gray-700 mb-2",children:"Doctor Section"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(c,{label:"Status",value:r.status}),e.jsx(c,{label:"Response to Plan",value:r.responseToPlan}),e.jsx(c,{label:"Adherence",value:r.adherence}),e.jsx(c,{label:"New Issues",value:r.newIssues}),e.jsx(c,{label:"Plan",value:r.plan}),e.jsx(c,{label:"Plan Details",value:r.planDetails}),e.jsx(c,{label:"Next Follow-up",value:r.nextFollowUp}),e.jsx(c,{label:"Note",value:r.mdNote})]})]})]}),e.jsx("footer",{className:"mt-16 pt-4 border-t absolute bottom-8 w-[calc(100%-4rem)]",children:e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:s.nurseSign||"Nurse Signature"}),e.jsx("p",{className:"text-xs text-gray-500 border-t mt-1 pt-1",children:"Nurse"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:s.doctorSign||"Doctor Signature"}),e.jsx("p",{className:"text-xs text-gray-500 border-t mt-1 pt-1",children:"Doctor"})]})]})})]})},b=({label:s,value:t})=>{if(!t||Array.isArray(t)&&t.length===0)return null;let r;return typeof t=="object"&&!Array.isArray(t)?r=Object.entries(t).map(([a,o])=>`${a}: ${o}`).join(", "):r=Array.isArray(t)?t.join(", "):t,e.jsxs("p",{children:[e.jsxs("strong",{className:"font-semibold",children:[s,":"]})," ",r]})},re=({visit:s,patient:t})=>{const{ptNote:r}=s,a=t.assessments.find(o=>o.role===T.PhysicalTherapist);return e.jsxs("div",{className:"p-8 font-sans text-sm",style:{width:"210mm",height:"297mm"},children:[e.jsxs("header",{className:"flex items-center justify-between pb-4 border-b",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Physical Therapy Note"}),e.jsx("p",{className:"text-lg text-gray-600",children:"تجمع عسير الصحي – مستشفى الملك عبدالله ببيشة"}),"\\n            ",e.jsx("p",{className:"text-sm text-gray-500",children:"الرعاية الصحية المنزلية"})]}),e.jsx("div",{className:"text-right text-xs text-gray-500",children:e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",new Date(s.date).toLocaleDateString()]})})]}),e.jsxs("section",{className:"grid grid-cols-2 gap-x-8 gap-y-2 mt-4 pb-4 border-b text-sm",children:[e.jsx("h2",{className:"col-span-2 text-base font-bold text-gray-700 mb-1",children:"Patient Information"}),e.jsx(b,{label:"Name",value:t.nameAr}),e.jsx(b,{label:"National ID",value:t.nationalId}),e.jsx(b,{label:"Area",value:t.areaId}),e.jsx(b,{label:"Phone",value:t.phone})]}),e.jsxs("div",{className:"mt-4 space-y-4",children:[a&&e.jsxs("section",{children:[e.jsx("h2",{className:"text-base font-bold text-gray-700 mb-2 underline",children:"Assessment Summary"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(b,{label:"Dx Focus",value:a.dxFocus}),e.jsx(b,{label:"Phase",value:a.phase}),e.jsx(b,{label:"Function",value:a.function}),e.jsx(b,{label:"Interventions",value:a.interventions})]})]}),r&&e.jsxs("section",{children:[e.jsx("h2",{className:"text-base font-bold text-gray-700 mb-2 underline",children:"Follow-up Note"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(b,{label:"Changes Since Last",value:r.changeSinceLast}),e.jsx(b,{label:"Tolerance",value:r.tolerance}),e.jsx(b,{label:"HEP",value:r.hep}),e.jsx(b,{label:"Plan",value:r.plan}),e.jsx(b,{label:"Plan Focus",value:r.planFocus}),e.jsx(b,{label:"Note",value:r.ptNote})]})]})]}),e.jsx("footer",{className:"mt-16 pt-4 border-t absolute bottom-8 w-[calc(100%-4rem)]",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:s.ptSign||"Therapist Signature"}),e.jsx("p",{className:"text-xs text-gray-500 border-t mt-1 pt-1",children:"Physical Therapist"})]})})]})},h=({label:s,value:t})=>{if(!t||Array.isArray(t)&&t.length===0)return null;let r;return typeof t=="object"&&!Array.isArray(t)?r=Object.entries(t).map(([a,o])=>o).join(", "):r=Array.isArray(t)?t.join(", "):t,e.jsxs("p",{children:[e.jsxs("strong",{className:"font-semibold",children:[s,":"]})," ",r]})},le=({visit:s,patient:t})=>{const{swNote:r}=s,a=t.assessments.find(o=>o.role===T.SocialWorker);return e.jsxs("div",{className:"p-8 font-sans text-sm",style:{width:"210mm",height:"297mm"},dir:"rtl",children:[e.jsxs("header",{className:"flex items-center justify-between pb-4 border-b",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"مذكرة تقييم اجتماعي"}),e.jsx("p",{className:"text-lg text-gray-600",children:"تجمع عسير الصحي – مستشفى الملك عبدالله ببيشة"}),"\\n            ",e.jsx("p",{className:"text-sm text-gray-500",children:"الرعاية الصحية المنزلية"})]}),e.jsx("div",{className:"text-right text-xs text-gray-500",children:e.jsxs("p",{children:[e.jsx("strong",{children:"التاريخ:"})," ",new Date(s.date).toLocaleDateString()]})})]}),e.jsxs("section",{className:"grid grid-cols-2 gap-x-8 gap-y-2 mt-4 pb-4 border-b text-sm",children:[e.jsx("h2",{className:"col-span-2 text-base font-bold text-gray-700 mb-1",children:"بيانات المريض"}),e.jsx(h,{label:"الاسم",value:t.nameAr}),e.jsx(h,{label:"رقم الهوية",value:t.nationalId}),e.jsx(h,{label:"الحي",value:t.areaId}),e.jsx(h,{label:"الجوال",value:t.phone})]}),e.jsxs("div",{className:"mt-4 space-y-4",children:[a&&e.jsxs("section",{children:[e.jsx("h2",{className:"text-base font-bold text-gray-700 mb-2 underline",children:"ملخص التقييم الاجتماعي"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(h,{label:"السكن والرعاية",value:a.residence}),e.jsx(h,{label:"الوضع الاقتصادي",value:a.economic}),e.jsx(h,{label:"سلامة المنزل",value:a.homeSafety?.risks}),e.jsx(h,{label:"الاحتياجات",value:a.needs}),e.jsx(h,{label:"الفحص النفسي",value:a.psychosocial}),e.jsx(h,{label:"الإجراءات",value:a.actions})]})]}),r&&e.jsxs("section",{children:[e.jsx("h2",{className:"text-base font-bold text-gray-700 mb-2 underline",children:"مذكرة المتابعة"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(h,{label:"تغير الوضع",value:r.situationChange}),e.jsx(h,{label:"الإجراءات المتخذة",value:r.actionsTaken}),e.jsx(h,{label:"الخطة",value:r.plan}),e.jsx(h,{label:"ملاحظات",value:r.swNote})]})]})]}),e.jsx("footer",{className:"mt-16 pt-4 border-t absolute bottom-8 w-[calc(100%-4rem)]",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:s.swSign||"توقيع الأخصائي الاجتماعي"}),e.jsx("p",{className:"text-xs text-gray-500 border-t mt-1 pt-1",children:"الأخصائي الاجتماعي"})]})})]})},ae=({visits:s,patients:t,date:r})=>{const a=s.reduce((m,x)=>{const d=t.find(p=>p.nationalId===x.patientId);return d&&d.areaId&&(m[d.areaId]=m[d.areaId]||[]).push(x),m},{}),o=Object.keys(a).sort();return e.jsxs("div",{className:"p-8 font-sans text-sm",style:{width:"210mm",minHeight:"297mm"},dir:"rtl",children:[e.jsxs("header",{className:"flex items-center justify-between pb-4 border-b",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"مسار السائق اليومي"}),e.jsx("p",{className:"text-lg text-gray-600",children:"تجمع عسير الصحي – مستشفى الملك عبدالله ببيشة"}),"\\n                    ",e.jsx("p",{className:"text-sm text-gray-500",children:"الرعاية الصحية المنزلية"})]}),e.jsx("div",{className:"text-right text-xs text-gray-500",children:e.jsxs("p",{children:[e.jsx("strong",{children:"التاريخ:"})," ",new Date(r).toLocaleDateString()]})})]}),e.jsx("div",{className:"mt-6 space-y-6",children:o.map(m=>e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-3 pb-2 border-b-2 border-gray-300",children:m}),e.jsx("div",{className:"space-y-4",children:a[m].map(x=>{const d=t.find(y=>y.nationalId===x.patientId);if(!d)return null;const p=`${d.areaId}, ${d.nameAr}`,u=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(p)}`,f=`https://api.qrserver.com/v1/create-qr-code/?size=100x100&data=${encodeURIComponent(u)}`;return e.jsxs("div",{className:"p-3 border rounded-lg bg-gray-50/50 flex items-center justify-between gap-4 break-inside-avoid",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-800",children:d.nameAr}),e.jsx("p",{className:"text-gray-600",children:d.areaId}),e.jsx("p",{className:"text-gray-600 font-mono",dir:"ltr",children:d.phone||"لا يوجد رقم"}),e.jsx("a",{href:u,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-xs",children:"فتح في خرائط جوجل"})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:f,alt:"QR Code",className:"w-20 h-20 rounded border"})})]},d.nationalId)})})]},m))})]})};export{ae as D,se as E,Z as P,le as S,te as V,ee as a,re as b};
