import{j as e,r as k,C as B,X as H,S as O,a as Y,b as xe,P as ue,F as J,c as Q,T as ge,A as ee,H as se,d as he,U as K,e as te,B as ae,f as V,g as q,h as X,M as pe,L as be}from"./vendor-BGAm2JFI.js";import{u as W,R as G}from"./core-CNLpyEEB.js";const D=({title:b,children:S,defaultOpen:j=!1})=>{const[c,s]=k.useState(j);return e.jsxs("div",{className:"border-2 border-blue-200 rounded-xl bg-white shadow-lg overflow-hidden",children:[e.jsxs("button",{type:"button",onClick:()=>s(!c),className:"w-full text-left p-3 md:p-4 font-bold text-sm md:text-base text-gray-800 bg-gradient-to-r from-blue-50 to-indigo-50 hover:from-blue-100 hover:to-indigo-100 flex justify-between items-center transition-all duration-200 touch-target-44",children:[e.jsx("span",{children:b}),e.jsx(B,{size:18,className:`transition-transform duration-300 ${c?"rotate-180 text-blue-600":"text-gray-500"}`})]}),c&&e.jsx("div",{className:"p-3 md:p-4 border-t-2 border-blue-100 bg-white animate-slide-up",children:e.jsx("div",{className:"space-y-4",children:S})})]})},o=({legend:b,children:S})=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"font-bold text-sm md:text-base text-blue-800 mb-2 block flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),b]}),e.jsx("div",{className:"pl-4",children:S})]}),ne="px-3 md:px-4 py-2 md:py-2.5 text-xs md:text-sm rounded-xl border-2 transition-all duration-200 font-medium touch-target-44",le="bg-blue-600 text-white font-bold border-blue-600 shadow-lg scale-105",re="bg-white text-gray-700 hover:border-blue-400 hover:bg-blue-50 hover:text-blue-700 border-gray-300 shadow-sm",m=({value:b,onChange:S,options:j})=>e.jsx("div",{className:"flex gap-2 md:gap-3 flex-wrap",children:j.map(c=>e.jsx("button",{type:"button",onClick:()=>S(c),className:`${ne} ${b===c?le:re} ${b===c?"ring-4 ring-blue-200":""}`,children:c},c))}),C=({value:b,onChange:S,options:j})=>e.jsx("div",{className:"flex gap-2 md:gap-3 flex-wrap",children:j.map(c=>e.jsx("button",{type:"button",onClick:()=>S(c),className:`${ne} ${b.has(c)?le:re} ${b.has(c)?"ring-4 ring-blue-200":""}`,children:e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${b.has(c)?"bg-white":"bg-gray-400"}`}),c]})},c))}),ye=({patient:b,onSave:S,onCancel:j})=>{const{state:c}=W(),[s,l]=k.useState({reasonForVisit:"Chronic Disease Mgt",activeDiagnoses:new Set,generalExam:new Set,chestExam:new Set,cardiacExam:new Set,neuroExam:new Set,dmStatus:"Stable",htnStatus:"Controlled",chfStatus:"Compensated",primaryAssessment:"CHF Exacerbation",goal:"Maintain",medications:new Set,labsImaging:new Set,referrals:new Set,action:"Continue Home Care",nextVisit:"2 wks",customNextVisit:""}),p=(d,u)=>{const h=new Set(d);return h.has(u)?h.delete(u):h.add(u),h},I=d=>{l(u=>({...u,activeDiagnoses:p(u.activeDiagnoses,d)}))},g=d=>{l(u=>({...u,generalExam:p(u.generalExam,d)}))},w=d=>{l(u=>({...u,chestExam:p(u.chestExam,d)}))},x=d=>{l(u=>({...u,cardiacExam:p(u.cardiacExam,d)}))},r=d=>{l(u=>({...u,neuroExam:p(u.neuroExam,d)}))},t=d=>{l(u=>({...u,medications:p(u.medications,d)}))},a=d=>{l(u=>({...u,labsImaging:p(u.labsImaging,d)}))},n=d=>{l(u=>({...u,referrals:p(u.referrals,d)}))},f=()=>{const d=["No Change"];return s.activeDiagnoses.has("CHF")&&d.push("Adjust Diuretics"),s.activeDiagnoses.has("DM")&&d.push("Adjust Insulin"),(s.primaryAssessment==="UTI"||s.primaryAssessment==="Pneumonia")&&d.push("Start/Stop Antibiotic"),s.primaryAssessment==="Pain"&&d.push("Adjust Pain Meds"),d.push("Polypharmacy Review"),d},N=()=>{const d=[];return s.goal==="Rehab"&&d.push("Physiotherapy"),s.goal==="Palliative"&&d.push("Palliative"),s.activeDiagnoses.has("DM")&&d.push("Dietitian"),d.push("Social Worker"),d},M=()=>{const d=[];return s.primaryAssessment==="UTI"&&d.push("Urine Cx"),(s.primaryAssessment==="Pneumonia"||s.chestExam.has("Crackles"))&&d.push("CXR"),s.activeDiagnoses.has("DM")&&d.push("HbA1c"),s.activeDiagnoses.has("CHF")&&d.push("CBC","Chem-7"),d.push("CBC","Chem-7","LFTs","INR"),[...new Set(d)]},R=d=>{d.preventDefault();const u=c.staff.find(y=>y.المهنة==="طبيب")||c.staff[0],h={id:Date.now().toString(),date:new Date().toISOString(),assessorId:u.رقم_الهوية,assessorName:u.الاسم,role:G.Doctor,status:"Unchanged",plan:"Continue same plan",chiefFocus:Array.from(s.activeDiagnoses),assessment:{etiology:[],severity:"Mild"},followUpTiming:s.nextVisit,mdNote:s.note};S(h)};return e.jsxs("form",{onSubmit:R,className:"p-4 md:p-6 bg-gradient-to-br from-blue-50 to-white flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6 pb-3 border-b-2 border-blue-200",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-lg md:text-xl text-blue-900",children:"Doctor Assessment"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:b.nameAr})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:j,title:"Cancel",className:"p-2.5 md:p-3 rounded-xl hover:bg-red-500 bg-red-100 text-red-600 hover:text-white transition-all duration-200 shadow-md touch-target-44",children:e.jsx(H,{size:18})}),e.jsx("button",{type:"submit",title:"Save Assessment",className:"p-2.5 md:p-3 rounded-xl hover:bg-green-600 bg-green-500 text-white hover:shadow-lg transition-all duration-200 shadow-md touch-target-44",children:e.jsx(O,{size:18})})]})]}),e.jsxs("div",{className:"space-y-4 md:space-y-5 overflow-y-auto flex-grow pr-1 text-sm md:text-base",children:[e.jsx(D,{title:"Reason for visit (single-select chips)",defaultOpen:!0,children:e.jsx(m,{value:s.reasonForVisit,onChange:d=>l(u=>({...u,reasonForVisit:d})),options:["Chronic Disease Mgt","Post-Hospital F/U","Acute Change","Goals of Care"]})}),e.jsxs(D,{title:"Active diagnoses (multi-select chips)",children:[e.jsx(C,{value:s.activeDiagnoses,onChange:I,options:["CHF","DM","HTN","CKD","COPD","Dementia","Stroke","Malignancy","Chronic Pain","Other Dx…"]}),s.activeDiagnoses.has("Other Dx…")&&e.jsx("input",{value:s.otherDiagnosis||"",onChange:d=>l(u=>({...u,otherDiagnosis:d.target.value})),placeholder:"Specify other diagnosis",className:"mt-2 w-full p-2 text-xs border rounded"})]}),e.jsx(D,{title:"Exam (abnormal only; system chips)",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(o,{legend:"General",children:e.jsx(C,{value:s.generalExam,onChange:g,options:["Edema","Dehydrated","Cachexia"]})}),e.jsx(o,{legend:"Chest",children:e.jsx(C,{value:s.chestExam,onChange:w,options:["Crackles","Wheeze","↓ Air Entry"]})}),e.jsx(o,{legend:"Cardiac",children:e.jsx(C,{value:s.cardiacExam,onChange:x,options:["AFib","New Murmur"]})}),e.jsx(o,{legend:"Neuro",children:e.jsx(C,{value:s.neuroExam,onChange:r,options:["Delirium","Weakness","Agitation"]})})]})}),e.jsx(D,{title:"Chronic disease quick status (single-select per row)",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(o,{legend:"DM",children:e.jsx(m,{value:s.dmStatus,onChange:d=>l(u=>({...u,dmStatus:d})),options:["Stable","Hyper","Hypo"]})}),e.jsx(o,{legend:"HTN",children:e.jsx(m,{value:s.htnStatus,onChange:d=>l(u=>({...u,htnStatus:d})),options:["Controlled","Uncontrolled"]})}),e.jsx(o,{legend:"CHF",children:e.jsx(m,{value:s.chfStatus,onChange:d=>l(u=>({...u,chfStatus:d})),options:["Compensated","Decompensated"]})})]})}),e.jsxs(D,{title:"Primary assessment (chips)",children:[e.jsx(m,{value:s.primaryAssessment,onChange:d=>l(u=>({...u,primaryAssessment:d})),options:["CHF Exacerbation","UTI","Pneumonia","Ulcer Management","Delirium","Fall","Pain","Side Effect","Other…"]}),s.primaryAssessment==="Other…"&&e.jsx("input",{value:s.otherAssessment||"",onChange:d=>l(u=>({...u,otherAssessment:d.target.value})),placeholder:"Specify other assessment",className:"mt-2 w-full p-2 text-xs border rounded"})]}),e.jsx(D,{title:"Plan of care (chips)",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(o,{legend:"Goal",children:e.jsx(m,{value:s.goal,onChange:d=>l(u=>({...u,goal:d})),options:["Rehab","Maintain","Palliative"]})}),e.jsxs(o,{legend:"Medications (التفاعلية)",children:[e.jsx(C,{value:s.medications,onChange:t,options:f()}),s.medications.size>0&&e.jsx("div",{className:"mt-2 p-2 bg-blue-50 rounded-lg",children:e.jsx("p",{className:"text-xs text-blue-600",children:"✓ خيارات الأدوية المتاحة بناءً على التشخيص والخطة"})})]}),e.jsxs(o,{legend:"Labs/Imaging (التفاعلية)",children:[e.jsx(C,{value:s.labsImaging,onChange:a,options:M()}),s.labsImaging.size>0&&e.jsx("div",{className:"mt-2 p-2 bg-green-50 rounded-lg",children:e.jsx("p",{className:"text-xs text-green-600",children:"✓ تحاليل موصى بها بناءً على التقييم الأولي"})})]}),e.jsxs(o,{legend:"Referrals (التفاعلية)",children:[e.jsx(C,{value:s.referrals,onChange:n,options:N()}),s.referrals.size>0&&e.jsx("div",{className:"mt-2 p-2 bg-purple-50 rounded-lg",children:e.jsx("p",{className:"text-xs text-purple-600",children:"✓ تحويلات موصى بها بناءً على الهدف العلاجي"})})]}),e.jsx(o,{legend:"Action",children:e.jsx(m,{value:s.action,onChange:d=>l(u=>({...u,action:d})),options:["Continue Home Care","Family Meeting","Hospital Transfer"]})}),e.jsxs(o,{legend:"Next visit (محسن)",children:[e.jsx(m,{value:s.nextVisit,onChange:d=>l(u=>({...u,nextVisit:d})),options:["1 wk","2 wks","1 month","2 months","PRN","Custom"]}),s.nextVisit==="Custom"&&e.jsxs("div",{className:"mt-3",children:[e.jsx("input",{type:"text",value:s.customNextVisit||"",onChange:d=>l(u=>({...u,customNextVisit:d.target.value})),placeholder:"أدخل توقيت الزيارة القادمة (مثال: 3 weeks, 6 months)",className:"w-full p-3 text-sm border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-200 transition-all duration-200"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"يمكنك إدخال أي توقيت مخصص للزيارة القادمة"})]}),s.nextVisit!=="PRN"&&s.nextVisit!=="Custom"&&e.jsx("div",{className:"mt-2 p-2 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-xs text-blue-600",children:["✓ الزيارة القادمة مجدولة خلال: ",s.nextVisit]})})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-4 shadow-sm",children:[e.jsxs("label",{className:"font-bold text-sm md:text-base text-blue-800 mb-2 block flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),"Optional note"]}),e.jsx("textarea",{value:s.note||"",onChange:d=>l(u=>({...u,note:d.target.value})),rows:3,placeholder:"Optional note (single free text)",className:"w-full p-3 text-sm md:text-base border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-200 transition-all duration-200 resize-none"})]})]})]})},we=({patient:b,onSave:S,onCancel:j})=>{const{state:c}=W(),[s,l]=k.useState({vitals:{bp_systolic:"",bp_diastolic:"",hr:"",rr:"",temp:"",spo2:"",bgl:"",pain:"0"},falls_risk:"Low (0–24)",pressure_risk:"No risk (19–23)",mobility:"Independent",transfers:"Independent",feeding:"Independent",toileting:"Independent",skin_status:"Intact",interventions:new Set,caregiver_status:"Engaged",education_topics:new Set,understanding:"Understands"}),p=(t,a)=>{l(n=>({...n,vitals:{...n.vitals,[t]:a}}))},I=t=>{l(a=>{const n=new Set(a.interventions);return n.has(t)?n.delete(t):n.add(t),{...a,interventions:n}})},g=t=>{l(a=>{const n=new Set(a.education_topics);return n.has(t)?n.delete(t):n.add(t),{...a,education_topics:n}})},w=t=>{l(a=>{if(!a.wound_details)return a;const n=new Set(a.wound_details.locations);return n.has(t)?n.delete(t):n.add(t),{...a,wound_details:{...a.wound_details,locations:n}}})},x=s.skin_status==="Wound",r=t=>{t.preventDefault();const a=c.staff.find(f=>f.المهنة==="ممرض")||c.staff[0],n={id:Date.now().toString(),date:new Date().toISOString(),assessorId:a.رقم_الهوية,assessorName:a.الاسم,role:G.Nurse,vitals:{bp:`${s.vitals.bp_systolic}/${s.vitals.bp_diastolic}`,hr:s.vitals.hr,temp:s.vitals.temp,rr:s.vitals.rr,o2sat:s.vitals.spo2,pain:s.vitals.pain},status:"Unchanged",plan:"Continue same plan",impression:"Stable",nursingTasks:Array.from(s.interventions),nurseNote:s.note};S(n)};return e.jsxs("form",{onSubmit:r,className:"p-4 bg-gray-50 flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h4",{className:"font-bold text-gray-800",children:"Nurse Assessment"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{type:"button",onClick:j,title:"Cancel",className:"p-1.5 rounded-full hover:bg-red-100 text-red-500",children:e.jsx(H,{size:16})}),e.jsx("button",{type:"submit",title:"Save",className:"p-1.5 rounded-full hover:bg-green-100 text-green-600",children:e.jsx(O,{size:16})})]})]}),e.jsxs("div",{className:"space-y-2 overflow-y-auto flex-grow pr-1 text-sm",children:[e.jsx(D,{title:"Vitals (row inputs; compact for mobile)",defaultOpen:!0,children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{value:s.vitals.bp_systolic,onChange:t=>p("bp_systolic",t.target.value),placeholder:"___",className:"w-12 p-1 text-center border rounded text-xs"}),e.jsx("span",{className:"self-center text-xs",children:"/"}),e.jsx("input",{value:s.vitals.bp_diastolic,onChange:t=>p("bp_diastolic",t.target.value),placeholder:"___",className:"w-12 p-1 text-center border rounded text-xs"}),e.jsx("span",{className:"self-center text-xs text-gray-600 ml-1",children:"mmHg"})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{value:s.vitals.hr,onChange:t=>p("hr",t.target.value),placeholder:"___",className:"w-16 p-1 text-center border rounded text-xs"}),e.jsx("span",{className:"self-center text-xs text-gray-600",children:"bpm"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{value:s.vitals.rr,onChange:t=>p("rr",t.target.value),placeholder:"___",className:"w-16 p-1 text-center border rounded text-xs"}),e.jsx("span",{className:"self-center text-xs text-gray-600",children:"/min"})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{value:s.vitals.temp,onChange:t=>p("temp",t.target.value),placeholder:"___",className:"w-16 p-1 text-center border rounded text-xs"}),e.jsx("span",{className:"self-center text-xs text-gray-600",children:"°C"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{value:s.vitals.spo2,onChange:t=>p("spo2",t.target.value),placeholder:"___",className:"w-16 p-1 text-center border rounded text-xs"}),e.jsx("span",{className:"self-center text-xs text-gray-600",children:"%"})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{value:s.vitals.bgl,onChange:t=>p("bgl",t.target.value),placeholder:"___",className:"w-16 p-1 text-center border rounded text-xs"}),e.jsx("span",{className:"self-center text-xs text-gray-600",children:"mg/dL"})]})]}),e.jsxs(o,{legend:"Pain (0–10)",children:[e.jsx(m,{value:s.vitals.pain,onChange:t=>p("pain",t),options:["0","1","2","3","4","5","6","7","8","9","10"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"0 = no pain, 10 = worst imaginable"})]})]})}),e.jsx(D,{title:"Risk profile (chips only)",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(o,{legend:"Falls (Morse category)",children:e.jsx(m,{value:s.falls_risk,onChange:t=>l(a=>({...a,falls_risk:t})),options:["Low (0–24)","Moderate (25–45)","High (≥46)"]})}),e.jsx(o,{legend:"Pressure injury (Braden category)",children:e.jsx(m,{value:s.pressure_risk,onChange:t=>l(a=>({...a,pressure_risk:t})),options:["Severe (≤9)","High (10–12)","Moderate (13–14)","Mild (15–18)","No risk (19–23)"]})})]})}),e.jsx(D,{title:"Functional status (ADLs; single-select per row)",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(o,{legend:"Mobility",children:e.jsx(m,{value:s.mobility,onChange:t=>l(a=>({...a,mobility:t})),options:["Independent","Walker/Cane","Wheelchair","Bedbound"]})}),e.jsx(o,{legend:"Transfers",children:e.jsx(m,{value:s.transfers,onChange:t=>l(a=>({...a,transfers:t})),options:["Independent","Supervision","Needs Assist"]})}),e.jsx(o,{legend:"Feeding",children:e.jsx(m,{value:s.feeding,onChange:t=>l(a=>({...a,feeding:t})),options:["Independent","Setup","Needs Feeding"]})}),e.jsx(o,{legend:"Toileting",children:e.jsx(m,{value:s.toileting,onChange:t=>l(a=>({...a,toileting:t})),options:["Independent","Assist","Incontinent"]})})]})}),e.jsx(D,{title:"Skin integrity (progressive reveal)",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(o,{legend:"Skin Status",children:e.jsx(m,{value:s.skin_status,onChange:t=>{l(a=>({...a,skin_status:t,wound_details:t==="Wound"?{locations:new Set,type:"Pressure",pressure_stage:"I",length:"",width:"",depth:""}:void 0}))},options:["Intact","At Risk","Bruising","Wound"]})}),x&&e.jsxs("div",{className:"space-y-3 p-3 bg-red-50 rounded border border-red-200",children:[e.jsxs(o,{legend:"Location",children:[e.jsx(C,{value:s.wound_details?.locations||new Set,onChange:w,options:["Heel","Sacrum","Hip","Foot","Leg","Arm","Back","Other"]}),s.wound_details?.locations.has("Other")&&e.jsx("input",{value:s.wound_details?.other_location||"",onChange:t=>l(a=>({...a,wound_details:{...a.wound_details,other_location:t.target.value}})),placeholder:"Specify other location",className:"mt-2 w-full p-2 text-xs border rounded"})]}),e.jsx(o,{legend:"Type",children:e.jsx(m,{value:s.wound_details?.type||"Pressure",onChange:t=>l(a=>({...a,wound_details:{...a.wound_details,type:t}})),options:["Pressure","Surgical","Diabetic","Venous"]})}),e.jsx(o,{legend:"Pressure Stage",children:e.jsx(m,{value:s.wound_details?.pressure_stage||"I",onChange:t=>l(a=>({...a,wound_details:{...a.wound_details,pressure_stage:t}})),options:["I","II","III","IV","Unstageable","DTI"]})}),e.jsx(o,{legend:"Size",children:e.jsxs("div",{className:"flex gap-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:"L"}),e.jsx("input",{value:s.wound_details?.length||"",onChange:t=>l(a=>({...a,wound_details:{...a.wound_details,length:t.target.value}})),placeholder:"__",className:"w-12 p-1 text-center border rounded"}),e.jsx("span",{children:"cm"})]}),e.jsx("span",{children:"×"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:"W"}),e.jsx("input",{value:s.wound_details?.width||"",onChange:t=>l(a=>({...a,wound_details:{...a.wound_details,width:t.target.value}})),placeholder:"__",className:"w-12 p-1 text-center border rounded"}),e.jsx("span",{children:"cm"})]}),e.jsx("span",{children:"×"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:"D"}),e.jsx("input",{value:s.wound_details?.depth||"",onChange:t=>l(a=>({...a,wound_details:{...a.wound_details,depth:t.target.value}})),placeholder:"__",className:"w-12 p-1 text-center border rounded"}),e.jsx("span",{children:"cm"})]})]})})]})]})}),e.jsx(D,{title:"Key interventions (multi-select chips)",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(C,{value:s.interventions,onChange:I,options:["Wound Care","Blood Draw","Catheter","Insulin","Injection","IV Line","Vaccination"]}),s.interventions.has("Vaccination")&&e.jsxs("div",{className:"space-y-3 p-3 bg-blue-50 rounded border border-blue-200",children:[e.jsx(o,{legend:"Type",children:e.jsx(m,{value:s.vaccination_details?.type||"None",onChange:t=>l(a=>({...a,vaccination_details:{...a.vaccination_details,type:t,dose:a.vaccination_details?.dose||"First",site:a.vaccination_details?.site||"L-Arm",batch:a.vaccination_details?.batch||"Not available"}})),options:["Influenza","Pneumococcal","COVID-19","Tetanus","None"]})}),s.vaccination_details?.type!=="None"&&e.jsxs(e.Fragment,{children:[e.jsx(o,{legend:"Dose",children:e.jsx(m,{value:s.vaccination_details?.dose||"First",onChange:t=>l(a=>({...a,vaccination_details:{...a.vaccination_details,dose:t}})),options:["First","Second","Booster"]})}),e.jsx(o,{legend:"Site",children:e.jsx(m,{value:s.vaccination_details?.site||"L-Arm",onChange:t=>l(a=>({...a,vaccination_details:{...a.vaccination_details,site:t}})),options:["L-Arm","R-Arm","L-Thigh","R-Thigh"]})}),e.jsx(o,{legend:"Batch",children:e.jsx("input",{value:s.vaccination_details?.batch||"Not available",onChange:t=>l(a=>({...a,vaccination_details:{...a.vaccination_details,batch:t.target.value}})),placeholder:"Batch number",className:"w-full p-2 text-xs border rounded"})})]})]})]})}),e.jsx(D,{title:"Caregiver & education (chips)",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(o,{legend:"Caregiver status",children:e.jsx(m,{value:s.caregiver_status,onChange:t=>l(a=>({...a,caregiver_status:t})),options:["Engaged","Stressed","Needs Support"]})}),e.jsx(o,{legend:"Education topics",children:e.jsx(C,{value:s.education_topics,onChange:g,options:["Medications","Wound Care","Fall Prevention"]})}),e.jsx(o,{legend:"Understanding",children:e.jsx(m,{value:s.understanding,onChange:t=>l(a=>({...a,understanding:t})),options:["Understands","Needs Reinforcement"]})})]})}),e.jsx("textarea",{value:s.note||"",onChange:t=>l(a=>({...a,note:t.target.value})),rows:2,placeholder:"Optional note (single free text)",className:"w-full p-2 text-sm border rounded-md"})]})]})},Ce=({patient:b,onSave:S,onCancel:j})=>{const{state:c}=W(),[s,l]=k.useState({vitals:{hr:"",rr:"",spo2:"",bp_systolic:"",bp_diastolic:"",pain:"0"},bedMobility:"Independent",transfers:"Independent",ambulation:"Independent",balance:"Normal",romMmtEntries:[{region:"Shoulder",rom:"",mmt:"5"},{region:"Elbow",rom:"",mmt:"5"},{region:"Hip",rom:"",mmt:"5"},{region:"Knee",rom:"",mmt:"5"},{region:"Ankle",rom:"",mmt:"5"}],problems:new Set,shortTermGoals:new Set,longTermGoals:new Set}),p=(t,a)=>{l(n=>({...n,vitals:{...n.vitals,[t]:a}}))},I=t=>{l(a=>{const n=new Set(a.problems);return n.has(t)?n.delete(t):n.add(t),{...a,problems:n}})},g=t=>{l(a=>{const n=new Set(a.shortTermGoals);return n.has(t)?n.delete(t):n.add(t),{...a,shortTermGoals:n}})},w=t=>{l(a=>{const n=new Set(a.longTermGoals);return n.has(t)?n.delete(t):n.add(t),{...a,longTermGoals:n}})},x=(t,a,n)=>{l(f=>{const N=[...f.romMmtEntries];return N[t]={...N[t],[a]:n},{...f,romMmtEntries:N}})},r=t=>{t.preventDefault();const a=c.staff.find(f=>f.المهنة.includes("علاج طبيعي"))||c.staff[0],n={id:Date.now().toString(),date:new Date().toISOString(),assessorId:a.رقم_الهوية,assessorName:a.الاسم,role:G.PhysicalTherapist,status:"Unchanged",plan:"Continue same plan",dxFocus:[],phase:"subacute",pain:s.vitals.pain,function:{bedMobility:s.bedMobility,transfers:s.transfers,gaitDistance:"5–20m",assistiveDevice:s.ambulation==="Walker"?"walker":s.ambulation==="Cane"?"cane":"none",stairs:"none",balance:{static:s.balance.toLowerCase(),dynamic:s.balance.toLowerCase()}},romMmt:{region:[],rom:"WNL",mmt:"5"},interventions:[],ptNote:s.note};S(n)};return e.jsxs("form",{onSubmit:r,className:"p-4 bg-gray-50 flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h4",{className:"font-bold text-gray-800",children:"Physical Therapy Assessment"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{type:"button",onClick:j,title:"Cancel",className:"p-1.5 rounded-full hover:bg-red-100 text-red-500",children:e.jsx(H,{size:16})}),e.jsx("button",{type:"submit",title:"Save",className:"p-1.5 rounded-full hover:bg-green-100 text-green-600",children:e.jsx(O,{size:16})})]})]}),e.jsxs("div",{className:"space-y-2 overflow-y-auto flex-grow pr-1 text-sm",children:[e.jsx(D,{title:"Vitals (row inputs)",defaultOpen:!0,children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{value:s.vitals.hr,onChange:t=>p("hr",t.target.value),placeholder:"__",className:"w-16 p-1 text-center border rounded text-xs"}),e.jsx("span",{className:"self-center text-xs text-gray-600",children:"HR"})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{value:s.vitals.rr,onChange:t=>p("rr",t.target.value),placeholder:"__",className:"w-16 p-1 text-center border rounded text-xs"}),e.jsx("span",{className:"self-center text-xs text-gray-600",children:"RR"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{value:s.vitals.spo2,onChange:t=>p("spo2",t.target.value),placeholder:"__",className:"w-16 p-1 text-center border rounded text-xs"}),e.jsx("span",{className:"self-center text-xs text-gray-600",children:"SpO₂%"})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{value:s.vitals.bp_systolic,onChange:t=>p("bp_systolic",t.target.value),placeholder:"__",className:"w-12 p-1 text-center border rounded text-xs"}),e.jsx("span",{className:"self-center text-xs",children:"/"}),e.jsx("input",{value:s.vitals.bp_diastolic,onChange:t=>p("bp_diastolic",t.target.value),placeholder:"__",className:"w-12 p-1 text-center border rounded text-xs"}),e.jsx("span",{className:"self-center text-xs text-gray-600",children:"BP"})]})]}),e.jsx(o,{legend:"Pain (0–10)",children:e.jsx(m,{value:s.vitals.pain,onChange:t=>p("pain",t),options:["0","1","2","3","4","5","6","7","8","9","10"]})})]})}),e.jsx(D,{title:"Functional mobility (single-select per row)",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(o,{legend:"Bed mobility",children:e.jsx(m,{value:s.bedMobility,onChange:t=>l(a=>({...a,bedMobility:t})),options:["Independent","Min Assist","Max Assist","Dependent"]})}),e.jsx(o,{legend:"Transfers",children:e.jsx(m,{value:s.transfers,onChange:t=>l(a=>({...a,transfers:t})),options:["Independent","Min Assist","Max Assist","Dependent"]})}),e.jsx(o,{legend:"Ambulation",children:e.jsx(m,{value:s.ambulation,onChange:t=>l(a=>({...a,ambulation:t})),options:["Independent","Walker","Cane","Wheelchair","Bedbound"]})}),e.jsx(o,{legend:"Balance",children:e.jsx(m,{value:s.balance,onChange:t=>l(a=>({...a,balance:t})),options:["Normal","Fair","Poor"]})})]})}),e.jsx(D,{title:"ROM / MMT (inputs table with 5 rows)",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs font-semibold text-gray-600",children:[e.jsx("span",{children:"Region"}),e.jsx("span",{children:"ROM (°)"}),e.jsx("span",{children:"MMT (0–5)"})]}),s.romMmtEntries.map((t,a)=>e.jsxs("div",{className:"grid grid-cols-3 gap-2 items-center",children:[e.jsx("span",{className:"text-xs font-medium",children:t.region}),e.jsx("input",{value:t.rom,onChange:n=>x(a,"rom",n.target.value),placeholder:"__",className:"w-16 p-1 text-center border rounded text-xs"}),e.jsx(m,{value:t.mmt,onChange:n=>x(a,"mmt",n),options:["0","1","2","3","4","5"]})]},t.region))]})}),e.jsxs(D,{title:"Common PT problems (chips)",children:[e.jsx(C,{value:s.problems,onChange:I,options:["Weakness","Spasticity","Contracture","Joint Stiffness","Pain","Balance Deficit","Gait Abnormality","Other…"]}),s.problems.has("Other…")&&e.jsx("input",{value:s.otherProblem||"",onChange:t=>l(a=>({...a,otherProblem:t.target.value})),placeholder:"Specify other problem",className:"mt-2 w-full p-2 text-xs border rounded"})]}),e.jsx(D,{title:"Goals (chips; separate Short vs Long)",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(o,{legend:"Short-term",children:e.jsx(C,{value:s.shortTermGoals,onChange:g,options:["Improve ROM","Improve Strength","Improve Balance","Pain Reduction"]})}),e.jsx(o,{legend:"Long-term",children:e.jsx(C,{value:s.longTermGoals,onChange:w,options:["Independent Ambulation","Independent Transfers","Prevent Complications","Improve ADLs"]})})]})}),e.jsx("textarea",{value:s.note||"",onChange:t=>l(a=>({...a,note:t.target.value})),rows:2,placeholder:"Optional note",className:"w-full p-2 text-sm border rounded-md"})]})]})},Se=({patient:b,onSave:S,onCancel:j})=>{const{state:c}=W(),[s,l]=k.useState({currentStatus:"مستقر",priority:"متوسط",familyStatus:"مع الأسرة",primaryCaregiver:"ابن",housingType:"ملك",housingSuitability:"مهيأ",utilities:new Set,incomeLevel:"كافٍ",incomeSource:"راتب تقاعدي",supportLevel:"قوي",psychStatus:new Set,socialChallenges:new Set,externalResources:new Set}),p=r=>{l(t=>{const a=new Set(t.utilities);return a.has(r)?a.delete(r):a.add(r),{...t,utilities:a}})},I=r=>{l(t=>{const a=new Set(t.psychStatus);return a.has(r)?a.delete(r):a.add(r),{...t,psychStatus:a}})},g=r=>{l(t=>{const a=new Set(t.socialChallenges);return a.has(r)?a.delete(r):a.add(r),{...t,socialChallenges:a}})},w=r=>{l(t=>{const a=new Set(t.externalResources);return a.has(r)?a.delete(r):a.add(r),{...t,externalResources:a}})},x=r=>{r.preventDefault();const t=c.staff.find(n=>n.المهنة.includes("اجتماعي"))||c.staff[0],a={id:Date.now().toString(),date:new Date().toISOString(),assessorId:t.رقم_الهوية,assessorName:t.الاسم,role:G.SocialWorker,status:s.currentStatus==="تحسّن"?"Improved":s.currentStatus==="تراجع"?"Worsened":"Unchanged",plan:"Continue same plan",residence:s.familyStatus,caregiverHours:"أكثر من 30",adlAssistance:"مساعدة جزئية",economic:{income:s.incomeLevel,coverage:"حكومية",transport:"متوفر"},homeSafety:{risks:[],aids:[]},needs:[],psychosocial:{mood:s.psychStatus.has("اكتئاب")?"سلبي":"إيجابي",memory:"طبيعي",abuseSuspicion:"لا"},actions:Array.from(s.externalResources),swNote:s.note};S(a)};return e.jsxs("form",{onSubmit:x,className:"p-4 bg-gray-50 flex flex-col h-full",dir:"rtl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h4",{className:"font-bold text-gray-800",children:"التقييم الاجتماعي"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{type:"button",onClick:j,title:"إلغاء",className:"p-1.5 rounded-full hover:bg-red-100 text-red-500",children:e.jsx(H,{size:16})}),e.jsx("button",{type:"submit",title:"حفظ",className:"p-1.5 rounded-full hover:bg-green-100 text-green-600",children:e.jsx(O,{size:16})})]})]}),e.jsxs("div",{className:"space-y-2 overflow-y-auto flex-grow pr-1 text-sm",children:[e.jsx(D,{title:"الحالة الحالية",defaultOpen:!0,children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(o,{legend:"الحالة الحالية",children:e.jsx(m,{value:s.currentStatus,onChange:r=>l(t=>({...t,currentStatus:r})),options:["مستقر","تحسّن","تراجع"]})}),e.jsx(o,{legend:"درجة الأولوية",children:e.jsx(m,{value:s.priority,onChange:r=>l(t=>({...t,priority:r})),options:["منخفض","متوسط","عالٍ"]})})]})}),e.jsx(D,{title:"الوضع الأسري",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(o,{legend:"الوضع الأسري (اختيار واحد)",children:e.jsx(m,{value:s.familyStatus,onChange:r=>l(t=>({...t,familyStatus:r})),options:["مع الأسرة","مع الزوج/الزوجة","مع أحد الأبناء","بمفرده"]})}),e.jsx(o,{legend:"مقدّم الرعاية الأساسي (اختيار واحد)",children:e.jsx(m,{value:s.primaryCaregiver,onChange:r=>l(t=>({...t,primaryCaregiver:r})),options:["ابن","ابنة","زوج/زوجة","عامل منزلي","غير محدّد"]})})]})}),e.jsx(D,{title:"الوضع السكني",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(o,{legend:"نوع السكن",children:e.jsx(m,{value:s.housingType,onChange:r=>l(t=>({...t,housingType:r})),options:["ملك","إيجار"]})}),e.jsx(o,{legend:"ملاءمة السكن",children:e.jsx(m,{value:s.housingSuitability,onChange:r=>l(t=>({...t,housingSuitability:r})),options:["مهيأ","غير مهيأ (ضيق/حواجز/بدون منحدرات)"]})}),e.jsx(o,{legend:"المرافق المتاحة",children:e.jsx(C,{value:s.utilities,onChange:p,options:["كهرباء","ماء","تكييف","مصعد"]})})]})}),e.jsx(D,{title:"الوضع الاقتصادي",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(o,{legend:"الدخل",children:e.jsx(m,{value:s.incomeLevel,onChange:r=>l(t=>({...t,incomeLevel:r})),options:["كافٍ","محدود","غير كافٍ"]})}),e.jsx(o,{legend:"المصدر",children:e.jsx(m,{value:s.incomeSource,onChange:r=>l(t=>({...t,incomeSource:r})),options:["راتب تقاعدي","ضمان اجتماعي","دعم أسري","لا يوجد"]})})]})}),e.jsx(D,{title:"شبكة الدعم",children:e.jsx(m,{value:s.supportLevel,onChange:r=>l(t=>({...t,supportLevel:r})),options:["قوي","متوسط","ضعيف"]})}),e.jsx(D,{title:"الحالة النفسية/السلوكية (متعدّد)",children:e.jsx(C,{value:s.psychStatus,onChange:I,options:["مستقرة","قلق","اكتئاب","رفض رعاية","ضغوط أسرية"]})}),e.jsx(D,{title:"تحديات اجتماعية شائعة (متعدّد)",children:e.jsx(C,{value:s.socialChallenges,onChange:g,options:["عزلة اجتماعية","ضعف وعي بالمرض","نزاع/توتر أسري","عبء رعاية على الأسرة","صعوبات مالية"]})}),e.jsx(D,{title:"موارد خارجية محتملة (متعدّد)",children:e.jsx(C,{value:s.externalResources,onChange:w,options:["جمعيات خيرية","متطوعون","برامج حكومية","دعم مجتمعي محلي"]})}),e.jsx("textarea",{value:s.note||"",onChange:r=>l(t=>({...t,note:r.target.value})),rows:2,placeholder:"ملاحظــة (اختياري – سطر واحد)",className:"w-full p-2 text-sm border rounded-md"})]})]})},je=["Add referral","Adjust meds","Start antibiotics","Wound care upgrade","Frequency change"],ve=["fever","pain ↑","wound deterioration","device issue","other"],ke=({initialData:b,onSave:S,onCancel:j})=>{const c=()=>({status:b?.status||"Unchanged",responseToPlan:b?.responseToPlan||"good",adherence:b?.adherence||"good",newIssues:b?.newIssues||[],painAssessment:{level:"0"},systemsReview:{cardiovascular:"stable",respiratory:"stable",gastrointestinal:"stable",genitourinary:"stable",neurological:"stable",skin:"stable"},medicationChanges:"none",plan:b?.plan||"Continue",planDetails:b?.planDetails||[],nextFollowUp:b?.nextFollowUp||"3–7d",mdNote:b?.mdNote||"",clinicalImpression:"Patient stable with current management plan",treatmentRationale:"Continue current treatment approach based on patient response",patientEducation:"Disease management and medication compliance discussed",familyEducation:"Care instructions provided to family members",riskLevel:"low",goalsMet:"all"}),[s,l]=k.useState(c()),[p,I]=k.useState("assessment"),g=a=>{l(n=>({...n,newIssues:n.newIssues.includes(a)?n.newIssues.filter(f=>f!==a):[...n.newIssues,a]}))},w=a=>{l(n=>({...n,planDetails:n.planDetails.includes(a)?n.planDetails.filter(f=>f!==a):[...n.planDetails,a]}))},x=(a,n)=>{l(f=>{let N={};if(n==="concerning"||n==="deteriorating"){N.riskLevel=n==="deteriorating"?"high":"moderate",N.nextFollowUp=n==="deteriorating"?"24–48h":"3–7d";const M={cardiovascular:"Cardiovascular system",respiratory:"Respiratory system",gastrointestinal:"Gastrointestinal system",genitourinary:"Genitourinary system",neurological:"Neurological system",skin:"Skin and integumentary system"};N.clinicalImpression=`${M[a]} showing ${n} status - requires monitoring`,n==="deteriorating"&&(N.treatmentRationale=`Plan modification needed due to ${a} deterioration`,N.plan="Change")}return{...f,systemsReview:{...f.systemsReview,[a]:n},...N}})},r=()=>s.status&&s.responseToPlan&&s.adherence,t=()=>{const a=[s.mdNote,s.clinicalImpression&&`Clinical Impression: ${s.clinicalImpression}`,s.differentialDiagnosis&&`Differential Diagnosis: ${s.differentialDiagnosis}`,s.treatmentRationale&&`Treatment Rationale: ${s.treatmentRationale}`,s.patientEducation&&`Patient Education: ${s.patientEducation}`,s.familyEducation&&`Family Education: ${s.familyEducation}`].filter(Boolean).join(`

`),n={status:s.status,responseToPlan:s.responseToPlan,adherence:s.adherence,newIssues:s.newIssues,plan:s.plan,planDetails:s.planDetails,nextFollowUp:s.nextFollowUp,mdNote:a||void 0};S(n)};return e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-4 rounded-xl border border-blue-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Y,{className:"text-blue-600",size:20}),e.jsx("h4",{className:"font-bold text-blue-800 text-lg",children:"Physician Assessment & Follow-Up"})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4 p-1 bg-white rounded-lg",children:[{key:"assessment",label:"Clinical Assessment",icon:xe},{key:"systems",label:"Systems Review",icon:Y},{key:"plan",label:"Plan & Orders",icon:ue},{key:"notes",label:"Documentation",icon:J}].map(({key:a,label:n,icon:f})=>e.jsxs("button",{onClick:()=>I(a),className:`flex items-center gap-1 px-3 py-2 rounded-md text-sm font-medium transition-all ${p===a?"bg-blue-600 text-white shadow-sm":"text-blue-700 hover:bg-blue-100"}`,children:[e.jsx(f,{size:14}),n]},a))}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white rounded-lg border border-blue-100",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{size:16,className:"text-blue-600"}),e.jsxs("span",{className:"text-sm font-medium text-blue-800",children:["Assessment Date: ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["تاريخ التقييم: ",new Date().toLocaleDateString("ar-SA")]})]}),p==="assessment"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(o,{legend:"Overall Patient Status",children:e.jsx(m,{value:s.status,onChange:a=>l(n=>({...n,status:a})),options:["Improved","Unchanged","Worsened"]})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(o,{legend:"Response to Treatment Plan",children:e.jsx(m,{value:s.responseToPlan,onChange:a=>l(n=>({...n,responseToPlan:a})),options:["good","partial","poor"]})}),e.jsx(o,{legend:"Medication Adherence",children:e.jsx(m,{value:s.adherence,onChange:a=>l(n=>({...n,adherence:a})),options:["good","partial","poor"]})})]}),e.jsxs(o,{legend:"Pain Assessment (0-10)",children:[e.jsx(m,{value:s.painAssessment.level,onChange:a=>l(n=>({...n,painAssessment:{...n.painAssessment,level:a}})),options:["0","1","2","3","4","5","6","7","8","9","10"]}),parseInt(s.painAssessment.level)>3&&e.jsxs("div",{className:"mt-3 grid md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pain Character"}),e.jsxs("select",{value:s.painAssessment.character||"",onChange:a=>l(n=>({...n,painAssessment:{...n.painAssessment,character:a.target.value}})),className:"w-full p-2 border rounded-md text-sm focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select..."}),e.jsx("option",{value:"sharp",children:"Sharp"}),e.jsx("option",{value:"dull",children:"Dull"}),e.jsx("option",{value:"burning",children:"Burning"}),e.jsx("option",{value:"cramping",children:"Cramping"}),e.jsx("option",{value:"aching",children:"Aching"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),e.jsx("input",{type:"text",value:s.painAssessment.location||"",onChange:a=>l(n=>({...n,painAssessment:{...n.painAssessment,location:a.target.value}})),placeholder:"Pain location",className:"w-full p-2 border rounded-md text-sm focus:ring-2 focus:ring-blue-500"})]})]})]}),e.jsxs(o,{legend:"New Issues or Complications",children:[e.jsx(C,{value:new Set(s.newIssues),onChange:g,options:ve}),s.newIssues.includes("other")&&e.jsx("textarea",{value:s.otherIssueDescription||"",onChange:a=>l(n=>({...n,otherIssueDescription:a.target.value})),rows:2,placeholder:"Describe other issues...",className:"mt-2 w-full p-2 border rounded-md text-sm focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(o,{legend:"Risk Level",children:e.jsx(m,{value:s.riskLevel,onChange:a=>l(n=>({...n,riskLevel:a})),options:["low","moderate","high"]})}),e.jsx(o,{legend:"Treatment Goals Met",children:e.jsx(m,{value:s.goalsMet,onChange:a=>l(n=>({...n,goalsMet:a})),options:["all","partial","none"]})})]})]}),p==="systems"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid gap-4",children:Object.entries(s.systemsReview).map(([a,n])=>e.jsx("div",{className:"bg-white p-3 rounded-lg border border-gray-200",children:e.jsx(o,{legend:a.charAt(0).toUpperCase()+a.slice(1),children:e.jsx(m,{value:n,onChange:f=>x(a,f),options:["stable","concerning","deteriorating"]})})},a))}),e.jsxs(o,{legend:"Medication Changes",children:[e.jsx(m,{value:s.medicationChanges,onChange:a=>l(n=>({...n,medicationChanges:a})),options:["none","dose-adjustment","new-medication","discontinuation","switch"]}),s.medicationChanges!=="none"&&e.jsx("textarea",{value:s.medicationDetails||"",onChange:a=>l(n=>({...n,medicationDetails:a.target.value})),rows:3,placeholder:"Detail medication changes...",className:"mt-2 w-full p-2 border rounded-md text-sm focus:ring-2 focus:ring-blue-500"})]})]}),p==="plan"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(o,{legend:"Treatment Plan",children:e.jsx(m,{value:s.plan,onChange:a=>l(n=>({...n,plan:a})),options:["Continue","Change"]})}),s.plan==="Change"&&e.jsx(o,{legend:"Specify Changes",children:e.jsx(C,{value:new Set(s.planDetails),onChange:w,options:je})}),e.jsx(o,{legend:"Next Follow-up",children:e.jsx(m,{value:s.nextFollowUp,onChange:a=>l(n=>({...n,nextFollowUp:a})),options:["24–48h","3–7d","2–4w"]})}),(s.riskLevel==="high"||s.nextFollowUp==="24–48h")&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ge,{className:"text-red-600",size:16}),e.jsx("span",{className:"font-medium text-red-800",children:"High Priority Follow-up"})]}),e.jsx("p",{className:"text-sm text-red-700",children:"This patient requires close monitoring. Ensure proper communication with nursing staff."})]})]}),p==="notes"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"General Medical Note"}),e.jsx("textarea",{value:s.mdNote||"",onChange:a=>l(n=>({...n,mdNote:a.target.value})),rows:3,placeholder:"General clinical observations and notes...",className:"w-full p-3 border rounded-md text-sm focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Clinical Impression"}),e.jsx("textarea",{value:s.clinicalImpression||"",onChange:a=>l(n=>({...n,clinicalImpression:a.target.value})),rows:2,placeholder:"Primary clinical impression and assessment...",className:"w-full p-3 border rounded-md text-sm focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Treatment Rationale"}),e.jsx("textarea",{value:s.treatmentRationale||"",onChange:a=>l(n=>({...n,treatmentRationale:a.target.value})),rows:2,placeholder:"Rationale for current treatment approach...",className:"w-full p-3 border rounded-md text-sm focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Patient Education"}),e.jsx("textarea",{value:s.patientEducation||"",onChange:a=>l(n=>({...n,patientEducation:a.target.value})),rows:2,placeholder:"Education provided to patient...",className:"w-full p-3 border rounded-md text-sm focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Family Education"}),e.jsx("textarea",{value:s.familyEducation||"",onChange:a=>l(n=>({...n,familyEducation:a.target.value})),rows:2,placeholder:"Education provided to family/caregivers...",className:"w-full p-3 border rounded-md text-sm focus:ring-2 focus:ring-blue-500"})]})]})]})})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-blue-200",children:[e.jsx("div",{className:"text-sm text-gray-600",children:!r()&&e.jsx("span",{className:"text-amber-600",children:"⚠️ Complete required assessments"})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:j,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:ring-2 focus:ring-blue-500 transition-all",children:"Cancel"}),e.jsxs("button",{type:"button",onClick:t,disabled:!r(),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 transition-all",children:[e.jsx(O,{size:16}),"Save Assessment"]})]})]})]})},De=({initialData:b,onSave:S,onCancel:j})=>{const c=()=>{const a=new Date().getHours();return{vitals:{bp:b?.vitals?.bp||"120/80",hr:b?.vitals?.hr||"72",temp:b?.vitals?.temp||"36.5",rr:b?.vitals?.rr||"16",o2sat:b?.vitals?.o2sat||"98",pain:b?.vitals?.pain||"0",bgl:a<12?"90":a<18?"120":"110"},status:b?.status||"Unchanged",woundDelta:b?.woundDelta||"unchanged",deviceDelta:b?.deviceDelta||"unchanged",tasks:b?.tasks||["education"],skinAssessment:"intact",mobilityLevel:"independent",mentalStatus:"alert",respiratoryStatus:"clear",fallRisk:"low",pressureRisk:"low",escalation:b?.escalation||"No",nurseNote:b?.nurseNote||"",clinicalFindings:"",interventionsProvided:"Routine nursing care provided",patientEducation:"Medication compliance and safety measures discussed",recommendationsForNextVisit:"Continue current care plan"}},[s,l]=k.useState(c()),[p,I]=k.useState("vitals"),g=t=>{l(a=>({...a,tasks:a.tasks.includes(t)?a.tasks.filter(n=>n!==t):[...a.tasks,t]}))},w=(t,a)=>{l(n=>{const f={...n.vitals,[t]:a};let N={};if(t==="temp"&&a&&parseFloat(a)>=38&&(N.escalation="Yes",N.escalationReason="Fever detected - temperature ≥38°C",N.clinicalFindings="Patient presents with elevated temperature"),t==="o2sat"&&a&&parseInt(a)<95&&(N.escalation="Yes",N.escalationReason="Low oxygen saturation - SpO2 <95%",N.respiratoryStatus="sob"),t==="bp"&&a){const M=a.split("/");if(M.length===2){const R=parseInt(M[0]),d=parseInt(M[1]);(R>=140||d>=90)&&(N.clinicalFindings=n.clinicalFindings+(n.clinicalFindings?`
`:"")+"Elevated blood pressure noted")}}return t==="pain"&&a&&parseInt(a)>=7&&(N.escalation="Yes",N.escalationReason="Severe pain reported - Pain score ≥7/10",N.interventionsProvided="Pain assessment completed, comfort measures provided"),{...n,vitals:f,...N}})},x=()=>{const{bp:t,hr:a,temp:n,rr:f,o2sat:N}=s.vitals;return t&&a&&n&&f&&N},r=()=>{const t=[s.nurseNote,s.clinicalFindings&&`Clinical Findings: ${s.clinicalFindings}`,s.interventionsProvided&&`Interventions: ${s.interventionsProvided}`,s.patientEducation&&`Education Provided: ${s.patientEducation}`,s.recommendationsForNextVisit&&`Next Visit Recommendations: ${s.recommendationsForNextVisit}`].filter(Boolean).join(`

`),a={vitals:s.vitals,status:s.status,woundDelta:s.woundDelta,deviceDelta:s.deviceDelta,tasks:s.tasks,escalation:s.escalation,nurseNote:t||void 0};S(a)};return e.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 p-4 rounded-xl border border-emerald-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Y,{className:"text-emerald-600",size:20}),e.jsx("h4",{className:"font-bold text-emerald-800 text-lg",children:"Nursing Assessment & Follow-Up"})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4 p-1 bg-white rounded-lg",children:[{key:"vitals",label:"Vital Signs",icon:ee},{key:"assessment",label:"Assessment",icon:Y},{key:"tasks",label:"Tasks",icon:se},{key:"notes",label:"Notes",icon:Q}].map(({key:t,label:a,icon:n})=>e.jsxs("button",{onClick:()=>I(t),className:`flex items-center gap-1 px-3 py-2 rounded-md text-sm font-medium transition-all ${p===t?"bg-emerald-600 text-white shadow-sm":"text-emerald-700 hover:bg-emerald-100"}`,children:[e.jsx(n,{size:14}),a]},t))}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white rounded-lg border border-emerald-100",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{size:16,className:"text-emerald-600"}),e.jsxs("span",{className:"text-sm font-medium text-emerald-800",children:["Visit Date: ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["تاريخ الزيارة: ",new Date().toLocaleDateString("ar-SA")]})]}),p==="vitals"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-gray-200",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-2",children:[e.jsx(se,{size:14,className:"text-red-500"}),"Blood Pressure"]}),e.jsx("input",{type:"text",value:s.vitals.bp,onChange:t=>w("bp",t.target.value),placeholder:"120/80",className:"w-full p-2 border rounded-md text-sm focus:ring-2 focus:ring-emerald-500"})]}),e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-gray-200",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-2",children:[e.jsx(ee,{size:14,className:"text-blue-500"}),"Heart Rate"]}),e.jsx("input",{type:"number",value:s.vitals.hr,onChange:t=>w("hr",t.target.value),placeholder:"72",className:"w-full p-2 border rounded-md text-sm focus:ring-2 focus:ring-emerald-500"})]}),e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-gray-200",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-2",children:[e.jsx(he,{size:14,className:"text-orange-500"}),"Temperature (°C)"]}),e.jsx("input",{type:"number",step:"0.1",value:s.vitals.temp,onChange:t=>w("temp",t.target.value),placeholder:"36.5",className:"w-full p-2 border rounded-md text-sm focus:ring-2 focus:ring-emerald-500"})]}),e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-gray-200",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Respiratory Rate"}),e.jsx("input",{type:"number",value:s.vitals.rr,onChange:t=>w("rr",t.target.value),placeholder:"16",className:"w-full p-2 border rounded-md text-sm focus:ring-2 focus:ring-emerald-500"})]}),e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-gray-200",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"SpO₂ (%)"}),e.jsx("input",{type:"number",value:s.vitals.o2sat,onChange:t=>w("o2sat",t.target.value),placeholder:"98",className:"w-full p-2 border rounded-md text-sm focus:ring-2 focus:ring-emerald-500"})]}),e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-gray-200",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Blood Glucose"}),e.jsx("input",{type:"number",value:s.vitals.bgl,onChange:t=>w("bgl",t.target.value),placeholder:"120 (optional)",className:"w-full p-2 border rounded-md text-sm focus:ring-2 focus:ring-emerald-500"})]})]}),e.jsx(o,{legend:"Pain Level (0-10)",children:e.jsx(m,{value:s.vitals.pain,onChange:t=>w("pain",t),options:["0","1","2","3","4","5","6","7","8","9","10"]})})]}),p==="assessment"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(o,{legend:"Overall Patient Status",children:e.jsx(m,{value:s.status,onChange:t=>l(a=>({...a,status:t})),options:["Improved","Unchanged","Worsened"]})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(o,{legend:"Skin Assessment",children:e.jsx(m,{value:s.skinAssessment,onChange:t=>l(a=>({...a,skinAssessment:t})),options:["intact","at-risk","breakdown","wound-present"]})}),e.jsx(o,{legend:"Mobility Level",children:e.jsx(m,{value:s.mobilityLevel,onChange:t=>l(a=>({...a,mobilityLevel:t})),options:["independent","assistance","bedbound"]})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(o,{legend:"Mental Status",children:e.jsx(m,{value:s.mentalStatus,onChange:t=>l(a=>({...a,mentalStatus:t})),options:["alert","confused","lethargic"]})}),e.jsx(o,{legend:"Respiratory Status",children:e.jsx(m,{value:s.respiratoryStatus,onChange:t=>l(a=>({...a,respiratoryStatus:t})),options:["clear","congested","sob"]})})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsx(o,{legend:"Fall Risk",children:e.jsx(m,{value:s.fallRisk,onChange:t=>l(a=>({...a,fallRisk:t})),options:["low","moderate","high"]})}),e.jsx(o,{legend:"Pressure Risk",children:e.jsx(m,{value:s.pressureRisk,onChange:t=>l(a=>({...a,pressureRisk:t})),options:["low","moderate","high"]})}),e.jsx(o,{legend:"Escalation Needed",children:e.jsx(m,{value:s.escalation,onChange:t=>l(a=>({...a,escalation:t})),options:["No","Yes"]})})]}),s.woundDelta!==void 0&&e.jsx(o,{legend:"Wound Status Change",children:e.jsx(m,{value:s.woundDelta,onChange:t=>l(a=>({...a,woundDelta:t})),options:["better","unchanged","worse"]})}),s.deviceDelta!==void 0&&e.jsx(o,{legend:"Device Status Change",children:e.jsx(m,{value:s.deviceDelta,onChange:t=>l(a=>({...a,deviceDelta:t})),options:["better","unchanged","worse"]})})]}),p==="tasks"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(o,{legend:"Tasks Completed During Visit",children:e.jsx(C,{value:new Set(s.tasks),onChange:g,options:["dressing change","vaccine","meds given","education","wound care","blood draw","catheter care","IV therapy"]})}),s.escalation==="Yes"&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-yellow-800 mb-2",children:"Reason for Escalation"}),e.jsx("textarea",{value:s.escalationReason||"",onChange:t=>l(a=>({...a,escalationReason:t.target.value})),rows:3,placeholder:"Describe the reason for escalating to physician...",className:"w-full p-3 border border-yellow-300 rounded-md text-sm focus:ring-2 focus:ring-yellow-500"})]})]}),p==="notes"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"General Nursing Note"}),e.jsx("textarea",{value:s.nurseNote||"",onChange:t=>l(a=>({...a,nurseNote:t.target.value})),rows:3,placeholder:"General observations and notes...",className:"w-full p-3 border rounded-md text-sm focus:ring-2 focus:ring-emerald-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Clinical Findings"}),e.jsx("textarea",{value:s.clinicalFindings||"",onChange:t=>l(a=>({...a,clinicalFindings:t.target.value})),rows:2,placeholder:"Specific clinical findings and observations...",className:"w-full p-3 border rounded-md text-sm focus:ring-2 focus:ring-emerald-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Interventions Provided"}),e.jsx("textarea",{value:s.interventionsProvided||"",onChange:t=>l(a=>({...a,interventionsProvided:t.target.value})),rows:2,placeholder:"Detail interventions performed during visit...",className:"w-full p-3 border rounded-md text-sm focus:ring-2 focus:ring-emerald-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Patient Education Provided"}),e.jsx("textarea",{value:s.patientEducation||"",onChange:t=>l(a=>({...a,patientEducation:t.target.value})),rows:2,placeholder:"Education topics covered with patient/family...",className:"w-full p-3 border rounded-md text-sm focus:ring-2 focus:ring-emerald-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Recommendations for Next Visit"}),e.jsx("textarea",{value:s.recommendationsForNextVisit||"",onChange:t=>l(a=>({...a,recommendationsForNextVisit:t.target.value})),rows:2,placeholder:"Recommendations and focus areas for next visit...",className:"w-full p-3 border rounded-md text-sm focus:ring-2 focus:ring-emerald-500"})]})]})})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-emerald-200",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[!x()&&p==="vitals"&&e.jsx("span",{className:"text-amber-600",children:"⚠️ Complete all vital signs"}),s.escalation==="Yes"&&!s.escalationReason&&e.jsx("span",{className:"text-red-600",children:"⚠️ Escalation reason required"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:j,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:ring-2 focus:ring-emerald-500 transition-all",children:"Cancel"}),e.jsxs("button",{type:"button",onClick:r,disabled:!x()||s.escalation==="Yes"&&!s.escalationReason,className:"px-4 py-2 text-sm font-medium text-white bg-emerald-600 border border-transparent rounded-md hover:bg-emerald-700 focus:ring-2 focus:ring-emerald-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 transition-all",children:[e.jsx(O,{size:16}),"Save Assessment"]})]})]})]})},Ie=({initialData:b,onSave:S,onCancel:j})=>{const[c,s]=k.useState({patientStatus:"Stable",interventions:new Set,modalities:new Set,equipment:new Set,tolerance:"Well tolerated",education:new Set,plan:"Continue same"}),l=x=>{s(r=>{const t=new Set(r.interventions);return t.has(x)?t.delete(x):t.add(x),{...r,interventions:t}})},p=x=>{s(r=>{const t=new Set(r.modalities);return t.has(x)?t.delete(x):t.add(x),{...r,modalities:t}})},I=x=>{s(r=>{const t=new Set(r.equipment);return t.has(x)?t.delete(x):t.add(x),{...r,equipment:t}})},g=x=>{s(r=>{const t=new Set(r.education);return t.has(x)?t.delete(x):t.add(x),{...r,education:t}})},w=()=>{const x={changeSinceLast:{pain:"↔",function:c.patientStatus==="Improved"?"↑":c.patientStatus==="Declining"?"↓":"↔"},tolerance:c.tolerance==="Well tolerated"?"good":c.tolerance==="Fatigue"?"fair":"poor",hep:{status:"given",adherence:"good"},plan:c.plan==="Continue same"?"Continue":"Change",ptNote:c.note};S(x)};return e.jsxs("div",{className:"bg-purple-50/50 p-3 rounded-md border border-purple-200 space-y-3 text-sm",children:[e.jsx("h4",{className:"font-bold text-purple-800",children:"PT Follow-up Note"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(o,{legend:"Patient status (chips)",children:[e.jsx(m,{value:c.patientStatus,onChange:x=>s(r=>({...r,patientStatus:x})),options:["Improved","Stable","Declining","New Complaint","Other…"]}),c.patientStatus==="Other…"&&e.jsx("input",{value:c.otherStatus||"",onChange:x=>s(r=>({...r,otherStatus:x.target.value})),placeholder:"Specify other status",className:"mt-2 w-full p-2 text-xs border rounded"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h5",{className:"font-semibold text-purple-700",children:"Session content (multi-chips)"}),e.jsx(o,{legend:"Interventions",children:e.jsx(C,{value:c.interventions,onChange:l,options:["ROM","Strengthening","Balance","Gait","Transfers","Breathing"]})}),e.jsx(o,{legend:"Modalities",children:e.jsx(C,{value:c.modalities,onChange:p,options:["Heat","Cold","TENS","NMES","Ultrasound"]})}),e.jsx(o,{legend:"Equipment",children:e.jsx(C,{value:c.equipment,onChange:I,options:["Walker","Cane","Parallel Bars","Theraband","Weights"]})})]}),e.jsx(o,{legend:"Tolerance (chips)",children:e.jsx(m,{value:c.tolerance,onChange:x=>s(r=>({...r,tolerance:x})),options:["Well tolerated","Fatigue","Pain increased","Limited by condition"]})}),e.jsx(o,{legend:"Education (chips)",children:e.jsx(C,{value:c.education,onChange:g,options:["Home Exercise","Safety","Caregiver Education"]})}),e.jsx(o,{legend:"Plan (chips)",children:e.jsx(m,{value:c.plan,onChange:x=>s(r=>({...r,plan:x})),options:["Continue same","Progress program","Add modalities","Refer MD"]})}),e.jsx("textarea",{value:c.note||"",onChange:x=>s(r=>({...r,note:x.target.value})),rows:2,placeholder:"Optional note",className:"w-full p-2 border rounded-md"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:j,className:"text-xs px-3 py-1 rounded-md text-gray-600 bg-gray-100 hover:bg-gray-200",children:"Cancel"}),e.jsxs("button",{type:"button",onClick:w,className:"text-xs px-3 py-1 rounded-md text-white bg-purple-600 hover:bg-purple-700 flex items-center gap-1",children:[e.jsx(O,{size:14}),"Save Note"]})]})]})},Ae=({initialData:b,onSave:S,onCancel:j})=>{const[c,s]=k.useState({socialStatus:"مستقرة",updates:new Set,interventions:new Set,shortTermPlan:"الاستمرار كما هو",escalationIndicators:new Set,escalationPaths:new Set}),l=r=>{s(t=>{const a=new Set(t.updates);return a.has(r)?a.delete(r):a.add(r),{...t,updates:a}})},p=r=>{s(t=>{const a=new Set(t.interventions);return a.has(r)?a.delete(r):a.add(r),{...t,interventions:a}})},I=r=>{s(t=>{const a=new Set(t.escalationIndicators);return a.has(r)?a.delete(r):a.add(r),{...t,escalationIndicators:a}})},g=r=>{s(t=>{const a=new Set(t.escalationPaths);return a.has(r)?a.delete(r):a.add(r),{...t,escalationPaths:a}})},w=c.escalationIndicators.size>0,x=()=>{const r={situationChange:c.socialStatus,actionsTaken:Array.from(c.interventions),plan:c.shortTermPlan.includes("استمرار")?"الاستمرار":"تغيير",swNote:c.note};S(r)};return e.jsxs("div",{className:"bg-yellow-50/50 p-3 rounded-md border border-yellow-200 space-y-3 text-sm",dir:"rtl",children:[e.jsx("h4",{className:"font-bold text-yellow-800",children:"مذكرة متابعة اجتماعية"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(o,{legend:"حالة المريض الاجتماعية الآن",children:e.jsx(m,{value:c.socialStatus,onChange:r=>s(t=>({...t,socialStatus:r})),options:["مستقرة","تحسّن","تراجع"]})}),e.jsx(o,{legend:"مستجدات (متعدّد)",children:e.jsx(C,{value:c.updates,onChange:l,options:["تغيّر مقدّم الرعاية","نزاع/توتر أسري","ضائقة مالية","عزلة متزايدة","لا جديد"]})}),e.jsx(o,{legend:"تدخّلات تمت اليوم (متعدّد)",children:e.jsx(C,{value:c.interventions,onChange:p,options:["تثقيف الأسرة","ربط بخدمة مجتمعية","متابعة نفسية","زيارة مشتركة (تمريض/طبيب)"]})}),e.jsx(o,{legend:"خطة قصيرة المدى (اختيار واحد)",children:e.jsx(m,{value:c.shortTermPlan,onChange:r=>s(t=>({...t,shortTermPlan:r})),options:["الاستمرار كما هو","تعديل الخطة","رفع للجنة اجتماعية","إحالة لجهة داعمة"]})}),e.jsx(o,{legend:"مؤشرات للتصعيد (متعدّد)",children:e.jsx(C,{value:c.escalationIndicators,onChange:I,options:["انعدام مقدّم رعاية فعّال","غياب رعاية منزلية كافية","خطر فقدان السكن","إساءة/إهمال محتمل","ضائقة مالية شديدة","رفض رعاية مع مخاطر صحية","تدهور نفسي حاد (خطر على النفس/الغير)","عزلة اجتماعية شديدة","حاجة لنقل عاجل (مرافقة اجتماعية)"]})}),w&&e.jsx("div",{className:"p-3 bg-red-50 rounded border border-red-200",children:e.jsx(o,{legend:"مسار التصعيد (متعدّد – يُظهر عند الحاجة)",children:e.jsx(C,{value:c.escalationPaths,onChange:g,options:["إبلاغ الطبيب المناوب","تنسيق طوارئ 937","إحالة حماية أسرية","إحالة جمعية/دعم مالي","جدولة زيارة مشتركة (تمريض/طبيب/اجتماعي)"]})})}),e.jsx("textarea",{value:c.note||"",onChange:r=>s(t=>({...t,note:r.target.value})),rows:2,placeholder:"ملاحظــة (اختياري – سطر واحد)",className:"w-full p-2 border rounded-md"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:j,className:"text-xs px-3 py-1 rounded-md text-gray-600 bg-gray-100 hover:bg-gray-200",children:"إلغاء"}),e.jsxs("button",{type:"button",onClick:x,className:"text-xs px-3 py-1 rounded-md text-white bg-yellow-600 hover:bg-yellow-700 flex items-center gap-1",children:[e.jsx(O,{size:14}),"حفظ"]})]})]})},_e=({patient:b,onSave:S,onCancel:j})=>{const{state:c}=W(),[s,l]=k.useState(null),[p,I]=k.useState(null),[g,w]=k.useState({dataSource:[],maritalStatus:"",wivesCount:1,educationLevel:"",profession:"",socialNotes:"",housingType:"",housingOwnership:"",housingCondition:3,incomeSources:[],incomeAmount:"",familyMembers:[],psychologicalImpact:[],physicalStatus:[],assessmentSpeech:"",assessmentSight:"",assessmentHearing:"",assessmentMovement:"",assessmentNotes:{},equipmentNeeds:[],interventionSummary:"",educationStatus:""}),[x,r]=k.useState([{id:"basic",title:"Basic Assessment",titleAr:"المعلومات الأساسية والحالة الاجتماعية",icon:K,isCompleted:!1,isOpen:!0},{id:"environment",title:"Environment & Housing",titleAr:"السكن، الدخل، وتكوين الأسرة",icon:te,isCompleted:!1,isOpen:!1},{id:"assessment",title:"Psychological & Physical",titleAr:"الأثر النفسي والقدرات البدنية",icon:ae,isCompleted:!1,isOpen:!1},{id:"plan",title:"Plan & Recommendations",titleAr:"خطة الخروج، التوصيات، والتثقيف",icon:J,isCompleted:!1,isOpen:!1}]),[t,a]=k.useState(!1),[n,f]=k.useState({relation:"",relationBeforeIllness:"جيدة",relationAfterIllness:"جيدة"}),N=["المريض","المرافق","الملف الطبي"],M=[{value:"أمي",label:"أمي"},{value:"ابتدائي",label:"ابتدائي"},{value:"متوسط",label:"متوسط"},{value:"ثانوي",label:"ثانوي"},{value:"جامعي",label:"جامعي"}],R=[{value:"طالب",label:"طالب"},{value:"موظف",label:"موظف"},{value:"عاطل",label:"عاطل"},{value:"متقاعد",label:"متقاعد"},{value:"عامل",label:"عامل"},{value:"ربة منزل",label:"ربة منزل"}],d=["فيلا","شقة","بيت شعبي","غرفة","سكن خيري","بلا مسكن"],u=["راتب","تقاعد","ضمان اجتماعي","لا يوجد دخل","أخرى"],h=["انخفاض الروح المعنوية","يأس","انطوائية","غضب وعصبية","قلة النوم","رهاب أو وسواس","عنف أو عدوانية","إنكار المرض","اندفاعية"],y=["محدود القدرات","يمشي بمساعدة","يحتاج إشراف","طريح الفراش","غسيل كلوي","قسطرة","عدم تحكم في الإخراج"],A=["سرير طبي","مرتبة هوائية","كرسي متحرك","كرسي حمام","رافعة مريض","جهاز أكسجين"],T=[{key:"family_education",label:"تثقيف أسري",text:"تم عقد جلسة تثقيفية مع أسرة المريض للتركيز على أهمية الوقاية من قرح الفراش وكيفية استخدام الأجهزة الطبية بأمان."},{key:"financial_support",label:"تنسيق دعم مالي",text:"تم التنسيق مع الجهات المختصة لتقديم الدعم المالي المناسب للأسرة وربطها بالجمعيات الخيرية الداعمة."},{key:"psych_eval",label:"تقييم نفسي",text:"تم إجراء تقييم نفسي شامل للمريض وتقديم الدعم النفسي المناسب للتعامل مع تحديات المرض."},{key:"listening_session",label:"جلسة استماع",text:"تم عقد جلسة استماع مع المريض وأسرته للتعبير عن مخاوفهم ومناقشة الحلول المتاحة لتحسين جودة الحياة."}],_=k.useCallback(i=>{r(v=>v.map(P=>P.id===i?{...P,isOpen:!P.isOpen}:P))},[]),F=k.useCallback((i,v)=>{w(P=>({...P,[i]:v}))},[]),U=k.useCallback((i,v)=>{w(P=>{const E=P[i],$=E.includes(v)?E.filter(me=>me!==v):[...E,v];return{...P,[i]:$}})},[]),ie=k.useCallback(i=>{w(v=>({...v,interventionSummary:v.interventionSummary?`${v.interventionSummary}

${i}`:i}))},[]),oe=k.useCallback(()=>{if(n.relation.trim()){const i={id:Date.now().toString(),...n};w(v=>({...v,familyMembers:[...v.familyMembers,i]})),f({relation:"",relationBeforeIllness:"جيدة",relationAfterIllness:"جيدة"}),a(!1)}},[n]),de=k.useCallback(i=>{w(v=>({...v,familyMembers:v.familyMembers.filter(P=>P.id!==i)}))},[]),L=k.useMemo(()=>({basic:!!(g.dataSource.length&&g.maritalStatus&&g.educationLevel&&g.profession),environment:!!(g.housingType&&g.housingOwnership&&g.incomeSources.length),assessment:!!(g.assessmentSpeech&&g.assessmentSight&&g.assessmentHearing&&g.assessmentMovement),plan:!!g.educationStatus}),[g]),ce=k.useCallback(()=>{const i={id:Date.now().toString(),date:new Date().toISOString(),assessorId:"current-user-id",assessorName:s?.الاسم||"أخصائي اجتماعي",role:G.SocialWorker,status:"Improved",plan:"الاستمرار",situationChange:"تحسن",actionsTaken:g.incomeSources.includes("ضمان اجتماعي")?["مساعدة مالية"]:["دعم معيل"],swNote:g.interventionSummary,...g,familyMembers};S(i)},[g,familyMembers,s,S]),z=({options:i,selected:v,onToggle:P,allowCustom:E=!1})=>e.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.map($=>e.jsx("button",{onClick:()=>P($),className:`px-3 py-1.5 text-sm rounded-full border-2 transition-all ${v.includes($)?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:border-blue-300"}`,children:$},$)),E&&e.jsxs("button",{className:"px-3 py-1.5 text-sm rounded-full border-2 border-dashed border-gray-400 text-gray-600 hover:border-blue-400",children:[e.jsx(X,{size:14,className:"inline mr-1"}),"إضافة أخرى..."]})]}),Z=({options:i,selected:v,onSelect:P})=>e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:i.map(E=>e.jsx("button",{onClick:()=>P(E.value),className:`p-4 rounded-xl border-2 text-center transition-all ${v===E.value?"bg-blue-50 border-blue-500 text-blue-700":"bg-white border-gray-200 hover:border-blue-300"}`,children:e.jsx("div",{className:"font-medium",children:E.label})},E.value))});return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[95vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-600 to-orange-700 text-white p-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-lg flex items-center justify-center",children:e.jsx(K,{className:"text-white",size:24})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Social Work Assessment"}),e.jsx("p",{className:"text-orange-100",children:"تقييم الأخصائي الاجتماعي الذكي"}),e.jsxs("p",{className:"text-sm text-orange-200 mt-1",children:["المريض: ",b.nameAr]})]})]}),e.jsx("button",{onClick:j,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(H,{size:20})})]}),e.jsx("div",{className:"mt-4 flex items-center gap-2",children:x.map((i,v)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold ${L[i.id]?"bg-green-500 text-white":i.isOpen?"bg-white text-orange-600":"bg-white/30 text-white"}`,children:L[i.id]?"✓":v+1}),v<x.length-1&&e.jsx("div",{className:"w-8 h-0.5 bg-white/30 mx-1"})]},i.id))})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden",children:[e.jsxs("button",{onClick:()=>_("basic"),className:"w-full p-4 bg-gray-50 flex items-center justify-between hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(K,{className:"text-orange-600",size:20}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:x[0].titleAr}),e.jsx("p",{className:"text-sm text-gray-600",children:"المعلومات الأساسية والحالة الاجتماعية"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[L.basic&&e.jsx(V,{className:"text-green-500",size:18}),x[0].isOpen?e.jsx(B,{size:20}):e.jsx(q,{size:20})]})]}),x[0].isOpen&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"مصدر البيانات"}),e.jsx(z,{options:N,selected:g.dataSource,onToggle:i=>U("dataSource",i)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"الحالة الاجتماعية"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:["أعزب","متزوج","مطلق","أرمل"].map(i=>e.jsx("button",{onClick:()=>F("maritalStatus",i),className:`p-4 rounded-xl border-2 text-center transition-all ${g.maritalStatus===i?"bg-blue-50 border-blue-500 text-blue-700":"bg-white border-gray-200 hover:border-blue-300"}`,children:e.jsx("div",{className:"font-medium",children:i})},i))}),g.maritalStatus==="متزوج"&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"عدد الزوجات"}),e.jsx("input",{type:"number",min:"1",max:"4",value:g.wivesCount,onChange:i=>F("wivesCount",parseInt(i.target.value)),className:"w-24 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"المستوى التعليمي"}),e.jsx(Z,{options:M,selected:g.educationLevel,onSelect:i=>F("educationLevel",i)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"المهنة"}),e.jsx(Z,{options:R,selected:g.profession,onSelect:i=>F("profession",i)})]}),e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>{},className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 text-sm",children:[e.jsx(X,{size:16}),"إضافة ملاحظة اجتماعية"]}),e.jsx("textarea",{value:g.socialNotes,onChange:i=>F("socialNotes",i.target.value),className:"mt-2 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"ملاحظات إضافية على الوضع الاجتماعي..."})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden",children:[e.jsxs("button",{onClick:()=>_("environment"),className:"w-full p-4 bg-gray-50 flex items-center justify-between hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(te,{className:"text-orange-600",size:20}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:x[1].titleAr}),e.jsx("p",{className:"text-sm text-gray-600",children:"السكن، الدخل، وتكوين الأسرة"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[L.environment&&e.jsx(V,{className:"text-green-500",size:18}),x[1].isOpen?e.jsx(B,{size:20}):e.jsx(q,{size:20})]})]}),x[1].isOpen&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"نوع السكن"}),e.jsx(z,{options:d,selected:g.housingType?[g.housingType]:[],onToggle:i=>F("housingType",i)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"ملكية السكن"}),e.jsx("div",{className:"flex gap-3",children:["ملك","إيجار"].map(i=>e.jsx("button",{onClick:()=>F("housingOwnership",i),className:`px-6 py-3 rounded-lg border-2 transition-all ${g.housingOwnership===i?"bg-blue-50 border-blue-500 text-blue-700":"bg-white border-gray-200 hover:border-blue-300"}`,children:i},i))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"حالة السكن الصحية"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"range",min:"1",max:"5",value:g.housingCondition,onChange:i=>F("housingCondition",parseInt(i.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[e.jsx("span",{children:"سيئة"}),e.jsx("span",{children:"متوسطة"}),e.jsx("span",{children:"جيدة"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"مصادر الدخل"}),e.jsx(z,{options:u,selected:g.incomeSources,onToggle:i=>U("incomeSources",i),allowCustom:!0}),e.jsx("div",{className:"mt-3",children:e.jsx("input",{type:"text",value:g.incomeAmount,onChange:i=>F("incomeAmount",i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"المبلغ التقريبي (ريال سعودي)"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"تكوين الأسرة والعلاقات"}),e.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(X,{size:16}),"إضافة فرد بالأسرة"]}),g.familyMembers.length>0&&e.jsx("div",{className:"mt-4 space-y-2",children:g.familyMembers.map(i=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium",children:i.relation}),e.jsxs("div",{className:"text-sm text-gray-600",children:["قبل المرض: ",i.relationBeforeIllness," | بعد المرض: ",i.relationAfterIllness]})]}),e.jsx("button",{onClick:()=>de(i.id),className:"text-red-600 hover:text-red-700 p-1",children:e.jsx(H,{size:16})})]},i.id))})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden",children:[e.jsxs("button",{onClick:()=>_("assessment"),className:"w-full p-4 bg-gray-50 flex items-center justify-between hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ae,{className:"text-orange-600",size:20}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:x[2].titleAr}),e.jsx("p",{className:"text-sm text-gray-600",children:"الأثر النفسي والقدرات البدنية"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[L.assessment&&e.jsx(V,{className:"text-green-500",size:18}),x[2].isOpen?e.jsx(B,{size:20}):e.jsx(q,{size:20})]})]}),x[2].isOpen&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"الأثر النفسي على المريض/الأسرة"}),e.jsx(z,{options:h,selected:g.psychologicalImpact,onToggle:i=>U("psychologicalImpact",i),allowCustom:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"الحالة الصحية والبدنية"}),e.jsx(z,{options:y,selected:g.physicalStatus,onToggle:i=>U("physicalStatus",i),allowCustom:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"تقييم القدرات الوظيفية"}),e.jsx("div",{className:"space-y-4",children:[{key:"assessmentSpeech",label:"النطق",options:["سليم","ضعف بسيط","ضعف شديد"]},{key:"assessmentSight",label:"البصر",options:["سليم","ضعف بسيط","ضعف شديد"]},{key:"assessmentHearing",label:"السمع",options:["سليم","ضعف بسيط","ضعف شديد"]},{key:"assessmentMovement",label:"الحركة",options:["كاملة","ضعف أطراف","شلل نصفي","شلل رباعي"]}].map(i=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"w-20 text-sm font-medium text-gray-700",children:[i.label,":"]}),e.jsx("div",{className:"flex-1 flex items-center gap-2",children:i.options.map(v=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:i.key,value:v,checked:g[i.key]===v,onChange:P=>F(i.key,P.target.value),className:"text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm",children:v})]},v))}),e.jsx("button",{onClick:()=>{},className:"p-1 text-gray-400 hover:text-blue-600",title:"إضافة ملاحظة",children:e.jsx(pe,{size:16})})]},i.key))})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden",children:[e.jsxs("button",{onClick:()=>_("plan"),className:"w-full p-4 bg-gray-50 flex items-center justify-between hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(J,{className:"text-orange-600",size:20}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:x[3].titleAr}),e.jsx("p",{className:"text-sm text-gray-600",children:"خطة الخروج، التوصيات، والتثقيف"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[L.plan&&e.jsx(V,{className:"text-green-500",size:18}),x[3].isOpen?e.jsx(B,{size:20}):e.jsx(q,{size:20})]})]}),x[3].isOpen&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"احتياجات الخروج (الأجهزة الطبية)"}),e.jsx(z,{options:A,selected:g.equipmentNeeds,onToggle:i=>U("equipmentNeeds",i),allowCustom:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"ملخص التدخل والإجراءات"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"مولدات الجمل الاحترافية:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:T.map(i=>e.jsxs("button",{onClick:()=>ie(i.text),className:"flex items-center gap-1 px-3 py-1.5 bg-blue-100 text-blue-700 rounded-full text-sm hover:bg-blue-200 transition-colors",children:[e.jsx(be,{size:14}),i.label]},i.key))})]}),e.jsx("textarea",{value:g.interventionSummary,onChange:i=>F("interventionSummary",i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:6,placeholder:"اكتب ملخص التدخل الاجتماعي أو استخدم مولدات الجمل أعلاه..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"تثقيف المريض والأسرة"}),e.jsx("div",{className:"flex gap-3",children:["تم التثقيف","يحتاج تثقيف لاحق"].map(i=>e.jsx("button",{onClick:()=>F("educationStatus",i),className:`px-6 py-3 rounded-lg border-2 transition-all ${g.educationStatus===i?"bg-green-50 border-green-500 text-green-700":"bg-white border-gray-200 hover:border-green-300"}`,children:i},i))})]})]})]})]})}),e.jsxs("div",{className:"border-t border-gray-200 p-6 flex items-center justify-between bg-gray-50",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["الأقسام المكتملة: ",Object.values(L).filter(Boolean).length," من ",x.length]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:j,className:"px-6 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"إلغاء"}),e.jsxs("button",{onClick:ce,className:"px-6 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors flex items-center gap-2",children:[e.jsx(V,{size:16}),"حفظ التقييم وإنشاء التقرير"]})]})]}),t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-60 flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"إضافة فرد بالأسرة"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"صلة القرابة"}),e.jsx("input",{type:"text",value:n.relation,onChange:i=>f(v=>({...v,relation:i.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"مثال: الابن، الابنة، الزوجة"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"العلاقة قبل المرض"}),e.jsxs("select",{value:n.relationBeforeIllness,onChange:i=>f(v=>({...v,relationBeforeIllness:i.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"جيدة",children:"جيدة"}),e.jsx("option",{value:"متوسطة",children:"متوسطة"}),e.jsx("option",{value:"سيئة",children:"سيئة"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"العلاقة بعد المرض"}),e.jsxs("select",{value:n.relationAfterIllness,onChange:i=>f(v=>({...v,relationAfterIllness:i.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"جيدة",children:"جيدة"}),e.jsx("option",{value:"متوسطة",children:"متوسطة"}),e.jsx("option",{value:"سيئة",children:"سيئة"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>a(!1),className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"إلغاء"}),e.jsx("button",{onClick:oe,disabled:!n.relation.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"إضافة"})]})]})})})]})})},Pe=({data:b,onClose:S})=>{const{patient:j,assessor:c,formData:s}=b,l=new Date,p=l.toLocaleDateString("en-US"),I=l.toLocaleDateString("ar-SA-u-ca-islamic");l.toLocaleDateString("ar-SA-u-ca-islamic"),`${j.nationalId.slice(-4)}${l.getFullYear()}${(l.getMonth()+1).toString().padStart(2,"0")}${l.getDate().toString().padStart(2,"0")}${l.getHours().toString().padStart(2,"0")}${l.getMinutes().toString().padStart(2,"0")}`;const g=j.dateOfBirth?Math.floor((l.getTime()-new Date(j.dateOfBirth).getTime())/(365.25*24*60*60*1e3)):"غير محدد",w=j.sex==="Male"?"ذكر":j.sex==="Female"?"أنثى":"غير محدد",x=()=>{if(!s.maritalStatus)return"";let h=`**الحالة الاجتماعية:** ${s.maritalStatus}`;if(s.maritalStatus==="متزوج"&&s.wivesCount>1&&(h+=`. تتكون أسرته من ${s.wivesCount} زوجات`),s.familyMembers.length>0){h+=`. **تكوين الأسرة:** تشمل الأسرة ${s.familyMembers.length} أفراد من الأقارب المباشرين`;const y=s.familyMembers.filter(A=>A.relationBeforeIllness!==A.relationAfterIllness);y.length>0&&(h+=`. لوحظ تغيير في ديناميكية العلاقات الأسرية لدى ${y.length} من أفراد الأسرة منذ بداية المرض`)}return h+"."},r=()=>{if(!s.housingType)return"";let h=`**السكن:** يقيم المريض وأسرته في ${s.housingType}`;s.housingOwnership&&(h+=` ${s.housingOwnership==="ملك"?"مملوك للأسرة":"بنظام الإيجار"}`);const y=["سيئة جداً","سيئة","متوسطة","جيدة","ممتازة"][s.housingCondition-1];return h+=`. **حالة السكن:** تم تقييم حالة السكن بأنها ${y} من حيث التهوية والإضاءة والملاءمة للحالة الصحية للمريض`,h+"."},t=()=>{if(s.incomeSources.length===0)return"";let h="**الوضع المادي:** ";if(s.incomeSources.includes("لا يوجد دخل"))h+="تواجه الأسرة صعوبات مالية حادة حيث لا يوجد مصدر دخل ثابت، مما يؤثر بشكل مباشر على قدرتهم على توفير المستلزمات الطبية والمعيشية الأساسية";else{const y=s.incomeSources.filter(A=>A!=="لا يوجد دخل");h+=`تعتمد الأسرة على مصادر دخل متمثلة في: ${y.join("، ")}`,s.incomeAmount&&(h+=`. يقدر الدخل الشهري بحوالي ${s.incomeAmount} ريال سعودي`),s.incomeSources.includes("ضمان اجتماعي")&&(h+=". **التوصية:** تم التأكد من استمرار الدعم المالي من الضمان الاجتماعي وربط الحالة بالجمعيات الخيرية الداعمة")}return h+"."},a=()=>{if(s.psychologicalImpact.length===0)return"**الحالة النفسية:** لم تُلاحظ أي علامات واضحة للاضطراب النفسي الحاد، ويبدو المريض متقبلاً لوضعه الصحي في الوقت الحالي.";let h="**الحالة النفسية:** يُظهر المريض علامات واضحة من ";const y=s.psychologicalImpact.map(A=>({"انخفاض الروح المعنوية":"انخفاض في الروح المعنوية",يأس:"شعور باليأس",انطوائية:"ميول انطوائية","غضب وعصبية":"نوبات غضب وعصبية","قلة النوم":"اضطرابات في النوم","رهاب أو وسواس":"أعراض الرهاب والوسواس","عنف أو عدوانية":"سلوكيات عدوانية","إنكار المرض":"إنكار للحالة المرضية",اندفاعية:"سلوكيات اندفاعية"})[A]||A);return h+=y.slice(0,-1).join("، "),y.length>1?h+=` و${y[y.length-1]}`:h+=y[0],h+=" نتيجة لحالته الصحية. **التدخل:** يتم متابعة الحالة النفسية عن كثب من قبل الفريق المعالج وتقديم الدعم النفسي المناسب",h+"."},n=()=>{if(s.physicalStatus.length===0)return"";let h="**الحالة البدنية:** ";const y={"محدود القدرات":"المريض لديه قدرات محدودة في الحركة","يمشي بمساعدة":"يحتاج المريض إلى مساعدة في المشي والتنقل","يحتاج إشراف":"يحتاج المريض إلى إشراف مستمر في الأنشطة اليومية","طريح الفراش":"المريض طريح الفراش بشكل كامل ويعتمد على الآخرين في جميع أنشطة الحياة اليومية","غسيل كلوي":"يخضع المريض لجلسات غسيل كلوي منتظمة",قسطرة:"يستخدم المريض قسطرة بولية","عدم تحكم في الإخراج":"يعاني المريض من عدم التحكم في الإخراج"},A=s.physicalStatus.map(T=>y[T]||T);return h+=A.join("، "),s.physicalStatus.includes("طريح الفراش")&&(h+=". **توصية هامة:** تم التأكيد على الأسرة بضرورة تغيير وضعية المريض كل ساعتين للوقاية من قرح الفراش وتحريك الأطراف بانتظام"),h+"."},f=()=>{const h=[{key:"assessmentSpeech",label:"النطق",value:s.assessmentSpeech},{key:"assessmentSight",label:"البصر",value:s.assessmentSight},{key:"assessmentHearing",label:"السمع",value:s.assessmentHearing},{key:"assessmentMovement",label:"الحركة",value:s.assessmentMovement}].filter(_=>_.value);if(h.length===0)return"";let y="**القدرات الوظيفية:** ";const A=h.filter(_=>_.value==="سليم"||_.value==="كاملة"),T=h.filter(_=>_.value!=="سليم"&&_.value!=="كاملة");if(A.length>0&&(y+=`يتمتع المريض بقدرات طبيعية في ${A.map(_=>_.label).join("، ")}`),T.length>0){A.length>0&&(y+="، ولكن "),y+="يعاني من ";const _=T.map(F=>`${_[F.value]||F.value} في ${F.label}`);y+=_.join("، ")}return y+"."},N=()=>{if(s.equipmentNeeds.length===0)return"";let h="**احتياجات الدعم:** تم تحديد حاجة المريض إلى ";const y={"سرير طبي":"سرير طبي مجهز","مرتبة هوائية":"مرتبة هوائية للوقاية من قرح الفراش","كرسي متحرك":"كرسي متحرك للتنقل","كرسي حمام":"كرسي حمام للاستحمام الآمن","رافعة مريض":"رافعة مريض لتسهيل النقل","جهاز أكسجين":"جهاز أكسجين للدعم التنفسي"},A=s.equipmentNeeds.map(T=>y[T]||T);return h+=A.join("، "),h+=". **الإجراء:** تم التنسيق مع الجهات المعنية لتوفير هذه المعدات في أسرع وقت ممكن",h+"."},M=()=>s.interventionSummary.trim()?`**ملخص التدخل الاجتماعي:** ${s.interventionSummary}`:"",R=()=>s.educationStatus?s.educationStatus==="تم التثقيف"?"**التثقيف والتوعية:** تم تقديم جلسات تثقيفية شاملة للمريض وأسرته حول طبيعة المرض وطرق العناية المنزلية المناسبة. أظهرت الأسرة فهماً جيداً للتوجيهات المقدمة والتزاماً بتطبيقها.":"**التثقيف والتوعية:** تم تحديد الحاجة لجلسات تثقيفية إضافية للمريض وأسرته في الزيارات القادمة لضمان الفهم الكامل لطرق العناية المنزلية المطلوبة.":"",d=()=>{const h=[];return s.incomeSources.includes("لا يوجد دخل")&&h.push("ربط الأسرة بمصادر الدعم المالي والجمعيات الخيرية"),s.psychologicalImpact.length>0&&h.push("متابعة الحالة النفسية مع الطبيب النفسي المختص"),s.physicalStatus.includes("طريح الفراش")&&h.push("تدريب الأسرة على تقنيات الوقاية من قرح الفراش"),s.equipmentNeeds.length>0&&h.push("متابعة توفير الأجهزة الطبية المطلوبة"),s.educationStatus==="يحتاج تثقيف لاحق"&&h.push("جدولة جلسات تثقيفية إضافية في الزيارات القادمة"),h},u=()=>{window.print()};return e.jsxs(e.Fragment,{children:[e.jsx("style",{jsx:!0,global:!0,children:`
        @media print {
          .no-print { display: none !important; }
          .print-page { 
            margin: 0 !important; 
            padding: 20px !important;
            box-shadow: none !important;
            border-radius: 0 !important;
            max-width: none !important;
            background: white !important;
          }
          .print-header {
            background: linear-gradient(135deg, #059669 0%, #0369a1 100%) !important;
            -webkit-print-color-adjust: exact !important;
            color-adjust: exact !important;
            print-color-adjust: exact !important;
          }
          .print-no-break { 
            page-break-inside: avoid !important; 
            break-inside: avoid !important;
          }
          .signature-line {
            border-bottom: 2px solid #374151 !important;
            height: 60px !important;
            margin-bottom: 8px !important;
          }
          body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif !important;
            direction: rtl !important;
          }
          * {
            -webkit-print-color-adjust: exact !important;
            color-adjust: exact !important;
            print-color-adjust: exact !important;
          }
        }
        
        .signature-line {
          border-bottom: 2px solid #d1d5db;
          height: 40px;
          margin-bottom: 8px;
        }
      `}),e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-5xl max-h-[95vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 no-print",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"تقرير التقييم الاجتماعي"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:u,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"طباعة التقرير"}),e.jsx("button",{onClick:S,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"إغلاق"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsxs("div",{className:"print-page max-w-none mx-auto bg-white",style:{fontFamily:"Arial, sans-serif"},children:[e.jsxs("div",{className:"print-header bg-gradient-to-r from-green-700 via-green-600 to-blue-700 text-white p-8 mb-6 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-0 left-0 w-32 h-32 bg-white rounded-full -translate-x-16 -translate-y-16"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-24 h-24 bg-white rounded-full translate-x-12 translate-y-12"})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-24 h-24 bg-white rounded-xl flex items-center justify-center shadow-2xl border-4 border-green-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-green-600 text-3xl font-bold mb-1",children:"🇸🇦"}),e.jsx("div",{className:"text-xs text-green-700 font-bold",children:"وزارة الصحة"}),e.jsx("div",{className:"text-xs text-green-600",children:"MOH"})]})}),e.jsx("div",{className:"w-20 h-20 bg-white rounded-xl flex items-center justify-center shadow-xl border-2 border-blue-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-blue-600 font-bold text-lg",children:"🏥"}),e.jsx("div",{className:"text-xs text-blue-700 font-bold",children:"مستشفى"}),e.jsx("div",{className:"text-xs text-blue-600",children:"KAH"})]})})]}),e.jsxs("div",{className:"text-white",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2 drop-shadow-lg",children:"مستشفى الملك عبدالله - بيشه"}),e.jsx("h2",{className:"text-xl text-green-100 mb-3",children:"King Abdullah Hospital - Bisha"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsx("p",{className:"text-green-200 font-semibold",children:"قسم الرعاية الصحية المنزلية | Home Healthcare Division"}),e.jsx("p",{className:"text-blue-200",children:"تجمع عسير الصحي | Aseer Health Cluster"}),e.jsx("p",{className:"text-green-100 text-xs",children:"المملكة العربية السعودية | Kingdom of Saudi Arabia"})]})]})]}),e.jsx("div",{className:"bg-white/15 backdrop-blur-sm rounded-xl p-6 border border-white/20 shadow-xl",children:e.jsxs("div",{className:"text-center text-white",children:[e.jsx("p",{className:"text-sm text-green-100 mb-2",children:"تاريخ التقييم | Assessment Date"}),e.jsx("p",{className:"font-bold text-xl mb-1",children:p}),e.jsx("p",{className:"text-sm text-blue-200",children:I})]})})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20",children:[e.jsx("h2",{className:"text-2xl font-bold text-center mb-2",children:"تقرير التقييم الاجتماعي الشامل"}),e.jsx("p",{className:"text-green-100 text-center text-lg",children:"Comprehensive Social Work Assessment Report"}),e.jsx("div",{className:"text-center mt-3",children:e.jsx("span",{className:"bg-yellow-400 text-yellow-900 px-4 py-1 rounded-full text-sm font-bold",children:"مُولد آلياً | AI Generated Report"})})]})]})]}),e.jsxs("div",{className:"patient-info bg-gradient-to-br from-blue-50 via-white to-green-50 p-8 rounded-xl mb-6 border-2 border-blue-200 shadow-lg print-no-break",children:[e.jsxs("h3",{className:"font-bold text-xl text-gray-800 mb-6 border-b-2 border-blue-300 pb-3 flex items-center gap-3",children:[e.jsx("span",{className:"w-4 h-4 bg-gradient-to-r from-blue-600 to-green-600 rounded-full"}),"معلومات المريض والتقييم | Patient & Assessment Information"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 text-sm",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg border-r-4 border-blue-500 shadow-sm",children:[e.jsx("span",{className:"font-semibold text-gray-600 block mb-2",children:"الاسم الكامل | Full Name"}),e.jsx("p",{className:"font-bold text-blue-900 text-lg",children:j.nameAr})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border-r-4 border-green-500 shadow-sm",children:[e.jsx("span",{className:"font-semibold text-gray-600 block mb-2",children:"رقم الهوية | National ID"}),e.jsx("p",{className:"font-bold text-green-900 font-mono",children:j.nationalId})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border-r-4 border-purple-500 shadow-sm",children:[e.jsx("span",{className:"font-semibold text-gray-600 block mb-2",children:"العمر | Age"}),e.jsxs("p",{className:"font-bold text-purple-900",children:[g," سنة"]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border-r-4 border-pink-500 shadow-sm",children:[e.jsx("span",{className:"font-semibold text-gray-600 block mb-2",children:"الجنس | Gender"}),e.jsx("p",{className:"font-bold text-pink-900",children:w})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6 text-sm",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg border-r-4 border-orange-500 shadow-sm",children:[e.jsx("span",{className:"font-semibold text-gray-600 block mb-2",children:"رقم الجوال | Phone Number"}),e.jsx("p",{className:"font-bold text-orange-900 font-mono",children:j.phone||"غير متوفر"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border-r-4 border-teal-500 shadow-sm",children:[e.jsx("span",{className:"font-semibold text-gray-600 block mb-2",children:"المنطقة | Area"}),e.jsx("p",{className:"font-bold text-teal-900",children:j.areaId||"غير محدد"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border-r-4 border-cyan-500 shadow-sm",children:[e.jsx("span",{className:"font-semibold text-gray-600 block mb-2",children:"تاريخ الادخال | Admission Date"}),e.jsx("p",{className:"font-bold text-cyan-900",children:j.admissionDate?new Date(j.admissionDate).toLocaleDateString("ar-SA"):"غير محدد"})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-indigo-100 to-blue-100 p-4 rounded-lg border border-indigo-200",children:e.jsxs("div",{className:"text-center text-sm",children:[e.jsx("p",{className:"font-bold text-indigo-900 text-lg",children:c.الاسم}),e.jsx("p",{className:"text-indigo-700",children:c.المهنة}),e.jsx("p",{className:"text-indigo-600",children:"قسم الرعاية الصحية المنزلية"}),e.jsx("p",{className:"text-indigo-600",children:"مستشفى الملك عبدالله - بيشه"})]})})]}),e.jsxs("div",{className:"space-y-6 text-gray-800 leading-relaxed",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-6 border border-blue-200 print-no-break",children:[e.jsx("h3",{className:"font-bold text-lg text-blue-800 mb-4 border-b border-blue-300 pb-2",children:"Social Assessment | التقييم الاجتماعي"}),e.jsxs("div",{className:"space-y-4 text-base",children:[x()&&e.jsx("p",{className:"leading-relaxed",children:x()}),s.educationLevel&&e.jsxs("p",{className:"leading-relaxed",children:[e.jsx("strong",{children:"المستوى التعليمي:"})," ",s.educationLevel,".",e.jsx("strong",{children:"المهنة:"})," ",s.profession||"غير محدد","."]}),s.socialNotes&&e.jsxs("p",{className:"leading-relaxed bg-yellow-50 p-3 rounded border-l-4 border-yellow-400",children:[e.jsx("strong",{children:"ملاحظات اجتماعية إضافية:"})," ",s.socialNotes]})]})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-6 border border-green-200 print-no-break",children:[e.jsx("h3",{className:"font-bold text-lg text-green-800 mb-4 border-b border-green-300 pb-2",children:"Housing & Financial Status | السكن والوضع المالي"}),e.jsxs("div",{className:"space-y-4 text-base",children:[r()&&e.jsx("p",{className:"leading-relaxed",children:r()}),t()&&e.jsx("p",{className:"leading-relaxed",children:t()})]})]}),s.familyMembers.length>0&&e.jsxs("div",{className:"bg-purple-50 rounded-lg p-6 border border-purple-200 print-no-break",children:[e.jsx("h3",{className:"font-bold text-lg text-purple-800 mb-4 border-b border-purple-300 pb-2",children:"Family Composition | تكوين الأسرة"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-purple-100",children:[e.jsx("th",{className:"border border-purple-300 p-3 text-right",children:"صلة القرابة"}),e.jsx("th",{className:"border border-purple-300 p-3 text-right",children:"العلاقة قبل المرض"}),e.jsx("th",{className:"border border-purple-300 p-3 text-right",children:"العلاقة بعد المرض"})]})}),e.jsx("tbody",{children:s.familyMembers.map((h,y)=>e.jsxs("tr",{className:"bg-white",children:[e.jsx("td",{className:"border border-purple-300 p-3",children:h.relation}),e.jsx("td",{className:"border border-purple-300 p-3",children:h.relationBeforeIllness}),e.jsx("td",{className:"border border-purple-300 p-3",children:h.relationAfterIllness})]},y))})]})})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-6 border border-red-200 print-no-break",children:[e.jsx("h3",{className:"font-bold text-lg text-red-800 mb-4 border-b border-red-300 pb-2",children:"Psychological & Physical Status | الحالة النفسية والبدنية"}),e.jsxs("div",{className:"space-y-4 text-base",children:[a()&&e.jsx("p",{className:"leading-relaxed",children:a()}),n()&&e.jsx("p",{className:"leading-relaxed",children:n()}),f()&&e.jsx("p",{className:"leading-relaxed",children:f()})]})]}),N()&&e.jsxs("div",{className:"bg-indigo-50 rounded-lg p-6 border border-indigo-200 print-no-break",children:[e.jsx("h3",{className:"font-bold text-lg text-indigo-800 mb-4 border-b border-indigo-300 pb-2",children:"Equipment & Support Needs | احتياجات الدعم والأجهزة"}),e.jsx("p",{className:"leading-relaxed text-base",children:N()})]}),M()&&e.jsxs("div",{className:"bg-orange-50 rounded-lg p-6 border border-orange-200 print-no-break",children:[e.jsx("h3",{className:"font-bold text-lg text-orange-800 mb-4 border-b border-orange-300 pb-2",children:"Social Work Intervention | التدخل الاجتماعي"}),e.jsx("p",{className:"leading-relaxed text-base whitespace-pre-line",children:M()})]}),R()&&e.jsxs("div",{className:"bg-teal-50 rounded-lg p-6 border border-teal-200 print-no-break",children:[e.jsx("h3",{className:"font-bold text-lg text-teal-800 mb-4 border-b border-teal-300 pb-2",children:"Patient & Family Education | تثقيف المريض والأسرة"}),e.jsx("p",{className:"leading-relaxed text-base",children:R()})]}),d().length>0&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200 print-no-break",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-800 mb-4 border-b border-gray-300 pb-2",children:"Recommendations & Follow-up | التوصيات والمتابعة"}),e.jsx("ul",{className:"space-y-2 text-base",children:d().map((h,y)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-600 font-bold",children:"•"}),e.jsx("span",{className:"leading-relaxed",children:h})]},y))})]})]}),e.jsx("div",{className:"signature-section mt-8 p-6 border-t border-gray-300 print-no-break",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("div",{className:"signature-line"}),e.jsxs("div",{className:"signature-label mt-2 text-center",children:[e.jsx("p",{className:"font-bold text-lg",children:c.الاسم}),e.jsx("p",{className:"text-sm text-gray-600",children:c.المهنة}),e.jsx("p",{className:"text-sm text-gray-600",children:"قسم الرعاية الصحية المنزلية"}),e.jsx("p",{className:"text-sm text-gray-600",children:"مستشفى الملك عبدالله - بيشه"})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"signature-line"}),e.jsxs("div",{className:"signature-label mt-2 text-center",children:[e.jsx("p",{className:"font-semibold",children:"التاريخ"}),e.jsx("p",{className:"text-sm text-gray-600",children:I}),e.jsx("p",{className:"text-sm text-gray-600",children:"Date"})]})]})]})}),e.jsxs("div",{className:"print-footer text-center text-sm text-gray-600 mt-8 pt-4 border-t border-gray-200",children:[e.jsx("p",{children:"مستشفى الملك عبدالله - بيشه | King Abdullah Hospital - Bisha"}),e.jsx("p",{className:"text-xs mt-2",children:"قسم الرعاية الصحية المنزلية | Home Healthcare Division"})]})]})})]})})]})};export{ye as D,_e as E,we as N,Ce as P,Se as S,Ae as a,Ie as b,De as c,ke as d,Pe as e};
