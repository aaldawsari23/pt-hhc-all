(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function y1(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var ap={exports:{}},gc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m_;function qw(){if(m_)return gc;m_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var h in o)h!=="key"&&(u[h]=o[h])}else u=o;return o=u.ref,{$$typeof:r,type:i,key:f,ref:o!==void 0?o:null,props:u}}return gc.Fragment=e,gc.jsx=n,gc.jsxs=n,gc}var g_;function Fw(){return g_||(g_=1,ap.exports=qw()),ap.exports}var m=Fw(),op={exports:{}},mt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y_;function Hw(){if(y_)return mt;y_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),j=Symbol.iterator;function z(te){return te===null||typeof te!="object"?null:(te=j&&te[j]||te["@@iterator"],typeof te=="function"?te:null)}var ae={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},re=Object.assign,ve={};function me(te,je,ze){this.props=te,this.context=je,this.refs=ve,this.updater=ze||ae}me.prototype.isReactComponent={},me.prototype.setState=function(te,je){if(typeof te!="object"&&typeof te!="function"&&te!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,te,je,"setState")},me.prototype.forceUpdate=function(te){this.updater.enqueueForceUpdate(this,te,"forceUpdate")};function De(){}De.prototype=me.prototype;function ke(te,je,ze){this.props=te,this.context=je,this.refs=ve,this.updater=ze||ae}var Pe=ke.prototype=new De;Pe.constructor=ke,re(Pe,me.prototype),Pe.isPureReactComponent=!0;var xe=Array.isArray,ue={H:null,A:null,T:null,S:null,V:null},Re=Object.prototype.hasOwnProperty;function P(te,je,ze,Ve,Xe,_t){return ze=_t.ref,{$$typeof:r,type:te,key:je,ref:ze!==void 0?ze:null,props:_t}}function L(te,je){return P(te.type,je,void 0,void 0,void 0,te.props)}function H(te){return typeof te=="object"&&te!==null&&te.$$typeof===r}function ne(te){var je={"=":"=0",":":"=2"};return"$"+te.replace(/[=:]/g,function(ze){return je[ze]})}var F=/\/+/g;function le(te,je){return typeof te=="object"&&te!==null&&te.key!=null?ne(""+te.key):je.toString(36)}function G(){}function gt(te){switch(te.status){case"fulfilled":return te.value;case"rejected":throw te.reason;default:switch(typeof te.status=="string"?te.then(G,G):(te.status="pending",te.then(function(je){te.status==="pending"&&(te.status="fulfilled",te.value=je)},function(je){te.status==="pending"&&(te.status="rejected",te.reason=je)})),te.status){case"fulfilled":return te.value;case"rejected":throw te.reason}}throw te}function Ct(te,je,ze,Ve,Xe){var _t=typeof te;(_t==="undefined"||_t==="boolean")&&(te=null);var st=!1;if(te===null)st=!0;else switch(_t){case"bigint":case"string":case"number":st=!0;break;case"object":switch(te.$$typeof){case r:case e:st=!0;break;case E:return st=te._init,Ct(st(te._payload),je,ze,Ve,Xe)}}if(st)return Xe=Xe(te),st=Ve===""?"."+le(te,0):Ve,xe(Xe)?(ze="",st!=null&&(ze=st.replace(F,"$&/")+"/"),Ct(Xe,je,ze,"",function(us){return us})):Xe!=null&&(H(Xe)&&(Xe=L(Xe,ze+(Xe.key==null||te&&te.key===Xe.key?"":(""+Xe.key).replace(F,"$&/")+"/")+st)),je.push(Xe)),1;st=0;var gn=Ve===""?".":Ve+":";if(xe(te))for(var jt=0;jt<te.length;jt++)Ve=te[jt],_t=gn+le(Ve,jt),st+=Ct(Ve,je,ze,_t,Xe);else if(jt=z(te),typeof jt=="function")for(te=jt.call(te),jt=0;!(Ve=te.next()).done;)Ve=Ve.value,_t=gn+le(Ve,jt++),st+=Ct(Ve,je,ze,_t,Xe);else if(_t==="object"){if(typeof te.then=="function")return Ct(gt(te),je,ze,Ve,Xe);throw je=String(te),Error("Objects are not valid as a React child (found: "+(je==="[object Object]"?"object with keys {"+Object.keys(te).join(", ")+"}":je)+"). If you meant to render a collection of children, use an array instead.")}return st}function Ee(te,je,ze){if(te==null)return te;var Ve=[],Xe=0;return Ct(te,Ve,"","",function(_t){return je.call(ze,_t,Xe++)}),Ve}function Le(te){if(te._status===-1){var je=te._result;je=je(),je.then(function(ze){(te._status===0||te._status===-1)&&(te._status=1,te._result=ze)},function(ze){(te._status===0||te._status===-1)&&(te._status=2,te._result=ze)}),te._status===-1&&(te._status=0,te._result=je)}if(te._status===1)return te._result.default;throw te._result}var Ye=typeof reportError=="function"?reportError:function(te){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var je=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof te=="object"&&te!==null&&typeof te.message=="string"?String(te.message):String(te),error:te});if(!window.dispatchEvent(je))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",te);return}console.error(te)};function At(){}return mt.Children={map:Ee,forEach:function(te,je,ze){Ee(te,function(){je.apply(this,arguments)},ze)},count:function(te){var je=0;return Ee(te,function(){je++}),je},toArray:function(te){return Ee(te,function(je){return je})||[]},only:function(te){if(!H(te))throw Error("React.Children.only expected to receive a single React element child.");return te}},mt.Component=me,mt.Fragment=n,mt.Profiler=o,mt.PureComponent=ke,mt.StrictMode=i,mt.Suspense=v,mt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ue,mt.__COMPILER_RUNTIME={__proto__:null,c:function(te){return ue.H.useMemoCache(te)}},mt.cache=function(te){return function(){return te.apply(null,arguments)}},mt.cloneElement=function(te,je,ze){if(te==null)throw Error("The argument must be a React element, but you passed "+te+".");var Ve=re({},te.props),Xe=te.key,_t=void 0;if(je!=null)for(st in je.ref!==void 0&&(_t=void 0),je.key!==void 0&&(Xe=""+je.key),je)!Re.call(je,st)||st==="key"||st==="__self"||st==="__source"||st==="ref"&&je.ref===void 0||(Ve[st]=je[st]);var st=arguments.length-2;if(st===1)Ve.children=ze;else if(1<st){for(var gn=Array(st),jt=0;jt<st;jt++)gn[jt]=arguments[jt+2];Ve.children=gn}return P(te.type,Xe,void 0,void 0,_t,Ve)},mt.createContext=function(te){return te={$$typeof:f,_currentValue:te,_currentValue2:te,_threadCount:0,Provider:null,Consumer:null},te.Provider=te,te.Consumer={$$typeof:u,_context:te},te},mt.createElement=function(te,je,ze){var Ve,Xe={},_t=null;if(je!=null)for(Ve in je.key!==void 0&&(_t=""+je.key),je)Re.call(je,Ve)&&Ve!=="key"&&Ve!=="__self"&&Ve!=="__source"&&(Xe[Ve]=je[Ve]);var st=arguments.length-2;if(st===1)Xe.children=ze;else if(1<st){for(var gn=Array(st),jt=0;jt<st;jt++)gn[jt]=arguments[jt+2];Xe.children=gn}if(te&&te.defaultProps)for(Ve in st=te.defaultProps,st)Xe[Ve]===void 0&&(Xe[Ve]=st[Ve]);return P(te,_t,void 0,void 0,null,Xe)},mt.createRef=function(){return{current:null}},mt.forwardRef=function(te){return{$$typeof:h,render:te}},mt.isValidElement=H,mt.lazy=function(te){return{$$typeof:E,_payload:{_status:-1,_result:te},_init:Le}},mt.memo=function(te,je){return{$$typeof:b,type:te,compare:je===void 0?null:je}},mt.startTransition=function(te){var je=ue.T,ze={};ue.T=ze;try{var Ve=te(),Xe=ue.S;Xe!==null&&Xe(ze,Ve),typeof Ve=="object"&&Ve!==null&&typeof Ve.then=="function"&&Ve.then(At,Ye)}catch(_t){Ye(_t)}finally{ue.T=je}},mt.unstable_useCacheRefresh=function(){return ue.H.useCacheRefresh()},mt.use=function(te){return ue.H.use(te)},mt.useActionState=function(te,je,ze){return ue.H.useActionState(te,je,ze)},mt.useCallback=function(te,je){return ue.H.useCallback(te,je)},mt.useContext=function(te){return ue.H.useContext(te)},mt.useDebugValue=function(){},mt.useDeferredValue=function(te,je){return ue.H.useDeferredValue(te,je)},mt.useEffect=function(te,je,ze){var Ve=ue.H;if(typeof ze=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Ve.useEffect(te,je)},mt.useId=function(){return ue.H.useId()},mt.useImperativeHandle=function(te,je,ze){return ue.H.useImperativeHandle(te,je,ze)},mt.useInsertionEffect=function(te,je){return ue.H.useInsertionEffect(te,je)},mt.useLayoutEffect=function(te,je){return ue.H.useLayoutEffect(te,je)},mt.useMemo=function(te,je){return ue.H.useMemo(te,je)},mt.useOptimistic=function(te,je){return ue.H.useOptimistic(te,je)},mt.useReducer=function(te,je,ze){return ue.H.useReducer(te,je,ze)},mt.useRef=function(te){return ue.H.useRef(te)},mt.useState=function(te){return ue.H.useState(te)},mt.useSyncExternalStore=function(te,je,ze){return ue.H.useSyncExternalStore(te,je,ze)},mt.useTransition=function(){return ue.H.useTransition()},mt.version="19.1.1",mt}var __;function nm(){return __||(__=1,op.exports=Hw()),op.exports}var Be=nm();const vc=y1(Be);var lp={exports:{}},yc={},cp={exports:{}},up={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v_;function Gw(){return v_||(v_=1,(function(r){function e(Ee,Le){var Ye=Ee.length;Ee.push(Le);e:for(;0<Ye;){var At=Ye-1>>>1,te=Ee[At];if(0<o(te,Le))Ee[At]=Le,Ee[Ye]=te,Ye=At;else break e}}function n(Ee){return Ee.length===0?null:Ee[0]}function i(Ee){if(Ee.length===0)return null;var Le=Ee[0],Ye=Ee.pop();if(Ye!==Le){Ee[0]=Ye;e:for(var At=0,te=Ee.length,je=te>>>1;At<je;){var ze=2*(At+1)-1,Ve=Ee[ze],Xe=ze+1,_t=Ee[Xe];if(0>o(Ve,Ye))Xe<te&&0>o(_t,Ve)?(Ee[At]=_t,Ee[Xe]=Ye,At=Xe):(Ee[At]=Ve,Ee[ze]=Ye,At=ze);else if(Xe<te&&0>o(_t,Ye))Ee[At]=_t,Ee[Xe]=Ye,At=Xe;else break e}}return Le}function o(Ee,Le){var Ye=Ee.sortIndex-Le.sortIndex;return Ye!==0?Ye:Ee.id-Le.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var f=Date,h=f.now();r.unstable_now=function(){return f.now()-h}}var v=[],b=[],E=1,j=null,z=3,ae=!1,re=!1,ve=!1,me=!1,De=typeof setTimeout=="function"?setTimeout:null,ke=typeof clearTimeout=="function"?clearTimeout:null,Pe=typeof setImmediate<"u"?setImmediate:null;function xe(Ee){for(var Le=n(b);Le!==null;){if(Le.callback===null)i(b);else if(Le.startTime<=Ee)i(b),Le.sortIndex=Le.expirationTime,e(v,Le);else break;Le=n(b)}}function ue(Ee){if(ve=!1,xe(Ee),!re)if(n(v)!==null)re=!0,Re||(Re=!0,le());else{var Le=n(b);Le!==null&&Ct(ue,Le.startTime-Ee)}}var Re=!1,P=-1,L=5,H=-1;function ne(){return me?!0:!(r.unstable_now()-H<L)}function F(){if(me=!1,Re){var Ee=r.unstable_now();H=Ee;var Le=!0;try{e:{re=!1,ve&&(ve=!1,ke(P),P=-1),ae=!0;var Ye=z;try{t:{for(xe(Ee),j=n(v);j!==null&&!(j.expirationTime>Ee&&ne());){var At=j.callback;if(typeof At=="function"){j.callback=null,z=j.priorityLevel;var te=At(j.expirationTime<=Ee);if(Ee=r.unstable_now(),typeof te=="function"){j.callback=te,xe(Ee),Le=!0;break t}j===n(v)&&i(v),xe(Ee)}else i(v);j=n(v)}if(j!==null)Le=!0;else{var je=n(b);je!==null&&Ct(ue,je.startTime-Ee),Le=!1}}break e}finally{j=null,z=Ye,ae=!1}Le=void 0}}finally{Le?le():Re=!1}}}var le;if(typeof Pe=="function")le=function(){Pe(F)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,gt=G.port2;G.port1.onmessage=F,le=function(){gt.postMessage(null)}}else le=function(){De(F,0)};function Ct(Ee,Le){P=De(function(){Ee(r.unstable_now())},Le)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Ee){Ee.callback=null},r.unstable_forceFrameRate=function(Ee){0>Ee||125<Ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<Ee?Math.floor(1e3/Ee):5},r.unstable_getCurrentPriorityLevel=function(){return z},r.unstable_next=function(Ee){switch(z){case 1:case 2:case 3:var Le=3;break;default:Le=z}var Ye=z;z=Le;try{return Ee()}finally{z=Ye}},r.unstable_requestPaint=function(){me=!0},r.unstable_runWithPriority=function(Ee,Le){switch(Ee){case 1:case 2:case 3:case 4:case 5:break;default:Ee=3}var Ye=z;z=Ee;try{return Le()}finally{z=Ye}},r.unstable_scheduleCallback=function(Ee,Le,Ye){var At=r.unstable_now();switch(typeof Ye=="object"&&Ye!==null?(Ye=Ye.delay,Ye=typeof Ye=="number"&&0<Ye?At+Ye:At):Ye=At,Ee){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=Ye+te,Ee={id:E++,callback:Le,priorityLevel:Ee,startTime:Ye,expirationTime:te,sortIndex:-1},Ye>At?(Ee.sortIndex=Ye,e(b,Ee),n(v)===null&&Ee===n(b)&&(ve?(ke(P),P=-1):ve=!0,Ct(ue,Ye-At))):(Ee.sortIndex=te,e(v,Ee),re||ae||(re=!0,Re||(Re=!0,le()))),Ee},r.unstable_shouldYield=ne,r.unstable_wrapCallback=function(Ee){var Le=z;return function(){var Ye=z;z=Le;try{return Ee.apply(this,arguments)}finally{z=Ye}}}})(up)),up}var b_;function Qw(){return b_||(b_=1,cp.exports=Gw()),cp.exports}var hp={exports:{}},Un={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E_;function $w(){if(E_)return Un;E_=1;var r=nm();function e(v){var b="https://react.dev/errors/"+v;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)b+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+v+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(v,b,E){var j=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:j==null?null:""+j,children:v,containerInfo:b,implementation:E}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(v,b){if(v==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return Un.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Un.createPortal=function(v,b){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(e(299));return u(v,b,null,E)},Un.flushSync=function(v){var b=f.T,E=i.p;try{if(f.T=null,i.p=2,v)return v()}finally{f.T=b,i.p=E,i.d.f()}},Un.preconnect=function(v,b){typeof v=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,i.d.C(v,b))},Un.prefetchDNS=function(v){typeof v=="string"&&i.d.D(v)},Un.preinit=function(v,b){if(typeof v=="string"&&b&&typeof b.as=="string"){var E=b.as,j=h(E,b.crossOrigin),z=typeof b.integrity=="string"?b.integrity:void 0,ae=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;E==="style"?i.d.S(v,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:j,integrity:z,fetchPriority:ae}):E==="script"&&i.d.X(v,{crossOrigin:j,integrity:z,fetchPriority:ae,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},Un.preinitModule=function(v,b){if(typeof v=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var E=h(b.as,b.crossOrigin);i.d.M(v,{crossOrigin:E,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&i.d.M(v)},Un.preload=function(v,b){if(typeof v=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var E=b.as,j=h(E,b.crossOrigin);i.d.L(v,E,{crossOrigin:j,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},Un.preloadModule=function(v,b){if(typeof v=="string")if(b){var E=h(b.as,b.crossOrigin);i.d.m(v,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:E,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else i.d.m(v)},Un.requestFormReset=function(v){i.d.r(v)},Un.unstable_batchedUpdates=function(v,b){return v(b)},Un.useFormState=function(v,b,E){return f.H.useFormState(v,b,E)},Un.useFormStatus=function(){return f.H.useHostTransitionStatus()},Un.version="19.1.1",Un}var w_;function Kw(){if(w_)return hp.exports;w_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),hp.exports=$w(),hp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x_;function Yw(){if(x_)return yc;x_=1;var r=Qw(),e=nm(),n=Kw();function i(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function f(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function h(t){if(u(t)!==t)throw Error(i(188))}function v(t){var s=t.alternate;if(!s){if(s=u(t),s===null)throw Error(i(188));return s!==t?null:t}for(var a=t,c=s;;){var d=a.return;if(d===null)break;var g=d.alternate;if(g===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===a)return h(d),t;if(g===c)return h(d),s;g=g.sibling}throw Error(i(188))}if(a.return!==c.return)a=d,c=g;else{for(var S=!1,M=d.child;M;){if(M===a){S=!0,a=d,c=g;break}if(M===c){S=!0,c=d,a=g;break}M=M.sibling}if(!S){for(M=g.child;M;){if(M===a){S=!0,a=g,c=d;break}if(M===c){S=!0,c=g,a=d;break}M=M.sibling}if(!S)throw Error(i(189))}}if(a.alternate!==c)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?t:s}function b(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=b(t),s!==null)return s;t=t.sibling}return null}var E=Object.assign,j=Symbol.for("react.element"),z=Symbol.for("react.transitional.element"),ae=Symbol.for("react.portal"),re=Symbol.for("react.fragment"),ve=Symbol.for("react.strict_mode"),me=Symbol.for("react.profiler"),De=Symbol.for("react.provider"),ke=Symbol.for("react.consumer"),Pe=Symbol.for("react.context"),xe=Symbol.for("react.forward_ref"),ue=Symbol.for("react.suspense"),Re=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),H=Symbol.for("react.activity"),ne=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function le(t){return t===null||typeof t!="object"?null:(t=F&&t[F]||t["@@iterator"],typeof t=="function"?t:null)}var G=Symbol.for("react.client.reference");function gt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===G?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case re:return"Fragment";case me:return"Profiler";case ve:return"StrictMode";case ue:return"Suspense";case Re:return"SuspenseList";case H:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case ae:return"Portal";case Pe:return(t.displayName||"Context")+".Provider";case ke:return(t._context.displayName||"Context")+".Consumer";case xe:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case P:return s=t.displayName||null,s!==null?s:gt(t.type)||"Memo";case L:s=t._payload,t=t._init;try{return gt(t(s))}catch{}}return null}var Ct=Array.isArray,Ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Le=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ye={pending:!1,data:null,method:null,action:null},At=[],te=-1;function je(t){return{current:t}}function ze(t){0>te||(t.current=At[te],At[te]=null,te--)}function Ve(t,s){te++,At[te]=t.current,t.current=s}var Xe=je(null),_t=je(null),st=je(null),gn=je(null);function jt(t,s){switch(Ve(st,s),Ve(_t,t),Ve(Xe,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?F0(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=F0(s),t=H0(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ze(Xe),Ve(Xe,t)}function us(){ze(Xe),ze(_t),ze(st)}function Da(t){t.memoizedState!==null&&Ve(gn,t);var s=Xe.current,a=H0(s,t.type);s!==a&&(Ve(_t,t),Ve(Xe,a))}function Mi(t){_t.current===t&&(ze(Xe),ze(_t)),gn.current===t&&(ze(gn),hc._currentValue=Ye)}var Xs=Object.prototype.hasOwnProperty,Ns=r.unstable_scheduleCallback,Ws=r.unstable_cancelCallback,Tl=r.unstable_shouldYield,Xr=r.unstable_requestPaint,In=r.unstable_now,Oa=r.unstable_getCurrentPriorityLevel,Xt=r.unstable_ImmediatePriority,rn=r.unstable_UserBlockingPriority,Rs=r.unstable_NormalPriority,Ma=r.unstable_LowPriority,ji=r.unstable_IdlePriority,Eo=r.log,Sr=r.unstable_setDisableYieldValue,Cs=null,yn=null;function Jn(t){if(typeof Eo=="function"&&Sr(t),yn&&typeof yn.setStrictMode=="function")try{yn.setStrictMode(Cs,t)}catch{}}var Nn=Math.clz32?Math.clz32:ki,Al=Math.log,wo=Math.LN2;function ki(t){return t>>>=0,t===0?32:31-(Al(t)/wo|0)|0}var hs=256,Zs=4194304;function ds(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Hn(t,s,a){var c=t.pendingLanes;if(c===0)return 0;var d=0,g=t.suspendedLanes,S=t.pingedLanes;t=t.warmLanes;var M=c&134217727;return M!==0?(c=M&~g,c!==0?d=ds(c):(S&=M,S!==0?d=ds(S):a||(a=M&~t,a!==0&&(d=ds(a))))):(M=c&~g,M!==0?d=ds(M):S!==0?d=ds(S):a||(a=c&~t,a!==0&&(d=ds(a)))),d===0?0:s!==0&&s!==d&&(s&g)===0&&(g=d&-d,a=s&-s,g>=a||g===32&&(a&4194048)!==0)?s:d}function Ds(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function Wr(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ja(){var t=hs;return hs<<=1,(hs&4194048)===0&&(hs=256),t}function Os(){var t=Zs;return Zs<<=1,(Zs&62914560)===0&&(Zs=4194304),t}function Pi(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function Wt(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function ka(t,s,a,c,d,g){var S=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var M=t.entanglements,K=t.expirationTimes,pe=t.hiddenUpdates;for(a=S&~a;0<a;){var Ae=31-Nn(a),Ce=1<<Ae;M[Ae]=0,K[Ae]=-1;var ge=pe[Ae];if(ge!==null)for(pe[Ae]=null,Ae=0;Ae<ge.length;Ae++){var _e=ge[Ae];_e!==null&&(_e.lane&=-536870913)}a&=~Ce}c!==0&&Js(t,c,0),g!==0&&d===0&&t.tag!==0&&(t.suspendedLanes|=g&~(S&~s))}function Js(t,s,a){t.pendingLanes|=s,t.suspendedLanes&=~s;var c=31-Nn(s);t.entangledLanes|=s,t.entanglements[c]=t.entanglements[c]|1073741824|a&4194090}function er(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var c=31-Nn(a),d=1<<c;d&s|t[c]&s&&(t[c]|=s),a&=~d}}function Zr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function tr(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Gn(){var t=Le.p;return t!==0?t:(t=window.event,t===void 0?32:c_(t.type))}function Pa(t,s){var a=Le.p;try{return Le.p=t,s()}finally{Le.p=a}}var fs=Math.random().toString(36).slice(2),Zt="__reactFiber$"+fs,_n="__reactProps$"+fs,nr="__reactContainer$"+fs,Jr="__reactEvents$"+fs,Tr="__reactListeners$"+fs,xo="__reactHandles$"+fs,es="__reactResources$"+fs,Ar="__reactMarker$"+fs;function ei(t){delete t[Zt],delete t[_n],delete t[Jr],delete t[Tr],delete t[xo]}function Ms(t){var s=t[Zt];if(s)return s;for(var a=t.parentNode;a;){if(s=a[nr]||a[Zt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=K0(t);t!==null;){if(a=t[Zt])return a;t=K0(t)}return s}t=a,a=t.parentNode}return null}function js(t){if(t=t[Zt]||t[nr]){var s=t.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return t}return null}function sr(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(i(33))}function rr(t){var s=t[es];return s||(s=t[es]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Jt(t){t[Ar]=!0}var So=new Set,ti={};function ks(t,s){ps(t,s),ps(t+"Capture",s)}function ps(t,s){for(ti[t]=s,t=0;t<s.length;t++)So.add(s[t])}var ir=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ms={},ni={};function Il(t){return Xs.call(ni,t)?!0:Xs.call(ms,t)?!1:ir.test(t)?ni[t]=!0:(ms[t]=!0,!1)}function si(t,s,a){if(Il(s))if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+a)}}function Ir(t,s,a){if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+a)}}function Qn(t,s,a,c){if(c===null)t.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(s,a,""+c)}}var $n,ri;function ar(t){if($n===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);$n=s&&s[1]||"",ri=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$n+t+ri}var Nr=!1;function ii(t,s){if(!t||Nr)return"";Nr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var Ce=function(){throw Error()};if(Object.defineProperty(Ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ce,[])}catch(_e){var ge=_e}Reflect.construct(t,[],Ce)}else{try{Ce.call()}catch(_e){ge=_e}t.call(Ce.prototype)}}else{try{throw Error()}catch(_e){ge=_e}(Ce=t())&&typeof Ce.catch=="function"&&Ce.catch(function(){})}}catch(_e){if(_e&&ge&&typeof _e.stack=="string")return[_e.stack,ge.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),S=g[0],M=g[1];if(S&&M){var K=S.split(`
`),pe=M.split(`
`);for(d=c=0;c<K.length&&!K[c].includes("DetermineComponentFrameRoot");)c++;for(;d<pe.length&&!pe[d].includes("DetermineComponentFrameRoot");)d++;if(c===K.length||d===pe.length)for(c=K.length-1,d=pe.length-1;1<=c&&0<=d&&K[c]!==pe[d];)d--;for(;1<=c&&0<=d;c--,d--)if(K[c]!==pe[d]){if(c!==1||d!==1)do if(c--,d--,0>d||K[c]!==pe[d]){var Ae=`
`+K[c].replace(" at new "," at ");return t.displayName&&Ae.includes("<anonymous>")&&(Ae=Ae.replace("<anonymous>",t.displayName)),Ae}while(1<=c&&0<=d);break}}}finally{Nr=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?ar(a):""}function La(t){switch(t.tag){case 26:case 27:case 5:return ar(t.type);case 16:return ar("Lazy");case 13:return ar("Suspense");case 19:return ar("SuspenseList");case 0:case 15:return ii(t.type,!1);case 11:return ii(t.type.render,!1);case 1:return ii(t.type,!0);case 31:return ar("Activity");default:return""}}function ts(t){try{var s="";do s+=La(t),t=t.return;while(t);return s}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Kt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Kn(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Rr(t){var s=Kn(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),c=""+t[s];if(!t.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,g=a.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return d.call(this)},set:function(S){c=""+S,g.call(this,S)}}),Object.defineProperty(t,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(S){c=""+S},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function or(t){t._valueTracker||(t._valueTracker=Rr(t))}function Ot(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return t&&(c=Kn(t)?t.checked?"true":"false":t.value),t=c,t!==a?(s.setValue(t),!0):!1}function Ps(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ai=/[\n"\\]/g;function $(t){return t.replace(ai,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function D(t,s,a,c,d,g,S,M){t.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.type=S:t.removeAttribute("type"),s!=null?S==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+Kt(s)):t.value!==""+Kt(s)&&(t.value=""+Kt(s)):S!=="submit"&&S!=="reset"||t.removeAttribute("value"),s!=null?O(t,S,Kt(s)):a!=null?O(t,S,Kt(a)):c!=null&&t.removeAttribute("value"),d==null&&g!=null&&(t.defaultChecked=!!g),d!=null&&(t.checked=d&&typeof d!="function"&&typeof d!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?t.name=""+Kt(M):t.removeAttribute("name")}function C(t,s,a,c,d,g,S,M){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(t.type=g),s!=null||a!=null){if(!(g!=="submit"&&g!=="reset"||s!=null))return;a=a!=null?""+Kt(a):"",s=s!=null?""+Kt(s):a,M||s===t.value||(t.value=s),t.defaultValue=s}c=c??d,c=typeof c!="function"&&typeof c!="symbol"&&!!c,t.checked=M?t.checked:!!c,t.defaultChecked=!!c,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(t.name=S)}function O(t,s,a){s==="number"&&Ps(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function N(t,s,a,c){if(t=t.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<t.length;a++)d=s.hasOwnProperty("$"+t[a].value),t[a].selected!==d&&(t[a].selected=d),d&&c&&(t[a].defaultSelected=!0)}else{for(a=""+Kt(a),s=null,d=0;d<t.length;d++){if(t[d].value===a){t[d].selected=!0,c&&(t[d].defaultSelected=!0);return}s!==null||t[d].disabled||(s=t[d])}s!==null&&(s.selected=!0)}}function T(t,s,a){if(s!=null&&(s=""+Kt(s),s!==t.value&&(t.value=s),a==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=a!=null?""+Kt(a):""}function R(t,s,a,c){if(s==null){if(c!=null){if(a!=null)throw Error(i(92));if(Ct(c)){if(1<c.length)throw Error(i(93));c=c[0]}a=c}a==null&&(a=""),s=a}a=Kt(s),t.defaultValue=a,c=t.textContent,c===a&&c!==""&&c!==null&&(t.value=c)}function A(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var k=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Z(t,s,a){var c=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":c?t.setProperty(s,a):typeof a!="number"||a===0||k.has(s)?s==="float"?t.cssFloat=a:t[s]=(""+a).trim():t[s]=a+"px"}function q(t,s,a){if(s!=null&&typeof s!="object")throw Error(i(62));if(t=t.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?t.setProperty(c,""):c==="float"?t.cssFloat="":t[c]="");for(var d in s)c=s[d],s.hasOwnProperty(d)&&a[d]!==c&&Z(t,d,c)}else for(var g in s)s.hasOwnProperty(g)&&Z(t,g,s[g])}function Q(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var V=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Y=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function x(t){return Y.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var I=null;function U(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var J=null,ee=null;function ie(t){var s=js(t);if(s&&(t=s.stateNode)){var a=t[_n]||null;e:switch(t=s.stateNode,s.type){case"input":if(D(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+$(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==t&&c.form===t.form){var d=c[_n]||null;if(!d)throw Error(i(90));D(c,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<a.length;s++)c=a[s],c.form===t.form&&Ot(c)}break e;case"textarea":T(t,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&N(t,!!a.multiple,s,!1)}}}var be=!1;function Se(t,s,a){if(be)return t(s,a);be=!0;try{var c=t(s);return c}finally{if(be=!1,(J!==null||ee!==null)&&(Mu(),J&&(s=J,t=ee,ee=J=null,ie(s),t)))for(s=0;s<t.length;s++)ie(t[s])}}function W(t,s){var a=t.stateNode;if(a===null)return null;var c=a[_n]||null;if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(i(231,s,typeof a));return a}var he=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fe=!1;if(he)try{var se={};Object.defineProperty(se,"passive",{get:function(){fe=!0}}),window.addEventListener("test",se,se),window.removeEventListener("test",se,se)}catch{fe=!1}var we=null,ye=null,He=null;function Ke(){if(He)return He;var t,s=ye,a=s.length,c,d="value"in we?we.value:we.textContent,g=d.length;for(t=0;t<a&&s[t]===d[t];t++);var S=a-t;for(c=1;c<=S&&s[a-c]===d[g-c];c++);return He=d.slice(t,1<c?1-c:void 0)}function Te(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Ue(){return!0}function We(){return!1}function Qe(t){function s(a,c,d,g,S){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=g,this.target=S,this.currentTarget=null;for(var M in t)t.hasOwnProperty(M)&&(a=t[M],this[M]=a?a(g):g[M]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Ue:We,this.isPropagationStopped=We,this}return E(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ue)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ue)},persist:function(){},isPersistent:Ue}),s}var lt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vt=Qe(lt),Ht=E({},lt,{view:0,detail:0}),It=Qe(Ht),kt,Yn,Pn,gs=E({},Ht,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Us,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Pn&&(Pn&&t.type==="mousemove"?(kt=t.screenX-Pn.screenX,Yn=t.screenY-Pn.screenY):Yn=kt=0,Pn=t),kt)},movementY:function(t){return"movementY"in t?t.movementY:Yn}}),lr=Qe(gs),Va=E({},gs,{dataTransfer:0}),cr=Qe(Va),Ls=E({},Ht,{relatedTarget:0}),Cr=Qe(Ls),Ua=E({},lt,{animationName:0,elapsedTime:0,pseudoElement:0}),oi=Qe(Ua),ys=E({},lt,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ur=Qe(ys),Li=E({},lt,{data:0}),Vi=Qe(Li),li={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vs={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ba={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ui(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Ba[t])?!!s[t]:!1}function Us(){return Ui}var Ln=E({},Ht,{key:function(t){if(t.key){var s=li[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Te(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Vs[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Us,charCode:function(t){return t.type==="keypress"?Te(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Te(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),hr=Qe(Ln),Rn=E({},gs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xn=Qe(Rn),za=E({},Ht,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Us}),y=Qe(za),l=E({},lt,{propertyName:0,elapsedTime:0,pseudoElement:0}),p=Qe(l),_=E({},gs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),w=Qe(_),B=E({},lt,{newState:0,oldState:0}),X=Qe(B),Me=[9,13,27,32],$e=he&&"CompositionEvent"in window,rt=null;he&&"documentMode"in document&&(rt=document.documentMode);var Je=he&&"TextEvent"in window&&!rt,pt=he&&(!$e||rt&&8<rt&&11>=rt),_s=" ",Dr=!1;function dr(t,s){switch(t){case"keyup":return Me.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fr(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var pr=!1;function Nl(t,s){switch(t){case"compositionend":return fr(s);case"keypress":return s.which!==32?null:(Dr=!0,_s);case"textInput":return t=s.data,t===_s&&Dr?null:t;default:return null}}function mE(t,s){if(pr)return t==="compositionend"||!$e&&dr(t,s)?(t=Ke(),He=ye=we=null,pr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return pt&&s.locale!=="ko"?null:s.data;default:return null}}var gE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sg(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!gE[t.type]:s==="textarea"}function rg(t,s,a,c){J?ee?ee.push(c):ee=[c]:J=c,s=Uu(s,"onChange"),0<s.length&&(a=new vt("onChange","change",null,a,c),t.push({event:a,listeners:s}))}var Rl=null,Cl=null;function yE(t){V0(t,0)}function eu(t){var s=sr(t);if(Ot(s))return t}function ig(t,s){if(t==="change")return s}var ag=!1;if(he){var md;if(he){var gd="oninput"in document;if(!gd){var og=document.createElement("div");og.setAttribute("oninput","return;"),gd=typeof og.oninput=="function"}md=gd}else md=!1;ag=md&&(!document.documentMode||9<document.documentMode)}function lg(){Rl&&(Rl.detachEvent("onpropertychange",cg),Cl=Rl=null)}function cg(t){if(t.propertyName==="value"&&eu(Cl)){var s=[];rg(s,Cl,t,U(t)),Se(yE,s)}}function _E(t,s,a){t==="focusin"?(lg(),Rl=s,Cl=a,Rl.attachEvent("onpropertychange",cg)):t==="focusout"&&lg()}function vE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return eu(Cl)}function bE(t,s){if(t==="click")return eu(s)}function EE(t,s){if(t==="input"||t==="change")return eu(s)}function wE(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var vs=typeof Object.is=="function"?Object.is:wE;function Dl(t,s){if(vs(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!Xs.call(s,d)||!vs(t[d],s[d]))return!1}return!0}function ug(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hg(t,s){var a=ug(t);t=0;for(var c;a;){if(a.nodeType===3){if(c=t+a.textContent.length,t<=s&&c>=s)return{node:a,offset:s-t};t=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ug(a)}}function dg(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?dg(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function fg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=Ps(t.document);s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=Ps(t.document)}return s}function yd(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var xE=he&&"documentMode"in document&&11>=document.documentMode,To=null,_d=null,Ol=null,vd=!1;function pg(t,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;vd||To==null||To!==Ps(c)||(c=To,"selectionStart"in c&&yd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ol&&Dl(Ol,c)||(Ol=c,c=Uu(_d,"onSelect"),0<c.length&&(s=new vt("onSelect","select",null,s,a),t.push({event:s,listeners:c}),s.target=To)))}function qa(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var Ao={animationend:qa("Animation","AnimationEnd"),animationiteration:qa("Animation","AnimationIteration"),animationstart:qa("Animation","AnimationStart"),transitionrun:qa("Transition","TransitionRun"),transitionstart:qa("Transition","TransitionStart"),transitioncancel:qa("Transition","TransitionCancel"),transitionend:qa("Transition","TransitionEnd")},bd={},mg={};he&&(mg=document.createElement("div").style,"AnimationEvent"in window||(delete Ao.animationend.animation,delete Ao.animationiteration.animation,delete Ao.animationstart.animation),"TransitionEvent"in window||delete Ao.transitionend.transition);function Fa(t){if(bd[t])return bd[t];if(!Ao[t])return t;var s=Ao[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in mg)return bd[t]=s[a];return t}var gg=Fa("animationend"),yg=Fa("animationiteration"),_g=Fa("animationstart"),SE=Fa("transitionrun"),TE=Fa("transitionstart"),AE=Fa("transitioncancel"),vg=Fa("transitionend"),bg=new Map,Ed="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ed.push("scrollEnd");function mr(t,s){bg.set(t,s),ks(s,[t])}var Eg=new WeakMap;function Bs(t,s){if(typeof t=="object"&&t!==null){var a=Eg.get(t);return a!==void 0?a:(s={value:t,source:s,stack:ts(s)},Eg.set(t,s),s)}return{value:t,source:s,stack:ts(s)}}var zs=[],Io=0,wd=0;function tu(){for(var t=Io,s=wd=Io=0;s<t;){var a=zs[s];zs[s++]=null;var c=zs[s];zs[s++]=null;var d=zs[s];zs[s++]=null;var g=zs[s];if(zs[s++]=null,c!==null&&d!==null){var S=c.pending;S===null?d.next=d:(d.next=S.next,S.next=d),c.pending=d}g!==0&&wg(a,d,g)}}function nu(t,s,a,c){zs[Io++]=t,zs[Io++]=s,zs[Io++]=a,zs[Io++]=c,wd|=c,t.lanes|=c,t=t.alternate,t!==null&&(t.lanes|=c)}function xd(t,s,a,c){return nu(t,s,a,c),su(t)}function No(t,s){return nu(t,null,null,s),su(t)}function wg(t,s,a){t.lanes|=a;var c=t.alternate;c!==null&&(c.lanes|=a);for(var d=!1,g=t.return;g!==null;)g.childLanes|=a,c=g.alternate,c!==null&&(c.childLanes|=a),g.tag===22&&(t=g.stateNode,t===null||t._visibility&1||(d=!0)),t=g,g=g.return;return t.tag===3?(g=t.stateNode,d&&s!==null&&(d=31-Nn(a),t=g.hiddenUpdates,c=t[d],c===null?t[d]=[s]:c.push(s),s.lane=a|536870912),g):null}function su(t){if(50<sc)throw sc=0,Cf=null,Error(i(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var Ro={};function IE(t,s,a,c){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bs(t,s,a,c){return new IE(t,s,a,c)}function Sd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ci(t,s){var a=t.alternate;return a===null?(a=bs(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function xg(t,s){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,s=a.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function ru(t,s,a,c,d,g){var S=0;if(c=t,typeof t=="function")Sd(t)&&(S=1);else if(typeof t=="string")S=Rw(t,a,Xe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case H:return t=bs(31,a,s,d),t.elementType=H,t.lanes=g,t;case re:return Ha(a.children,d,g,s);case ve:S=8,d|=24;break;case me:return t=bs(12,a,s,d|2),t.elementType=me,t.lanes=g,t;case ue:return t=bs(13,a,s,d),t.elementType=ue,t.lanes=g,t;case Re:return t=bs(19,a,s,d),t.elementType=Re,t.lanes=g,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case De:case Pe:S=10;break e;case ke:S=9;break e;case xe:S=11;break e;case P:S=14;break e;case L:S=16,c=null;break e}S=29,a=Error(i(130,t===null?"null":typeof t,"")),c=null}return s=bs(S,a,s,d),s.elementType=t,s.type=c,s.lanes=g,s}function Ha(t,s,a,c){return t=bs(7,t,c,s),t.lanes=a,t}function Td(t,s,a){return t=bs(6,t,null,s),t.lanes=a,t}function Ad(t,s,a){return s=bs(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var Co=[],Do=0,iu=null,au=0,qs=[],Fs=0,Ga=null,ui=1,hi="";function Qa(t,s){Co[Do++]=au,Co[Do++]=iu,iu=t,au=s}function Sg(t,s,a){qs[Fs++]=ui,qs[Fs++]=hi,qs[Fs++]=Ga,Ga=t;var c=ui;t=hi;var d=32-Nn(c)-1;c&=~(1<<d),a+=1;var g=32-Nn(s)+d;if(30<g){var S=d-d%5;g=(c&(1<<S)-1).toString(32),c>>=S,d-=S,ui=1<<32-Nn(s)+d|a<<d|c,hi=g+t}else ui=1<<g|a<<d|c,hi=t}function Id(t){t.return!==null&&(Qa(t,1),Sg(t,1,0))}function Nd(t){for(;t===iu;)iu=Co[--Do],Co[Do]=null,au=Co[--Do],Co[Do]=null;for(;t===Ga;)Ga=qs[--Fs],qs[Fs]=null,hi=qs[--Fs],qs[Fs]=null,ui=qs[--Fs],qs[Fs]=null}var Wn=null,nn=null,Mt=!1,$a=null,Or=!1,Rd=Error(i(519));function Ka(t){var s=Error(i(418,""));throw kl(Bs(s,t)),Rd}function Tg(t){var s=t.stateNode,a=t.type,c=t.memoizedProps;switch(s[Zt]=t,s[_n]=c,a){case"dialog":wt("cancel",s),wt("close",s);break;case"iframe":case"object":case"embed":wt("load",s);break;case"video":case"audio":for(a=0;a<ic.length;a++)wt(ic[a],s);break;case"source":wt("error",s);break;case"img":case"image":case"link":wt("error",s),wt("load",s);break;case"details":wt("toggle",s);break;case"input":wt("invalid",s),C(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),or(s);break;case"select":wt("invalid",s);break;case"textarea":wt("invalid",s),R(s,c.value,c.defaultValue,c.children),or(s)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||c.suppressHydrationWarning===!0||q0(s.textContent,a)?(c.popover!=null&&(wt("beforetoggle",s),wt("toggle",s)),c.onScroll!=null&&wt("scroll",s),c.onScrollEnd!=null&&wt("scrollend",s),c.onClick!=null&&(s.onclick=Bu),s=!0):s=!1,s||Ka(t)}function Ag(t){for(Wn=t.return;Wn;)switch(Wn.tag){case 5:case 13:Or=!1;return;case 27:case 3:Or=!0;return;default:Wn=Wn.return}}function Ml(t){if(t!==Wn)return!1;if(!Mt)return Ag(t),Mt=!0,!1;var s=t.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Qf(t.type,t.memoizedProps)),a=!a),a&&nn&&Ka(t),Ag(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(s===0){nn=yr(t.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++;t=t.nextSibling}nn=null}}else s===27?(s=nn,ta(t.type)?(t=Xf,Xf=null,nn=t):nn=s):nn=Wn?yr(t.stateNode.nextSibling):null;return!0}function jl(){nn=Wn=null,Mt=!1}function Ig(){var t=$a;return t!==null&&(rs===null?rs=t:rs.push.apply(rs,t),$a=null),t}function kl(t){$a===null?$a=[t]:$a.push(t)}var Cd=je(null),Ya=null,di=null;function Bi(t,s,a){Ve(Cd,s._currentValue),s._currentValue=a}function fi(t){t._currentValue=Cd.current,ze(Cd)}function Dd(t,s,a){for(;t!==null;){var c=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),t===a)break;t=t.return}}function Od(t,s,a,c){var d=t.child;for(d!==null&&(d.return=t);d!==null;){var g=d.dependencies;if(g!==null){var S=d.child;g=g.firstContext;e:for(;g!==null;){var M=g;g=d;for(var K=0;K<s.length;K++)if(M.context===s[K]){g.lanes|=a,M=g.alternate,M!==null&&(M.lanes|=a),Dd(g.return,a,t),c||(S=null);break e}g=M.next}}else if(d.tag===18){if(S=d.return,S===null)throw Error(i(341));S.lanes|=a,g=S.alternate,g!==null&&(g.lanes|=a),Dd(S,a,t),S=null}else S=d.child;if(S!==null)S.return=d;else for(S=d;S!==null;){if(S===t){S=null;break}if(d=S.sibling,d!==null){d.return=S.return,S=d;break}S=S.return}d=S}}function Pl(t,s,a,c){t=null;for(var d=s,g=!1;d!==null;){if(!g){if((d.flags&524288)!==0)g=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var S=d.alternate;if(S===null)throw Error(i(387));if(S=S.memoizedProps,S!==null){var M=d.type;vs(d.pendingProps.value,S.value)||(t!==null?t.push(M):t=[M])}}else if(d===gn.current){if(S=d.alternate,S===null)throw Error(i(387));S.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(t!==null?t.push(hc):t=[hc])}d=d.return}t!==null&&Od(s,t,a,c),s.flags|=262144}function ou(t){for(t=t.firstContext;t!==null;){if(!vs(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Xa(t){Ya=t,di=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Vn(t){return Ng(Ya,t)}function lu(t,s){return Ya===null&&Xa(t),Ng(t,s)}function Ng(t,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},di===null){if(t===null)throw Error(i(308));di=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else di=di.next=s;return a}var NE=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(a,c){t.push(c)}};this.abort=function(){s.aborted=!0,t.forEach(function(a){return a()})}},RE=r.unstable_scheduleCallback,CE=r.unstable_NormalPriority,vn={$$typeof:Pe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Md(){return{controller:new NE,data:new Map,refCount:0}}function Ll(t){t.refCount--,t.refCount===0&&RE(CE,function(){t.controller.abort()})}var Vl=null,jd=0,Oo=0,Mo=null;function DE(t,s){if(Vl===null){var a=Vl=[];jd=0,Oo=Lf(),Mo={status:"pending",value:void 0,then:function(c){a.push(c)}}}return jd++,s.then(Rg,Rg),s}function Rg(){if(--jd===0&&Vl!==null){Mo!==null&&(Mo.status="fulfilled");var t=Vl;Vl=null,Oo=0,Mo=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function OE(t,s){var a=[],c={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return t.then(function(){c.status="fulfilled",c.value=s;for(var d=0;d<a.length;d++)(0,a[d])(s)},function(d){for(c.status="rejected",c.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),c}var Cg=Ee.S;Ee.S=function(t,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&DE(t,s),Cg!==null&&Cg(t,s)};var Wa=je(null);function kd(){var t=Wa.current;return t!==null?t:Qt.pooledCache}function cu(t,s){s===null?Ve(Wa,Wa.current):Ve(Wa,s.pool)}function Dg(){var t=kd();return t===null?null:{parent:vn._currentValue,pool:t}}var Ul=Error(i(460)),Og=Error(i(474)),uu=Error(i(542)),Pd={then:function(){}};function Mg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function hu(){}function jg(t,s,a){switch(a=t[a],a===void 0?t.push(s):a!==s&&(s.then(hu,hu),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Pg(t),t;default:if(typeof s.status=="string")s.then(hu,hu);else{if(t=Qt,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=s,t.status="pending",t.then(function(c){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=c}},function(c){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Pg(t),t}throw Bl=s,Ul}}var Bl=null;function kg(){if(Bl===null)throw Error(i(459));var t=Bl;return Bl=null,t}function Pg(t){if(t===Ul||t===uu)throw Error(i(483))}var zi=!1;function Ld(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Vd(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function qi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Fi(t,s,a){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(Lt&2)!==0){var d=c.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),c.pending=s,s=su(t),wg(t,null,a),s}return nu(t,c,s,a),su(t)}function zl(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var c=s.lanes;c&=t.pendingLanes,a|=c,s.lanes=a,er(t,a)}}function Ud(t,s){var a=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var S={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};g===null?d=g=S:g=g.next=S,a=a.next}while(a!==null);g===null?d=g=s:g=g.next=s}else d=g=s;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}var Bd=!1;function ql(){if(Bd){var t=Mo;if(t!==null)throw t}}function Fl(t,s,a,c){Bd=!1;var d=t.updateQueue;zi=!1;var g=d.firstBaseUpdate,S=d.lastBaseUpdate,M=d.shared.pending;if(M!==null){d.shared.pending=null;var K=M,pe=K.next;K.next=null,S===null?g=pe:S.next=pe,S=K;var Ae=t.alternate;Ae!==null&&(Ae=Ae.updateQueue,M=Ae.lastBaseUpdate,M!==S&&(M===null?Ae.firstBaseUpdate=pe:M.next=pe,Ae.lastBaseUpdate=K))}if(g!==null){var Ce=d.baseState;S=0,Ae=pe=K=null,M=g;do{var ge=M.lane&-536870913,_e=ge!==M.lane;if(_e?(Nt&ge)===ge:(c&ge)===ge){ge!==0&&ge===Oo&&(Bd=!0),Ae!==null&&(Ae=Ae.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});e:{var ct=t,tt=M;ge=s;var qt=a;switch(tt.tag){case 1:if(ct=tt.payload,typeof ct=="function"){Ce=ct.call(qt,Ce,ge);break e}Ce=ct;break e;case 3:ct.flags=ct.flags&-65537|128;case 0:if(ct=tt.payload,ge=typeof ct=="function"?ct.call(qt,Ce,ge):ct,ge==null)break e;Ce=E({},Ce,ge);break e;case 2:zi=!0}}ge=M.callback,ge!==null&&(t.flags|=64,_e&&(t.flags|=8192),_e=d.callbacks,_e===null?d.callbacks=[ge]:_e.push(ge))}else _e={lane:ge,tag:M.tag,payload:M.payload,callback:M.callback,next:null},Ae===null?(pe=Ae=_e,K=Ce):Ae=Ae.next=_e,S|=ge;if(M=M.next,M===null){if(M=d.shared.pending,M===null)break;_e=M,M=_e.next,_e.next=null,d.lastBaseUpdate=_e,d.shared.pending=null}}while(!0);Ae===null&&(K=Ce),d.baseState=K,d.firstBaseUpdate=pe,d.lastBaseUpdate=Ae,g===null&&(d.shared.lanes=0),Wi|=S,t.lanes=S,t.memoizedState=Ce}}function Lg(t,s){if(typeof t!="function")throw Error(i(191,t));t.call(s)}function Vg(t,s){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Lg(a[t],s)}var jo=je(null),du=je(0);function Ug(t,s){t=bi,Ve(du,t),Ve(jo,s),bi=t|s.baseLanes}function zd(){Ve(du,bi),Ve(jo,jo.current)}function qd(){bi=du.current,ze(jo),ze(du)}var Hi=0,yt=null,Bt=null,cn=null,fu=!1,ko=!1,Za=!1,pu=0,Hl=0,Po=null,ME=0;function an(){throw Error(i(321))}function Fd(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!vs(t[a],s[a]))return!1;return!0}function Hd(t,s,a,c,d,g){return Hi=g,yt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Ee.H=t===null||t.memoizedState===null?wy:xy,Za=!1,g=a(c,d),Za=!1,ko&&(g=zg(s,a,c,d)),Bg(t),g}function Bg(t){Ee.H=bu;var s=Bt!==null&&Bt.next!==null;if(Hi=0,cn=Bt=yt=null,fu=!1,Hl=0,Po=null,s)throw Error(i(300));t===null||xn||(t=t.dependencies,t!==null&&ou(t)&&(xn=!0))}function zg(t,s,a,c){yt=t;var d=0;do{if(ko&&(Po=null),Hl=0,ko=!1,25<=d)throw Error(i(301));if(d+=1,cn=Bt=null,t.updateQueue!=null){var g=t.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}Ee.H=BE,g=s(a,c)}while(ko);return g}function jE(){var t=Ee.H,s=t.useState()[0];return s=typeof s.then=="function"?Gl(s):s,t=t.useState()[0],(Bt!==null?Bt.memoizedState:null)!==t&&(yt.flags|=1024),s}function Gd(){var t=pu!==0;return pu=0,t}function Qd(t,s,a){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a}function $d(t){if(fu){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}fu=!1}Hi=0,cn=Bt=yt=null,ko=!1,Hl=pu=0,Po=null}function ns(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cn===null?yt.memoizedState=cn=t:cn=cn.next=t,cn}function un(){if(Bt===null){var t=yt.alternate;t=t!==null?t.memoizedState:null}else t=Bt.next;var s=cn===null?yt.memoizedState:cn.next;if(s!==null)cn=s,Bt=t;else{if(t===null)throw yt.alternate===null?Error(i(467)):Error(i(310));Bt=t,t={memoizedState:Bt.memoizedState,baseState:Bt.baseState,baseQueue:Bt.baseQueue,queue:Bt.queue,next:null},cn===null?yt.memoizedState=cn=t:cn=cn.next=t}return cn}function Kd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Gl(t){var s=Hl;return Hl+=1,Po===null&&(Po=[]),t=jg(Po,t,s),s=yt,(cn===null?s.memoizedState:cn.next)===null&&(s=s.alternate,Ee.H=s===null||s.memoizedState===null?wy:xy),t}function mu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Gl(t);if(t.$$typeof===Pe)return Vn(t)}throw Error(i(438,String(t)))}function Yd(t){var s=null,a=yt.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var c=yt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Kd(),yt.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(t),c=0;c<t;c++)a[c]=ne;return s.index++,a}function pi(t,s){return typeof s=="function"?s(t):s}function gu(t){var s=un();return Xd(s,Bt,t)}function Xd(t,s,a){var c=t.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=a;var d=t.baseQueue,g=c.pending;if(g!==null){if(d!==null){var S=d.next;d.next=g.next,g.next=S}s.baseQueue=d=g,c.pending=null}if(g=t.baseState,d===null)t.memoizedState=g;else{s=d.next;var M=S=null,K=null,pe=s,Ae=!1;do{var Ce=pe.lane&-536870913;if(Ce!==pe.lane?(Nt&Ce)===Ce:(Hi&Ce)===Ce){var ge=pe.revertLane;if(ge===0)K!==null&&(K=K.next={lane:0,revertLane:0,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null}),Ce===Oo&&(Ae=!0);else if((Hi&ge)===ge){pe=pe.next,ge===Oo&&(Ae=!0);continue}else Ce={lane:0,revertLane:pe.revertLane,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null},K===null?(M=K=Ce,S=g):K=K.next=Ce,yt.lanes|=ge,Wi|=ge;Ce=pe.action,Za&&a(g,Ce),g=pe.hasEagerState?pe.eagerState:a(g,Ce)}else ge={lane:Ce,revertLane:pe.revertLane,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null},K===null?(M=K=ge,S=g):K=K.next=ge,yt.lanes|=Ce,Wi|=Ce;pe=pe.next}while(pe!==null&&pe!==s);if(K===null?S=g:K.next=M,!vs(g,t.memoizedState)&&(xn=!0,Ae&&(a=Mo,a!==null)))throw a;t.memoizedState=g,t.baseState=S,t.baseQueue=K,c.lastRenderedState=g}return d===null&&(c.lanes=0),[t.memoizedState,c.dispatch]}function Wd(t){var s=un(),a=s.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=t;var c=a.dispatch,d=a.pending,g=s.memoizedState;if(d!==null){a.pending=null;var S=d=d.next;do g=t(g,S.action),S=S.next;while(S!==d);vs(g,s.memoizedState)||(xn=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),a.lastRenderedState=g}return[g,c]}function qg(t,s,a){var c=yt,d=un(),g=Mt;if(g){if(a===void 0)throw Error(i(407));a=a()}else a=s();var S=!vs((Bt||d).memoizedState,a);S&&(d.memoizedState=a,xn=!0),d=d.queue;var M=Gg.bind(null,c,d,t);if(Ql(2048,8,M,[t]),d.getSnapshot!==s||S||cn!==null&&cn.memoizedState.tag&1){if(c.flags|=2048,Lo(9,yu(),Hg.bind(null,c,d,a,s),null),Qt===null)throw Error(i(349));g||(Hi&124)!==0||Fg(c,s,a)}return a}function Fg(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=yt.updateQueue,s===null?(s=Kd(),yt.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function Hg(t,s,a,c){s.value=a,s.getSnapshot=c,Qg(s)&&$g(t)}function Gg(t,s,a){return a(function(){Qg(s)&&$g(t)})}function Qg(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!vs(t,a)}catch{return!0}}function $g(t){var s=No(t,2);s!==null&&Ts(s,t,2)}function Zd(t){var s=ns();if(typeof t=="function"){var a=t;if(t=a(),Za){Jn(!0);try{a()}finally{Jn(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:t},s}function Kg(t,s,a,c){return t.baseState=a,Xd(t,Bt,typeof c=="function"?c:pi)}function kE(t,s,a,c,d){if(vu(t))throw Error(i(485));if(t=s.action,t!==null){var g={payload:d,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){g.listeners.push(S)}};Ee.T!==null?a(!0):g.isTransition=!1,c(g),a=s.pending,a===null?(g.next=s.pending=g,Yg(s,g)):(g.next=a.next,s.pending=a.next=g)}}function Yg(t,s){var a=s.action,c=s.payload,d=t.state;if(s.isTransition){var g=Ee.T,S={};Ee.T=S;try{var M=a(d,c),K=Ee.S;K!==null&&K(S,M),Xg(t,s,M)}catch(pe){Jd(t,s,pe)}finally{Ee.T=g}}else try{g=a(d,c),Xg(t,s,g)}catch(pe){Jd(t,s,pe)}}function Xg(t,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){Wg(t,s,c)},function(c){return Jd(t,s,c)}):Wg(t,s,a)}function Wg(t,s,a){s.status="fulfilled",s.value=a,Zg(s),t.state=a,s=t.pending,s!==null&&(a=s.next,a===s?t.pending=null:(a=a.next,s.next=a,Yg(t,a)))}function Jd(t,s,a){var c=t.pending;if(t.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=a,Zg(s),s=s.next;while(s!==c)}t.action=null}function Zg(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function Jg(t,s){return s}function ey(t,s){if(Mt){var a=Qt.formState;if(a!==null){e:{var c=yt;if(Mt){if(nn){t:{for(var d=nn,g=Or;d.nodeType!==8;){if(!g){d=null;break t}if(d=yr(d.nextSibling),d===null){d=null;break t}}g=d.data,d=g==="F!"||g==="F"?d:null}if(d){nn=yr(d.nextSibling),c=d.data==="F!";break e}}Ka(c)}c=!1}c&&(s=a[0])}}return a=ns(),a.memoizedState=a.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jg,lastRenderedState:s},a.queue=c,a=vy.bind(null,yt,c),c.dispatch=a,c=Zd(!1),g=rf.bind(null,yt,!1,c.queue),c=ns(),d={state:s,dispatch:null,action:t,pending:null},c.queue=d,a=kE.bind(null,yt,d,g,a),d.dispatch=a,c.memoizedState=t,[s,a,!1]}function ty(t){var s=un();return ny(s,Bt,t)}function ny(t,s,a){if(s=Xd(t,s,Jg)[0],t=gu(pi)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=Gl(s)}catch(S){throw S===Ul?uu:S}else c=s;s=un();var d=s.queue,g=d.dispatch;return a!==s.memoizedState&&(yt.flags|=2048,Lo(9,yu(),PE.bind(null,d,a),null)),[c,g,t]}function PE(t,s){t.action=s}function sy(t){var s=un(),a=Bt;if(a!==null)return ny(s,a,t);un(),s=s.memoizedState,a=un();var c=a.queue.dispatch;return a.memoizedState=t,[s,c,!1]}function Lo(t,s,a,c){return t={tag:t,create:a,deps:c,inst:s,next:null},s=yt.updateQueue,s===null&&(s=Kd(),yt.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=t.next=t:(c=a.next,a.next=t,t.next=c,s.lastEffect=t),t}function yu(){return{destroy:void 0,resource:void 0}}function ry(){return un().memoizedState}function _u(t,s,a,c){var d=ns();c=c===void 0?null:c,yt.flags|=t,d.memoizedState=Lo(1|s,yu(),a,c)}function Ql(t,s,a,c){var d=un();c=c===void 0?null:c;var g=d.memoizedState.inst;Bt!==null&&c!==null&&Fd(c,Bt.memoizedState.deps)?d.memoizedState=Lo(s,g,a,c):(yt.flags|=t,d.memoizedState=Lo(1|s,g,a,c))}function iy(t,s){_u(8390656,8,t,s)}function ay(t,s){Ql(2048,8,t,s)}function oy(t,s){return Ql(4,2,t,s)}function ly(t,s){return Ql(4,4,t,s)}function cy(t,s){if(typeof s=="function"){t=t();var a=s(t);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function uy(t,s,a){a=a!=null?a.concat([t]):null,Ql(4,4,cy.bind(null,s,t),a)}function ef(){}function hy(t,s){var a=un();s=s===void 0?null:s;var c=a.memoizedState;return s!==null&&Fd(s,c[1])?c[0]:(a.memoizedState=[t,s],t)}function dy(t,s){var a=un();s=s===void 0?null:s;var c=a.memoizedState;if(s!==null&&Fd(s,c[1]))return c[0];if(c=t(),Za){Jn(!0);try{t()}finally{Jn(!1)}}return a.memoizedState=[c,s],c}function tf(t,s,a){return a===void 0||(Hi&1073741824)!==0?t.memoizedState=s:(t.memoizedState=a,t=m0(),yt.lanes|=t,Wi|=t,a)}function fy(t,s,a,c){return vs(a,s)?a:jo.current!==null?(t=tf(t,a,c),vs(t,s)||(xn=!0),t):(Hi&42)===0?(xn=!0,t.memoizedState=a):(t=m0(),yt.lanes|=t,Wi|=t,s)}function py(t,s,a,c,d){var g=Le.p;Le.p=g!==0&&8>g?g:8;var S=Ee.T,M={};Ee.T=M,rf(t,!1,s,a);try{var K=d(),pe=Ee.S;if(pe!==null&&pe(M,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var Ae=OE(K,c);$l(t,s,Ae,Ss(t))}else $l(t,s,c,Ss(t))}catch(Ce){$l(t,s,{then:function(){},status:"rejected",reason:Ce},Ss())}finally{Le.p=g,Ee.T=S}}function LE(){}function nf(t,s,a,c){if(t.tag!==5)throw Error(i(476));var d=my(t).queue;py(t,d,s,Ye,a===null?LE:function(){return gy(t),a(c)})}function my(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:Ye,baseState:Ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:Ye},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:a},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function gy(t){var s=my(t).next.queue;$l(t,s,{},Ss())}function sf(){return Vn(hc)}function yy(){return un().memoizedState}function _y(){return un().memoizedState}function VE(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var a=Ss();t=qi(a);var c=Fi(s,t,a);c!==null&&(Ts(c,s,a),zl(c,s,a)),s={cache:Md()},t.payload=s;return}s=s.return}}function UE(t,s,a){var c=Ss();a={lane:c,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},vu(t)?by(s,a):(a=xd(t,s,a,c),a!==null&&(Ts(a,t,c),Ey(a,s,c)))}function vy(t,s,a){var c=Ss();$l(t,s,a,c)}function $l(t,s,a,c){var d={lane:c,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(vu(t))by(s,d);else{var g=t.alternate;if(t.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var S=s.lastRenderedState,M=g(S,a);if(d.hasEagerState=!0,d.eagerState=M,vs(M,S))return nu(t,s,d,0),Qt===null&&tu(),!1}catch{}finally{}if(a=xd(t,s,d,c),a!==null)return Ts(a,t,c),Ey(a,s,c),!0}return!1}function rf(t,s,a,c){if(c={lane:2,revertLane:Lf(),action:c,hasEagerState:!1,eagerState:null,next:null},vu(t)){if(s)throw Error(i(479))}else s=xd(t,a,c,2),s!==null&&Ts(s,t,2)}function vu(t){var s=t.alternate;return t===yt||s!==null&&s===yt}function by(t,s){ko=fu=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function Ey(t,s,a){if((a&4194048)!==0){var c=s.lanes;c&=t.pendingLanes,a|=c,s.lanes=a,er(t,a)}}var bu={readContext:Vn,use:mu,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useLayoutEffect:an,useInsertionEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useSyncExternalStore:an,useId:an,useHostTransitionStatus:an,useFormState:an,useActionState:an,useOptimistic:an,useMemoCache:an,useCacheRefresh:an},wy={readContext:Vn,use:mu,useCallback:function(t,s){return ns().memoizedState=[t,s===void 0?null:s],t},useContext:Vn,useEffect:iy,useImperativeHandle:function(t,s,a){a=a!=null?a.concat([t]):null,_u(4194308,4,cy.bind(null,s,t),a)},useLayoutEffect:function(t,s){return _u(4194308,4,t,s)},useInsertionEffect:function(t,s){_u(4,2,t,s)},useMemo:function(t,s){var a=ns();s=s===void 0?null:s;var c=t();if(Za){Jn(!0);try{t()}finally{Jn(!1)}}return a.memoizedState=[c,s],c},useReducer:function(t,s,a){var c=ns();if(a!==void 0){var d=a(s);if(Za){Jn(!0);try{a(s)}finally{Jn(!1)}}}else d=s;return c.memoizedState=c.baseState=d,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:d},c.queue=t,t=t.dispatch=UE.bind(null,yt,t),[c.memoizedState,t]},useRef:function(t){var s=ns();return t={current:t},s.memoizedState=t},useState:function(t){t=Zd(t);var s=t.queue,a=vy.bind(null,yt,s);return s.dispatch=a,[t.memoizedState,a]},useDebugValue:ef,useDeferredValue:function(t,s){var a=ns();return tf(a,t,s)},useTransition:function(){var t=Zd(!1);return t=py.bind(null,yt,t.queue,!0,!1),ns().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,a){var c=yt,d=ns();if(Mt){if(a===void 0)throw Error(i(407));a=a()}else{if(a=s(),Qt===null)throw Error(i(349));(Nt&124)!==0||Fg(c,s,a)}d.memoizedState=a;var g={value:a,getSnapshot:s};return d.queue=g,iy(Gg.bind(null,c,g,t),[t]),c.flags|=2048,Lo(9,yu(),Hg.bind(null,c,g,a,s),null),a},useId:function(){var t=ns(),s=Qt.identifierPrefix;if(Mt){var a=hi,c=ui;a=(c&~(1<<32-Nn(c)-1)).toString(32)+a,s=""+s+"R"+a,a=pu++,0<a&&(s+="H"+a.toString(32)),s+=""}else a=ME++,s=""+s+"r"+a.toString(32)+"";return t.memoizedState=s},useHostTransitionStatus:sf,useFormState:ey,useActionState:ey,useOptimistic:function(t){var s=ns();s.memoizedState=s.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=rf.bind(null,yt,!0,a),a.dispatch=s,[t,s]},useMemoCache:Yd,useCacheRefresh:function(){return ns().memoizedState=VE.bind(null,yt)}},xy={readContext:Vn,use:mu,useCallback:hy,useContext:Vn,useEffect:ay,useImperativeHandle:uy,useInsertionEffect:oy,useLayoutEffect:ly,useMemo:dy,useReducer:gu,useRef:ry,useState:function(){return gu(pi)},useDebugValue:ef,useDeferredValue:function(t,s){var a=un();return fy(a,Bt.memoizedState,t,s)},useTransition:function(){var t=gu(pi)[0],s=un().memoizedState;return[typeof t=="boolean"?t:Gl(t),s]},useSyncExternalStore:qg,useId:yy,useHostTransitionStatus:sf,useFormState:ty,useActionState:ty,useOptimistic:function(t,s){var a=un();return Kg(a,Bt,t,s)},useMemoCache:Yd,useCacheRefresh:_y},BE={readContext:Vn,use:mu,useCallback:hy,useContext:Vn,useEffect:ay,useImperativeHandle:uy,useInsertionEffect:oy,useLayoutEffect:ly,useMemo:dy,useReducer:Wd,useRef:ry,useState:function(){return Wd(pi)},useDebugValue:ef,useDeferredValue:function(t,s){var a=un();return Bt===null?tf(a,t,s):fy(a,Bt.memoizedState,t,s)},useTransition:function(){var t=Wd(pi)[0],s=un().memoizedState;return[typeof t=="boolean"?t:Gl(t),s]},useSyncExternalStore:qg,useId:yy,useHostTransitionStatus:sf,useFormState:sy,useActionState:sy,useOptimistic:function(t,s){var a=un();return Bt!==null?Kg(a,Bt,t,s):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Yd,useCacheRefresh:_y},Vo=null,Kl=0;function Eu(t){var s=Kl;return Kl+=1,Vo===null&&(Vo=[]),jg(Vo,t,s)}function Yl(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function wu(t,s){throw s.$$typeof===j?Error(i(525)):(t=Object.prototype.toString.call(s),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function Sy(t){var s=t._init;return s(t._payload)}function Ty(t){function s(ce,oe){if(t){var de=ce.deletions;de===null?(ce.deletions=[oe],ce.flags|=16):de.push(oe)}}function a(ce,oe){if(!t)return null;for(;oe!==null;)s(ce,oe),oe=oe.sibling;return null}function c(ce){for(var oe=new Map;ce!==null;)ce.key!==null?oe.set(ce.key,ce):oe.set(ce.index,ce),ce=ce.sibling;return oe}function d(ce,oe){return ce=ci(ce,oe),ce.index=0,ce.sibling=null,ce}function g(ce,oe,de){return ce.index=de,t?(de=ce.alternate,de!==null?(de=de.index,de<oe?(ce.flags|=67108866,oe):de):(ce.flags|=67108866,oe)):(ce.flags|=1048576,oe)}function S(ce){return t&&ce.alternate===null&&(ce.flags|=67108866),ce}function M(ce,oe,de,Ie){return oe===null||oe.tag!==6?(oe=Td(de,ce.mode,Ie),oe.return=ce,oe):(oe=d(oe,de),oe.return=ce,oe)}function K(ce,oe,de,Ie){var Ge=de.type;return Ge===re?Ae(ce,oe,de.props.children,Ie,de.key):oe!==null&&(oe.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===L&&Sy(Ge)===oe.type)?(oe=d(oe,de.props),Yl(oe,de),oe.return=ce,oe):(oe=ru(de.type,de.key,de.props,null,ce.mode,Ie),Yl(oe,de),oe.return=ce,oe)}function pe(ce,oe,de,Ie){return oe===null||oe.tag!==4||oe.stateNode.containerInfo!==de.containerInfo||oe.stateNode.implementation!==de.implementation?(oe=Ad(de,ce.mode,Ie),oe.return=ce,oe):(oe=d(oe,de.children||[]),oe.return=ce,oe)}function Ae(ce,oe,de,Ie,Ge){return oe===null||oe.tag!==7?(oe=Ha(de,ce.mode,Ie,Ge),oe.return=ce,oe):(oe=d(oe,de),oe.return=ce,oe)}function Ce(ce,oe,de){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return oe=Td(""+oe,ce.mode,de),oe.return=ce,oe;if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case z:return de=ru(oe.type,oe.key,oe.props,null,ce.mode,de),Yl(de,oe),de.return=ce,de;case ae:return oe=Ad(oe,ce.mode,de),oe.return=ce,oe;case L:var Ie=oe._init;return oe=Ie(oe._payload),Ce(ce,oe,de)}if(Ct(oe)||le(oe))return oe=Ha(oe,ce.mode,de,null),oe.return=ce,oe;if(typeof oe.then=="function")return Ce(ce,Eu(oe),de);if(oe.$$typeof===Pe)return Ce(ce,lu(ce,oe),de);wu(ce,oe)}return null}function ge(ce,oe,de,Ie){var Ge=oe!==null?oe.key:null;if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return Ge!==null?null:M(ce,oe,""+de,Ie);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case z:return de.key===Ge?K(ce,oe,de,Ie):null;case ae:return de.key===Ge?pe(ce,oe,de,Ie):null;case L:return Ge=de._init,de=Ge(de._payload),ge(ce,oe,de,Ie)}if(Ct(de)||le(de))return Ge!==null?null:Ae(ce,oe,de,Ie,null);if(typeof de.then=="function")return ge(ce,oe,Eu(de),Ie);if(de.$$typeof===Pe)return ge(ce,oe,lu(ce,de),Ie);wu(ce,de)}return null}function _e(ce,oe,de,Ie,Ge){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint")return ce=ce.get(de)||null,M(oe,ce,""+Ie,Ge);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case z:return ce=ce.get(Ie.key===null?de:Ie.key)||null,K(oe,ce,Ie,Ge);case ae:return ce=ce.get(Ie.key===null?de:Ie.key)||null,pe(oe,ce,Ie,Ge);case L:var bt=Ie._init;return Ie=bt(Ie._payload),_e(ce,oe,de,Ie,Ge)}if(Ct(Ie)||le(Ie))return ce=ce.get(de)||null,Ae(oe,ce,Ie,Ge,null);if(typeof Ie.then=="function")return _e(ce,oe,de,Eu(Ie),Ge);if(Ie.$$typeof===Pe)return _e(ce,oe,de,lu(oe,Ie),Ge);wu(oe,Ie)}return null}function ct(ce,oe,de,Ie){for(var Ge=null,bt=null,Ze=oe,it=oe=0,Tn=null;Ze!==null&&it<de.length;it++){Ze.index>it?(Tn=Ze,Ze=null):Tn=Ze.sibling;var Dt=ge(ce,Ze,de[it],Ie);if(Dt===null){Ze===null&&(Ze=Tn);break}t&&Ze&&Dt.alternate===null&&s(ce,Ze),oe=g(Dt,oe,it),bt===null?Ge=Dt:bt.sibling=Dt,bt=Dt,Ze=Tn}if(it===de.length)return a(ce,Ze),Mt&&Qa(ce,it),Ge;if(Ze===null){for(;it<de.length;it++)Ze=Ce(ce,de[it],Ie),Ze!==null&&(oe=g(Ze,oe,it),bt===null?Ge=Ze:bt.sibling=Ze,bt=Ze);return Mt&&Qa(ce,it),Ge}for(Ze=c(Ze);it<de.length;it++)Tn=_e(Ze,ce,it,de[it],Ie),Tn!==null&&(t&&Tn.alternate!==null&&Ze.delete(Tn.key===null?it:Tn.key),oe=g(Tn,oe,it),bt===null?Ge=Tn:bt.sibling=Tn,bt=Tn);return t&&Ze.forEach(function(aa){return s(ce,aa)}),Mt&&Qa(ce,it),Ge}function tt(ce,oe,de,Ie){if(de==null)throw Error(i(151));for(var Ge=null,bt=null,Ze=oe,it=oe=0,Tn=null,Dt=de.next();Ze!==null&&!Dt.done;it++,Dt=de.next()){Ze.index>it?(Tn=Ze,Ze=null):Tn=Ze.sibling;var aa=ge(ce,Ze,Dt.value,Ie);if(aa===null){Ze===null&&(Ze=Tn);break}t&&Ze&&aa.alternate===null&&s(ce,Ze),oe=g(aa,oe,it),bt===null?Ge=aa:bt.sibling=aa,bt=aa,Ze=Tn}if(Dt.done)return a(ce,Ze),Mt&&Qa(ce,it),Ge;if(Ze===null){for(;!Dt.done;it++,Dt=de.next())Dt=Ce(ce,Dt.value,Ie),Dt!==null&&(oe=g(Dt,oe,it),bt===null?Ge=Dt:bt.sibling=Dt,bt=Dt);return Mt&&Qa(ce,it),Ge}for(Ze=c(Ze);!Dt.done;it++,Dt=de.next())Dt=_e(Ze,ce,it,Dt.value,Ie),Dt!==null&&(t&&Dt.alternate!==null&&Ze.delete(Dt.key===null?it:Dt.key),oe=g(Dt,oe,it),bt===null?Ge=Dt:bt.sibling=Dt,bt=Dt);return t&&Ze.forEach(function(zw){return s(ce,zw)}),Mt&&Qa(ce,it),Ge}function qt(ce,oe,de,Ie){if(typeof de=="object"&&de!==null&&de.type===re&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case z:e:{for(var Ge=de.key;oe!==null;){if(oe.key===Ge){if(Ge=de.type,Ge===re){if(oe.tag===7){a(ce,oe.sibling),Ie=d(oe,de.props.children),Ie.return=ce,ce=Ie;break e}}else if(oe.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===L&&Sy(Ge)===oe.type){a(ce,oe.sibling),Ie=d(oe,de.props),Yl(Ie,de),Ie.return=ce,ce=Ie;break e}a(ce,oe);break}else s(ce,oe);oe=oe.sibling}de.type===re?(Ie=Ha(de.props.children,ce.mode,Ie,de.key),Ie.return=ce,ce=Ie):(Ie=ru(de.type,de.key,de.props,null,ce.mode,Ie),Yl(Ie,de),Ie.return=ce,ce=Ie)}return S(ce);case ae:e:{for(Ge=de.key;oe!==null;){if(oe.key===Ge)if(oe.tag===4&&oe.stateNode.containerInfo===de.containerInfo&&oe.stateNode.implementation===de.implementation){a(ce,oe.sibling),Ie=d(oe,de.children||[]),Ie.return=ce,ce=Ie;break e}else{a(ce,oe);break}else s(ce,oe);oe=oe.sibling}Ie=Ad(de,ce.mode,Ie),Ie.return=ce,ce=Ie}return S(ce);case L:return Ge=de._init,de=Ge(de._payload),qt(ce,oe,de,Ie)}if(Ct(de))return ct(ce,oe,de,Ie);if(le(de)){if(Ge=le(de),typeof Ge!="function")throw Error(i(150));return de=Ge.call(de),tt(ce,oe,de,Ie)}if(typeof de.then=="function")return qt(ce,oe,Eu(de),Ie);if(de.$$typeof===Pe)return qt(ce,oe,lu(ce,de),Ie);wu(ce,de)}return typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint"?(de=""+de,oe!==null&&oe.tag===6?(a(ce,oe.sibling),Ie=d(oe,de),Ie.return=ce,ce=Ie):(a(ce,oe),Ie=Td(de,ce.mode,Ie),Ie.return=ce,ce=Ie),S(ce)):a(ce,oe)}return function(ce,oe,de,Ie){try{Kl=0;var Ge=qt(ce,oe,de,Ie);return Vo=null,Ge}catch(Ze){if(Ze===Ul||Ze===uu)throw Ze;var bt=bs(29,Ze,null,ce.mode);return bt.lanes=Ie,bt.return=ce,bt}finally{}}}var Uo=Ty(!0),Ay=Ty(!1),Hs=je(null),Mr=null;function Gi(t){var s=t.alternate;Ve(bn,bn.current&1),Ve(Hs,t),Mr===null&&(s===null||jo.current!==null||s.memoizedState!==null)&&(Mr=t)}function Iy(t){if(t.tag===22){if(Ve(bn,bn.current),Ve(Hs,t),Mr===null){var s=t.alternate;s!==null&&s.memoizedState!==null&&(Mr=t)}}else Qi()}function Qi(){Ve(bn,bn.current),Ve(Hs,Hs.current)}function mi(t){ze(Hs),Mr===t&&(Mr=null),ze(bn)}var bn=je(0);function xu(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Yf(a)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function af(t,s,a,c){s=t.memoizedState,a=a(c,s),a=a==null?s:E({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var of={enqueueSetState:function(t,s,a){t=t._reactInternals;var c=Ss(),d=qi(c);d.payload=s,a!=null&&(d.callback=a),s=Fi(t,d,c),s!==null&&(Ts(s,t,c),zl(s,t,c))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var c=Ss(),d=qi(c);d.tag=1,d.payload=s,a!=null&&(d.callback=a),s=Fi(t,d,c),s!==null&&(Ts(s,t,c),zl(s,t,c))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=Ss(),c=qi(a);c.tag=2,s!=null&&(c.callback=s),s=Fi(t,c,a),s!==null&&(Ts(s,t,a),zl(s,t,a))}};function Ny(t,s,a,c,d,g,S){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,g,S):s.prototype&&s.prototype.isPureReactComponent?!Dl(a,c)||!Dl(d,g):!0}function Ry(t,s,a,c){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==t&&of.enqueueReplaceState(s,s.state,null)}function Ja(t,s){var a=s;if("ref"in s){a={};for(var c in s)c!=="ref"&&(a[c]=s[c])}if(t=t.defaultProps){a===s&&(a=E({},a));for(var d in t)a[d]===void 0&&(a[d]=t[d])}return a}var Su=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Cy(t){Su(t)}function Dy(t){console.error(t)}function Oy(t){Su(t)}function Tu(t,s){try{var a=t.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function My(t,s,a){try{var c=t.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function lf(t,s,a){return a=qi(a),a.tag=3,a.payload={element:null},a.callback=function(){Tu(t,s)},a}function jy(t){return t=qi(t),t.tag=3,t}function ky(t,s,a,c){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var g=c.value;t.payload=function(){return d(g)},t.callback=function(){My(s,a,c)}}var S=a.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(t.callback=function(){My(s,a,c),typeof d!="function"&&(Zi===null?Zi=new Set([this]):Zi.add(this));var M=c.stack;this.componentDidCatch(c.value,{componentStack:M!==null?M:""})})}function zE(t,s,a,c,d){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=a.alternate,s!==null&&Pl(s,a,d,!0),a=Hs.current,a!==null){switch(a.tag){case 13:return Mr===null?Of():a.alternate===null&&sn===0&&(sn=3),a.flags&=-257,a.flags|=65536,a.lanes=d,c===Pd?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([c]):s.add(c),jf(t,c,d)),!1;case 22:return a.flags|=65536,c===Pd?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([c]):a.add(c)),jf(t,c,d)),!1}throw Error(i(435,a.tag))}return jf(t,c,d),Of(),!1}if(Mt)return s=Hs.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,c!==Rd&&(t=Error(i(422),{cause:c}),kl(Bs(t,a)))):(c!==Rd&&(s=Error(i(423),{cause:c}),kl(Bs(s,a))),t=t.current.alternate,t.flags|=65536,d&=-d,t.lanes|=d,c=Bs(c,a),d=lf(t.stateNode,c,d),Ud(t,d),sn!==4&&(sn=2)),!1;var g=Error(i(520),{cause:c});if(g=Bs(g,a),nc===null?nc=[g]:nc.push(g),sn!==4&&(sn=2),s===null)return!0;c=Bs(c,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,t=d&-d,a.lanes|=t,t=lf(a.stateNode,c,t),Ud(a,t),!1;case 1:if(s=a.type,g=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Zi===null||!Zi.has(g))))return a.flags|=65536,d&=-d,a.lanes|=d,d=jy(d),ky(d,t,a,c),Ud(a,d),!1}a=a.return}while(a!==null);return!1}var Py=Error(i(461)),xn=!1;function Cn(t,s,a,c){s.child=t===null?Ay(s,null,a,c):Uo(s,t.child,a,c)}function Ly(t,s,a,c,d){a=a.render;var g=s.ref;if("ref"in c){var S={};for(var M in c)M!=="ref"&&(S[M]=c[M])}else S=c;return Xa(s),c=Hd(t,s,a,S,g,d),M=Gd(),t!==null&&!xn?(Qd(t,s,d),gi(t,s,d)):(Mt&&M&&Id(s),s.flags|=1,Cn(t,s,c,d),s.child)}function Vy(t,s,a,c,d){if(t===null){var g=a.type;return typeof g=="function"&&!Sd(g)&&g.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=g,Uy(t,s,g,c,d)):(t=ru(a.type,null,c,s,s.mode,d),t.ref=s.ref,t.return=s,s.child=t)}if(g=t.child,!gf(t,d)){var S=g.memoizedProps;if(a=a.compare,a=a!==null?a:Dl,a(S,c)&&t.ref===s.ref)return gi(t,s,d)}return s.flags|=1,t=ci(g,c),t.ref=s.ref,t.return=s,s.child=t}function Uy(t,s,a,c,d){if(t!==null){var g=t.memoizedProps;if(Dl(g,c)&&t.ref===s.ref)if(xn=!1,s.pendingProps=c=g,gf(t,d))(t.flags&131072)!==0&&(xn=!0);else return s.lanes=t.lanes,gi(t,s,d)}return cf(t,s,a,c,d)}function By(t,s,a){var c=s.pendingProps,d=c.children,g=t!==null?t.memoizedState:null;if(c.mode==="hidden"){if((s.flags&128)!==0){if(c=g!==null?g.baseLanes|a:a,t!==null){for(d=s.child=t.child,g=0;d!==null;)g=g|d.lanes|d.childLanes,d=d.sibling;s.childLanes=g&~c}else s.childLanes=0,s.child=null;return zy(t,s,c,a)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&cu(s,g!==null?g.cachePool:null),g!==null?Ug(s,g):zd(),Iy(s);else return s.lanes=s.childLanes=536870912,zy(t,s,g!==null?g.baseLanes|a:a,a)}else g!==null?(cu(s,g.cachePool),Ug(s,g),Qi(),s.memoizedState=null):(t!==null&&cu(s,null),zd(),Qi());return Cn(t,s,d,a),s.child}function zy(t,s,a,c){var d=kd();return d=d===null?null:{parent:vn._currentValue,pool:d},s.memoizedState={baseLanes:a,cachePool:d},t!==null&&cu(s,null),zd(),Iy(s),t!==null&&Pl(t,s,c,!0),null}function Au(t,s){var a=s.ref;if(a===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(t===null||t.ref!==a)&&(s.flags|=4194816)}}function cf(t,s,a,c,d){return Xa(s),a=Hd(t,s,a,c,void 0,d),c=Gd(),t!==null&&!xn?(Qd(t,s,d),gi(t,s,d)):(Mt&&c&&Id(s),s.flags|=1,Cn(t,s,a,d),s.child)}function qy(t,s,a,c,d,g){return Xa(s),s.updateQueue=null,a=zg(s,c,a,d),Bg(t),c=Gd(),t!==null&&!xn?(Qd(t,s,g),gi(t,s,g)):(Mt&&c&&Id(s),s.flags|=1,Cn(t,s,a,g),s.child)}function Fy(t,s,a,c,d){if(Xa(s),s.stateNode===null){var g=Ro,S=a.contextType;typeof S=="object"&&S!==null&&(g=Vn(S)),g=new a(c,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=of,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=c,g.state=s.memoizedState,g.refs={},Ld(s),S=a.contextType,g.context=typeof S=="object"&&S!==null?Vn(S):Ro,g.state=s.memoizedState,S=a.getDerivedStateFromProps,typeof S=="function"&&(af(s,a,S,c),g.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(S=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),S!==g.state&&of.enqueueReplaceState(g,g.state,null),Fl(s,c,g,d),ql(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(t===null){g=s.stateNode;var M=s.memoizedProps,K=Ja(a,M);g.props=K;var pe=g.context,Ae=a.contextType;S=Ro,typeof Ae=="object"&&Ae!==null&&(S=Vn(Ae));var Ce=a.getDerivedStateFromProps;Ae=typeof Ce=="function"||typeof g.getSnapshotBeforeUpdate=="function",M=s.pendingProps!==M,Ae||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(M||pe!==S)&&Ry(s,g,c,S),zi=!1;var ge=s.memoizedState;g.state=ge,Fl(s,c,g,d),ql(),pe=s.memoizedState,M||ge!==pe||zi?(typeof Ce=="function"&&(af(s,a,Ce,c),pe=s.memoizedState),(K=zi||Ny(s,a,K,c,ge,pe,S))?(Ae||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=pe),g.props=c,g.state=pe,g.context=S,c=K):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{g=s.stateNode,Vd(t,s),S=s.memoizedProps,Ae=Ja(a,S),g.props=Ae,Ce=s.pendingProps,ge=g.context,pe=a.contextType,K=Ro,typeof pe=="object"&&pe!==null&&(K=Vn(pe)),M=a.getDerivedStateFromProps,(pe=typeof M=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(S!==Ce||ge!==K)&&Ry(s,g,c,K),zi=!1,ge=s.memoizedState,g.state=ge,Fl(s,c,g,d),ql();var _e=s.memoizedState;S!==Ce||ge!==_e||zi||t!==null&&t.dependencies!==null&&ou(t.dependencies)?(typeof M=="function"&&(af(s,a,M,c),_e=s.memoizedState),(Ae=zi||Ny(s,a,Ae,c,ge,_e,K)||t!==null&&t.dependencies!==null&&ou(t.dependencies))?(pe||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,_e,K),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,_e,K)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||S===t.memoizedProps&&ge===t.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||S===t.memoizedProps&&ge===t.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=_e),g.props=c,g.state=_e,g.context=K,c=Ae):(typeof g.componentDidUpdate!="function"||S===t.memoizedProps&&ge===t.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||S===t.memoizedProps&&ge===t.memoizedState||(s.flags|=1024),c=!1)}return g=c,Au(t,s),c=(s.flags&128)!==0,g||c?(g=s.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,t!==null&&c?(s.child=Uo(s,t.child,null,d),s.child=Uo(s,null,a,d)):Cn(t,s,a,d),s.memoizedState=g.state,t=s.child):t=gi(t,s,d),t}function Hy(t,s,a,c){return jl(),s.flags|=256,Cn(t,s,a,c),s.child}var uf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hf(t){return{baseLanes:t,cachePool:Dg()}}function df(t,s,a){return t=t!==null?t.childLanes&~a:0,s&&(t|=Gs),t}function Gy(t,s,a){var c=s.pendingProps,d=!1,g=(s.flags&128)!==0,S;if((S=g)||(S=t!==null&&t.memoizedState===null?!1:(bn.current&2)!==0),S&&(d=!0,s.flags&=-129),S=(s.flags&32)!==0,s.flags&=-33,t===null){if(Mt){if(d?Gi(s):Qi(),Mt){var M=nn,K;if(K=M){e:{for(K=M,M=Or;K.nodeType!==8;){if(!M){M=null;break e}if(K=yr(K.nextSibling),K===null){M=null;break e}}M=K}M!==null?(s.memoizedState={dehydrated:M,treeContext:Ga!==null?{id:ui,overflow:hi}:null,retryLane:536870912,hydrationErrors:null},K=bs(18,null,null,0),K.stateNode=M,K.return=s,s.child=K,Wn=s,nn=null,K=!0):K=!1}K||Ka(s)}if(M=s.memoizedState,M!==null&&(M=M.dehydrated,M!==null))return Yf(M)?s.lanes=32:s.lanes=536870912,null;mi(s)}return M=c.children,c=c.fallback,d?(Qi(),d=s.mode,M=Iu({mode:"hidden",children:M},d),c=Ha(c,d,a,null),M.return=s,c.return=s,M.sibling=c,s.child=M,d=s.child,d.memoizedState=hf(a),d.childLanes=df(t,S,a),s.memoizedState=uf,c):(Gi(s),ff(s,M))}if(K=t.memoizedState,K!==null&&(M=K.dehydrated,M!==null)){if(g)s.flags&256?(Gi(s),s.flags&=-257,s=pf(t,s,a)):s.memoizedState!==null?(Qi(),s.child=t.child,s.flags|=128,s=null):(Qi(),d=c.fallback,M=s.mode,c=Iu({mode:"visible",children:c.children},M),d=Ha(d,M,a,null),d.flags|=2,c.return=s,d.return=s,c.sibling=d,s.child=c,Uo(s,t.child,null,a),c=s.child,c.memoizedState=hf(a),c.childLanes=df(t,S,a),s.memoizedState=uf,s=d);else if(Gi(s),Yf(M)){if(S=M.nextSibling&&M.nextSibling.dataset,S)var pe=S.dgst;S=pe,c=Error(i(419)),c.stack="",c.digest=S,kl({value:c,source:null,stack:null}),s=pf(t,s,a)}else if(xn||Pl(t,s,a,!1),S=(a&t.childLanes)!==0,xn||S){if(S=Qt,S!==null&&(c=a&-a,c=(c&42)!==0?1:Zr(c),c=(c&(S.suspendedLanes|a))!==0?0:c,c!==0&&c!==K.retryLane))throw K.retryLane=c,No(t,c),Ts(S,t,c),Py;M.data==="$?"||Of(),s=pf(t,s,a)}else M.data==="$?"?(s.flags|=192,s.child=t.child,s=null):(t=K.treeContext,nn=yr(M.nextSibling),Wn=s,Mt=!0,$a=null,Or=!1,t!==null&&(qs[Fs++]=ui,qs[Fs++]=hi,qs[Fs++]=Ga,ui=t.id,hi=t.overflow,Ga=s),s=ff(s,c.children),s.flags|=4096);return s}return d?(Qi(),d=c.fallback,M=s.mode,K=t.child,pe=K.sibling,c=ci(K,{mode:"hidden",children:c.children}),c.subtreeFlags=K.subtreeFlags&65011712,pe!==null?d=ci(pe,d):(d=Ha(d,M,a,null),d.flags|=2),d.return=s,c.return=s,c.sibling=d,s.child=c,c=d,d=s.child,M=t.child.memoizedState,M===null?M=hf(a):(K=M.cachePool,K!==null?(pe=vn._currentValue,K=K.parent!==pe?{parent:pe,pool:pe}:K):K=Dg(),M={baseLanes:M.baseLanes|a,cachePool:K}),d.memoizedState=M,d.childLanes=df(t,S,a),s.memoizedState=uf,c):(Gi(s),a=t.child,t=a.sibling,a=ci(a,{mode:"visible",children:c.children}),a.return=s,a.sibling=null,t!==null&&(S=s.deletions,S===null?(s.deletions=[t],s.flags|=16):S.push(t)),s.child=a,s.memoizedState=null,a)}function ff(t,s){return s=Iu({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function Iu(t,s){return t=bs(22,t,null,s),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function pf(t,s,a){return Uo(s,t.child,null,a),t=ff(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Qy(t,s,a){t.lanes|=s;var c=t.alternate;c!==null&&(c.lanes|=s),Dd(t.return,s,a)}function mf(t,s,a,c,d){var g=t.memoizedState;g===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=a,g.tailMode=d)}function $y(t,s,a){var c=s.pendingProps,d=c.revealOrder,g=c.tail;if(Cn(t,s,c.children,a),c=bn.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Qy(t,a,s);else if(t.tag===19)Qy(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}c&=1}switch(Ve(bn,c),d){case"forwards":for(a=s.child,d=null;a!==null;)t=a.alternate,t!==null&&xu(t)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),mf(s,!1,d,a,g);break;case"backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(t=d.alternate,t!==null&&xu(t)===null){s.child=d;break}t=d.sibling,d.sibling=a,a=d,d=t}mf(s,!0,a,null,g);break;case"together":mf(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function gi(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),Wi|=s.lanes,(a&s.childLanes)===0)if(t!==null){if(Pl(t,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(i(153));if(s.child!==null){for(t=s.child,a=ci(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=ci(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function gf(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&ou(t)))}function qE(t,s,a){switch(s.tag){case 3:jt(s,s.stateNode.containerInfo),Bi(s,vn,t.memoizedState.cache),jl();break;case 27:case 5:Da(s);break;case 4:jt(s,s.stateNode.containerInfo);break;case 10:Bi(s,s.type,s.memoizedProps.value);break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(Gi(s),s.flags|=128,null):(a&s.child.childLanes)!==0?Gy(t,s,a):(Gi(s),t=gi(t,s,a),t!==null?t.sibling:null);Gi(s);break;case 19:var d=(t.flags&128)!==0;if(c=(a&s.childLanes)!==0,c||(Pl(t,s,a,!1),c=(a&s.childLanes)!==0),d){if(c)return $y(t,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ve(bn,bn.current),c)break;return null;case 22:case 23:return s.lanes=0,By(t,s,a);case 24:Bi(s,vn,t.memoizedState.cache)}return gi(t,s,a)}function Ky(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps)xn=!0;else{if(!gf(t,a)&&(s.flags&128)===0)return xn=!1,qE(t,s,a);xn=(t.flags&131072)!==0}else xn=!1,Mt&&(s.flags&1048576)!==0&&Sg(s,au,s.index);switch(s.lanes=0,s.tag){case 16:e:{t=s.pendingProps;var c=s.elementType,d=c._init;if(c=d(c._payload),s.type=c,typeof c=="function")Sd(c)?(t=Ja(c,t),s.tag=1,s=Fy(null,s,c,t,a)):(s.tag=0,s=cf(null,s,c,t,a));else{if(c!=null){if(d=c.$$typeof,d===xe){s.tag=11,s=Ly(null,s,c,t,a);break e}else if(d===P){s.tag=14,s=Vy(null,s,c,t,a);break e}}throw s=gt(c)||c,Error(i(306,s,""))}}return s;case 0:return cf(t,s,s.type,s.pendingProps,a);case 1:return c=s.type,d=Ja(c,s.pendingProps),Fy(t,s,c,d,a);case 3:e:{if(jt(s,s.stateNode.containerInfo),t===null)throw Error(i(387));c=s.pendingProps;var g=s.memoizedState;d=g.element,Vd(t,s),Fl(s,c,null,a);var S=s.memoizedState;if(c=S.cache,Bi(s,vn,c),c!==g.cache&&Od(s,[vn],a,!0),ql(),c=S.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:S.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=Hy(t,s,c,a);break e}else if(c!==d){d=Bs(Error(i(424)),s),kl(d),s=Hy(t,s,c,a);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(nn=yr(t.firstChild),Wn=s,Mt=!0,$a=null,Or=!0,a=Ay(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(jl(),c===d){s=gi(t,s,a);break e}Cn(t,s,c,a)}s=s.child}return s;case 26:return Au(t,s),t===null?(a=Z0(s.type,null,s.pendingProps,null))?s.memoizedState=a:Mt||(a=s.type,t=s.pendingProps,c=zu(st.current).createElement(a),c[Zt]=s,c[_n]=t,On(c,a,t),Jt(c),s.stateNode=c):s.memoizedState=Z0(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return Da(s),t===null&&Mt&&(c=s.stateNode=Y0(s.type,s.pendingProps,st.current),Wn=s,Or=!0,d=nn,ta(s.type)?(Xf=d,nn=yr(c.firstChild)):nn=d),Cn(t,s,s.pendingProps.children,a),Au(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&Mt&&((d=c=nn)&&(c=gw(c,s.type,s.pendingProps,Or),c!==null?(s.stateNode=c,Wn=s,nn=yr(c.firstChild),Or=!1,d=!0):d=!1),d||Ka(s)),Da(s),d=s.type,g=s.pendingProps,S=t!==null?t.memoizedProps:null,c=g.children,Qf(d,g)?c=null:S!==null&&Qf(d,S)&&(s.flags|=32),s.memoizedState!==null&&(d=Hd(t,s,jE,null,null,a),hc._currentValue=d),Au(t,s),Cn(t,s,c,a),s.child;case 6:return t===null&&Mt&&((t=a=nn)&&(a=yw(a,s.pendingProps,Or),a!==null?(s.stateNode=a,Wn=s,nn=null,t=!0):t=!1),t||Ka(s)),null;case 13:return Gy(t,s,a);case 4:return jt(s,s.stateNode.containerInfo),c=s.pendingProps,t===null?s.child=Uo(s,null,c,a):Cn(t,s,c,a),s.child;case 11:return Ly(t,s,s.type,s.pendingProps,a);case 7:return Cn(t,s,s.pendingProps,a),s.child;case 8:return Cn(t,s,s.pendingProps.children,a),s.child;case 12:return Cn(t,s,s.pendingProps.children,a),s.child;case 10:return c=s.pendingProps,Bi(s,s.type,c.value),Cn(t,s,c.children,a),s.child;case 9:return d=s.type._context,c=s.pendingProps.children,Xa(s),d=Vn(d),c=c(d),s.flags|=1,Cn(t,s,c,a),s.child;case 14:return Vy(t,s,s.type,s.pendingProps,a);case 15:return Uy(t,s,s.type,s.pendingProps,a);case 19:return $y(t,s,a);case 31:return c=s.pendingProps,a=s.mode,c={mode:c.mode,children:c.children},t===null?(a=Iu(c,a),a.ref=s.ref,s.child=a,a.return=s,s=a):(a=ci(t.child,c),a.ref=s.ref,s.child=a,a.return=s,s=a),s;case 22:return By(t,s,a);case 24:return Xa(s),c=Vn(vn),t===null?(d=kd(),d===null&&(d=Qt,g=Md(),d.pooledCache=g,g.refCount++,g!==null&&(d.pooledCacheLanes|=a),d=g),s.memoizedState={parent:c,cache:d},Ld(s),Bi(s,vn,d)):((t.lanes&a)!==0&&(Vd(t,s),Fl(s,null,null,a),ql()),d=t.memoizedState,g=s.memoizedState,d.parent!==c?(d={parent:c,cache:c},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),Bi(s,vn,c)):(c=g.cache,Bi(s,vn,c),c!==d.cache&&Od(s,[vn],a,!0))),Cn(t,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function yi(t){t.flags|=4}function Yy(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!s_(s)){if(s=Hs.current,s!==null&&((Nt&4194048)===Nt?Mr!==null:(Nt&62914560)!==Nt&&(Nt&536870912)===0||s!==Mr))throw Bl=Pd,Og;t.flags|=8192}}function Nu(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?Os():536870912,t.lanes|=s,Fo|=s)}function Xl(t,s){if(!Mt)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function en(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,c=0;if(s)for(var d=t.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&65011712,c|=d.flags&65011712,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=c,t.childLanes=a,s}function FE(t,s,a){var c=s.pendingProps;switch(Nd(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return en(s),null;case 1:return en(s),null;case 3:return a=s.stateNode,c=null,t!==null&&(c=t.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),fi(vn),us(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Ml(s)?yi(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Ig())),en(s),null;case 26:return a=s.memoizedState,t===null?(yi(s),a!==null?(en(s),Yy(s,a)):(en(s),s.flags&=-16777217)):a?a!==t.memoizedState?(yi(s),en(s),Yy(s,a)):(en(s),s.flags&=-16777217):(t.memoizedProps!==c&&yi(s),en(s),s.flags&=-16777217),null;case 27:Mi(s),a=st.current;var d=s.type;if(t!==null&&s.stateNode!=null)t.memoizedProps!==c&&yi(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return en(s),null}t=Xe.current,Ml(s)?Tg(s):(t=Y0(d,c,a),s.stateNode=t,yi(s))}return en(s),null;case 5:if(Mi(s),a=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==c&&yi(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return en(s),null}if(t=Xe.current,Ml(s))Tg(s);else{switch(d=zu(st.current),t){case 1:t=d.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=d.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=d.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof c.is=="string"?d.createElement("select",{is:c.is}):d.createElement("select"),c.multiple?t.multiple=!0:c.size&&(t.size=c.size);break;default:t=typeof c.is=="string"?d.createElement(a,{is:c.is}):d.createElement(a)}}t[Zt]=s,t[_n]=c;e:for(d=s.child;d!==null;){if(d.tag===5||d.tag===6)t.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===s)break e;for(;d.sibling===null;){if(d.return===null||d.return===s)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}s.stateNode=t;e:switch(On(t,a,c),a){case"button":case"input":case"select":case"textarea":t=!!c.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&yi(s)}}return en(s),s.flags&=-16777217,null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==c&&yi(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(i(166));if(t=st.current,Ml(s)){if(t=s.stateNode,a=s.memoizedProps,c=null,d=Wn,d!==null)switch(d.tag){case 27:case 5:c=d.memoizedProps}t[Zt]=s,t=!!(t.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||q0(t.nodeValue,a)),t||Ka(s)}else t=zu(t).createTextNode(c),t[Zt]=s,s.stateNode=t}return en(s),null;case 13:if(c=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(d=Ml(s),c!==null&&c.dehydrated!==null){if(t===null){if(!d)throw Error(i(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[Zt]=s}else jl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;en(s),d=!1}else d=Ig(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(mi(s),s):(mi(s),null)}if(mi(s),(s.flags&128)!==0)return s.lanes=a,s;if(a=c!==null,t=t!==null&&t.memoizedState!==null,a){c=s.child,d=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(d=c.alternate.memoizedState.cachePool.pool);var g=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==d&&(c.flags|=2048)}return a!==t&&a&&(s.child.flags|=8192),Nu(s,s.updateQueue),en(s),null;case 4:return us(),t===null&&zf(s.stateNode.containerInfo),en(s),null;case 10:return fi(s.type),en(s),null;case 19:if(ze(bn),d=s.memoizedState,d===null)return en(s),null;if(c=(s.flags&128)!==0,g=d.rendering,g===null)if(c)Xl(d,!1);else{if(sn!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(g=xu(t),g!==null){for(s.flags|=128,Xl(d,!1),t=g.updateQueue,s.updateQueue=t,Nu(s,t),s.subtreeFlags=0,t=a,a=s.child;a!==null;)xg(a,t),a=a.sibling;return Ve(bn,bn.current&1|2),s.child}t=t.sibling}d.tail!==null&&In()>Du&&(s.flags|=128,c=!0,Xl(d,!1),s.lanes=4194304)}else{if(!c)if(t=xu(g),t!==null){if(s.flags|=128,c=!0,t=t.updateQueue,s.updateQueue=t,Nu(s,t),Xl(d,!0),d.tail===null&&d.tailMode==="hidden"&&!g.alternate&&!Mt)return en(s),null}else 2*In()-d.renderingStartTime>Du&&a!==536870912&&(s.flags|=128,c=!0,Xl(d,!1),s.lanes=4194304);d.isBackwards?(g.sibling=s.child,s.child=g):(t=d.last,t!==null?t.sibling=g:s.child=g,d.last=g)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=In(),s.sibling=null,t=bn.current,Ve(bn,c?t&1|2:t&1),s):(en(s),null);case 22:case 23:return mi(s),qd(),c=s.memoizedState!==null,t!==null?t.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(a&536870912)!==0&&(s.flags&128)===0&&(en(s),s.subtreeFlags&6&&(s.flags|=8192)):en(s),a=s.updateQueue,a!==null&&Nu(s,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==a&&(s.flags|=2048),t!==null&&ze(Wa),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),fi(vn),en(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function HE(t,s){switch(Nd(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return fi(vn),us(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return Mi(s),null;case 13:if(mi(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(i(340));jl()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return ze(bn),null;case 4:return us(),null;case 10:return fi(s.type),null;case 22:case 23:return mi(s),qd(),t!==null&&ze(Wa),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return fi(vn),null;case 25:return null;default:return null}}function Xy(t,s){switch(Nd(s),s.tag){case 3:fi(vn),us();break;case 26:case 27:case 5:Mi(s);break;case 4:us();break;case 13:mi(s);break;case 19:ze(bn);break;case 10:fi(s.type);break;case 22:case 23:mi(s),qd(),t!==null&&ze(Wa);break;case 24:fi(vn)}}function Wl(t,s){try{var a=s.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var d=c.next;a=d;do{if((a.tag&t)===t){c=void 0;var g=a.create,S=a.inst;c=g(),S.destroy=c}a=a.next}while(a!==d)}}catch(M){Gt(s,s.return,M)}}function $i(t,s,a){try{var c=s.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var g=d.next;c=g;do{if((c.tag&t)===t){var S=c.inst,M=S.destroy;if(M!==void 0){S.destroy=void 0,d=s;var K=a,pe=M;try{pe()}catch(Ae){Gt(d,K,Ae)}}}c=c.next}while(c!==g)}}catch(Ae){Gt(s,s.return,Ae)}}function Wy(t){var s=t.updateQueue;if(s!==null){var a=t.stateNode;try{Vg(s,a)}catch(c){Gt(t,t.return,c)}}}function Zy(t,s,a){a.props=Ja(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(c){Gt(t,s,c)}}function Zl(t,s){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var c=t.stateNode;break;case 30:c=t.stateNode;break;default:c=t.stateNode}typeof a=="function"?t.refCleanup=a(c):a.current=c}}catch(d){Gt(t,s,d)}}function jr(t,s){var a=t.ref,c=t.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(d){Gt(t,s,d)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){Gt(t,s,d)}else a.current=null}function Jy(t){var s=t.type,a=t.memoizedProps,c=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(d){Gt(t,t.return,d)}}function yf(t,s,a){try{var c=t.stateNode;hw(c,t.type,a,s),c[_n]=s}catch(d){Gt(t,t.return,d)}}function e0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ta(t.type)||t.tag===4}function _f(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||e0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ta(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vf(t,s,a){var c=t.tag;if(c===5||c===6)t=t.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(t),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Bu));else if(c!==4&&(c===27&&ta(t.type)&&(a=t.stateNode,s=null),t=t.child,t!==null))for(vf(t,s,a),t=t.sibling;t!==null;)vf(t,s,a),t=t.sibling}function Ru(t,s,a){var c=t.tag;if(c===5||c===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(c!==4&&(c===27&&ta(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Ru(t,s,a),t=t.sibling;t!==null;)Ru(t,s,a),t=t.sibling}function t0(t){var s=t.stateNode,a=t.memoizedProps;try{for(var c=t.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);On(s,c,a),s[Zt]=t,s[_n]=a}catch(g){Gt(t,t.return,g)}}var _i=!1,on=!1,bf=!1,n0=typeof WeakSet=="function"?WeakSet:Set,Sn=null;function GE(t,s){if(t=t.containerInfo,Hf=$u,t=fg(t),yd(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var S=0,M=-1,K=-1,pe=0,Ae=0,Ce=t,ge=null;t:for(;;){for(var _e;Ce!==a||d!==0&&Ce.nodeType!==3||(M=S+d),Ce!==g||c!==0&&Ce.nodeType!==3||(K=S+c),Ce.nodeType===3&&(S+=Ce.nodeValue.length),(_e=Ce.firstChild)!==null;)ge=Ce,Ce=_e;for(;;){if(Ce===t)break t;if(ge===a&&++pe===d&&(M=S),ge===g&&++Ae===c&&(K=S),(_e=Ce.nextSibling)!==null)break;Ce=ge,ge=Ce.parentNode}Ce=_e}a=M===-1||K===-1?null:{start:M,end:K}}else a=null}a=a||{start:0,end:0}}else a=null;for(Gf={focusedElem:t,selectionRange:a},$u=!1,Sn=s;Sn!==null;)if(s=Sn,t=s.child,(s.subtreeFlags&1024)!==0&&t!==null)t.return=s,Sn=t;else for(;Sn!==null;){switch(s=Sn,g=s.alternate,t=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&g!==null){t=void 0,a=s,d=g.memoizedProps,g=g.memoizedState,c=a.stateNode;try{var ct=Ja(a.type,d,a.elementType===a.type);t=c.getSnapshotBeforeUpdate(ct,g),c.__reactInternalSnapshotBeforeUpdate=t}catch(tt){Gt(a,a.return,tt)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,a=t.nodeType,a===9)Kf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Kf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=s.sibling,t!==null){t.return=s.return,Sn=t;break}Sn=s.return}}function s0(t,s,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:Ki(t,a),c&4&&Wl(5,a);break;case 1:if(Ki(t,a),c&4)if(t=a.stateNode,s===null)try{t.componentDidMount()}catch(S){Gt(a,a.return,S)}else{var d=Ja(a.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(d,s,t.__reactInternalSnapshotBeforeUpdate)}catch(S){Gt(a,a.return,S)}}c&64&&Wy(a),c&512&&Zl(a,a.return);break;case 3:if(Ki(t,a),c&64&&(t=a.updateQueue,t!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{Vg(t,s)}catch(S){Gt(a,a.return,S)}}break;case 27:s===null&&c&4&&t0(a);case 26:case 5:Ki(t,a),s===null&&c&4&&Jy(a),c&512&&Zl(a,a.return);break;case 12:Ki(t,a);break;case 13:Ki(t,a),c&4&&a0(t,a),c&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=ew.bind(null,a),_w(t,a))));break;case 22:if(c=a.memoizedState!==null||_i,!c){s=s!==null&&s.memoizedState!==null||on,d=_i;var g=on;_i=c,(on=s)&&!g?Yi(t,a,(a.subtreeFlags&8772)!==0):Ki(t,a),_i=d,on=g}break;case 30:break;default:Ki(t,a)}}function r0(t){var s=t.alternate;s!==null&&(t.alternate=null,r0(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&ei(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Yt=null,ss=!1;function vi(t,s,a){for(a=a.child;a!==null;)i0(t,s,a),a=a.sibling}function i0(t,s,a){if(yn&&typeof yn.onCommitFiberUnmount=="function")try{yn.onCommitFiberUnmount(Cs,a)}catch{}switch(a.tag){case 26:on||jr(a,s),vi(t,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:on||jr(a,s);var c=Yt,d=ss;ta(a.type)&&(Yt=a.stateNode,ss=!1),vi(t,s,a),oc(a.stateNode),Yt=c,ss=d;break;case 5:on||jr(a,s);case 6:if(c=Yt,d=ss,Yt=null,vi(t,s,a),Yt=c,ss=d,Yt!==null)if(ss)try{(Yt.nodeType===9?Yt.body:Yt.nodeName==="HTML"?Yt.ownerDocument.body:Yt).removeChild(a.stateNode)}catch(g){Gt(a,s,g)}else try{Yt.removeChild(a.stateNode)}catch(g){Gt(a,s,g)}break;case 18:Yt!==null&&(ss?(t=Yt,$0(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),mc(t)):$0(Yt,a.stateNode));break;case 4:c=Yt,d=ss,Yt=a.stateNode.containerInfo,ss=!0,vi(t,s,a),Yt=c,ss=d;break;case 0:case 11:case 14:case 15:on||$i(2,a,s),on||$i(4,a,s),vi(t,s,a);break;case 1:on||(jr(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"&&Zy(a,s,c)),vi(t,s,a);break;case 21:vi(t,s,a);break;case 22:on=(c=on)||a.memoizedState!==null,vi(t,s,a),on=c;break;default:vi(t,s,a)}}function a0(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{mc(t)}catch(a){Gt(s,s.return,a)}}function QE(t){switch(t.tag){case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new n0),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new n0),s;default:throw Error(i(435,t.tag))}}function Ef(t,s){var a=QE(t);s.forEach(function(c){var d=tw.bind(null,t,c);a.has(c)||(a.add(c),c.then(d,d))})}function Es(t,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c],g=t,S=s,M=S;e:for(;M!==null;){switch(M.tag){case 27:if(ta(M.type)){Yt=M.stateNode,ss=!1;break e}break;case 5:Yt=M.stateNode,ss=!1;break e;case 3:case 4:Yt=M.stateNode.containerInfo,ss=!0;break e}M=M.return}if(Yt===null)throw Error(i(160));i0(g,S,d),Yt=null,ss=!1,g=d.alternate,g!==null&&(g.return=null),d.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)o0(s,t),s=s.sibling}var gr=null;function o0(t,s){var a=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Es(s,t),ws(t),c&4&&($i(3,t,t.return),Wl(3,t),$i(5,t,t.return));break;case 1:Es(s,t),ws(t),c&512&&(on||a===null||jr(a,a.return)),c&64&&_i&&(t=t.updateQueue,t!==null&&(c=t.callbacks,c!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var d=gr;if(Es(s,t),ws(t),c&512&&(on||a===null||jr(a,a.return)),c&4){var g=a!==null?a.memoizedState:null;if(c=t.memoizedState,a===null)if(c===null)if(t.stateNode===null){e:{c=t.type,a=t.memoizedProps,d=d.ownerDocument||d;t:switch(c){case"title":g=d.getElementsByTagName("title")[0],(!g||g[Ar]||g[Zt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=d.createElement(c),d.head.insertBefore(g,d.querySelector("head > title"))),On(g,c,a),g[Zt]=t,Jt(g),c=g;break e;case"link":var S=t_("link","href",d).get(c+(a.href||""));if(S){for(var M=0;M<S.length;M++)if(g=S[M],g.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&g.getAttribute("rel")===(a.rel==null?null:a.rel)&&g.getAttribute("title")===(a.title==null?null:a.title)&&g.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){S.splice(M,1);break t}}g=d.createElement(c),On(g,c,a),d.head.appendChild(g);break;case"meta":if(S=t_("meta","content",d).get(c+(a.content||""))){for(M=0;M<S.length;M++)if(g=S[M],g.getAttribute("content")===(a.content==null?null:""+a.content)&&g.getAttribute("name")===(a.name==null?null:a.name)&&g.getAttribute("property")===(a.property==null?null:a.property)&&g.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&g.getAttribute("charset")===(a.charSet==null?null:a.charSet)){S.splice(M,1);break t}}g=d.createElement(c),On(g,c,a),d.head.appendChild(g);break;default:throw Error(i(468,c))}g[Zt]=t,Jt(g),c=g}t.stateNode=c}else n_(d,t.type,t.stateNode);else t.stateNode=e_(d,c,t.memoizedProps);else g!==c?(g===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):g.count--,c===null?n_(d,t.type,t.stateNode):e_(d,c,t.memoizedProps)):c===null&&t.stateNode!==null&&yf(t,t.memoizedProps,a.memoizedProps)}break;case 27:Es(s,t),ws(t),c&512&&(on||a===null||jr(a,a.return)),a!==null&&c&4&&yf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Es(s,t),ws(t),c&512&&(on||a===null||jr(a,a.return)),t.flags&32){d=t.stateNode;try{A(d,"")}catch(_e){Gt(t,t.return,_e)}}c&4&&t.stateNode!=null&&(d=t.memoizedProps,yf(t,d,a!==null?a.memoizedProps:d)),c&1024&&(bf=!0);break;case 6:if(Es(s,t),ws(t),c&4){if(t.stateNode===null)throw Error(i(162));c=t.memoizedProps,a=t.stateNode;try{a.nodeValue=c}catch(_e){Gt(t,t.return,_e)}}break;case 3:if(Hu=null,d=gr,gr=qu(s.containerInfo),Es(s,t),gr=d,ws(t),c&4&&a!==null&&a.memoizedState.isDehydrated)try{mc(s.containerInfo)}catch(_e){Gt(t,t.return,_e)}bf&&(bf=!1,l0(t));break;case 4:c=gr,gr=qu(t.stateNode.containerInfo),Es(s,t),ws(t),gr=c;break;case 12:Es(s,t),ws(t);break;case 13:Es(s,t),ws(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(If=In()),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,Ef(t,c)));break;case 22:d=t.memoizedState!==null;var K=a!==null&&a.memoizedState!==null,pe=_i,Ae=on;if(_i=pe||d,on=Ae||K,Es(s,t),on=Ae,_i=pe,ws(t),c&8192)e:for(s=t.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(a===null||K||_i||on||eo(t)),a=null,s=t;;){if(s.tag===5||s.tag===26){if(a===null){K=a=s;try{if(g=K.stateNode,d)S=g.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{M=K.stateNode;var Ce=K.memoizedProps.style,ge=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null;M.style.display=ge==null||typeof ge=="boolean"?"":(""+ge).trim()}}catch(_e){Gt(K,K.return,_e)}}}else if(s.tag===6){if(a===null){K=s;try{K.stateNode.nodeValue=d?"":K.memoizedProps}catch(_e){Gt(K,K.return,_e)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=t.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,Ef(t,a))));break;case 19:Es(s,t),ws(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,Ef(t,c)));break;case 30:break;case 21:break;default:Es(s,t),ws(t)}}function ws(t){var s=t.flags;if(s&2){try{for(var a,c=t.return;c!==null;){if(e0(c)){a=c;break}c=c.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var d=a.stateNode,g=_f(t);Ru(t,g,d);break;case 5:var S=a.stateNode;a.flags&32&&(A(S,""),a.flags&=-33);var M=_f(t);Ru(t,M,S);break;case 3:case 4:var K=a.stateNode.containerInfo,pe=_f(t);vf(t,pe,K);break;default:throw Error(i(161))}}catch(Ae){Gt(t,t.return,Ae)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function l0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;l0(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function Ki(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)s0(t,s.alternate,s),s=s.sibling}function eo(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:$i(4,s,s.return),eo(s);break;case 1:jr(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&Zy(s,s.return,a),eo(s);break;case 27:oc(s.stateNode);case 26:case 5:jr(s,s.return),eo(s);break;case 22:s.memoizedState===null&&eo(s);break;case 30:eo(s);break;default:eo(s)}t=t.sibling}}function Yi(t,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,d=t,g=s,S=g.flags;switch(g.tag){case 0:case 11:case 15:Yi(d,g,a),Wl(4,g);break;case 1:if(Yi(d,g,a),c=g,d=c.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(pe){Gt(c,c.return,pe)}if(c=g,d=c.updateQueue,d!==null){var M=c.stateNode;try{var K=d.shared.hiddenCallbacks;if(K!==null)for(d.shared.hiddenCallbacks=null,d=0;d<K.length;d++)Lg(K[d],M)}catch(pe){Gt(c,c.return,pe)}}a&&S&64&&Wy(g),Zl(g,g.return);break;case 27:t0(g);case 26:case 5:Yi(d,g,a),a&&c===null&&S&4&&Jy(g),Zl(g,g.return);break;case 12:Yi(d,g,a);break;case 13:Yi(d,g,a),a&&S&4&&a0(d,g);break;case 22:g.memoizedState===null&&Yi(d,g,a),Zl(g,g.return);break;case 30:break;default:Yi(d,g,a)}s=s.sibling}}function wf(t,s){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Ll(a))}function xf(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Ll(t))}function kr(t,s,a,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)c0(t,s,a,c),s=s.sibling}function c0(t,s,a,c){var d=s.flags;switch(s.tag){case 0:case 11:case 15:kr(t,s,a,c),d&2048&&Wl(9,s);break;case 1:kr(t,s,a,c);break;case 3:kr(t,s,a,c),d&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Ll(t)));break;case 12:if(d&2048){kr(t,s,a,c),t=s.stateNode;try{var g=s.memoizedProps,S=g.id,M=g.onPostCommit;typeof M=="function"&&M(S,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(K){Gt(s,s.return,K)}}else kr(t,s,a,c);break;case 13:kr(t,s,a,c);break;case 23:break;case 22:g=s.stateNode,S=s.alternate,s.memoizedState!==null?g._visibility&2?kr(t,s,a,c):Jl(t,s):g._visibility&2?kr(t,s,a,c):(g._visibility|=2,Bo(t,s,a,c,(s.subtreeFlags&10256)!==0)),d&2048&&wf(S,s);break;case 24:kr(t,s,a,c),d&2048&&xf(s.alternate,s);break;default:kr(t,s,a,c)}}function Bo(t,s,a,c,d){for(d=d&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var g=t,S=s,M=a,K=c,pe=S.flags;switch(S.tag){case 0:case 11:case 15:Bo(g,S,M,K,d),Wl(8,S);break;case 23:break;case 22:var Ae=S.stateNode;S.memoizedState!==null?Ae._visibility&2?Bo(g,S,M,K,d):Jl(g,S):(Ae._visibility|=2,Bo(g,S,M,K,d)),d&&pe&2048&&wf(S.alternate,S);break;case 24:Bo(g,S,M,K,d),d&&pe&2048&&xf(S.alternate,S);break;default:Bo(g,S,M,K,d)}s=s.sibling}}function Jl(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=t,c=s,d=c.flags;switch(c.tag){case 22:Jl(a,c),d&2048&&wf(c.alternate,c);break;case 24:Jl(a,c),d&2048&&xf(c.alternate,c);break;default:Jl(a,c)}s=s.sibling}}var ec=8192;function zo(t){if(t.subtreeFlags&ec)for(t=t.child;t!==null;)u0(t),t=t.sibling}function u0(t){switch(t.tag){case 26:zo(t),t.flags&ec&&t.memoizedState!==null&&Dw(gr,t.memoizedState,t.memoizedProps);break;case 5:zo(t);break;case 3:case 4:var s=gr;gr=qu(t.stateNode.containerInfo),zo(t),gr=s;break;case 22:t.memoizedState===null&&(s=t.alternate,s!==null&&s.memoizedState!==null?(s=ec,ec=16777216,zo(t),ec=s):zo(t));break;default:zo(t)}}function h0(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function tc(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var c=s[a];Sn=c,f0(c,t)}h0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)d0(t),t=t.sibling}function d0(t){switch(t.tag){case 0:case 11:case 15:tc(t),t.flags&2048&&$i(9,t,t.return);break;case 3:tc(t);break;case 12:tc(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,Cu(t)):tc(t);break;default:tc(t)}}function Cu(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var c=s[a];Sn=c,f0(c,t)}h0(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:$i(8,s,s.return),Cu(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Cu(s));break;default:Cu(s)}t=t.sibling}}function f0(t,s){for(;Sn!==null;){var a=Sn;switch(a.tag){case 0:case 11:case 15:$i(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Ll(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,Sn=c;else e:for(a=t;Sn!==null;){c=Sn;var d=c.sibling,g=c.return;if(r0(c),c===a){Sn=null;break e}if(d!==null){d.return=g,Sn=d;break e}Sn=g}}}var $E={getCacheForType:function(t){var s=Vn(vn),a=s.data.get(t);return a===void 0&&(a=t(),s.data.set(t,a)),a}},KE=typeof WeakMap=="function"?WeakMap:Map,Lt=0,Qt=null,Et=null,Nt=0,Vt=0,xs=null,Xi=!1,qo=!1,Sf=!1,bi=0,sn=0,Wi=0,to=0,Tf=0,Gs=0,Fo=0,nc=null,rs=null,Af=!1,If=0,Du=1/0,Ou=null,Zi=null,Dn=0,Ji=null,Ho=null,Go=0,Nf=0,Rf=null,p0=null,sc=0,Cf=null;function Ss(){if((Lt&2)!==0&&Nt!==0)return Nt&-Nt;if(Ee.T!==null){var t=Oo;return t!==0?t:Lf()}return Gn()}function m0(){Gs===0&&(Gs=(Nt&536870912)===0||Mt?ja():536870912);var t=Hs.current;return t!==null&&(t.flags|=32),Gs}function Ts(t,s,a){(t===Qt&&(Vt===2||Vt===9)||t.cancelPendingCommit!==null)&&(Qo(t,0),ea(t,Nt,Gs,!1)),Wt(t,a),((Lt&2)===0||t!==Qt)&&(t===Qt&&((Lt&2)===0&&(to|=a),sn===4&&ea(t,Nt,Gs,!1)),Pr(t))}function g0(t,s,a){if((Lt&6)!==0)throw Error(i(327));var c=!a&&(s&124)===0&&(s&t.expiredLanes)===0||Ds(t,s),d=c?WE(t,s):Mf(t,s,!0),g=c;do{if(d===0){qo&&!c&&ea(t,s,0,!1);break}else{if(a=t.current.alternate,g&&!YE(a)){d=Mf(t,s,!1),g=!1;continue}if(d===2){if(g=s,t.errorRecoveryDisabledLanes&g)var S=0;else S=t.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){s=S;e:{var M=t;d=nc;var K=M.current.memoizedState.isDehydrated;if(K&&(Qo(M,S).flags|=256),S=Mf(M,S,!1),S!==2){if(Sf&&!K){M.errorRecoveryDisabledLanes|=g,to|=g,d=4;break e}g=rs,rs=d,g!==null&&(rs===null?rs=g:rs.push.apply(rs,g))}d=S}if(g=!1,d!==2)continue}}if(d===1){Qo(t,0),ea(t,s,0,!0);break}e:{switch(c=t,g=d,g){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:ea(c,s,Gs,!Xi);break e;case 2:rs=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(d=If+300-In(),10<d)){if(ea(c,s,Gs,!Xi),Hn(c,0,!0)!==0)break e;c.timeoutHandle=G0(y0.bind(null,c,a,rs,Ou,Af,s,Gs,to,Fo,Xi,g,2,-0,0),d);break e}y0(c,a,rs,Ou,Af,s,Gs,to,Fo,Xi,g,0,-0,0)}}break}while(!0);Pr(t)}function y0(t,s,a,c,d,g,S,M,K,pe,Ae,Ce,ge,_e){if(t.timeoutHandle=-1,Ce=s.subtreeFlags,(Ce&8192||(Ce&16785408)===16785408)&&(uc={stylesheets:null,count:0,unsuspend:Cw},u0(s),Ce=Ow(),Ce!==null)){t.cancelPendingCommit=Ce(S0.bind(null,t,s,g,a,c,d,S,M,K,Ae,1,ge,_e)),ea(t,g,S,!pe);return}S0(t,s,g,a,c,d,S,M,K)}function YE(t){for(var s=t;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var d=a[c],g=d.getSnapshot;d=d.value;try{if(!vs(g(),d))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ea(t,s,a,c){s&=~Tf,s&=~to,t.suspendedLanes|=s,t.pingedLanes&=~s,c&&(t.warmLanes|=s),c=t.expirationTimes;for(var d=s;0<d;){var g=31-Nn(d),S=1<<g;c[g]=-1,d&=~S}a!==0&&Js(t,a,s)}function Mu(){return(Lt&6)===0?(rc(0),!1):!0}function Df(){if(Et!==null){if(Vt===0)var t=Et.return;else t=Et,di=Ya=null,$d(t),Vo=null,Kl=0,t=Et;for(;t!==null;)Xy(t.alternate,t),t=t.return;Et=null}}function Qo(t,s){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,fw(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Df(),Qt=t,Et=a=ci(t.current,null),Nt=s,Vt=0,xs=null,Xi=!1,qo=Ds(t,s),Sf=!1,Fo=Gs=Tf=to=Wi=sn=0,rs=nc=null,Af=!1,(s&8)!==0&&(s|=s&32);var c=t.entangledLanes;if(c!==0)for(t=t.entanglements,c&=s;0<c;){var d=31-Nn(c),g=1<<d;s|=t[d],c&=~g}return bi=s,tu(),a}function _0(t,s){yt=null,Ee.H=bu,s===Ul||s===uu?(s=kg(),Vt=3):s===Og?(s=kg(),Vt=4):Vt=s===Py?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,xs=s,Et===null&&(sn=1,Tu(t,Bs(s,t.current)))}function v0(){var t=Ee.H;return Ee.H=bu,t===null?bu:t}function b0(){var t=Ee.A;return Ee.A=$E,t}function Of(){sn=4,Xi||(Nt&4194048)!==Nt&&Hs.current!==null||(qo=!0),(Wi&134217727)===0&&(to&134217727)===0||Qt===null||ea(Qt,Nt,Gs,!1)}function Mf(t,s,a){var c=Lt;Lt|=2;var d=v0(),g=b0();(Qt!==t||Nt!==s)&&(Ou=null,Qo(t,s)),s=!1;var S=sn;e:do try{if(Vt!==0&&Et!==null){var M=Et,K=xs;switch(Vt){case 8:Df(),S=6;break e;case 3:case 2:case 9:case 6:Hs.current===null&&(s=!0);var pe=Vt;if(Vt=0,xs=null,$o(t,M,K,pe),a&&qo){S=0;break e}break;default:pe=Vt,Vt=0,xs=null,$o(t,M,K,pe)}}XE(),S=sn;break}catch(Ae){_0(t,Ae)}while(!0);return s&&t.shellSuspendCounter++,di=Ya=null,Lt=c,Ee.H=d,Ee.A=g,Et===null&&(Qt=null,Nt=0,tu()),S}function XE(){for(;Et!==null;)E0(Et)}function WE(t,s){var a=Lt;Lt|=2;var c=v0(),d=b0();Qt!==t||Nt!==s?(Ou=null,Du=In()+500,Qo(t,s)):qo=Ds(t,s);e:do try{if(Vt!==0&&Et!==null){s=Et;var g=xs;t:switch(Vt){case 1:Vt=0,xs=null,$o(t,s,g,1);break;case 2:case 9:if(Mg(g)){Vt=0,xs=null,w0(s);break}s=function(){Vt!==2&&Vt!==9||Qt!==t||(Vt=7),Pr(t)},g.then(s,s);break e;case 3:Vt=7;break e;case 4:Vt=5;break e;case 7:Mg(g)?(Vt=0,xs=null,w0(s)):(Vt=0,xs=null,$o(t,s,g,7));break;case 5:var S=null;switch(Et.tag){case 26:S=Et.memoizedState;case 5:case 27:var M=Et;if(!S||s_(S)){Vt=0,xs=null;var K=M.sibling;if(K!==null)Et=K;else{var pe=M.return;pe!==null?(Et=pe,ju(pe)):Et=null}break t}}Vt=0,xs=null,$o(t,s,g,5);break;case 6:Vt=0,xs=null,$o(t,s,g,6);break;case 8:Df(),sn=6;break e;default:throw Error(i(462))}}ZE();break}catch(Ae){_0(t,Ae)}while(!0);return di=Ya=null,Ee.H=c,Ee.A=d,Lt=a,Et!==null?0:(Qt=null,Nt=0,tu(),sn)}function ZE(){for(;Et!==null&&!Tl();)E0(Et)}function E0(t){var s=Ky(t.alternate,t,bi);t.memoizedProps=t.pendingProps,s===null?ju(t):Et=s}function w0(t){var s=t,a=s.alternate;switch(s.tag){case 15:case 0:s=qy(a,s,s.pendingProps,s.type,void 0,Nt);break;case 11:s=qy(a,s,s.pendingProps,s.type.render,s.ref,Nt);break;case 5:$d(s);default:Xy(a,s),s=Et=xg(s,bi),s=Ky(a,s,bi)}t.memoizedProps=t.pendingProps,s===null?ju(t):Et=s}function $o(t,s,a,c){di=Ya=null,$d(s),Vo=null,Kl=0;var d=s.return;try{if(zE(t,d,s,a,Nt)){sn=1,Tu(t,Bs(a,t.current)),Et=null;return}}catch(g){if(d!==null)throw Et=d,g;sn=1,Tu(t,Bs(a,t.current)),Et=null;return}s.flags&32768?(Mt||c===1?t=!0:qo||(Nt&536870912)!==0?t=!1:(Xi=t=!0,(c===2||c===9||c===3||c===6)&&(c=Hs.current,c!==null&&c.tag===13&&(c.flags|=16384))),x0(s,t)):ju(s)}function ju(t){var s=t;do{if((s.flags&32768)!==0){x0(s,Xi);return}t=s.return;var a=FE(s.alternate,s,bi);if(a!==null){Et=a;return}if(s=s.sibling,s!==null){Et=s;return}Et=s=t}while(s!==null);sn===0&&(sn=5)}function x0(t,s){do{var a=HE(t.alternate,t);if(a!==null){a.flags&=32767,Et=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(t=t.sibling,t!==null)){Et=t;return}Et=t=a}while(t!==null);sn=6,Et=null}function S0(t,s,a,c,d,g,S,M,K){t.cancelPendingCommit=null;do ku();while(Dn!==0);if((Lt&6)!==0)throw Error(i(327));if(s!==null){if(s===t.current)throw Error(i(177));if(g=s.lanes|s.childLanes,g|=wd,ka(t,a,g,S,M,K),t===Qt&&(Et=Qt=null,Nt=0),Ho=s,Ji=t,Go=a,Nf=g,Rf=d,p0=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,nw(Rs,function(){return R0(),null})):(t.callbackNode=null,t.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=Ee.T,Ee.T=null,d=Le.p,Le.p=2,S=Lt,Lt|=4;try{GE(t,s,a)}finally{Lt=S,Le.p=d,Ee.T=c}}Dn=1,T0(),A0(),I0()}}function T0(){if(Dn===1){Dn=0;var t=Ji,s=Ho,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=Ee.T,Ee.T=null;var c=Le.p;Le.p=2;var d=Lt;Lt|=4;try{o0(s,t);var g=Gf,S=fg(t.containerInfo),M=g.focusedElem,K=g.selectionRange;if(S!==M&&M&&M.ownerDocument&&dg(M.ownerDocument.documentElement,M)){if(K!==null&&yd(M)){var pe=K.start,Ae=K.end;if(Ae===void 0&&(Ae=pe),"selectionStart"in M)M.selectionStart=pe,M.selectionEnd=Math.min(Ae,M.value.length);else{var Ce=M.ownerDocument||document,ge=Ce&&Ce.defaultView||window;if(ge.getSelection){var _e=ge.getSelection(),ct=M.textContent.length,tt=Math.min(K.start,ct),qt=K.end===void 0?tt:Math.min(K.end,ct);!_e.extend&&tt>qt&&(S=qt,qt=tt,tt=S);var ce=hg(M,tt),oe=hg(M,qt);if(ce&&oe&&(_e.rangeCount!==1||_e.anchorNode!==ce.node||_e.anchorOffset!==ce.offset||_e.focusNode!==oe.node||_e.focusOffset!==oe.offset)){var de=Ce.createRange();de.setStart(ce.node,ce.offset),_e.removeAllRanges(),tt>qt?(_e.addRange(de),_e.extend(oe.node,oe.offset)):(de.setEnd(oe.node,oe.offset),_e.addRange(de))}}}}for(Ce=[],_e=M;_e=_e.parentNode;)_e.nodeType===1&&Ce.push({element:_e,left:_e.scrollLeft,top:_e.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<Ce.length;M++){var Ie=Ce[M];Ie.element.scrollLeft=Ie.left,Ie.element.scrollTop=Ie.top}}$u=!!Hf,Gf=Hf=null}finally{Lt=d,Le.p=c,Ee.T=a}}t.current=s,Dn=2}}function A0(){if(Dn===2){Dn=0;var t=Ji,s=Ho,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=Ee.T,Ee.T=null;var c=Le.p;Le.p=2;var d=Lt;Lt|=4;try{s0(t,s.alternate,s)}finally{Lt=d,Le.p=c,Ee.T=a}}Dn=3}}function I0(){if(Dn===4||Dn===3){Dn=0,Xr();var t=Ji,s=Ho,a=Go,c=p0;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Dn=5:(Dn=0,Ho=Ji=null,N0(t,t.pendingLanes));var d=t.pendingLanes;if(d===0&&(Zi=null),tr(a),s=s.stateNode,yn&&typeof yn.onCommitFiberRoot=="function")try{yn.onCommitFiberRoot(Cs,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=Ee.T,d=Le.p,Le.p=2,Ee.T=null;try{for(var g=t.onRecoverableError,S=0;S<c.length;S++){var M=c[S];g(M.value,{componentStack:M.stack})}}finally{Ee.T=s,Le.p=d}}(Go&3)!==0&&ku(),Pr(t),d=t.pendingLanes,(a&4194090)!==0&&(d&42)!==0?t===Cf?sc++:(sc=0,Cf=t):sc=0,rc(0)}}function N0(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,Ll(s)))}function ku(t){return T0(),A0(),I0(),R0()}function R0(){if(Dn!==5)return!1;var t=Ji,s=Nf;Nf=0;var a=tr(Go),c=Ee.T,d=Le.p;try{Le.p=32>a?32:a,Ee.T=null,a=Rf,Rf=null;var g=Ji,S=Go;if(Dn=0,Ho=Ji=null,Go=0,(Lt&6)!==0)throw Error(i(331));var M=Lt;if(Lt|=4,d0(g.current),c0(g,g.current,S,a),Lt=M,rc(0,!1),yn&&typeof yn.onPostCommitFiberRoot=="function")try{yn.onPostCommitFiberRoot(Cs,g)}catch{}return!0}finally{Le.p=d,Ee.T=c,N0(t,s)}}function C0(t,s,a){s=Bs(a,s),s=lf(t.stateNode,s,2),t=Fi(t,s,2),t!==null&&(Wt(t,2),Pr(t))}function Gt(t,s,a){if(t.tag===3)C0(t,t,a);else for(;s!==null;){if(s.tag===3){C0(s,t,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Zi===null||!Zi.has(c))){t=Bs(a,t),a=jy(2),c=Fi(s,a,2),c!==null&&(ky(a,c,s,t),Wt(c,2),Pr(c));break}}s=s.return}}function jf(t,s,a){var c=t.pingCache;if(c===null){c=t.pingCache=new KE;var d=new Set;c.set(s,d)}else d=c.get(s),d===void 0&&(d=new Set,c.set(s,d));d.has(a)||(Sf=!0,d.add(a),t=JE.bind(null,t,s,a),s.then(t,t))}function JE(t,s,a){var c=t.pingCache;c!==null&&c.delete(s),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Qt===t&&(Nt&a)===a&&(sn===4||sn===3&&(Nt&62914560)===Nt&&300>In()-If?(Lt&2)===0&&Qo(t,0):Tf|=a,Fo===Nt&&(Fo=0)),Pr(t)}function D0(t,s){s===0&&(s=Os()),t=No(t,s),t!==null&&(Wt(t,s),Pr(t))}function ew(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),D0(t,a)}function tw(t,s){var a=0;switch(t.tag){case 13:var c=t.stateNode,d=t.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=t.stateNode;break;case 22:c=t.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(s),D0(t,a)}function nw(t,s){return Ns(t,s)}var Pu=null,Ko=null,kf=!1,Lu=!1,Pf=!1,no=0;function Pr(t){t!==Ko&&t.next===null&&(Ko===null?Pu=Ko=t:Ko=Ko.next=t),Lu=!0,kf||(kf=!0,rw())}function rc(t,s){if(!Pf&&Lu){Pf=!0;do for(var a=!1,c=Pu;c!==null;){if(t!==0){var d=c.pendingLanes;if(d===0)var g=0;else{var S=c.suspendedLanes,M=c.pingedLanes;g=(1<<31-Nn(42|t)+1)-1,g&=d&~(S&~M),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(a=!0,k0(c,g))}else g=Nt,g=Hn(c,c===Qt?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(g&3)===0||Ds(c,g)||(a=!0,k0(c,g));c=c.next}while(a);Pf=!1}}function sw(){O0()}function O0(){Lu=kf=!1;var t=0;no!==0&&(dw()&&(t=no),no=0);for(var s=In(),a=null,c=Pu;c!==null;){var d=c.next,g=M0(c,s);g===0?(c.next=null,a===null?Pu=d:a.next=d,d===null&&(Ko=a)):(a=c,(t!==0||(g&3)!==0)&&(Lu=!0)),c=d}rc(t)}function M0(t,s){for(var a=t.suspendedLanes,c=t.pingedLanes,d=t.expirationTimes,g=t.pendingLanes&-62914561;0<g;){var S=31-Nn(g),M=1<<S,K=d[S];K===-1?((M&a)===0||(M&c)!==0)&&(d[S]=Wr(M,s)):K<=s&&(t.expiredLanes|=M),g&=~M}if(s=Qt,a=Nt,a=Hn(t,t===s?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c=t.callbackNode,a===0||t===s&&(Vt===2||Vt===9)||t.cancelPendingCommit!==null)return c!==null&&c!==null&&Ws(c),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Ds(t,a)){if(s=a&-a,s===t.callbackPriority)return s;switch(c!==null&&Ws(c),tr(a)){case 2:case 8:a=rn;break;case 32:a=Rs;break;case 268435456:a=ji;break;default:a=Rs}return c=j0.bind(null,t),a=Ns(a,c),t.callbackPriority=s,t.callbackNode=a,s}return c!==null&&c!==null&&Ws(c),t.callbackPriority=2,t.callbackNode=null,2}function j0(t,s){if(Dn!==0&&Dn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(ku()&&t.callbackNode!==a)return null;var c=Nt;return c=Hn(t,t===Qt?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c===0?null:(g0(t,c,s),M0(t,In()),t.callbackNode!=null&&t.callbackNode===a?j0.bind(null,t):null)}function k0(t,s){if(ku())return null;g0(t,s,!0)}function rw(){pw(function(){(Lt&6)!==0?Ns(Xt,sw):O0()})}function Lf(){return no===0&&(no=ja()),no}function P0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:x(""+t)}function L0(t,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,t.id&&a.setAttribute("form",t.id),s.parentNode.insertBefore(a,s),t=new FormData(t),a.parentNode.removeChild(a),t}function iw(t,s,a,c,d){if(s==="submit"&&a&&a.stateNode===d){var g=P0((d[_n]||null).action),S=c.submitter;S&&(s=(s=S[_n]||null)?P0(s.formAction):S.getAttribute("formAction"),s!==null&&(g=s,S=null));var M=new vt("action","action",null,c,d);t.push({event:M,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(no!==0){var K=S?L0(d,S):new FormData(d);nf(a,{pending:!0,data:K,method:d.method,action:g},null,K)}}else typeof g=="function"&&(M.preventDefault(),K=S?L0(d,S):new FormData(d),nf(a,{pending:!0,data:K,method:d.method,action:g},g,K))},currentTarget:d}]})}}for(var Vf=0;Vf<Ed.length;Vf++){var Uf=Ed[Vf],aw=Uf.toLowerCase(),ow=Uf[0].toUpperCase()+Uf.slice(1);mr(aw,"on"+ow)}mr(gg,"onAnimationEnd"),mr(yg,"onAnimationIteration"),mr(_g,"onAnimationStart"),mr("dblclick","onDoubleClick"),mr("focusin","onFocus"),mr("focusout","onBlur"),mr(SE,"onTransitionRun"),mr(TE,"onTransitionStart"),mr(AE,"onTransitionCancel"),mr(vg,"onTransitionEnd"),ps("onMouseEnter",["mouseout","mouseover"]),ps("onMouseLeave",["mouseout","mouseover"]),ps("onPointerEnter",["pointerout","pointerover"]),ps("onPointerLeave",["pointerout","pointerover"]),ks("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ks("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ks("onBeforeInput",["compositionend","keypress","textInput","paste"]),ks("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ks("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ks("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ic="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ic));function V0(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var c=t[a],d=c.event;c=c.listeners;e:{var g=void 0;if(s)for(var S=c.length-1;0<=S;S--){var M=c[S],K=M.instance,pe=M.currentTarget;if(M=M.listener,K!==g&&d.isPropagationStopped())break e;g=M,d.currentTarget=pe;try{g(d)}catch(Ae){Su(Ae)}d.currentTarget=null,g=K}else for(S=0;S<c.length;S++){if(M=c[S],K=M.instance,pe=M.currentTarget,M=M.listener,K!==g&&d.isPropagationStopped())break e;g=M,d.currentTarget=pe;try{g(d)}catch(Ae){Su(Ae)}d.currentTarget=null,g=K}}}}function wt(t,s){var a=s[Jr];a===void 0&&(a=s[Jr]=new Set);var c=t+"__bubble";a.has(c)||(U0(s,t,2,!1),a.add(c))}function Bf(t,s,a){var c=0;s&&(c|=4),U0(a,t,c,s)}var Vu="_reactListening"+Math.random().toString(36).slice(2);function zf(t){if(!t[Vu]){t[Vu]=!0,So.forEach(function(a){a!=="selectionchange"&&(lw.has(a)||Bf(a,!1,t),Bf(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Vu]||(s[Vu]=!0,Bf("selectionchange",!1,s))}}function U0(t,s,a,c){switch(c_(s)){case 2:var d=kw;break;case 8:d=Pw;break;default:d=tp}a=d.bind(null,s,a,t),d=void 0,!fe||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),c?d!==void 0?t.addEventListener(s,a,{capture:!0,passive:d}):t.addEventListener(s,a,!0):d!==void 0?t.addEventListener(s,a,{passive:d}):t.addEventListener(s,a,!1)}function qf(t,s,a,c,d){var g=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var S=c.tag;if(S===3||S===4){var M=c.stateNode.containerInfo;if(M===d)break;if(S===4)for(S=c.return;S!==null;){var K=S.tag;if((K===3||K===4)&&S.stateNode.containerInfo===d)return;S=S.return}for(;M!==null;){if(S=Ms(M),S===null)return;if(K=S.tag,K===5||K===6||K===26||K===27){c=g=S;continue e}M=M.parentNode}}c=c.return}Se(function(){var pe=g,Ae=U(a),Ce=[];e:{var ge=bg.get(t);if(ge!==void 0){var _e=vt,ct=t;switch(t){case"keypress":if(Te(a)===0)break e;case"keydown":case"keyup":_e=hr;break;case"focusin":ct="focus",_e=Cr;break;case"focusout":ct="blur",_e=Cr;break;case"beforeblur":case"afterblur":_e=Cr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_e=lr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_e=cr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_e=y;break;case gg:case yg:case _g:_e=oi;break;case vg:_e=p;break;case"scroll":case"scrollend":_e=It;break;case"wheel":_e=w;break;case"copy":case"cut":case"paste":_e=ur;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_e=Xn;break;case"toggle":case"beforetoggle":_e=X}var tt=(s&4)!==0,qt=!tt&&(t==="scroll"||t==="scrollend"),ce=tt?ge!==null?ge+"Capture":null:ge;tt=[];for(var oe=pe,de;oe!==null;){var Ie=oe;if(de=Ie.stateNode,Ie=Ie.tag,Ie!==5&&Ie!==26&&Ie!==27||de===null||ce===null||(Ie=W(oe,ce),Ie!=null&&tt.push(ac(oe,Ie,de))),qt)break;oe=oe.return}0<tt.length&&(ge=new _e(ge,ct,null,a,Ae),Ce.push({event:ge,listeners:tt}))}}if((s&7)===0){e:{if(ge=t==="mouseover"||t==="pointerover",_e=t==="mouseout"||t==="pointerout",ge&&a!==I&&(ct=a.relatedTarget||a.fromElement)&&(Ms(ct)||ct[nr]))break e;if((_e||ge)&&(ge=Ae.window===Ae?Ae:(ge=Ae.ownerDocument)?ge.defaultView||ge.parentWindow:window,_e?(ct=a.relatedTarget||a.toElement,_e=pe,ct=ct?Ms(ct):null,ct!==null&&(qt=u(ct),tt=ct.tag,ct!==qt||tt!==5&&tt!==27&&tt!==6)&&(ct=null)):(_e=null,ct=pe),_e!==ct)){if(tt=lr,Ie="onMouseLeave",ce="onMouseEnter",oe="mouse",(t==="pointerout"||t==="pointerover")&&(tt=Xn,Ie="onPointerLeave",ce="onPointerEnter",oe="pointer"),qt=_e==null?ge:sr(_e),de=ct==null?ge:sr(ct),ge=new tt(Ie,oe+"leave",_e,a,Ae),ge.target=qt,ge.relatedTarget=de,Ie=null,Ms(Ae)===pe&&(tt=new tt(ce,oe+"enter",ct,a,Ae),tt.target=de,tt.relatedTarget=qt,Ie=tt),qt=Ie,_e&&ct)t:{for(tt=_e,ce=ct,oe=0,de=tt;de;de=Yo(de))oe++;for(de=0,Ie=ce;Ie;Ie=Yo(Ie))de++;for(;0<oe-de;)tt=Yo(tt),oe--;for(;0<de-oe;)ce=Yo(ce),de--;for(;oe--;){if(tt===ce||ce!==null&&tt===ce.alternate)break t;tt=Yo(tt),ce=Yo(ce)}tt=null}else tt=null;_e!==null&&B0(Ce,ge,_e,tt,!1),ct!==null&&qt!==null&&B0(Ce,qt,ct,tt,!0)}}e:{if(ge=pe?sr(pe):window,_e=ge.nodeName&&ge.nodeName.toLowerCase(),_e==="select"||_e==="input"&&ge.type==="file")var Ge=ig;else if(sg(ge))if(ag)Ge=EE;else{Ge=vE;var bt=_E}else _e=ge.nodeName,!_e||_e.toLowerCase()!=="input"||ge.type!=="checkbox"&&ge.type!=="radio"?pe&&Q(pe.elementType)&&(Ge=ig):Ge=bE;if(Ge&&(Ge=Ge(t,pe))){rg(Ce,Ge,a,Ae);break e}bt&&bt(t,ge,pe),t==="focusout"&&pe&&ge.type==="number"&&pe.memoizedProps.value!=null&&O(ge,"number",ge.value)}switch(bt=pe?sr(pe):window,t){case"focusin":(sg(bt)||bt.contentEditable==="true")&&(To=bt,_d=pe,Ol=null);break;case"focusout":Ol=_d=To=null;break;case"mousedown":vd=!0;break;case"contextmenu":case"mouseup":case"dragend":vd=!1,pg(Ce,a,Ae);break;case"selectionchange":if(xE)break;case"keydown":case"keyup":pg(Ce,a,Ae)}var Ze;if($e)e:{switch(t){case"compositionstart":var it="onCompositionStart";break e;case"compositionend":it="onCompositionEnd";break e;case"compositionupdate":it="onCompositionUpdate";break e}it=void 0}else pr?dr(t,a)&&(it="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(it="onCompositionStart");it&&(pt&&a.locale!=="ko"&&(pr||it!=="onCompositionStart"?it==="onCompositionEnd"&&pr&&(Ze=Ke()):(we=Ae,ye="value"in we?we.value:we.textContent,pr=!0)),bt=Uu(pe,it),0<bt.length&&(it=new Vi(it,t,null,a,Ae),Ce.push({event:it,listeners:bt}),Ze?it.data=Ze:(Ze=fr(a),Ze!==null&&(it.data=Ze)))),(Ze=Je?Nl(t,a):mE(t,a))&&(it=Uu(pe,"onBeforeInput"),0<it.length&&(bt=new Vi("onBeforeInput","beforeinput",null,a,Ae),Ce.push({event:bt,listeners:it}),bt.data=Ze)),iw(Ce,t,pe,a,Ae)}V0(Ce,s)})}function ac(t,s,a){return{instance:t,listener:s,currentTarget:a}}function Uu(t,s){for(var a=s+"Capture",c=[];t!==null;){var d=t,g=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||g===null||(d=W(t,a),d!=null&&c.unshift(ac(t,d,g)),d=W(t,s),d!=null&&c.push(ac(t,d,g))),t.tag===3)return c;t=t.return}return[]}function Yo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function B0(t,s,a,c,d){for(var g=s._reactName,S=[];a!==null&&a!==c;){var M=a,K=M.alternate,pe=M.stateNode;if(M=M.tag,K!==null&&K===c)break;M!==5&&M!==26&&M!==27||pe===null||(K=pe,d?(pe=W(a,g),pe!=null&&S.unshift(ac(a,pe,K))):d||(pe=W(a,g),pe!=null&&S.push(ac(a,pe,K)))),a=a.return}S.length!==0&&t.push({event:s,listeners:S})}var cw=/\r\n?/g,uw=/\u0000|\uFFFD/g;function z0(t){return(typeof t=="string"?t:""+t).replace(cw,`
`).replace(uw,"")}function q0(t,s){return s=z0(s),z0(t)===s}function Bu(){}function zt(t,s,a,c,d,g){switch(a){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||A(t,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&A(t,""+c);break;case"className":Ir(t,"class",c);break;case"tabIndex":Ir(t,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Ir(t,a,c);break;case"style":q(t,c,g);break;case"data":if(s!=="object"){Ir(t,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||a!=="href")){t.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(a);break}c=x(""+c),t.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(a==="formAction"?(s!=="input"&&zt(t,s,"name",d.name,d,null),zt(t,s,"formEncType",d.formEncType,d,null),zt(t,s,"formMethod",d.formMethod,d,null),zt(t,s,"formTarget",d.formTarget,d,null)):(zt(t,s,"encType",d.encType,d,null),zt(t,s,"method",d.method,d,null),zt(t,s,"target",d.target,d,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(a);break}c=x(""+c),t.setAttribute(a,c);break;case"onClick":c!=null&&(t.onclick=Bu);break;case"onScroll":c!=null&&wt("scroll",t);break;case"onScrollEnd":c!=null&&wt("scrollend",t);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(a=c.__html,a!=null){if(d.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"multiple":t.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":t.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){t.removeAttribute("xlink:href");break}a=x(""+c),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(a,""+c):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":c===!0?t.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(a,c):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?t.setAttribute(a,c):t.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?t.removeAttribute(a):t.setAttribute(a,c);break;case"popover":wt("beforetoggle",t),wt("toggle",t),si(t,"popover",c);break;case"xlinkActuate":Qn(t,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Qn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Qn(t,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Qn(t,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Qn(t,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Qn(t,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Qn(t,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Qn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Qn(t,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":si(t,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=V.get(a)||a,si(t,a,c))}}function Ff(t,s,a,c,d,g){switch(a){case"style":q(t,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(a=c.__html,a!=null){if(d.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"children":typeof c=="string"?A(t,c):(typeof c=="number"||typeof c=="bigint")&&A(t,""+c);break;case"onScroll":c!=null&&wt("scroll",t);break;case"onScrollEnd":c!=null&&wt("scrollend",t);break;case"onClick":c!=null&&(t.onclick=Bu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ti.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),s=a.slice(2,d?a.length-7:void 0),g=t[_n]||null,g=g!=null?g[a]:null,typeof g=="function"&&t.removeEventListener(s,g,d),typeof c=="function")){typeof g!="function"&&g!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(s,c,d);break e}a in t?t[a]=c:c===!0?t.setAttribute(a,""):si(t,a,c)}}}function On(t,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":wt("error",t),wt("load",t);var c=!1,d=!1,g;for(g in a)if(a.hasOwnProperty(g)){var S=a[g];if(S!=null)switch(g){case"src":c=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:zt(t,s,g,S,a,null)}}d&&zt(t,s,"srcSet",a.srcSet,a,null),c&&zt(t,s,"src",a.src,a,null);return;case"input":wt("invalid",t);var M=g=S=d=null,K=null,pe=null;for(c in a)if(a.hasOwnProperty(c)){var Ae=a[c];if(Ae!=null)switch(c){case"name":d=Ae;break;case"type":S=Ae;break;case"checked":K=Ae;break;case"defaultChecked":pe=Ae;break;case"value":g=Ae;break;case"defaultValue":M=Ae;break;case"children":case"dangerouslySetInnerHTML":if(Ae!=null)throw Error(i(137,s));break;default:zt(t,s,c,Ae,a,null)}}C(t,g,M,K,pe,S,d,!1),or(t);return;case"select":wt("invalid",t),c=S=g=null;for(d in a)if(a.hasOwnProperty(d)&&(M=a[d],M!=null))switch(d){case"value":g=M;break;case"defaultValue":S=M;break;case"multiple":c=M;default:zt(t,s,d,M,a,null)}s=g,a=S,t.multiple=!!c,s!=null?N(t,!!c,s,!1):a!=null&&N(t,!!c,a,!0);return;case"textarea":wt("invalid",t),g=d=c=null;for(S in a)if(a.hasOwnProperty(S)&&(M=a[S],M!=null))switch(S){case"value":c=M;break;case"defaultValue":d=M;break;case"children":g=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(i(91));break;default:zt(t,s,S,M,a,null)}R(t,c,d,g),or(t);return;case"option":for(K in a)if(a.hasOwnProperty(K)&&(c=a[K],c!=null))switch(K){case"selected":t.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:zt(t,s,K,c,a,null)}return;case"dialog":wt("beforetoggle",t),wt("toggle",t),wt("cancel",t),wt("close",t);break;case"iframe":case"object":wt("load",t);break;case"video":case"audio":for(c=0;c<ic.length;c++)wt(ic[c],t);break;case"image":wt("error",t),wt("load",t);break;case"details":wt("toggle",t);break;case"embed":case"source":case"link":wt("error",t),wt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(pe in a)if(a.hasOwnProperty(pe)&&(c=a[pe],c!=null))switch(pe){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:zt(t,s,pe,c,a,null)}return;default:if(Q(s)){for(Ae in a)a.hasOwnProperty(Ae)&&(c=a[Ae],c!==void 0&&Ff(t,s,Ae,c,a,void 0));return}}for(M in a)a.hasOwnProperty(M)&&(c=a[M],c!=null&&zt(t,s,M,c,a,null))}function hw(t,s,a,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,g=null,S=null,M=null,K=null,pe=null,Ae=null;for(_e in a){var Ce=a[_e];if(a.hasOwnProperty(_e)&&Ce!=null)switch(_e){case"checked":break;case"value":break;case"defaultValue":K=Ce;default:c.hasOwnProperty(_e)||zt(t,s,_e,null,c,Ce)}}for(var ge in c){var _e=c[ge];if(Ce=a[ge],c.hasOwnProperty(ge)&&(_e!=null||Ce!=null))switch(ge){case"type":g=_e;break;case"name":d=_e;break;case"checked":pe=_e;break;case"defaultChecked":Ae=_e;break;case"value":S=_e;break;case"defaultValue":M=_e;break;case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(i(137,s));break;default:_e!==Ce&&zt(t,s,ge,_e,c,Ce)}}D(t,S,M,K,pe,Ae,g,d);return;case"select":_e=S=M=ge=null;for(g in a)if(K=a[g],a.hasOwnProperty(g)&&K!=null)switch(g){case"value":break;case"multiple":_e=K;default:c.hasOwnProperty(g)||zt(t,s,g,null,c,K)}for(d in c)if(g=c[d],K=a[d],c.hasOwnProperty(d)&&(g!=null||K!=null))switch(d){case"value":ge=g;break;case"defaultValue":M=g;break;case"multiple":S=g;default:g!==K&&zt(t,s,d,g,c,K)}s=M,a=S,c=_e,ge!=null?N(t,!!a,ge,!1):!!c!=!!a&&(s!=null?N(t,!!a,s,!0):N(t,!!a,a?[]:"",!1));return;case"textarea":_e=ge=null;for(M in a)if(d=a[M],a.hasOwnProperty(M)&&d!=null&&!c.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:zt(t,s,M,null,c,d)}for(S in c)if(d=c[S],g=a[S],c.hasOwnProperty(S)&&(d!=null||g!=null))switch(S){case"value":ge=d;break;case"defaultValue":_e=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==g&&zt(t,s,S,d,c,g)}T(t,ge,_e);return;case"option":for(var ct in a)if(ge=a[ct],a.hasOwnProperty(ct)&&ge!=null&&!c.hasOwnProperty(ct))switch(ct){case"selected":t.selected=!1;break;default:zt(t,s,ct,null,c,ge)}for(K in c)if(ge=c[K],_e=a[K],c.hasOwnProperty(K)&&ge!==_e&&(ge!=null||_e!=null))switch(K){case"selected":t.selected=ge&&typeof ge!="function"&&typeof ge!="symbol";break;default:zt(t,s,K,ge,c,_e)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var tt in a)ge=a[tt],a.hasOwnProperty(tt)&&ge!=null&&!c.hasOwnProperty(tt)&&zt(t,s,tt,null,c,ge);for(pe in c)if(ge=c[pe],_e=a[pe],c.hasOwnProperty(pe)&&ge!==_e&&(ge!=null||_e!=null))switch(pe){case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(i(137,s));break;default:zt(t,s,pe,ge,c,_e)}return;default:if(Q(s)){for(var qt in a)ge=a[qt],a.hasOwnProperty(qt)&&ge!==void 0&&!c.hasOwnProperty(qt)&&Ff(t,s,qt,void 0,c,ge);for(Ae in c)ge=c[Ae],_e=a[Ae],!c.hasOwnProperty(Ae)||ge===_e||ge===void 0&&_e===void 0||Ff(t,s,Ae,ge,c,_e);return}}for(var ce in a)ge=a[ce],a.hasOwnProperty(ce)&&ge!=null&&!c.hasOwnProperty(ce)&&zt(t,s,ce,null,c,ge);for(Ce in c)ge=c[Ce],_e=a[Ce],!c.hasOwnProperty(Ce)||ge===_e||ge==null&&_e==null||zt(t,s,Ce,ge,c,_e)}var Hf=null,Gf=null;function zu(t){return t.nodeType===9?t:t.ownerDocument}function F0(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function H0(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function Qf(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var $f=null;function dw(){var t=window.event;return t&&t.type==="popstate"?t===$f?!1:($f=t,!0):($f=null,!1)}var G0=typeof setTimeout=="function"?setTimeout:void 0,fw=typeof clearTimeout=="function"?clearTimeout:void 0,Q0=typeof Promise=="function"?Promise:void 0,pw=typeof queueMicrotask=="function"?queueMicrotask:typeof Q0<"u"?function(t){return Q0.resolve(null).then(t).catch(mw)}:G0;function mw(t){setTimeout(function(){throw t})}function ta(t){return t==="head"}function $0(t,s){var a=s,c=0,d=0;do{var g=a.nextSibling;if(t.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"){if(0<c&&8>c){a=c;var S=t.ownerDocument;if(a&1&&oc(S.documentElement),a&2&&oc(S.body),a&4)for(a=S.head,oc(a),S=a.firstChild;S;){var M=S.nextSibling,K=S.nodeName;S[Ar]||K==="SCRIPT"||K==="STYLE"||K==="LINK"&&S.rel.toLowerCase()==="stylesheet"||a.removeChild(S),S=M}}if(d===0){t.removeChild(g),mc(s);return}d--}else a==="$"||a==="$?"||a==="$!"?d++:c=a.charCodeAt(0)-48;else c=0;a=g}while(a);mc(s)}function Kf(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Kf(a),ei(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function gw(t,s,a,c){for(;t.nodeType===1;){var d=a;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(c){if(!t[Ar])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(g=t.getAttribute("rel"),g==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(g!==d.rel||t.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||t.getAttribute("title")!==(d.title==null?null:d.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(g=t.getAttribute("src"),(g!==(d.src==null?null:d.src)||t.getAttribute("type")!==(d.type==null?null:d.type)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&g&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var g=d.name==null?null:""+d.name;if(d.type==="hidden"&&t.getAttribute("name")===g)return t}else return t;if(t=yr(t.nextSibling),t===null)break}return null}function yw(t,s,a){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=yr(t.nextSibling),t===null))return null;return t}function Yf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function _w(t,s){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")s();else{var c=function(){s(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),t._reactRetry=c}}function yr(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return t}var Xf=null;function K0(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return t;s--}else a==="/$"&&s++}t=t.previousSibling}return null}function Y0(t,s,a){switch(s=zu(a),t){case"html":if(t=s.documentElement,!t)throw Error(i(452));return t;case"head":if(t=s.head,!t)throw Error(i(453));return t;case"body":if(t=s.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function oc(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);ei(t)}var Qs=new Map,X0=new Set;function qu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ei=Le.d;Le.d={f:vw,r:bw,D:Ew,C:ww,L:xw,m:Sw,X:Aw,S:Tw,M:Iw};function vw(){var t=Ei.f(),s=Mu();return t||s}function bw(t){var s=js(t);s!==null&&s.tag===5&&s.type==="form"?gy(s):Ei.r(t)}var Xo=typeof document>"u"?null:document;function W0(t,s,a){var c=Xo;if(c&&typeof s=="string"&&s){var d=$(s);d='link[rel="'+t+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),X0.has(d)||(X0.add(d),t={rel:t,crossOrigin:a,href:s},c.querySelector(d)===null&&(s=c.createElement("link"),On(s,"link",t),Jt(s),c.head.appendChild(s)))}}function Ew(t){Ei.D(t),W0("dns-prefetch",t,null)}function ww(t,s){Ei.C(t,s),W0("preconnect",t,s)}function xw(t,s,a){Ei.L(t,s,a);var c=Xo;if(c&&t&&s){var d='link[rel="preload"][as="'+$(s)+'"]';s==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+$(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+$(a.imageSizes)+'"]')):d+='[href="'+$(t)+'"]';var g=d;switch(s){case"style":g=Wo(t);break;case"script":g=Zo(t)}Qs.has(g)||(t=E({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:t,as:s},a),Qs.set(g,t),c.querySelector(d)!==null||s==="style"&&c.querySelector(lc(g))||s==="script"&&c.querySelector(cc(g))||(s=c.createElement("link"),On(s,"link",t),Jt(s),c.head.appendChild(s)))}}function Sw(t,s){Ei.m(t,s);var a=Xo;if(a&&t){var c=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+$(c)+'"][href="'+$(t)+'"]',g=d;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Zo(t)}if(!Qs.has(g)&&(t=E({rel:"modulepreload",href:t},s),Qs.set(g,t),a.querySelector(d)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(cc(g)))return}c=a.createElement("link"),On(c,"link",t),Jt(c),a.head.appendChild(c)}}}function Tw(t,s,a){Ei.S(t,s,a);var c=Xo;if(c&&t){var d=rr(c).hoistableStyles,g=Wo(t);s=s||"default";var S=d.get(g);if(!S){var M={loading:0,preload:null};if(S=c.querySelector(lc(g)))M.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":s},a),(a=Qs.get(g))&&Wf(t,a);var K=S=c.createElement("link");Jt(K),On(K,"link",t),K._p=new Promise(function(pe,Ae){K.onload=pe,K.onerror=Ae}),K.addEventListener("load",function(){M.loading|=1}),K.addEventListener("error",function(){M.loading|=2}),M.loading|=4,Fu(S,s,c)}S={type:"stylesheet",instance:S,count:1,state:M},d.set(g,S)}}}function Aw(t,s){Ei.X(t,s);var a=Xo;if(a&&t){var c=rr(a).hoistableScripts,d=Zo(t),g=c.get(d);g||(g=a.querySelector(cc(d)),g||(t=E({src:t,async:!0},s),(s=Qs.get(d))&&Zf(t,s),g=a.createElement("script"),Jt(g),On(g,"link",t),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(d,g))}}function Iw(t,s){Ei.M(t,s);var a=Xo;if(a&&t){var c=rr(a).hoistableScripts,d=Zo(t),g=c.get(d);g||(g=a.querySelector(cc(d)),g||(t=E({src:t,async:!0,type:"module"},s),(s=Qs.get(d))&&Zf(t,s),g=a.createElement("script"),Jt(g),On(g,"link",t),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(d,g))}}function Z0(t,s,a,c){var d=(d=st.current)?qu(d):null;if(!d)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Wo(a.href),a=rr(d).hoistableStyles,c=a.get(s),c||(c={type:"style",instance:null,count:0,state:null},a.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Wo(a.href);var g=rr(d).hoistableStyles,S=g.get(t);if(S||(d=d.ownerDocument||d,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(t,S),(g=d.querySelector(lc(t)))&&!g._p&&(S.instance=g,S.state.loading=5),Qs.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Qs.set(t,a),g||Nw(d,t,a,S.state))),s&&c===null)throw Error(i(528,""));return S}if(s&&c!==null)throw Error(i(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Zo(a),a=rr(d).hoistableScripts,c=a.get(s),c||(c={type:"script",instance:null,count:0,state:null},a.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function Wo(t){return'href="'+$(t)+'"'}function lc(t){return'link[rel="stylesheet"]['+t+"]"}function J0(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function Nw(t,s,a,c){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=t.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),On(s,"link",a),Jt(s),t.head.appendChild(s))}function Zo(t){return'[src="'+$(t)+'"]'}function cc(t){return"script[async]"+t}function e_(t,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var c=t.querySelector('style[data-href~="'+$(a.href)+'"]');if(c)return s.instance=c,Jt(c),c;var d=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(t.ownerDocument||t).createElement("style"),Jt(c),On(c,"style",d),Fu(c,a.precedence,t),s.instance=c;case"stylesheet":d=Wo(a.href);var g=t.querySelector(lc(d));if(g)return s.state.loading|=4,s.instance=g,Jt(g),g;c=J0(a),(d=Qs.get(d))&&Wf(c,d),g=(t.ownerDocument||t).createElement("link"),Jt(g);var S=g;return S._p=new Promise(function(M,K){S.onload=M,S.onerror=K}),On(g,"link",c),s.state.loading|=4,Fu(g,a.precedence,t),s.instance=g;case"script":return g=Zo(a.src),(d=t.querySelector(cc(g)))?(s.instance=d,Jt(d),d):(c=a,(d=Qs.get(g))&&(c=E({},a),Zf(c,d)),t=t.ownerDocument||t,d=t.createElement("script"),Jt(d),On(d,"link",c),t.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,Fu(c,a.precedence,t));return s.instance}function Fu(t,s,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=c.length?c[c.length-1]:null,g=d,S=0;S<c.length;S++){var M=c[S];if(M.dataset.precedence===s)g=M;else if(g!==d)break}g?g.parentNode.insertBefore(t,g.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(t,s.firstChild))}function Wf(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function Zf(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var Hu=null;function t_(t,s,a){if(Hu===null){var c=new Map,d=Hu=new Map;d.set(a,c)}else d=Hu,c=d.get(a),c||(c=new Map,d.set(a,c));if(c.has(t))return c;for(c.set(t,null),a=a.getElementsByTagName(t),d=0;d<a.length;d++){var g=a[d];if(!(g[Ar]||g[Zt]||t==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var S=g.getAttribute(s)||"";S=t+S;var M=c.get(S);M?M.push(g):c.set(S,[g])}}return c}function n_(t,s,a){t=t.ownerDocument||t,t.head.insertBefore(a,s==="title"?t.querySelector("head > title"):null)}function Rw(t,s,a){if(a===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function s_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var uc=null;function Cw(){}function Dw(t,s,a){if(uc===null)throw Error(i(475));var c=uc;if(s.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var d=Wo(a.href),g=t.querySelector(lc(d));if(g){t=g._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(c.count++,c=Gu.bind(c),t.then(c,c)),s.state.loading|=4,s.instance=g,Jt(g);return}g=t.ownerDocument||t,a=J0(a),(d=Qs.get(d))&&Wf(a,d),g=g.createElement("link"),Jt(g);var S=g;S._p=new Promise(function(M,K){S.onload=M,S.onerror=K}),On(g,"link",a),s.instance=g}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(s,t),(t=s.state.preload)&&(s.state.loading&3)===0&&(c.count++,s=Gu.bind(c),t.addEventListener("load",s),t.addEventListener("error",s))}}function Ow(){if(uc===null)throw Error(i(475));var t=uc;return t.stylesheets&&t.count===0&&Jf(t,t.stylesheets),0<t.count?function(s){var a=setTimeout(function(){if(t.stylesheets&&Jf(t,t.stylesheets),t.unsuspend){var c=t.unsuspend;t.unsuspend=null,c()}},6e4);return t.unsuspend=s,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Gu(){if(this.count--,this.count===0){if(this.stylesheets)Jf(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Qu=null;function Jf(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Qu=new Map,s.forEach(Mw,t),Qu=null,Gu.call(t))}function Mw(t,s){if(!(s.state.loading&4)){var a=Qu.get(t);if(a)var c=a.get(null);else{a=new Map,Qu.set(t,a);for(var d=t.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<d.length;g++){var S=d[g];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(a.set(S.dataset.precedence,S),c=S)}c&&a.set(null,c)}d=s.instance,S=d.getAttribute("data-precedence"),g=a.get(S)||c,g===c&&a.set(null,d),a.set(S,d),this.count++,c=Gu.bind(this),d.addEventListener("load",c),d.addEventListener("error",c),g?g.parentNode.insertBefore(d,g.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(d,t.firstChild)),s.state.loading|=4}}var hc={$$typeof:Pe,Provider:null,Consumer:null,_currentValue:Ye,_currentValue2:Ye,_threadCount:0};function jw(t,s,a,c,d,g,S,M){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pi(0),this.hiddenUpdates=Pi(null),this.identifierPrefix=c,this.onUncaughtError=d,this.onCaughtError=g,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function r_(t,s,a,c,d,g,S,M,K,pe,Ae,Ce){return t=new jw(t,s,a,S,M,K,pe,Ce),s=1,g===!0&&(s|=24),g=bs(3,null,null,s),t.current=g,g.stateNode=t,s=Md(),s.refCount++,t.pooledCache=s,s.refCount++,g.memoizedState={element:c,isDehydrated:a,cache:s},Ld(g),t}function i_(t){return t?(t=Ro,t):Ro}function a_(t,s,a,c,d,g){d=i_(d),c.context===null?c.context=d:c.pendingContext=d,c=qi(s),c.payload={element:a},g=g===void 0?null:g,g!==null&&(c.callback=g),a=Fi(t,c,s),a!==null&&(Ts(a,t,s),zl(a,t,s))}function o_(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function ep(t,s){o_(t,s),(t=t.alternate)&&o_(t,s)}function l_(t){if(t.tag===13){var s=No(t,67108864);s!==null&&Ts(s,t,67108864),ep(t,67108864)}}var $u=!0;function kw(t,s,a,c){var d=Ee.T;Ee.T=null;var g=Le.p;try{Le.p=2,tp(t,s,a,c)}finally{Le.p=g,Ee.T=d}}function Pw(t,s,a,c){var d=Ee.T;Ee.T=null;var g=Le.p;try{Le.p=8,tp(t,s,a,c)}finally{Le.p=g,Ee.T=d}}function tp(t,s,a,c){if($u){var d=np(c);if(d===null)qf(t,s,c,Ku,a),u_(t,c);else if(Vw(d,t,s,a,c))c.stopPropagation();else if(u_(t,c),s&4&&-1<Lw.indexOf(t)){for(;d!==null;){var g=js(d);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var S=ds(g.pendingLanes);if(S!==0){var M=g;for(M.pendingLanes|=2,M.entangledLanes|=2;S;){var K=1<<31-Nn(S);M.entanglements[1]|=K,S&=~K}Pr(g),(Lt&6)===0&&(Du=In()+500,rc(0))}}break;case 13:M=No(g,2),M!==null&&Ts(M,g,2),Mu(),ep(g,2)}if(g=np(c),g===null&&qf(t,s,c,Ku,a),g===d)break;d=g}d!==null&&c.stopPropagation()}else qf(t,s,c,null,a)}}function np(t){return t=U(t),sp(t)}var Ku=null;function sp(t){if(Ku=null,t=Ms(t),t!==null){var s=u(t);if(s===null)t=null;else{var a=s.tag;if(a===13){if(t=f(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return Ku=t,null}function c_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Oa()){case Xt:return 2;case rn:return 8;case Rs:case Ma:return 32;case ji:return 268435456;default:return 32}default:return 32}}var rp=!1,na=null,sa=null,ra=null,dc=new Map,fc=new Map,ia=[],Lw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function u_(t,s){switch(t){case"focusin":case"focusout":na=null;break;case"dragenter":case"dragleave":sa=null;break;case"mouseover":case"mouseout":ra=null;break;case"pointerover":case"pointerout":dc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":fc.delete(s.pointerId)}}function pc(t,s,a,c,d,g){return t===null||t.nativeEvent!==g?(t={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:g,targetContainers:[d]},s!==null&&(s=js(s),s!==null&&l_(s)),t):(t.eventSystemFlags|=c,s=t.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),t)}function Vw(t,s,a,c,d){switch(s){case"focusin":return na=pc(na,t,s,a,c,d),!0;case"dragenter":return sa=pc(sa,t,s,a,c,d),!0;case"mouseover":return ra=pc(ra,t,s,a,c,d),!0;case"pointerover":var g=d.pointerId;return dc.set(g,pc(dc.get(g)||null,t,s,a,c,d)),!0;case"gotpointercapture":return g=d.pointerId,fc.set(g,pc(fc.get(g)||null,t,s,a,c,d)),!0}return!1}function h_(t){var s=Ms(t.target);if(s!==null){var a=u(s);if(a!==null){if(s=a.tag,s===13){if(s=f(a),s!==null){t.blockedOn=s,Pa(t.priority,function(){if(a.tag===13){var c=Ss();c=Zr(c);var d=No(a,c);d!==null&&Ts(d,a,c),ep(a,c)}});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Yu(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=np(t.nativeEvent);if(a===null){a=t.nativeEvent;var c=new a.constructor(a.type,a);I=c,a.target.dispatchEvent(c),I=null}else return s=js(a),s!==null&&l_(s),t.blockedOn=a,!1;s.shift()}return!0}function d_(t,s,a){Yu(t)&&a.delete(s)}function Uw(){rp=!1,na!==null&&Yu(na)&&(na=null),sa!==null&&Yu(sa)&&(sa=null),ra!==null&&Yu(ra)&&(ra=null),dc.forEach(d_),fc.forEach(d_)}function Xu(t,s){t.blockedOn===s&&(t.blockedOn=null,rp||(rp=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Uw)))}var Wu=null;function f_(t){Wu!==t&&(Wu=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Wu===t&&(Wu=null);for(var s=0;s<t.length;s+=3){var a=t[s],c=t[s+1],d=t[s+2];if(typeof c!="function"){if(sp(c||a)===null)continue;break}var g=js(a);g!==null&&(t.splice(s,3),s-=3,nf(g,{pending:!0,data:d,method:a.method,action:c},c,d))}}))}function mc(t){function s(K){return Xu(K,t)}na!==null&&Xu(na,t),sa!==null&&Xu(sa,t),ra!==null&&Xu(ra,t),dc.forEach(s),fc.forEach(s);for(var a=0;a<ia.length;a++){var c=ia[a];c.blockedOn===t&&(c.blockedOn=null)}for(;0<ia.length&&(a=ia[0],a.blockedOn===null);)h_(a),a.blockedOn===null&&ia.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var d=a[c],g=a[c+1],S=d[_n]||null;if(typeof g=="function")S||f_(a);else if(S){var M=null;if(g&&g.hasAttribute("formAction")){if(d=g,S=g[_n]||null)M=S.formAction;else if(sp(d)!==null)continue}else M=S.action;typeof M=="function"?a[c+1]=M:(a.splice(c,3),c-=3),f_(a)}}}function ip(t){this._internalRoot=t}Zu.prototype.render=ip.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(i(409));var a=s.current,c=Ss();a_(a,c,t,s,null,null)},Zu.prototype.unmount=ip.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;a_(t.current,2,null,t,null,null),Mu(),s[nr]=null}};function Zu(t){this._internalRoot=t}Zu.prototype.unstable_scheduleHydration=function(t){if(t){var s=Gn();t={blockedOn:null,target:t,priority:s};for(var a=0;a<ia.length&&s!==0&&s<ia[a].priority;a++);ia.splice(a,0,t),a===0&&h_(t)}};var p_=e.version;if(p_!=="19.1.1")throw Error(i(527,p_,"19.1.1"));Le.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=v(s),t=t!==null?b(t):null,t=t===null?null:t.stateNode,t};var Bw={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Ee,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ju=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ju.isDisabled&&Ju.supportsFiber)try{Cs=Ju.inject(Bw),yn=Ju}catch{}}return yc.createRoot=function(t,s){if(!o(t))throw Error(i(299));var a=!1,c="",d=Cy,g=Dy,S=Oy,M=null;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(S=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(M=s.unstable_transitionCallbacks)),s=r_(t,1,!1,null,null,a,c,d,g,S,M,null),t[nr]=s.current,zf(t),new ip(s)},yc.hydrateRoot=function(t,s,a){if(!o(t))throw Error(i(299));var c=!1,d="",g=Cy,S=Dy,M=Oy,K=null,pe=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(S=a.onCaughtError),a.onRecoverableError!==void 0&&(M=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(K=a.unstable_transitionCallbacks),a.formState!==void 0&&(pe=a.formState)),s=r_(t,1,!0,s,a??null,c,d,g,S,M,K,pe),s.context=i_(null),a=s.current,c=Ss(),c=Zr(c),d=qi(c),d.callback=null,Fi(a,d,c),a=c,s.current.lanes=a,Wt(s,a),Pr(s),t[nr]=s.current,zf(t),new Zu(s)},yc.version="19.1.1",yc}var S_;function Xw(){if(S_)return lp.exports;S_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),lp.exports=Yw(),lp.exports}var sm=Xw();const Ww=y1(sm);var ut=(r=>(r.Doctor="Doctor",r.Nurse="Nurse",r.PhysicalTherapist="Physical Therapist",r.SocialWorker="Social Worker",r.Driver="Driver",r.Coordinator="Coordinator",r))(ut||{});const Zn={:[{:"   ",:"",:"salshahrani173@moh.gov.sa",:"508726203",_:"1095913289"},{:"  ",:"",:"amemahmoud@mog.gov.sa",:"558475513",_:"2341546816"},{:"   ",:"",:"rowa.ali.omer@gmail.com1332",:"503956637",_:"2439167822"},{:"   ",:"  ",:"aaldawsari23@moh.gov.sa",:"583224558",_:"1094995634"},{:" ",:"  ",:"atante@moh.gov.sa",:"505939329",_:"2220868372"},{:"   ",:" ",:"yalbishe@moh.gov.sa",:"502255021",_:"1015469685"},{:"   ",:"",:"RELBARAHAMTOSHY@moh.gov.sa",:"531632817",_:"2552269041"},{:"  ",:"",:"zdalamri@outlook.sa",:"550398537",_:"1077038428"},{:"  ",:"",:"handaa@mog.gov.sa",:"556482816",_:"1063146243"},{:"   ",:"",:"NALQAHTANI112@MOH.GOV.SA",:"536899683",_:"1105587644"},{:"   ",:"",:"HAMAD1234NMNM@MOH.GOV.SA",:"502179570",_:"1112039548"},{:"   ",:"",:"thamralshhrany188@gmail.com",:"530427287",_:"1088104987"},{:"   ",:"",:"salsahrani@moh.gov.sa",:"533180068",_:"1043879566"},{:"   ",:"",:"Fahhadms10@gmail.com",:"530531207",_:"1097848525"},{:"  ",:"",:"halmanfi@moh.gov.sa",:"552211844",_:"1051500013"}],:[""," "," ","","","","","","",""," ","","","","","","",""," ","","","","","","","",""," ",""],:[{nationalId:"1003752597",nameAr:"   ",phone:"0555972372",areaId:"",status:"active",level:"4",bradenScore:13,minMonthlyRequired:1,admissionDate:"2023-03-29",gmapsUrl:!1},{nationalId:"1004527469",nameAr:"  ",phone:"0552194769",areaId:"",status:"active",level:"4",bradenScore:10,minMonthlyRequired:1,admissionDate:"2022-10-26",gmapsUrl:!1},{nationalId:"1006081952",nameAr:"   ",phone:"0506222489",areaId:"",status:"active",level:"4",bradenScore:18,minMonthlyRequired:1,admissionDate:"2024-02-06",gmapsUrl:!1},{nationalId:"1006888224",nameAr:"  ",phone:"0550057361",areaId:"",status:"deceased",level:"4",bradenScore:19,minMonthlyRequired:1,admissionDate:"2024-01-18",gmapsUrl:!1},{nationalId:"1007416116",nameAr:"   ",phone:"0555737058",areaId:"",status:"active",level:"4",bradenScore:15,minMonthlyRequired:1,admissionDate:"2022-11-24",gmapsUrl:!1},{nationalId:"1008271585",nameAr:"  ",phone:"0557776344",areaId:"",status:"active",level:"4",bradenScore:13,minMonthlyRequired:1,admissionDate:"2024-01-18",gmapsUrl:!1},{nationalId:"1008754937",nameAr:"   ",phone:"0500334715",areaId:"",status:"active",level:"4",bradenScore:18,minMonthlyRequired:2,admissionDate:"2021-08-22",gmapsUrl:!1},{nationalId:"1010416608",nameAr:"   ",phone:"0532922593",areaId:"",status:"active",level:"4",bradenScore:8,minMonthlyRequired:1,admissionDate:"2023-10-02",gmapsUrl:!1},{nationalId:"1010448668",nameAr:"   ",phone:"0554400503",areaId:"",status:"active",level:"4",bradenScore:18,minMonthlyRequired:1,admissionDate:"2024-02-18",gmapsUrl:!1},{nationalId:"1011110762",nameAr:"  ",phone:"0555353370",areaId:"",status:"active",level:"4",bradenScore:20,minMonthlyRequired:1,admissionDate:"2024-05-19",gmapsUrl:!1},{nationalId:"1011180203",nameAr:"   ",phone:"0503736667",areaId:"-",status:"active",level:"4",bradenScore:12,minMonthlyRequired:1,admissionDate:"2024-05-02",gmapsUrl:!1},{nationalId:"1011351531",nameAr:"   ",phone:"0559414605",areaId:"",status:"active",level:"4",bradenScore:23,minMonthlyRequired:1,admissionDate:"2023-07-02",gmapsUrl:!1},{nationalId:"1011440110",nameAr:"   ",phone:"0551678415",areaId:"",status:"active",level:"4",bradenScore:23,minMonthlyRequired:1,admissionDate:"2021-10-28",gmapsUrl:!1},{nationalId:"1011522933",nameAr:"   ",phone:"0500448974",areaId:"-(-)",status:"active",level:"4",bradenScore:10,minMonthlyRequired:1,admissionDate:"2024-06-09",gmapsUrl:!1},{nationalId:"1011926860",nameAr:"   ",phone:"0505887757",areaId:null,status:"deceased",level:"4",bradenScore:null,minMonthlyRequired:1,admissionDate:"2019-01-30",gmapsUrl:!1}],_:{_:[{nationalId:"1012700116",hasCatheter:!0},{nationalId:"1019503166",hasCatheter:!0}],__:[{nationalId:"1008271585",wounds:{presentCount:1,healedCount:1,statusRaw:"Active Wound"}},{nationalId:"1010416608",wounds:{healedCount:2}}],__:[{nationalId:"1010416608",ngTube:!0},{nationalId:"1023663097",gTube:!0}],__:[{nationalId:"1003752597",fallHighRisk:!0},{nationalId:"1004527469",fallHighRisk:!0}],__:[{nationalId:"1008271585",ivTherapy:!0},{nationalId:"1010416608",ivTherapy:!0}],_:[{nationalId:"1026385540",ventSupport:!0},{nationalId:"1046124150",ventSupport:!0}]}},rm=r=>{if(!r)return{level:"gray",label:"No Data"};const e=new Date(r),i=Math.abs(new Date().getTime()-e.getTime()),u=Math.ceil(i/(1e3*60*60*24))/7;return u>=8?{level:"red",label:"8+ weeks"}:u>=6?{level:"yellow",label:"6-8 weeks"}:{level:"green",label:"< 6 weeks"}},T_={red:"bg-red-100 text-red-800 border-red-300",yellow:"bg-yellow-100 text-yellow-800 border-yellow-300",green:"bg-green-100 text-green-800 border-green-300",gray:"bg-gray-100 text-gray-800 border-gray-300"},_1=r=>r.split(" ").map(e=>e[0]).slice(0,2).join("").toUpperCase(),v1=()=>({patients:Zn..map((e,n)=>{const i=[];Zn._._.some(u=>u.nationalId===e.nationalId)&&i.push("Catheter"),Zn._.__.some(u=>u.nationalId===e.nationalId)&&i.push("Pressure Ulcer"),Zn._.__.some(u=>u.nationalId===e.nationalId)&&i.push("Tube Feeding"),Zn._.__.some(u=>u.nationalId===e.nationalId)&&i.push("Fall Risk"),Zn._.__.some(u=>u.nationalId===e.nationalId)&&i.push("IV Therapy"),Zn._._.some(u=>u.nationalId===e.nationalId)&&i.push("Ventilation");const o=n%3===0?"Female":"Male";return{...e,tags:i,sex:o,status:e.status,assessments:[],contactAttempts:[]}}),staff:Zn.,areas:Zn.,criticalCases:{catheter:Zn._._,pressureSore:Zn._.__,tubeFeeding:Zn._.__,fallRisk:Zn._.__,ivTherapy:Zn._.__,ventilation:Zn._._}}),Zw=()=>{};var A_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1=function(r){const e=[];let n=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},Jw=function(r){const e=[];let n=0,i=0;for(;n<r.length;){const o=r[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[n++];e[i++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[n++],f=r[n++],h=r[n++],v=((o&7)<<18|(u&63)<<12|(f&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(v>>10)),e[i++]=String.fromCharCode(56320+(v&1023))}else{const u=r[n++],f=r[n++];e[i++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},E1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const u=r[o],f=o+1<r.length,h=f?r[o+1]:0,v=o+2<r.length,b=v?r[o+2]:0,E=u>>2,j=(u&3)<<4|h>>4;let z=(h&15)<<2|b>>6,ae=b&63;v||(ae=64,f||(z=64)),i.push(n[E],n[j],n[z],n[ae])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(b1(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):Jw(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const u=n[r.charAt(o++)],h=o<r.length?n[r.charAt(o)]:0;++o;const b=o<r.length?n[r.charAt(o)]:64;++o;const j=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||h==null||b==null||j==null)throw new ex;const z=u<<2|h>>4;if(i.push(z),b!==64){const ae=h<<4&240|b>>2;if(i.push(ae),j!==64){const re=b<<6&192|j;i.push(re)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class ex extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tx=function(r){const e=b1(r);return E1.encodeByteArray(e,!0)},Sh=function(r){return tx(r).replace(/\./g,"")},w1=function(r){try{return E1.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx=()=>nx().__FIREBASE_DEFAULTS__,rx=()=>{if(typeof process>"u"||typeof A_>"u")return;const r=A_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},ix=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&w1(r[1]);return e&&JSON.parse(e)},$h=()=>{try{return Zw()||sx()||rx()||ix()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},x1=r=>{var e,n;return(n=(e=$h())==null?void 0:e.emulatorHosts)==null?void 0:n[r]},S1=r=>{const e=x1(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},T1=()=>{var r;return(r=$h())==null?void 0:r.config},A1=r=>{var e;return(e=$h())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function po(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function im(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Sh(JSON.stringify(n)),Sh(JSON.stringify(f)),""].join(".")}const Tc={};function ox(){const r={prod:[],emulator:[]};for(const e of Object.keys(Tc))Tc[e]?r.emulator.push(e):r.prod.push(e);return r}function lx(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let I_=!1;function am(r,e){if(typeof window>"u"||typeof document>"u"||!po(window.location.host)||Tc[r]===e||Tc[r]||I_)return;Tc[r]=e;function n(z){return`__firebase__banner__${z}`}const i="__firebase__banner",u=ox().prod.length>0;function f(){const z=document.getElementById(i);z&&z.remove()}function h(z){z.style.display="flex",z.style.background="#7faaf0",z.style.position="fixed",z.style.bottom="5px",z.style.left="5px",z.style.padding=".5em",z.style.borderRadius="5px",z.style.alignItems="center"}function v(z,ae){z.setAttribute("width","24"),z.setAttribute("id",ae),z.setAttribute("height","24"),z.setAttribute("viewBox","0 0 24 24"),z.setAttribute("fill","none"),z.style.marginLeft="-6px"}function b(){const z=document.createElement("span");return z.style.cursor="pointer",z.style.marginLeft="16px",z.style.fontSize="24px",z.innerHTML=" &times;",z.onclick=()=>{I_=!0,f()},z}function E(z,ae){z.setAttribute("id",ae),z.innerText="Learn more",z.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",z.setAttribute("target","__blank"),z.style.paddingLeft="5px",z.style.textDecoration="underline"}function j(){const z=lx(i),ae=n("text"),re=document.getElementById(ae)||document.createElement("span"),ve=n("learnmore"),me=document.getElementById(ve)||document.createElement("a"),De=n("preprendIcon"),ke=document.getElementById(De)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(z.created){const Pe=z.element;h(Pe),E(me,ve);const xe=b();v(ke,De),Pe.append(ke,re,me,xe),document.body.appendChild(Pe)}u?(re.innerText="Preview backend disconnected.",ke.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ke.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,re.innerText="Preview backend running in this workspace."),re.setAttribute("id",ae)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",j):j()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fn())}function ux(){var e;const r=(e=$h())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function dx(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function fx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function px(){const r=Fn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function mx(){return!ux()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gx(){try{return typeof indexedDB=="object"}catch{return!1}}function yx(){return new Promise((r,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)==null?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x="FirebaseError";class Kr extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=_x,Object.setPrototypeOf(this,Kr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fc.prototype.create)}}class Fc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?vx(u,i):"Error",h=`${this.serviceName}: ${f} (${o}).`;return new Kr(o,h,i)}}function vx(r,e){return r.replace(bx,(n,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const bx=/\{\$([^}]+)}/g;function Ex(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function oo(r,e){if(r===e)return!0;const n=Object.keys(r),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const u=r[o],f=e[o];if(N_(u)&&N_(f)){if(!oo(u,f))return!1}else if(u!==f)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function N_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hc(r){const e=[];for(const[n,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function wx(r,e){const n=new xx(r,e);return n.subscribe.bind(n)}class xx{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let o;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");Sx(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:i},o.next===void 0&&(o.next=dp),o.error===void 0&&(o.error=dp),o.complete===void 0&&(o.complete=dp);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Sx(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function dp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(r){return r&&r._delegate?r._delegate:r}class wa{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new ax;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ix(e))try{this.getOrInitializeService({instanceIdentifier:so})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});i.resolve(u)}catch{}}}}clearInstance(e=so){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=so){return this.instances.has(e)}getOptions(e=so){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[u,f]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(u);i===h&&f.resolve(o)}return o}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const u=this.instances.get(i);return u&&e(u,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Ax(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=so){return this.component?this.component.multipleInstances?e:so:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ax(r){return r===so?void 0:r}function Ix(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Tx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(xt||(xt={}));const Rx={debug:xt.DEBUG,verbose:xt.VERBOSE,info:xt.INFO,warn:xt.WARN,error:xt.ERROR,silent:xt.SILENT},Cx=xt.INFO,Dx={[xt.DEBUG]:"log",[xt.VERBOSE]:"log",[xt.INFO]:"info",[xt.WARN]:"warn",[xt.ERROR]:"error"},Ox=(r,e,...n)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=Dx[e];if(o)console[o](`[${i}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class om{constructor(e){this.name=e,this._logLevel=Cx,this._logHandler=Ox,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Rx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xt.DEBUG,...e),this._logHandler(this,xt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xt.VERBOSE,...e),this._logHandler(this,xt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xt.INFO,...e),this._logHandler(this,xt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xt.WARN,...e),this._logHandler(this,xt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xt.ERROR,...e),this._logHandler(this,xt.ERROR,...e)}}const Mx=(r,e)=>e.some(n=>r instanceof n);let R_,C_;function jx(){return R_||(R_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kx(){return C_||(C_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const N1=new WeakMap,Dp=new WeakMap,R1=new WeakMap,fp=new WeakMap,lm=new WeakMap;function Px(r){const e=new Promise((n,i)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",f)},u=()=>{n(_a(r.result)),o()},f=()=>{i(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&N1.set(n,r)}).catch(()=>{}),lm.set(e,r),e}function Lx(r){if(Dp.has(r))return;const e=new Promise((n,i)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",f),r.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",f),r.addEventListener("abort",f)});Dp.set(r,e)}let Op={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return Dp.get(r);if(e==="objectStoreNames")return r.objectStoreNames||R1.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _a(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function Vx(r){Op=r(Op)}function Ux(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=r.call(pp(this),e,...n);return R1.set(i,e.sort?e.sort():[e]),_a(i)}:kx().includes(r)?function(...e){return r.apply(pp(this),e),_a(N1.get(this))}:function(...e){return _a(r.apply(pp(this),e))}}function Bx(r){return typeof r=="function"?Ux(r):(r instanceof IDBTransaction&&Lx(r),Mx(r,jx())?new Proxy(r,Op):r)}function _a(r){if(r instanceof IDBRequest)return Px(r);if(fp.has(r))return fp.get(r);const e=Bx(r);return e!==r&&(fp.set(r,e),lm.set(e,r)),e}const pp=r=>lm.get(r);function zx(r,e,{blocked:n,upgrade:i,blocking:o,terminated:u}={}){const f=indexedDB.open(r,e),h=_a(f);return i&&f.addEventListener("upgradeneeded",v=>{i(_a(f.result),v.oldVersion,v.newVersion,_a(f.transaction),v)}),n&&f.addEventListener("blocked",v=>n(v.oldVersion,v.newVersion,v)),h.then(v=>{u&&v.addEventListener("close",()=>u()),o&&v.addEventListener("versionchange",b=>o(b.oldVersion,b.newVersion,b))}).catch(()=>{}),h}const qx=["get","getKey","getAll","getAllKeys","count"],Fx=["put","add","delete","clear"],mp=new Map;function D_(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(mp.get(e))return mp.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,o=Fx.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||qx.includes(n)))return;const u=async function(f,...h){const v=this.transaction(f,o?"readwrite":"readonly");let b=v.store;return i&&(b=b.index(h.shift())),(await Promise.all([b[n](...h),o&&v.done]))[0]};return mp.set(e,u),u}Vx(r=>({...r,get:(e,n,i)=>D_(e,n)||r.get(e,n,i),has:(e,n)=>!!D_(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Gx(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function Gx(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Mp="@firebase/app",O_="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ii=new om("@firebase/app"),Qx="@firebase/app-compat",$x="@firebase/analytics-compat",Kx="@firebase/analytics",Yx="@firebase/app-check-compat",Xx="@firebase/app-check",Wx="@firebase/auth",Zx="@firebase/auth-compat",Jx="@firebase/database",eS="@firebase/data-connect",tS="@firebase/database-compat",nS="@firebase/functions",sS="@firebase/functions-compat",rS="@firebase/installations",iS="@firebase/installations-compat",aS="@firebase/messaging",oS="@firebase/messaging-compat",lS="@firebase/performance",cS="@firebase/performance-compat",uS="@firebase/remote-config",hS="@firebase/remote-config-compat",dS="@firebase/storage",fS="@firebase/storage-compat",pS="@firebase/firestore",mS="@firebase/ai",gS="@firebase/firestore-compat",yS="firebase",_S="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp="[DEFAULT]",vS={[Mp]:"fire-core",[Qx]:"fire-core-compat",[Kx]:"fire-analytics",[$x]:"fire-analytics-compat",[Xx]:"fire-app-check",[Yx]:"fire-app-check-compat",[Wx]:"fire-auth",[Zx]:"fire-auth-compat",[Jx]:"fire-rtdb",[eS]:"fire-data-connect",[tS]:"fire-rtdb-compat",[nS]:"fire-fn",[sS]:"fire-fn-compat",[rS]:"fire-iid",[iS]:"fire-iid-compat",[aS]:"fire-fcm",[oS]:"fire-fcm-compat",[lS]:"fire-perf",[cS]:"fire-perf-compat",[uS]:"fire-rc",[hS]:"fire-rc-compat",[dS]:"fire-gcs",[fS]:"fire-gcs-compat",[pS]:"fire-fst",[gS]:"fire-fst-compat",[mS]:"fire-vertex","fire-js":"fire-js",[yS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th=new Map,bS=new Map,kp=new Map;function M_(r,e){try{r.container.addComponent(e)}catch(n){Ii.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function lo(r){const e=r.name;if(kp.has(e))return Ii.debug(`There were multiple attempts to register component ${e}.`),!1;kp.set(e,r);for(const n of Th.values())M_(n,r);for(const n of bS.values())M_(n,r);return!0}function Kh(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function _r(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},va=new Fc("app","Firebase",ES);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new wa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw va.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo=_S;function C1(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const i={name:jp,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw va.create("bad-app-name",{appName:String(o)});if(n||(n=T1()),!n)throw va.create("no-options");const u=Th.get(o);if(u){if(oo(n,u.options)&&oo(i,u.config))return u;throw va.create("duplicate-app",{appName:o})}const f=new Nx(o);for(const v of kp.values())f.addComponent(v);const h=new wS(n,i,f);return Th.set(o,h),h}function cm(r=jp){const e=Th.get(r);if(!e&&r===jp&&T1())return C1();if(!e)throw va.create("no-app",{appName:r});return e}function Vr(r,e,n){let i=vS[r]??r;n&&(i+=`-${n}`);const o=i.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const f=[`Unable to register library "${i}" with version "${e}":`];o&&f.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ii.warn(f.join(" "));return}lo(new wa(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS="firebase-heartbeat-database",SS=1,jc="firebase-heartbeat-store";let gp=null;function D1(){return gp||(gp=zx(xS,SS,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(jc)}catch(n){console.warn(n)}}}}).catch(r=>{throw va.create("idb-open",{originalErrorMessage:r.message})})),gp}async function TS(r){try{const n=(await D1()).transaction(jc),i=await n.objectStore(jc).get(O1(r));return await n.done,i}catch(e){if(e instanceof Kr)Ii.warn(e.message);else{const n=va.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ii.warn(n.message)}}}async function j_(r,e){try{const i=(await D1()).transaction(jc,"readwrite");await i.objectStore(jc).put(e,O1(r)),await i.done}catch(n){if(n instanceof Kr)Ii.warn(n.message);else{const i=va.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ii.warn(i.message)}}}function O1(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS=1024,IS=30;class NS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new CS(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=k_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>IS){const f=DS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ii.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=k_(),{heartbeatsToSend:i,unsentEntries:o}=RS(this._heartbeatsCache.heartbeats),u=Sh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return Ii.warn(n),""}}}function k_(){return new Date().toISOString().substring(0,10)}function RS(r,e=AS){const n=[];let i=r.slice();for(const o of r){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),P_(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),P_(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class CS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gx()?yx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await TS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return j_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return j_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function P_(r){return Sh(JSON.stringify({version:2,heartbeats:r})).length}function DS(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let i=1;i<r.length;i++)r[i].date<n&&(n=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OS(r){lo(new wa("platform-logger",e=>new Hx(e),"PRIVATE")),lo(new wa("heartbeat",e=>new NS(e),"PRIVATE")),Vr(Mp,O_,r),Vr(Mp,O_,"esm2020"),Vr("fire-js","")}OS("");var MS="firebase",jS="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vr(MS,jS,"app");function M1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kS=M1,j1=new Fc("auth","Firebase",M1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ah=new om("@firebase/auth");function PS(r,...e){Ah.logLevel<=xt.WARN&&Ah.warn(`Auth (${mo}): ${r}`,...e)}function fh(r,...e){Ah.logLevel<=xt.ERROR&&Ah.error(`Auth (${mo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ni(r,...e){throw um(r,...e)}function Ur(r,...e){return um(r,...e)}function k1(r,e,n){const i={...kS(),[e]:n};return new Fc("auth","Firebase",i).create(e,{appName:r.name})}function io(r){return k1(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function um(r,...e){if(typeof r!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(n,...i)}return j1.create(r,...e)}function ht(r,e,...n){if(!r)throw um(e,...n)}function xi(r){const e="INTERNAL ASSERTION FAILED: "+r;throw fh(e),new Error(e)}function Ri(r,e){r||xi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function LS(){return L_()==="http:"||L_()==="https:"}function L_(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(LS()||dx()||"connection"in navigator)?navigator.onLine:!0}function US(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ri(n>e,"Short delay should be less than long delay!"),this.isMobile=cx()||fx()}get(){return VS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hm(r,e){Ri(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],qS=new Gc(3e4,6e4);function dm(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function vl(r,e,n,i,o={}){return L1(r,o,async()=>{let u={},f={};i&&(e==="GET"?f=i:u={body:JSON.stringify(i)});const h=Hc({key:r.config.apiKey,...f}).slice(1),v=await r._getAdditionalHeaders();v["Content-Type"]="application/json",r.languageCode&&(v["X-Firebase-Locale"]=r.languageCode);const b={method:e,headers:v,...u};return hx()||(b.referrerPolicy="no-referrer"),r.emulatorConfig&&po(r.emulatorConfig.host)&&(b.credentials="include"),P1.fetch()(await V1(r,r.config.apiHost,n,h),b)})}async function L1(r,e,n){r._canInitEmulator=!1;const i={...BS,...e};try{const o=new HS(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw eh(r,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const h=u.ok?f.errorMessage:f.error.message,[v,b]=h.split(" : ");if(v==="FEDERATED_USER_ID_ALREADY_LINKED")throw eh(r,"credential-already-in-use",f);if(v==="EMAIL_EXISTS")throw eh(r,"email-already-in-use",f);if(v==="USER_DISABLED")throw eh(r,"user-disabled",f);const E=i[v]||v.toLowerCase().replace(/[_\s]+/g,"-");if(b)throw k1(r,E,b);Ni(r,E)}}catch(o){if(o instanceof Kr)throw o;Ni(r,"network-request-failed",{message:String(o)})}}async function FS(r,e,n,i,o={}){const u=await vl(r,e,n,i,o);return"mfaPendingCredential"in u&&Ni(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function V1(r,e,n,i){const o=`${e}${n}?${i}`,u=r,f=u.config.emulator?hm(r.config,o):`${r.config.apiScheme}://${o}`;return zS.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}class HS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Ur(this.auth,"network-request-failed")),qS.get())})}}function eh(r,e,n){const i={appName:r.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const o=Ur(r,e,i);return o.customData._tokenResponse=n,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GS(r,e){return vl(r,"POST","/v1/accounts:delete",e)}async function Ih(r,e){return vl(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ac(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function QS(r,e=!1){const n=Is(r),i=await n.getIdToken(e),o=fm(i);ht(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u==null?void 0:u.sign_in_provider;return{claims:o,token:i,authTime:Ac(yp(o.auth_time)),issuedAtTime:Ac(yp(o.iat)),expirationTime:Ac(yp(o.exp)),signInProvider:f||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function yp(r){return Number(r)*1e3}function fm(r){const[e,n,i]=r.split(".");if(e===void 0||n===void 0||i===void 0)return fh("JWT malformed, contained fewer than 3 sections"),null;try{const o=w1(n);return o?JSON.parse(o):(fh("Failed to decode base64 JWT payload"),null)}catch(o){return fh("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function V_(r){const e=fm(r);return ht(e,"internal-error"),ht(typeof e.exp<"u","internal-error"),ht(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kc(r,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Kr&&$S(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function $S({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ac(this.lastLoginAt),this.creationTime=Ac(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nh(r){var j;const e=r.auth,n=await r.getIdToken(),i=await kc(r,Ih(e,{idToken:n}));ht(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];r._notifyReloadListener(o);const u=(j=o.providerUserInfo)!=null&&j.length?U1(o.providerUserInfo):[],f=XS(r.providerData,u),h=r.isAnonymous,v=!(r.email&&o.passwordHash)&&!(f!=null&&f.length),b=h?v:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new Lp(o.createdAt,o.lastLoginAt),isAnonymous:b};Object.assign(r,E)}async function YS(r){const e=Is(r);await Nh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function XS(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function U1(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WS(r,e){const n=await L1(r,{},async()=>{const i=Hc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,f=await V1(r,o,"/v1/token",`key=${u}`),h=await r._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const v={method:"POST",headers:h,body:i};return r.emulatorConfig&&po(r.emulatorConfig.host)&&(v.credentials="include"),P1.fetch()(f,v)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ZS(r,e){return vl(r,"POST","/v2/accounts:revokeToken",dm(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ht(e.idToken,"internal-error"),ht(typeof e.idToken<"u","internal-error"),ht(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):V_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ht(e.length!==0,"internal-error");const n=V_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ht(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:o,expiresIn:u}=await WS(e,n);this.updateTokensAndExpiration(i,o,Number(u))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:o,expirationTime:u}=n,f=new al;return i&&(ht(typeof i=="string","internal-error",{appName:e}),f.refreshToken=i),o&&(ht(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(ht(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new al,this.toJSON())}_performRefresh(){return xi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oa(r,e){ht(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class br{constructor({uid:e,auth:n,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new KS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Lp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await kc(this,this.stsTokenManager.getToken(this.auth,e));return ht(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return QS(this,e)}reload(){return YS(this)}_assign(e){this!==e&&(ht(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new br({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ht(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Nh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_r(this.auth.app))return Promise.reject(io(this.auth));const e=await this.getIdToken();return await kc(this,GS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,f=n.photoURL??void 0,h=n.tenantId??void 0,v=n._redirectEventId??void 0,b=n.createdAt??void 0,E=n.lastLoginAt??void 0,{uid:j,emailVerified:z,isAnonymous:ae,providerData:re,stsTokenManager:ve}=n;ht(j&&ve,e,"internal-error");const me=al.fromJSON(this.name,ve);ht(typeof j=="string",e,"internal-error"),oa(i,e.name),oa(o,e.name),ht(typeof z=="boolean",e,"internal-error"),ht(typeof ae=="boolean",e,"internal-error"),oa(u,e.name),oa(f,e.name),oa(h,e.name),oa(v,e.name),oa(b,e.name),oa(E,e.name);const De=new br({uid:j,auth:e,email:o,emailVerified:z,displayName:i,isAnonymous:ae,photoURL:f,phoneNumber:u,tenantId:h,stsTokenManager:me,createdAt:b,lastLoginAt:E});return re&&Array.isArray(re)&&(De.providerData=re.map(ke=>({...ke}))),v&&(De._redirectEventId=v),De}static async _fromIdTokenResponse(e,n,i=!1){const o=new al;o.updateFromServerResponse(n);const u=new br({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Nh(u),u}static async _fromGetAccountInfoResponse(e,n,i){const o=n.users[0];ht(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?U1(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),h=new al;h.updateFromIdToken(i);const v=new br({uid:o.localId,auth:e,stsTokenManager:h,isAnonymous:f}),b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Lp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(v,b),v}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_=new Map;function Si(r){Ri(r instanceof Function,"Expected a class definition");let e=U_.get(r);return e?(Ri(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,U_.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}B1.type="NONE";const B_=B1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ph(r,e,n){return`firebase:${r}:${e}:${n}`}class ol{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:o,name:u}=this.auth;this.fullUserKey=ph(this.userKey,o.apiKey,u),this.fullPersistenceKey=ph("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ih(this.auth,{idToken:e}).catch(()=>{});return n?br._fromGetAccountInfoResponse(this.auth,n,e):null}return br._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new ol(Si(B_),e,i);const o=(await Promise.all(n.map(async b=>{if(await b._isAvailable())return b}))).filter(b=>b);let u=o[0]||Si(B_);const f=ph(i,e.config.apiKey,e.name);let h=null;for(const b of n)try{const E=await b._get(f);if(E){let j;if(typeof E=="string"){const z=await Ih(e,{idToken:E}).catch(()=>{});if(!z)break;j=await br._fromGetAccountInfoResponse(e,z,E)}else j=br._fromJSON(e,E);b!==u&&(h=j),u=b;break}}catch{}const v=o.filter(b=>b._shouldAllowMigration);return!u._shouldAllowMigration||!v.length?new ol(u,e,i):(u=v[0],h&&await u._set(f,h.toJSON()),await Promise.all(n.map(async b=>{if(b!==u)try{await b._remove(f)}catch{}})),new ol(u,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(H1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(z1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Q1(e))return"Blackberry";if($1(e))return"Webos";if(q1(e))return"Safari";if((e.includes("chrome/")||F1(e))&&!e.includes("edge/"))return"Chrome";if(G1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function z1(r=Fn()){return/firefox\//i.test(r)}function q1(r=Fn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function F1(r=Fn()){return/crios\//i.test(r)}function H1(r=Fn()){return/iemobile/i.test(r)}function G1(r=Fn()){return/android/i.test(r)}function Q1(r=Fn()){return/blackberry/i.test(r)}function $1(r=Fn()){return/webos/i.test(r)}function pm(r=Fn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function JS(r=Fn()){var e;return pm(r)&&!!((e=window.navigator)!=null&&e.standalone)}function eT(){return px()&&document.documentMode===10}function K1(r=Fn()){return pm(r)||G1(r)||$1(r)||Q1(r)||/windows phone/i.test(r)||H1(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(r,e=[]){let n;switch(r){case"Browser":n=z_(Fn());break;case"Worker":n=`${z_(Fn())}-${r}`;break;default:n=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${mo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=u=>new Promise((f,h)=>{try{const v=e(u);f(v)}catch(v){h(v)}});i.onAbort=n,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nT(r,e={}){return vl(r,"GET","/v2/passwordPolicy",dm(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT=6;class rT{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??sT,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(e,n,i,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new q_(this),this.idTokenSubscription=new q_(this),this.beforeStateQueue=new tT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=j1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Si(n)),this._initializationPromise=this.queue(async()=>{var i,o,u;if(!this._deleted&&(this.persistenceManager=await ol.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)==null?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ih(this,{idToken:e}),i=await br._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var u;if(_r(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(u=this.redirectUser)==null?void 0:u._redirectEventId,h=i==null?void 0:i._redirectEventId,v=await this.tryRedirectSignIn(e);(!f||f===h)&&(v!=null&&v.user)&&(i=v.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(f){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ht(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Nh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=US()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_r(this.app))return Promise.reject(io(this));const n=e?Is(e):null;return n&&ht(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ht(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _r(this.app)?Promise.reject(io(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _r(this.app)?Promise.reject(io(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Si(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await nT(this),n=new rT(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Fc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await ZS(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Si(e)||this._popupRedirectResolver;ht(n,this,"argument-error"),this.redirectPersistenceManager=await ol.create(this,[Si(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(ht(h,this,"internal-error"),h.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const v=e.addObserver(n,i,o);return()=>{f=!0,v()}}else{const v=e.addObserver(n);return()=>{f=!0,v()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ht(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Y1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(_r(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&PS(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function mm(r){return Is(r)}class q_{constructor(e){this.auth=e,this.observer=null,this.addObserver=wx(n=>this.observer=n)}get next(){return ht(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aT(r){gm=r}function oT(r){return gm.loadJS(r)}function lT(){return gm.gapiScript}function cT(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uT(r,e){const n=Kh(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(oo(u,e??{}))return o;Ni(o,"already-initialized")}return n.initialize({options:e})}function hT(r,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Si);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function dT(r,e,n){const i=mm(r);ht(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,u=X1(e),{host:f,port:h}=fT(e),v=h===null?"":`:${h}`,b={url:`${u}//${f}${v}/`},E=Object.freeze({host:f,port:h,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){ht(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ht(oo(b,i.config.emulator)&&oo(E,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=b,i.emulatorConfig=E,i.settings.appVerificationDisabledForTesting=!0,po(f)?(im(`${u}//${f}${v}`),am("Auth",!0)):pT()}function X1(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function fT(r){const e=X1(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const u=o[1];return{host:u,port:F_(i.substr(u.length+1))}}else{const[u,f]=i.split(":");return{host:u,port:F_(f)}}}function F_(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function pT(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return xi("not implemented")}_getIdTokenResponse(e){return xi("not implemented")}_linkToIdToken(e,n){return xi("not implemented")}_getReauthenticationResolver(e){return xi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ll(r,e){return FS(r,"POST","/v1/accounts:signInWithIdp",dm(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT="http://localhost";class co extends W1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new co(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ni("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...u}=n;if(!i||!o)return null;const f=new co(i,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return ll(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,ll(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ll(e,n)}buildRequest(){const e={requestUri:mT,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Hc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc extends Z1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua extends Qc{constructor(){super("facebook.com")}static credential(e){return co._fromParams({providerId:ua.PROVIDER_ID,signInMethod:ua.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ua.credentialFromTaggedObject(e)}static credentialFromError(e){return ua.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ua.credential(e.oauthAccessToken)}catch{return null}}}ua.FACEBOOK_SIGN_IN_METHOD="facebook.com";ua.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha extends Qc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return co._fromParams({providerId:ha.PROVIDER_ID,signInMethod:ha.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ha.credentialFromTaggedObject(e)}static credentialFromError(e){return ha.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return ha.credential(n,i)}catch{return null}}}ha.GOOGLE_SIGN_IN_METHOD="google.com";ha.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da extends Qc{constructor(){super("github.com")}static credential(e){return co._fromParams({providerId:da.PROVIDER_ID,signInMethod:da.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return da.credentialFromTaggedObject(e)}static credentialFromError(e){return da.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return da.credential(e.oauthAccessToken)}catch{return null}}}da.GITHUB_SIGN_IN_METHOD="github.com";da.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa extends Qc{constructor(){super("twitter.com")}static credential(e,n){return co._fromParams({providerId:fa.PROVIDER_ID,signInMethod:fa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return fa.credentialFromTaggedObject(e)}static credentialFromError(e){return fa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return fa.credential(n,i)}catch{return null}}}fa.TWITTER_SIGN_IN_METHOD="twitter.com";fa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,o=!1){const u=await br._fromIdTokenResponse(e,i,o),f=H_(i);return new dl({user:u,providerId:f,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const o=H_(i);return new dl({user:e,providerId:o,_tokenResponse:i,operationType:n})}}function H_(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh extends Kr{constructor(e,n,i,o){super(n.code,n.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Rh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,o){return new Rh(e,n,i,o)}}function J1(r,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Rh._fromErrorAndOperation(r,u,e,i):u})}async function gT(r,e,n=!1){const i=await kc(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return dl._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yT(r,e,n=!1){const{auth:i}=r;if(_r(i.app))return Promise.reject(io(i));const o="reauthenticate";try{const u=await kc(r,J1(i,o,e,r),n);ht(u.idToken,i,"internal-error");const f=fm(u.idToken);ht(f,i,"internal-error");const{sub:h}=f;return ht(r.uid===h,i,"user-mismatch"),dl._forOperation(r,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&Ni(i,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _T(r,e,n=!1){if(_r(r.app))return Promise.reject(io(r));const i="signIn",o=await J1(r,i,e),u=await dl._fromIdTokenResponse(r,i,o);return n||await r._updateCurrentUser(u.user),u}function vT(r,e,n,i){return Is(r).onIdTokenChanged(e,n,i)}function bT(r,e,n){return Is(r).beforeAuthStateChanged(e,n)}const Ch="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ch,"1"),this.storage.removeItem(Ch),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET=1e3,wT=10;class tb extends eb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=K1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),o=this.localCache[n];i!==o&&e(n,o,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,h,v)=>{this.notifyListeners(f,v)});return}const i=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(i);!n&&this.localCache[i]===f||this.notifyListeners(i,f)},u=this.storage.getItem(i);eT()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,wT):o()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},ET)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}tb.type="LOCAL";const xT=tb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb extends eb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}nb.type="SESSION";const sb=nb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const i=new Yh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const h=Array.from(f).map(async b=>b(n.origin,u)),v=await ST(h);n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:v})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Yh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(r="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((h,v)=>{const b=ym("",20);o.port1.start();const E=setTimeout(()=>{v(new Error("unsupported_event"))},i);f={messageChannel:o,onMessage(j){const z=j;if(z.data.eventId===b)switch(z.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{v(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),h(z.data.response);break;default:clearTimeout(E),clearTimeout(u),v(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:b,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br(){return window}function AT(r){Br().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rb(){return typeof Br().WorkerGlobalScope<"u"&&typeof Br().importScripts=="function"}async function IT(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function NT(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function RT(){return rb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib="firebaseLocalStorageDb",CT=1,Dh="firebaseLocalStorage",ab="fbase_key";class $c{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Xh(r,e){return r.transaction([Dh],e?"readwrite":"readonly").objectStore(Dh)}function DT(){const r=indexedDB.deleteDatabase(ib);return new $c(r).toPromise()}function Vp(){const r=indexedDB.open(ib,CT);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(Dh,{keyPath:ab})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(Dh)?e(i):(i.close(),await DT(),e(await Vp()))})})}async function G_(r,e,n){const i=Xh(r,!0).put({[ab]:e,value:n});return new $c(i).toPromise()}async function OT(r,e){const n=Xh(r,!1).get(e),i=await new $c(n).toPromise();return i===void 0?null:i.value}function Q_(r,e){const n=Xh(r,!0).delete(e);return new $c(n).toPromise()}const MT=800,jT=3;class ob{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Vp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>jT)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Yh._getInstance(RT()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await IT(),!this.activeServiceWorker)return;this.sender=new TT(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||NT()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vp();return await G_(e,Ch,"1"),await Q_(e,Ch),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>G_(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>OT(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Q_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Xh(o,!1).getAll();return new $c(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),MT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ob.type="LOCAL";const kT=ob;new Gc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(r,e){return e?Si(e):(ht(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m extends W1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ll(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ll(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ll(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function LT(r){return _T(r.auth,new _m(r),r.bypassAuthState)}function VT(r){const{auth:e,user:n}=r;return ht(n,e,"internal-error"),yT(n,new _m(r),r.bypassAuthState)}async function UT(r){const{auth:e,user:n}=r;return ht(n,e,"internal-error"),gT(n,new _m(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,n,i,o,u=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:o,tenantId:u,error:f,type:h}=e;if(f){this.reject(f);return}const v={auth:this.auth,requestUri:n,sessionId:i,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(v))}catch(b){this.reject(b)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return LT;case"linkViaPopup":case"linkViaRedirect":return UT;case"reauthViaPopup":case"reauthViaRedirect":return VT;default:Ni(this.auth,"internal-error")}}resolve(e){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT=new Gc(2e3,1e4);class il extends lb{constructor(e,n,i,o,u){super(e,n,o,u),this.provider=i,this.authWindow=null,this.pollId=null,il.currentPopupAction&&il.currentPopupAction.cancel(),il.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ht(e,this.auth,"internal-error"),e}async onExecution(){Ri(this.filter.length===1,"Popup operations only handle one event");const e=ym();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ur(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ur(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,il.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ur(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,BT.get())};e()}}il.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT="pendingRedirect",mh=new Map;class qT extends lb{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=mh.get(this.auth._key());if(!e){try{const i=await FT(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}mh.set(this.auth._key(),e)}return this.bypassAuthState||mh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function FT(r,e){const n=QT(e),i=GT(r);if(!await i._isAvailable())return!1;const o=await i._get(n)==="true";return await i._remove(n),o}function HT(r,e){mh.set(r._key(),e)}function GT(r){return Si(r._redirectPersistence)}function QT(r){return ph(zT,r.config.apiKey,r.name)}async function $T(r,e,n=!1){if(_r(r.app))return Promise.reject(io(r));const i=mm(r),o=PT(i,e),f=await new qT(i,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await i._persistUserIfCurrent(f.user),await i._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT=600*1e3;class YT{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!XT(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!cb(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Ur(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=KT&&this.cachedEventUids.clear(),this.cachedEventUids.has($_(e))}saveEventToCache(e){this.cachedEventUids.add($_(e)),this.lastProcessedEventTime=Date.now()}}function $_(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function cb({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function XT(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cb(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WT(r,e={}){return vl(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,JT=/^https?/;async function eA(r){if(r.config.emulator)return;const{authorizedDomains:e}=await WT(r);for(const n of e)try{if(tA(n))return}catch{}Ni(r,"unauthorized-domain")}function tA(r){const e=Pp(),{protocol:n,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&i===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===i}if(!JT.test(n))return!1;if(ZT.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA=new Gc(3e4,6e4);function K_(){const r=Br().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function sA(r){return new Promise((e,n)=>{var o,u,f;function i(){K_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{K_(),n(Ur(r,"network-request-failed"))},timeout:nA.get()})}if((u=(o=Br().gapi)==null?void 0:o.iframes)!=null&&u.Iframe)e(gapi.iframes.getContext());else if((f=Br().gapi)!=null&&f.load)i();else{const h=cT("iframefcb");return Br()[h]=()=>{gapi.load?i():n(Ur(r,"network-request-failed"))},oT(`${lT()}?onload=${h}`).catch(v=>n(v))}}).catch(e=>{throw gh=null,e})}let gh=null;function rA(r){return gh=gh||sA(r),gh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA=new Gc(5e3,15e3),aA="__/auth/iframe",oA="emulator/auth/iframe",lA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uA(r){const e=r.config;ht(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?hm(e,oA):`https://${r.config.authDomain}/${aA}`,i={apiKey:e.apiKey,appName:r.name,v:mo},o=cA.get(r.config.apiHost);o&&(i.eid=o);const u=r._getFrameworks();return u.length&&(i.fw=u.join(",")),`${n}?${Hc(i).slice(1)}`}async function hA(r){const e=await rA(r),n=Br().gapi;return ht(n,r,"internal-error"),e.open({where:document.body,url:uA(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lA,dontclear:!0},i=>new Promise(async(o,u)=>{await i.restyle({setHideOnLeave:!1});const f=Ur(r,"network-request-failed"),h=Br().setTimeout(()=>{u(f)},iA.get());function v(){Br().clearTimeout(h),o(i)}i.ping(v).then(v,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fA=500,pA=600,mA="_blank",gA="http://localhost";class Y_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function yA(r,e,n,i=fA,o=pA){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const v={...dA,width:i.toString(),height:o.toString(),top:u,left:f},b=Fn().toLowerCase();n&&(h=F1(b)?mA:n),z1(b)&&(e=e||gA,v.scrollbars="yes");const E=Object.entries(v).reduce((z,[ae,re])=>`${z}${ae}=${re},`,"");if(JS(b)&&h!=="_self")return _A(e||"",h),new Y_(null);const j=window.open(e||"",h,E);ht(j,r,"popup-blocked");try{j.focus()}catch{}return new Y_(j)}function _A(r,e){const n=document.createElement("a");n.href=r,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA="__/auth/handler",bA="emulator/auth/handler",EA=encodeURIComponent("fac");async function X_(r,e,n,i,o,u){ht(r.config.authDomain,r,"auth-domain-config-required"),ht(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:i,v:mo,eventId:o};if(e instanceof Z1){e.setDefaultLanguage(r.languageCode),f.providerId=e.providerId||"",Ex(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,j]of Object.entries({}))f[E]=j}if(e instanceof Qc){const E=e.getScopes().filter(j=>j!=="");E.length>0&&(f.scopes=E.join(","))}r.tenantId&&(f.tid=r.tenantId);const h=f;for(const E of Object.keys(h))h[E]===void 0&&delete h[E];const v=await r._getAppCheckToken(),b=v?`#${EA}=${encodeURIComponent(v)}`:"";return`${wA(r)}?${Hc(h).slice(1)}${b}`}function wA({config:r}){return r.emulator?hm(r,bA):`https://${r.authDomain}/${vA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p="webStorageSupport";class xA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sb,this._completeRedirectFn=$T,this._overrideRedirectResult=HT}async _openPopup(e,n,i,o){var f;Ri((f=this.eventManagers[e._key()])==null?void 0:f.manager,"_initialize() not called before _openPopup()");const u=await X_(e,n,i,Pp(),o);return yA(e,u,ym())}async _openRedirect(e,n,i,o){await this._originValidation(e);const u=await X_(e,n,i,Pp(),o);return AT(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(Ri(u,"If manager is not set, promise should be"),u)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await hA(e),i=new YT(e);return n.register("authEvent",o=>(ht(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(_p,{type:_p},o=>{var f;const u=(f=o==null?void 0:o[0])==null?void 0:f[_p];u!==void 0&&n(!!u),Ni(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=eA(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return K1()||q1()||pm()}}const SA=xA;var W_="@firebase/auth",Z_="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ht(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function IA(r){lo(new wa("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:h}=i.options;ht(f&&!f.includes(":"),"invalid-api-key",{appName:i.name});const v={apiKey:f,authDomain:h,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Y1(r)},b=new iT(i,o,u,v);return hT(b,n),b},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),lo(new wa("auth-internal",e=>{const n=mm(e.getProvider("auth").getImmediate());return(i=>new TA(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vr(W_,Z_,AA(r)),Vr(W_,Z_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA=300,RA=A1("authIdTokenMaxAge")||NA;let J_=null;const CA=r=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>RA)return;const o=n==null?void 0:n.token;J_!==o&&(J_=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function DA(r=cm()){const e=Kh(r,"auth");if(e.isInitialized())return e.getImmediate();const n=uT(r,{popupRedirectResolver:SA,persistence:[kT,xT,sb]}),i=A1("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(i,location.origin);if(location.origin===u.origin){const f=CA(u.toString());bT(n,f,()=>f(n.currentUser)),vT(n,h=>f(h))}}const o=x1("auth");return o&&dT(n,`http://${o}`),n}function OA(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}aT({loadJS(r){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const u=Ur("internal-error");u.customData=o,n(u)},i.type="text/javascript",i.charset="UTF-8",OA().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});IA("Browser");var ev=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ba,ub;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,L){function H(){}H.prototype=L.prototype,P.F=L.prototype,P.prototype=new H,P.prototype.constructor=P,P.D=function(ne,F,le){for(var G=Array(arguments.length-2),gt=2;gt<arguments.length;gt++)G[gt-2]=arguments[gt];return L.prototype[F].apply(ne,G)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(P,L,H){H||(H=0);const ne=Array(16);if(typeof L=="string")for(var F=0;F<16;++F)ne[F]=L.charCodeAt(H++)|L.charCodeAt(H++)<<8|L.charCodeAt(H++)<<16|L.charCodeAt(H++)<<24;else for(F=0;F<16;++F)ne[F]=L[H++]|L[H++]<<8|L[H++]<<16|L[H++]<<24;L=P.g[0],H=P.g[1],F=P.g[2];let le=P.g[3],G;G=L+(le^H&(F^le))+ne[0]+3614090360&4294967295,L=H+(G<<7&4294967295|G>>>25),G=le+(F^L&(H^F))+ne[1]+3905402710&4294967295,le=L+(G<<12&4294967295|G>>>20),G=F+(H^le&(L^H))+ne[2]+606105819&4294967295,F=le+(G<<17&4294967295|G>>>15),G=H+(L^F&(le^L))+ne[3]+3250441966&4294967295,H=F+(G<<22&4294967295|G>>>10),G=L+(le^H&(F^le))+ne[4]+4118548399&4294967295,L=H+(G<<7&4294967295|G>>>25),G=le+(F^L&(H^F))+ne[5]+1200080426&4294967295,le=L+(G<<12&4294967295|G>>>20),G=F+(H^le&(L^H))+ne[6]+2821735955&4294967295,F=le+(G<<17&4294967295|G>>>15),G=H+(L^F&(le^L))+ne[7]+4249261313&4294967295,H=F+(G<<22&4294967295|G>>>10),G=L+(le^H&(F^le))+ne[8]+1770035416&4294967295,L=H+(G<<7&4294967295|G>>>25),G=le+(F^L&(H^F))+ne[9]+2336552879&4294967295,le=L+(G<<12&4294967295|G>>>20),G=F+(H^le&(L^H))+ne[10]+4294925233&4294967295,F=le+(G<<17&4294967295|G>>>15),G=H+(L^F&(le^L))+ne[11]+2304563134&4294967295,H=F+(G<<22&4294967295|G>>>10),G=L+(le^H&(F^le))+ne[12]+1804603682&4294967295,L=H+(G<<7&4294967295|G>>>25),G=le+(F^L&(H^F))+ne[13]+4254626195&4294967295,le=L+(G<<12&4294967295|G>>>20),G=F+(H^le&(L^H))+ne[14]+2792965006&4294967295,F=le+(G<<17&4294967295|G>>>15),G=H+(L^F&(le^L))+ne[15]+1236535329&4294967295,H=F+(G<<22&4294967295|G>>>10),G=L+(F^le&(H^F))+ne[1]+4129170786&4294967295,L=H+(G<<5&4294967295|G>>>27),G=le+(H^F&(L^H))+ne[6]+3225465664&4294967295,le=L+(G<<9&4294967295|G>>>23),G=F+(L^H&(le^L))+ne[11]+643717713&4294967295,F=le+(G<<14&4294967295|G>>>18),G=H+(le^L&(F^le))+ne[0]+3921069994&4294967295,H=F+(G<<20&4294967295|G>>>12),G=L+(F^le&(H^F))+ne[5]+3593408605&4294967295,L=H+(G<<5&4294967295|G>>>27),G=le+(H^F&(L^H))+ne[10]+38016083&4294967295,le=L+(G<<9&4294967295|G>>>23),G=F+(L^H&(le^L))+ne[15]+3634488961&4294967295,F=le+(G<<14&4294967295|G>>>18),G=H+(le^L&(F^le))+ne[4]+3889429448&4294967295,H=F+(G<<20&4294967295|G>>>12),G=L+(F^le&(H^F))+ne[9]+568446438&4294967295,L=H+(G<<5&4294967295|G>>>27),G=le+(H^F&(L^H))+ne[14]+3275163606&4294967295,le=L+(G<<9&4294967295|G>>>23),G=F+(L^H&(le^L))+ne[3]+4107603335&4294967295,F=le+(G<<14&4294967295|G>>>18),G=H+(le^L&(F^le))+ne[8]+1163531501&4294967295,H=F+(G<<20&4294967295|G>>>12),G=L+(F^le&(H^F))+ne[13]+2850285829&4294967295,L=H+(G<<5&4294967295|G>>>27),G=le+(H^F&(L^H))+ne[2]+4243563512&4294967295,le=L+(G<<9&4294967295|G>>>23),G=F+(L^H&(le^L))+ne[7]+1735328473&4294967295,F=le+(G<<14&4294967295|G>>>18),G=H+(le^L&(F^le))+ne[12]+2368359562&4294967295,H=F+(G<<20&4294967295|G>>>12),G=L+(H^F^le)+ne[5]+4294588738&4294967295,L=H+(G<<4&4294967295|G>>>28),G=le+(L^H^F)+ne[8]+2272392833&4294967295,le=L+(G<<11&4294967295|G>>>21),G=F+(le^L^H)+ne[11]+1839030562&4294967295,F=le+(G<<16&4294967295|G>>>16),G=H+(F^le^L)+ne[14]+4259657740&4294967295,H=F+(G<<23&4294967295|G>>>9),G=L+(H^F^le)+ne[1]+2763975236&4294967295,L=H+(G<<4&4294967295|G>>>28),G=le+(L^H^F)+ne[4]+1272893353&4294967295,le=L+(G<<11&4294967295|G>>>21),G=F+(le^L^H)+ne[7]+4139469664&4294967295,F=le+(G<<16&4294967295|G>>>16),G=H+(F^le^L)+ne[10]+3200236656&4294967295,H=F+(G<<23&4294967295|G>>>9),G=L+(H^F^le)+ne[13]+681279174&4294967295,L=H+(G<<4&4294967295|G>>>28),G=le+(L^H^F)+ne[0]+3936430074&4294967295,le=L+(G<<11&4294967295|G>>>21),G=F+(le^L^H)+ne[3]+3572445317&4294967295,F=le+(G<<16&4294967295|G>>>16),G=H+(F^le^L)+ne[6]+76029189&4294967295,H=F+(G<<23&4294967295|G>>>9),G=L+(H^F^le)+ne[9]+3654602809&4294967295,L=H+(G<<4&4294967295|G>>>28),G=le+(L^H^F)+ne[12]+3873151461&4294967295,le=L+(G<<11&4294967295|G>>>21),G=F+(le^L^H)+ne[15]+530742520&4294967295,F=le+(G<<16&4294967295|G>>>16),G=H+(F^le^L)+ne[2]+3299628645&4294967295,H=F+(G<<23&4294967295|G>>>9),G=L+(F^(H|~le))+ne[0]+4096336452&4294967295,L=H+(G<<6&4294967295|G>>>26),G=le+(H^(L|~F))+ne[7]+1126891415&4294967295,le=L+(G<<10&4294967295|G>>>22),G=F+(L^(le|~H))+ne[14]+2878612391&4294967295,F=le+(G<<15&4294967295|G>>>17),G=H+(le^(F|~L))+ne[5]+4237533241&4294967295,H=F+(G<<21&4294967295|G>>>11),G=L+(F^(H|~le))+ne[12]+1700485571&4294967295,L=H+(G<<6&4294967295|G>>>26),G=le+(H^(L|~F))+ne[3]+2399980690&4294967295,le=L+(G<<10&4294967295|G>>>22),G=F+(L^(le|~H))+ne[10]+4293915773&4294967295,F=le+(G<<15&4294967295|G>>>17),G=H+(le^(F|~L))+ne[1]+2240044497&4294967295,H=F+(G<<21&4294967295|G>>>11),G=L+(F^(H|~le))+ne[8]+1873313359&4294967295,L=H+(G<<6&4294967295|G>>>26),G=le+(H^(L|~F))+ne[15]+4264355552&4294967295,le=L+(G<<10&4294967295|G>>>22),G=F+(L^(le|~H))+ne[6]+2734768916&4294967295,F=le+(G<<15&4294967295|G>>>17),G=H+(le^(F|~L))+ne[13]+1309151649&4294967295,H=F+(G<<21&4294967295|G>>>11),G=L+(F^(H|~le))+ne[4]+4149444226&4294967295,L=H+(G<<6&4294967295|G>>>26),G=le+(H^(L|~F))+ne[11]+3174756917&4294967295,le=L+(G<<10&4294967295|G>>>22),G=F+(L^(le|~H))+ne[2]+718787259&4294967295,F=le+(G<<15&4294967295|G>>>17),G=H+(le^(F|~L))+ne[9]+3951481745&4294967295,P.g[0]=P.g[0]+L&4294967295,P.g[1]=P.g[1]+(F+(G<<21&4294967295|G>>>11))&4294967295,P.g[2]=P.g[2]+F&4294967295,P.g[3]=P.g[3]+le&4294967295}i.prototype.v=function(P,L){L===void 0&&(L=P.length);const H=L-this.blockSize,ne=this.C;let F=this.h,le=0;for(;le<L;){if(F==0)for(;le<=H;)o(this,P,le),le+=this.blockSize;if(typeof P=="string"){for(;le<L;)if(ne[F++]=P.charCodeAt(le++),F==this.blockSize){o(this,ne),F=0;break}}else for(;le<L;)if(ne[F++]=P[le++],F==this.blockSize){o(this,ne),F=0;break}}this.h=F,this.o+=L},i.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var L=1;L<P.length-8;++L)P[L]=0;L=this.o*8;for(var H=P.length-8;H<P.length;++H)P[H]=L&255,L/=256;for(this.v(P),P=Array(16),L=0,H=0;H<4;++H)for(let ne=0;ne<32;ne+=8)P[L++]=this.g[H]>>>ne&255;return P};function u(P,L){var H=h;return Object.prototype.hasOwnProperty.call(H,P)?H[P]:H[P]=L(P)}function f(P,L){this.h=L;const H=[];let ne=!0;for(let F=P.length-1;F>=0;F--){const le=P[F]|0;ne&&le==L||(H[F]=le,ne=!1)}this.g=H}var h={};function v(P){return-128<=P&&P<128?u(P,function(L){return new f([L|0],L<0?-1:0)}):new f([P|0],P<0?-1:0)}function b(P){if(isNaN(P)||!isFinite(P))return j;if(P<0)return me(b(-P));const L=[];let H=1;for(let ne=0;P>=H;ne++)L[ne]=P/H|0,H*=4294967296;return new f(L,0)}function E(P,L){if(P.length==0)throw Error("number format error: empty string");if(L=L||10,L<2||36<L)throw Error("radix out of range: "+L);if(P.charAt(0)=="-")return me(E(P.substring(1),L));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const H=b(Math.pow(L,8));let ne=j;for(let le=0;le<P.length;le+=8){var F=Math.min(8,P.length-le);const G=parseInt(P.substring(le,le+F),L);F<8?(F=b(Math.pow(L,F)),ne=ne.j(F).add(b(G))):(ne=ne.j(H),ne=ne.add(b(G)))}return ne}var j=v(0),z=v(1),ae=v(16777216);r=f.prototype,r.m=function(){if(ve(this))return-me(this).m();let P=0,L=1;for(let H=0;H<this.g.length;H++){const ne=this.i(H);P+=(ne>=0?ne:4294967296+ne)*L,L*=4294967296}return P},r.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(re(this))return"0";if(ve(this))return"-"+me(this).toString(P);const L=b(Math.pow(P,6));var H=this;let ne="";for(;;){const F=xe(H,L).g;H=De(H,F.j(L));let le=((H.g.length>0?H.g[0]:H.h)>>>0).toString(P);if(H=F,re(H))return le+ne;for(;le.length<6;)le="0"+le;ne=le+ne}},r.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function re(P){if(P.h!=0)return!1;for(let L=0;L<P.g.length;L++)if(P.g[L]!=0)return!1;return!0}function ve(P){return P.h==-1}r.l=function(P){return P=De(this,P),ve(P)?-1:re(P)?0:1};function me(P){const L=P.g.length,H=[];for(let ne=0;ne<L;ne++)H[ne]=~P.g[ne];return new f(H,~P.h).add(z)}r.abs=function(){return ve(this)?me(this):this},r.add=function(P){const L=Math.max(this.g.length,P.g.length),H=[];let ne=0;for(let F=0;F<=L;F++){let le=ne+(this.i(F)&65535)+(P.i(F)&65535),G=(le>>>16)+(this.i(F)>>>16)+(P.i(F)>>>16);ne=G>>>16,le&=65535,G&=65535,H[F]=G<<16|le}return new f(H,H[H.length-1]&-2147483648?-1:0)};function De(P,L){return P.add(me(L))}r.j=function(P){if(re(this)||re(P))return j;if(ve(this))return ve(P)?me(this).j(me(P)):me(me(this).j(P));if(ve(P))return me(this.j(me(P)));if(this.l(ae)<0&&P.l(ae)<0)return b(this.m()*P.m());const L=this.g.length+P.g.length,H=[];for(var ne=0;ne<2*L;ne++)H[ne]=0;for(ne=0;ne<this.g.length;ne++)for(let F=0;F<P.g.length;F++){const le=this.i(ne)>>>16,G=this.i(ne)&65535,gt=P.i(F)>>>16,Ct=P.i(F)&65535;H[2*ne+2*F]+=G*Ct,ke(H,2*ne+2*F),H[2*ne+2*F+1]+=le*Ct,ke(H,2*ne+2*F+1),H[2*ne+2*F+1]+=G*gt,ke(H,2*ne+2*F+1),H[2*ne+2*F+2]+=le*gt,ke(H,2*ne+2*F+2)}for(P=0;P<L;P++)H[P]=H[2*P+1]<<16|H[2*P];for(P=L;P<2*L;P++)H[P]=0;return new f(H,0)};function ke(P,L){for(;(P[L]&65535)!=P[L];)P[L+1]+=P[L]>>>16,P[L]&=65535,L++}function Pe(P,L){this.g=P,this.h=L}function xe(P,L){if(re(L))throw Error("division by zero");if(re(P))return new Pe(j,j);if(ve(P))return L=xe(me(P),L),new Pe(me(L.g),me(L.h));if(ve(L))return L=xe(P,me(L)),new Pe(me(L.g),L.h);if(P.g.length>30){if(ve(P)||ve(L))throw Error("slowDivide_ only works with positive integers.");for(var H=z,ne=L;ne.l(P)<=0;)H=ue(H),ne=ue(ne);var F=Re(H,1),le=Re(ne,1);for(ne=Re(ne,2),H=Re(H,2);!re(ne);){var G=le.add(ne);G.l(P)<=0&&(F=F.add(H),le=G),ne=Re(ne,1),H=Re(H,1)}return L=De(P,F.j(L)),new Pe(F,L)}for(F=j;P.l(L)>=0;){for(H=Math.max(1,Math.floor(P.m()/L.m())),ne=Math.ceil(Math.log(H)/Math.LN2),ne=ne<=48?1:Math.pow(2,ne-48),le=b(H),G=le.j(L);ve(G)||G.l(P)>0;)H-=ne,le=b(H),G=le.j(L);re(le)&&(le=z),F=F.add(le),P=De(P,G)}return new Pe(F,P)}r.B=function(P){return xe(this,P).h},r.and=function(P){const L=Math.max(this.g.length,P.g.length),H=[];for(let ne=0;ne<L;ne++)H[ne]=this.i(ne)&P.i(ne);return new f(H,this.h&P.h)},r.or=function(P){const L=Math.max(this.g.length,P.g.length),H=[];for(let ne=0;ne<L;ne++)H[ne]=this.i(ne)|P.i(ne);return new f(H,this.h|P.h)},r.xor=function(P){const L=Math.max(this.g.length,P.g.length),H=[];for(let ne=0;ne<L;ne++)H[ne]=this.i(ne)^P.i(ne);return new f(H,this.h^P.h)};function ue(P){const L=P.g.length+1,H=[];for(let ne=0;ne<L;ne++)H[ne]=P.i(ne)<<1|P.i(ne-1)>>>31;return new f(H,P.h)}function Re(P,L){const H=L>>5;L%=32;const ne=P.g.length-H,F=[];for(let le=0;le<ne;le++)F[le]=L>0?P.i(le+H)>>>L|P.i(le+H+1)<<32-L:P.i(le+H);return new f(F,P.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,ub=i,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=b,f.fromString=E,ba=f}).apply(typeof ev<"u"?ev:typeof self<"u"?self:typeof window<"u"?window:{});var th=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hb,bc,db,yh,Up,fb,pb,mb;(function(){var r,e=Object.defineProperty;function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof th=="object"&&th];for(var p=0;p<l.length;++p){var _=l[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=n(this);function o(l,p){if(p)e:{var _=i;l=l.split(".");for(var w=0;w<l.length-1;w++){var B=l[w];if(!(B in _))break e;_=_[B]}l=l[l.length-1],w=_[l],p=p(w),p!=w&&p!=null&&e(_,l,{configurable:!0,writable:!0,value:p})}}o("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(l){return l||function(p){var _=[],w;for(w in p)Object.prototype.hasOwnProperty.call(p,w)&&_.push([w,p[w]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},f=this||self;function h(l){var p=typeof l;return p=="object"&&l!=null||p=="function"}function v(l,p,_){return l.call.apply(l.bind,arguments)}function b(l,p,_){return b=v,b.apply(null,arguments)}function E(l,p){var _=Array.prototype.slice.call(arguments,1);return function(){var w=_.slice();return w.push.apply(w,arguments),l.apply(this,w)}}function j(l,p){function _(){}_.prototype=p.prototype,l.Z=p.prototype,l.prototype=new _,l.prototype.constructor=l,l.Ob=function(w,B,X){for(var Me=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)Me[$e-2]=arguments[$e];return p.prototype[B].apply(w,Me)}}var z=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function ae(l){const p=l.length;if(p>0){const _=Array(p);for(let w=0;w<p;w++)_[w]=l[w];return _}return[]}function re(l,p){for(let w=1;w<arguments.length;w++){const B=arguments[w];var _=typeof B;if(_=_!="object"?_:B?Array.isArray(B)?"array":_:"null",_=="array"||_=="object"&&typeof B.length=="number"){_=l.length||0;const X=B.length||0;l.length=_+X;for(let Me=0;Me<X;Me++)l[_+Me]=B[Me]}else l.push(B)}}class ve{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function me(l){f.setTimeout(()=>{throw l},0)}function De(){var l=P;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}class ke{constructor(){this.h=this.g=null}add(p,_){const w=Pe.get();w.set(p,_),this.h?this.h.next=w:this.g=w,this.h=w}}var Pe=new ve(()=>new xe,l=>l.reset());class xe{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,Re=!1,P=new ke,L=()=>{const l=Promise.resolve(void 0);ue=()=>{l.then(H)}};function H(){for(var l;l=De();){try{l.h.call(l.g)}catch(_){me(_)}var p=Pe;p.j(l),p.h<100&&(p.h++,l.next=p.g,p.g=l)}Re=!1}function ne(){this.u=this.u,this.C=this.C}ne.prototype.u=!1,ne.prototype.dispose=function(){this.u||(this.u=!0,this.N())},ne.prototype[Symbol.dispose]=function(){this.dispose()},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function F(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}F.prototype.h=function(){this.defaultPrevented=!0};var le=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const _=()=>{};f.addEventListener("test",_,p),f.removeEventListener("test",_,p)}catch{}return l})();function G(l){return/^[\s\xa0]*$/.test(l)}function gt(l,p){F.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,p)}j(gt,F),gt.prototype.init=function(l,p){const _=this.type=l.type,w=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget,p||(_=="mouseover"?p=l.fromElement:_=="mouseout"&&(p=l.toElement)),this.relatedTarget=p,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&gt.Z.h.call(this)},gt.prototype.h=function(){gt.Z.h.call(this);const l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Ct="closure_listenable_"+(Math.random()*1e6|0),Ee=0;function Le(l,p,_,w,B){this.listener=l,this.proxy=null,this.src=p,this.type=_,this.capture=!!w,this.ha=B,this.key=++Ee,this.da=this.fa=!1}function Ye(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function At(l,p,_){for(const w in l)p.call(_,l[w],w,l)}function te(l,p){for(const _ in l)p.call(void 0,l[_],_,l)}function je(l){const p={};for(const _ in l)p[_]=l[_];return p}const ze="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ve(l,p){let _,w;for(let B=1;B<arguments.length;B++){w=arguments[B];for(_ in w)l[_]=w[_];for(let X=0;X<ze.length;X++)_=ze[X],Object.prototype.hasOwnProperty.call(w,_)&&(l[_]=w[_])}}function Xe(l){this.src=l,this.g={},this.h=0}Xe.prototype.add=function(l,p,_,w,B){const X=l.toString();l=this.g[X],l||(l=this.g[X]=[],this.h++);const Me=st(l,p,w,B);return Me>-1?(p=l[Me],_||(p.fa=!1)):(p=new Le(p,this.src,X,!!w,B),p.fa=_,l.push(p)),p};function _t(l,p){const _=p.type;if(_ in l.g){var w=l.g[_],B=Array.prototype.indexOf.call(w,p,void 0),X;(X=B>=0)&&Array.prototype.splice.call(w,B,1),X&&(Ye(p),l.g[_].length==0&&(delete l.g[_],l.h--))}}function st(l,p,_,w){for(let B=0;B<l.length;++B){const X=l[B];if(!X.da&&X.listener==p&&X.capture==!!_&&X.ha==w)return B}return-1}var gn="closure_lm_"+(Math.random()*1e6|0),jt={};function us(l,p,_,w,B){if(Array.isArray(p)){for(let X=0;X<p.length;X++)us(l,p[X],_,w,B);return null}return _=Oa(_),l&&l[Ct]?l.J(p,_,h(w)?!!w.capture:!1,B):Da(l,p,_,!1,w,B)}function Da(l,p,_,w,B,X){if(!p)throw Error("Invalid event type");const Me=h(B)?!!B.capture:!!B;let $e=Xr(l);if($e||(l[gn]=$e=new Xe(l)),_=$e.add(p,_,w,Me,X),_.proxy)return _;if(w=Mi(),_.proxy=w,w.src=l,w.listener=_,l.addEventListener)le||(B=Me),B===void 0&&(B=!1),l.addEventListener(p.toString(),w,B);else if(l.attachEvent)l.attachEvent(Ws(p.toString()),w);else if(l.addListener&&l.removeListener)l.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Mi(){function l(_){return p.call(l.src,l.listener,_)}const p=Tl;return l}function Xs(l,p,_,w,B){if(Array.isArray(p))for(var X=0;X<p.length;X++)Xs(l,p[X],_,w,B);else w=h(w)?!!w.capture:!!w,_=Oa(_),l&&l[Ct]?(l=l.i,X=String(p).toString(),X in l.g&&(p=l.g[X],_=st(p,_,w,B),_>-1&&(Ye(p[_]),Array.prototype.splice.call(p,_,1),p.length==0&&(delete l.g[X],l.h--)))):l&&(l=Xr(l))&&(p=l.g[p.toString()],l=-1,p&&(l=st(p,_,w,B)),(_=l>-1?p[l]:null)&&Ns(_))}function Ns(l){if(typeof l!="number"&&l&&!l.da){var p=l.src;if(p&&p[Ct])_t(p.i,l);else{var _=l.type,w=l.proxy;p.removeEventListener?p.removeEventListener(_,w,l.capture):p.detachEvent?p.detachEvent(Ws(_),w):p.addListener&&p.removeListener&&p.removeListener(w),(_=Xr(p))?(_t(_,l),_.h==0&&(_.src=null,p[gn]=null)):Ye(l)}}}function Ws(l){return l in jt?jt[l]:jt[l]="on"+l}function Tl(l,p){if(l.da)l=!0;else{p=new gt(p,this);const _=l.listener,w=l.ha||l.src;l.fa&&Ns(l),l=_.call(w,p)}return l}function Xr(l){return l=l[gn],l instanceof Xe?l:null}var In="__closure_events_fn_"+(Math.random()*1e9>>>0);function Oa(l){return typeof l=="function"?l:(l[In]||(l[In]=function(p){return l.handleEvent(p)}),l[In])}function Xt(){ne.call(this),this.i=new Xe(this),this.M=this,this.G=null}j(Xt,ne),Xt.prototype[Ct]=!0,Xt.prototype.removeEventListener=function(l,p,_,w){Xs(this,l,p,_,w)};function rn(l,p){var _,w=l.G;if(w)for(_=[];w;w=w.G)_.push(w);if(l=l.M,w=p.type||p,typeof p=="string")p=new F(p,l);else if(p instanceof F)p.target=p.target||l;else{var B=p;p=new F(w,l),Ve(p,B)}B=!0;let X,Me;if(_)for(Me=_.length-1;Me>=0;Me--)X=p.g=_[Me],B=Rs(X,w,!0,p)&&B;if(X=p.g=l,B=Rs(X,w,!0,p)&&B,B=Rs(X,w,!1,p)&&B,_)for(Me=0;Me<_.length;Me++)X=p.g=_[Me],B=Rs(X,w,!1,p)&&B}Xt.prototype.N=function(){if(Xt.Z.N.call(this),this.i){var l=this.i;for(const p in l.g){const _=l.g[p];for(let w=0;w<_.length;w++)Ye(_[w]);delete l.g[p],l.h--}}this.G=null},Xt.prototype.J=function(l,p,_,w){return this.i.add(String(l),p,!1,_,w)},Xt.prototype.K=function(l,p,_,w){return this.i.add(String(l),p,!0,_,w)};function Rs(l,p,_,w){if(p=l.i.g[String(p)],!p)return!0;p=p.concat();let B=!0;for(let X=0;X<p.length;++X){const Me=p[X];if(Me&&!Me.da&&Me.capture==_){const $e=Me.listener,rt=Me.ha||Me.src;Me.fa&&_t(l.i,Me),B=$e.call(rt,w)!==!1&&B}}return B&&!w.defaultPrevented}function Ma(l,p){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=b(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:f.setTimeout(l,p||0)}function ji(l){l.g=Ma(()=>{l.g=null,l.i&&(l.i=!1,ji(l))},l.l);const p=l.h;l.h=null,l.m.apply(null,p)}class Eo extends ne{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:ji(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sr(l){ne.call(this),this.h=l,this.g={}}j(Sr,ne);var Cs=[];function yn(l){At(l.g,function(p,_){this.g.hasOwnProperty(_)&&Ns(p)},l),l.g={}}Sr.prototype.N=function(){Sr.Z.N.call(this),yn(this)},Sr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Jn=f.JSON.stringify,Nn=f.JSON.parse,Al=class{stringify(l){return f.JSON.stringify(l,void 0)}parse(l){return f.JSON.parse(l,void 0)}};function wo(){}function ki(){}var hs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Zs(){F.call(this,"d")}j(Zs,F);function ds(){F.call(this,"c")}j(ds,F);var Hn={},Ds=null;function Wr(){return Ds=Ds||new Xt}Hn.Ia="serverreachability";function ja(l){F.call(this,Hn.Ia,l)}j(ja,F);function Os(l){const p=Wr();rn(p,new ja(p))}Hn.STAT_EVENT="statevent";function Pi(l,p){F.call(this,Hn.STAT_EVENT,l),this.stat=p}j(Pi,F);function Wt(l){const p=Wr();rn(p,new Pi(p,l))}Hn.Ja="timingevent";function ka(l,p){F.call(this,Hn.Ja,l),this.size=p}j(ka,F);function Js(l,p){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){l()},p)}function er(){this.g=!0}er.prototype.ua=function(){this.g=!1};function Zr(l,p,_,w,B,X){l.info(function(){if(l.g)if(X){var Me="",$e=X.split("&");for(let Je=0;Je<$e.length;Je++){var rt=$e[Je].split("=");if(rt.length>1){const pt=rt[0];rt=rt[1];const _s=pt.split("_");Me=_s.length>=2&&_s[1]=="type"?Me+(pt+"="+rt+"&"):Me+(pt+"=redacted&")}}}else Me=null;else Me=X;return"XMLHTTP REQ ("+w+") [attempt "+B+"]: "+p+`
`+_+`
`+Me})}function tr(l,p,_,w,B,X,Me){l.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+B+"]: "+p+`
`+_+`
`+X+" "+Me})}function Gn(l,p,_,w){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+fs(l,_)+(w?" "+w:"")})}function Pa(l,p){l.info(function(){return"TIMEOUT: "+p})}er.prototype.info=function(){};function fs(l,p){if(!l.g)return p;if(!p)return null;try{const X=JSON.parse(p);if(X){for(l=0;l<X.length;l++)if(Array.isArray(X[l])){var _=X[l];if(!(_.length<2)){var w=_[1];if(Array.isArray(w)&&!(w.length<1)){var B=w[0];if(B!="noop"&&B!="stop"&&B!="close")for(let Me=1;Me<w.length;Me++)w[Me]=""}}}}return Jn(X)}catch{return p}}var Zt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},_n={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},nr;function Jr(){}j(Jr,wo),Jr.prototype.g=function(){return new XMLHttpRequest},nr=new Jr;function Tr(l){return encodeURIComponent(String(l))}function xo(l){var p=1;l=l.split(":");const _=[];for(;p>0&&l.length;)_.push(l.shift()),p--;return l.length&&_.push(l.join(":")),_}function es(l,p,_,w){this.j=l,this.i=p,this.l=_,this.S=w||1,this.V=new Sr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ar}function Ar(){this.i=null,this.g="",this.h=!1}var ei={},Ms={};function js(l,p,_){l.M=1,l.A=Ps(Kt(p)),l.u=_,l.R=!0,sr(l,null)}function sr(l,p){l.F=Date.now(),ti(l),l.B=Kt(l.A);var _=l.B,w=l.S;Array.isArray(w)||(w=[String(w)]),V(_.i,"t",w),l.C=0,_=l.j.L,l.h=new Ar,l.g=Us(l.j,_?p:null,!l.u),l.P>0&&(l.O=new Eo(b(l.Y,l,l.g),l.P)),p=l.V,_=l.g,w=l.ba;var B="readystatechange";Array.isArray(B)||(B&&(Cs[0]=B.toString()),B=Cs);for(let X=0;X<B.length;X++){const Me=us(_,B[X],w||p.handleEvent,!1,p.h||p);if(!Me)break;p.g[Me.key]=Me}p=l.J?je(l.J):{},l.u?(l.v||(l.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,p)):(l.v="GET",l.g.ea(l.B,l.v,null,p)),Os(),Zr(l.i,l.v,l.B,l.l,l.S,l.u)}es.prototype.ba=function(l){l=l.target;const p=this.O;p&&lt(l)==3?p.j():this.Y(l)},es.prototype.Y=function(l){try{if(l==this.g)e:{const $e=lt(this.g),rt=this.g.ya(),Je=this.g.ca();if(!($e<3)&&($e!=3||this.g&&(this.h.h||this.g.la()||vt(this.g)))){this.K||$e!=4||rt==7||(rt==8||Je<=0?Os(3):Os(2)),ps(this);var p=this.g.ca();this.X=p;var _=rr(this);if(this.o=p==200,tr(this.i,this.v,this.B,this.l,this.S,$e,p),this.o){if(this.U&&!this.L){t:{if(this.g){var w,B=this.g;if((w=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(w)){var X=w;break t}}X=null}if(l=X)Gn(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ni(this,l);else{this.o=!1,this.m=3,Wt(12),ms(this),ir(this);break e}}if(this.R){l=!0;let pt;for(;!this.K&&this.C<_.length;)if(pt=So(this,_),pt==Ms){$e==4&&(this.m=4,Wt(14),l=!1),Gn(this.i,this.l,null,"[Incomplete Response]");break}else if(pt==ei){this.m=4,Wt(15),Gn(this.i,this.l,_,"[Invalid Chunk]"),l=!1;break}else Gn(this.i,this.l,pt,null),ni(this,pt);if(Jt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$e!=4||_.length!=0||this.h.h||(this.m=1,Wt(16),l=!1),this.o=this.o&&l,!l)Gn(this.i,this.l,_,"[Invalid Chunked Response]"),ms(this),ir(this);else if(_.length>0&&!this.W){this.W=!0;var Me=this.j;Me.g==this&&Me.aa&&!Me.P&&(Me.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),ys(Me),Me.P=!0,Wt(11))}}else Gn(this.i,this.l,_,null),ni(this,_);$e==4&&ms(this),this.o&&!this.K&&($e==4?Vi(this.j,this):(this.o=!1,ti(this)))}else Ht(this.g),p==400&&_.indexOf("Unknown SID")>0?(this.m=3,Wt(12)):(this.m=0,Wt(13)),ms(this),ir(this)}}}catch{}finally{}};function rr(l){if(!Jt(l))return l.g.la();const p=vt(l.g);if(p==="")return"";let _="";const w=p.length,B=lt(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return ms(l),ir(l),"";l.h.i=new f.TextDecoder}for(let X=0;X<w;X++)l.h.h=!0,_+=l.h.i.decode(p[X],{stream:!(B&&X==w-1)});return p.length=0,l.h.g+=_,l.C=0,l.h.g}function Jt(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function So(l,p){var _=l.C,w=p.indexOf(`
`,_);return w==-1?Ms:(_=Number(p.substring(_,w)),isNaN(_)?ei:(w+=1,w+_>p.length?Ms:(p=p.slice(w,w+_),l.C=w+_,p)))}es.prototype.cancel=function(){this.K=!0,ms(this)};function ti(l){l.T=Date.now()+l.H,ks(l,l.H)}function ks(l,p){if(l.D!=null)throw Error("WatchDog timer not null");l.D=Js(b(l.aa,l),p)}function ps(l){l.D&&(f.clearTimeout(l.D),l.D=null)}es.prototype.aa=function(){this.D=null;const l=Date.now();l-this.T>=0?(Pa(this.i,this.B),this.M!=2&&(Os(),Wt(17)),ms(this),this.m=2,ir(this)):ks(this,this.T-l)};function ir(l){l.j.I==0||l.K||Vi(l.j,l)}function ms(l){ps(l);var p=l.O;p&&typeof p.dispose=="function"&&p.dispose(),l.O=null,yn(l.V),l.g&&(p=l.g,l.g=null,p.abort(),p.dispose())}function ni(l,p){try{var _=l.j;if(_.I!=0&&(_.g==l||$n(_.h,l))){if(!l.L&&$n(_.h,l)&&_.I==3){try{var w=_.Ba.g.parse(p)}catch{w=null}if(Array.isArray(w)&&w.length==3){var B=w;if(B[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<l.F)Li(_),Pn(_);else break e;oi(_),Wt(18)}}else _.xa=B[1],0<_.xa-_.K&&B[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Js(b(_.Va,_),6e3));Qn(_.h)<=1&&_.ta&&(_.ta=void 0)}else Vs(_,11)}else if((l.L||_.g==l)&&Li(_),!G(p))for(B=_.Ba.g.parse(p),p=0;p<B.length;p++){let Je=B[p];const pt=Je[0];if(!(pt<=_.K))if(_.K=pt,Je=Je[1],_.I==2)if(Je[0]=="c"){_.M=Je[1],_.ba=Je[2];const _s=Je[3];_s!=null&&(_.ka=_s,_.j.info("VER="+_.ka));const Dr=Je[4];Dr!=null&&(_.za=Dr,_.j.info("SVER="+_.za));const dr=Je[5];dr!=null&&typeof dr=="number"&&dr>0&&(w=1.5*dr,_.O=w,_.j.info("backChannelRequestTimeoutMs_="+w)),w=_;const fr=l.g;if(fr){const pr=fr.g?fr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pr){var X=w.h;X.g||pr.indexOf("spdy")==-1&&pr.indexOf("quic")==-1&&pr.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(ri(X,X.h),X.h=null))}if(w.G){const Nl=fr.g?fr.g.getResponseHeader("X-HTTP-Session-Id"):null;Nl&&(w.wa=Nl,Ot(w.J,w.G,Nl))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-l.F,_.j.info("Handshake RTT: "+_.T+"ms")),w=_;var Me=l;if(w.na=Ui(w,w.L?w.ba:null,w.W),Me.L){ar(w.h,Me);var $e=Me,rt=w.O;rt&&($e.H=rt),$e.D&&(ps($e),ti($e)),w.g=Me}else Ua(w);_.i.length>0&&lr(_)}else Je[0]!="stop"&&Je[0]!="close"||Vs(_,7);else _.I==3&&(Je[0]=="stop"||Je[0]=="close"?Je[0]=="stop"?Vs(_,7):Yn(_):Je[0]!="noop"&&_.l&&_.l.qa(Je),_.A=0)}}Os(4)}catch{}}var Il=class{constructor(l,p){this.g=l,this.map=p}};function si(l){this.l=l||10,f.PerformanceNavigationTiming?(l=f.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ir(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Qn(l){return l.h?1:l.g?l.g.size:0}function $n(l,p){return l.h?l.h==p:l.g?l.g.has(p):!1}function ri(l,p){l.g?l.g.add(p):l.h=p}function ar(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}si.prototype.cancel=function(){if(this.i=Nr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Nr(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let p=l.i;for(const _ of l.g.values())p=p.concat(_.G);return p}return ae(l.i)}var ii=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function La(l,p){if(l){l=l.split("&");for(let _=0;_<l.length;_++){const w=l[_].indexOf("=");let B,X=null;w>=0?(B=l[_].substring(0,w),X=l[_].substring(w+1)):B=l[_],p(B,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function ts(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;l instanceof ts?(this.l=l.l,Kn(this,l.j),this.o=l.o,this.g=l.g,Rr(this,l.u),this.h=l.h,or(this,Y(l.i)),this.m=l.m):l&&(p=String(l).match(ii))?(this.l=!1,Kn(this,p[1]||"",!0),this.o=ai(p[2]||""),this.g=ai(p[3]||"",!0),Rr(this,p[4]),this.h=ai(p[5]||"",!0),or(this,p[6]||"",!0),this.m=ai(p[7]||"")):(this.l=!1,this.i=new A(null,this.l))}ts.prototype.toString=function(){const l=[];var p=this.j;p&&l.push($(p,C,!0),":");var _=this.g;return(_||p=="file")&&(l.push("//"),(p=this.o)&&l.push($(p,C,!0),"@"),l.push(Tr(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&l.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&l.push("/"),l.push($(_,_.charAt(0)=="/"?N:O,!0))),(_=this.i.toString())&&l.push("?",_),(_=this.m)&&l.push("#",$(_,R)),l.join("")},ts.prototype.resolve=function(l){const p=Kt(this);let _=!!l.j;_?Kn(p,l.j):_=!!l.o,_?p.o=l.o:_=!!l.g,_?p.g=l.g:_=l.u!=null;var w=l.h;if(_)Rr(p,l.u);else if(_=!!l.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var B=p.h.lastIndexOf("/");B!=-1&&(w=p.h.slice(0,B+1)+w)}if(B=w,B==".."||B==".")w="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){w=B.lastIndexOf("/",0)==0,B=B.split("/");const X=[];for(let Me=0;Me<B.length;){const $e=B[Me++];$e=="."?w&&Me==B.length&&X.push(""):$e==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),w&&Me==B.length&&X.push("")):(X.push($e),w=!0)}w=X.join("/")}else w=B}return _?p.h=w:_=l.i.toString()!=="",_?or(p,Y(l.i)):_=!!l.m,_&&(p.m=l.m),p};function Kt(l){return new ts(l)}function Kn(l,p,_){l.j=_?ai(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function Rr(l,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);l.u=p}else l.u=null}function or(l,p,_){p instanceof A?(l.i=p,I(l.i,l.l)):(_||(p=$(p,T)),l.i=new A(p,l.l))}function Ot(l,p,_){l.i.set(p,_)}function Ps(l){return Ot(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function ai(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function $(l,p,_){return typeof l=="string"?(l=encodeURI(l).replace(p,D),_&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function D(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var C=/[#\/\?@]/g,O=/[#\?:]/g,N=/[#\?]/g,T=/[#\?@]/g,R=/#/g;function A(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function k(l){l.g||(l.g=new Map,l.h=0,l.i&&La(l.i,function(p,_){l.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}r=A.prototype,r.add=function(l,p){k(this),this.i=null,l=x(this,l);let _=this.g.get(l);return _||this.g.set(l,_=[]),_.push(p),this.h+=1,this};function Z(l,p){k(l),p=x(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function q(l,p){return k(l),p=x(l,p),l.g.has(p)}r.forEach=function(l,p){k(this),this.g.forEach(function(_,w){_.forEach(function(B){l.call(p,B,w,this)},this)},this)};function Q(l,p){k(l);let _=[];if(typeof p=="string")q(l,p)&&(_=_.concat(l.g.get(x(l,p))));else for(l=Array.from(l.g.values()),p=0;p<l.length;p++)_=_.concat(l[p]);return _}r.set=function(l,p){return k(this),this.i=null,l=x(this,l),q(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},r.get=function(l,p){return l?(l=Q(this,l),l.length>0?String(l[0]):p):p};function V(l,p,_){Z(l,p),_.length>0&&(l.i=null,l.g.set(x(l,p),ae(_)),l.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],p=Array.from(this.g.keys());for(let w=0;w<p.length;w++){var _=p[w];const B=Tr(_);_=Q(this,_);for(let X=0;X<_.length;X++){let Me=B;_[X]!==""&&(Me+="="+Tr(_[X])),l.push(Me)}}return this.i=l.join("&")};function Y(l){const p=new A;return p.i=l.i,l.g&&(p.g=new Map(l.g),p.h=l.h),p}function x(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function I(l,p){p&&!l.j&&(k(l),l.i=null,l.g.forEach(function(_,w){const B=w.toLowerCase();w!=B&&(Z(this,w),V(this,B,_))},l)),l.j=p}function U(l,p){const _=new er;if(f.Image){const w=new Image;w.onload=E(ee,_,"TestLoadImage: loaded",!0,p,w),w.onerror=E(ee,_,"TestLoadImage: error",!1,p,w),w.onabort=E(ee,_,"TestLoadImage: abort",!1,p,w),w.ontimeout=E(ee,_,"TestLoadImage: timeout",!1,p,w),f.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=l}else p(!1)}function J(l,p){const _=new er,w=new AbortController,B=setTimeout(()=>{w.abort(),ee(_,"TestPingServer: timeout",!1,p)},1e4);fetch(l,{signal:w.signal}).then(X=>{clearTimeout(B),X.ok?ee(_,"TestPingServer: ok",!0,p):ee(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(B),ee(_,"TestPingServer: error",!1,p)})}function ee(l,p,_,w,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),w(_)}catch{}}function ie(){this.g=new Al}function be(l){this.i=l.Sb||null,this.h=l.ab||!1}j(be,wo),be.prototype.g=function(){return new Se(this.i,this.h)};function Se(l,p){Xt.call(this),this.H=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}j(Se,Xt),r=Se.prototype,r.open=function(l,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=p,this.readyState=1,fe(this)},r.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(p.body=l),(this.H||f).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,he(this)),this.readyState=0},r.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,fe(this)),this.g&&(this.readyState=3,fe(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;W(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function W(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}r.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?he(this):fe(this),this.readyState==3&&W(this)}},r.Oa=function(l){this.g&&(this.response=this.responseText=l,he(this))},r.Na=function(l){this.g&&(this.response=l,he(this))},r.ga=function(){this.g&&he(this)};function he(l){l.readyState=4,l.l=null,l.j=null,l.B=null,fe(l)}r.setRequestHeader=function(l,p){this.A.append(l,p)},r.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,l.push(_[0]+": "+_[1]),_=p.next();return l.join(`\r
`)};function fe(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Se.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function se(l){let p="";return At(l,function(_,w){p+=w,p+=":",p+=_,p+=`\r
`}),p}function we(l,p,_){e:{for(w in _){var w=!1;break e}w=!0}w||(_=se(_),typeof l=="string"?_!=null&&Tr(_):Ot(l,p,_))}function ye(l){Xt.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}j(ye,Xt);var He=/^https?$/i,Ke=["POST","PUT"];r=ye.prototype,r.Fa=function(l){this.H=l},r.ea=function(l,p,_,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():nr.g(),this.g.onreadystatechange=z(b(this.Ca,this));try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch(X){Te(this,X);return}if(l=_||"",_=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var B in w)_.set(B,w[B]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const X of w.keys())_.set(X,w.get(X));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(_.keys()).find(X=>X.toLowerCase()=="content-type"),B=f.FormData&&l instanceof f.FormData,!(Array.prototype.indexOf.call(Ke,p,void 0)>=0)||w||B||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,Me]of _)this.g.setRequestHeader(X,Me);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(X){Te(this,X)}};function Te(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.o=5,Ue(l),Qe(l)}function Ue(l){l.A||(l.A=!0,rn(l,"complete"),rn(l,"error"))}r.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,rn(this,"complete"),rn(this,"abort"),Qe(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qe(this,!0)),ye.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?We(this):this.Xa())},r.Xa=function(){We(this)};function We(l){if(l.h&&typeof u<"u"){if(l.v&&lt(l)==4)setTimeout(l.Ca.bind(l),0);else if(rn(l,"readystatechange"),lt(l)==4){l.h=!1;try{const X=l.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var w;if(w=X===0){let Me=String(l.D).match(ii)[1]||null;!Me&&f.self&&f.self.location&&(Me=f.self.location.protocol.slice(0,-1)),w=!He.test(Me?Me.toLowerCase():"")}_=w}if(_)rn(l,"complete"),rn(l,"success");else{l.o=6;try{var B=lt(l)>2?l.g.statusText:""}catch{B=""}l.l=B+" ["+l.ca()+"]",Ue(l)}}finally{Qe(l)}}}}function Qe(l,p){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);const _=l.g;l.g=null,p||rn(l,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function lt(l){return l.g?l.g.readyState:0}r.ca=function(){try{return lt(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(l){if(this.g){var p=this.g.responseText;return l&&p.indexOf(l)==0&&(p=p.substring(l.length)),Nn(p)}};function vt(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Ht(l){const p={};l=(l.g&&lt(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<l.length;w++){if(G(l[w]))continue;var _=xo(l[w]);const B=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const X=p[B]||[];p[B]=X,X.push(_)}te(p,function(w){return w.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function It(l,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[l]||p}function kt(l){this.za=0,this.i=[],this.j=new er,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=It("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=It("baseRetryDelayMs",5e3,l),this.Za=It("retryDelaySeedMs",1e4,l),this.Ta=It("forwardChannelMaxRetries",2,l),this.va=It("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new si(l&&l.concurrentRequestLimit),this.Ba=new ie,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=kt.prototype,r.ka=8,r.I=1,r.connect=function(l,p,_,w){Wt(0),this.W=l,this.H=p||{},_&&w!==void 0&&(this.H.OSID=_,this.H.OAID=w),this.F=this.X,this.J=Ui(this,null,this.W),lr(this)};function Yn(l){if(gs(l),l.I==3){var p=l.V++,_=Kt(l.J);if(Ot(_,"SID",l.M),Ot(_,"RID",p),Ot(_,"TYPE","terminate"),Ls(l,_),p=new es(l,l.j,p),p.M=2,p.A=Ps(Kt(_)),_=!1,f.navigator&&f.navigator.sendBeacon)try{_=f.navigator.sendBeacon(p.A.toString(),"")}catch{}!_&&f.Image&&(new Image().src=p.A,_=!0),_||(p.g=Us(p.j,null),p.g.ea(p.A)),p.F=Date.now(),ti(p)}Ba(l)}function Pn(l){l.g&&(ys(l),l.g.cancel(),l.g=null)}function gs(l){Pn(l),l.v&&(f.clearTimeout(l.v),l.v=null),Li(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&f.clearTimeout(l.m),l.m=null)}function lr(l){if(!Ir(l.h)&&!l.m){l.m=!0;var p=l.Ea;ue||L(),Re||(ue(),Re=!0),P.add(p,l),l.D=0}}function Va(l,p){return Qn(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=p.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=Js(b(l.Ea,l,p),li(l,l.D)),l.D++,!0)}r.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;const B=new es(this,this.j,l);let X=this.o;if(this.U&&(X?(X=je(X),Ve(X,this.U)):X=this.U),this.u!==null||this.R||(B.J=X,X=null),this.S)e:{for(var p=0,_=0;_<this.i.length;_++){t:{var w=this.i[_];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(p+=w,p>4096){p=_;break e}if(p===4096||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=Cr(this,B,p),_=Kt(this.J),Ot(_,"RID",l),Ot(_,"CVER",22),this.G&&Ot(_,"X-HTTP-Session-Id",this.G),Ls(this,_),X&&(this.R?p="headers="+Tr(se(X))+"&"+p:this.u&&we(_,this.u,X)),ri(this.h,B),this.Ra&&Ot(_,"TYPE","init"),this.S?(Ot(_,"$req",p),Ot(_,"SID","null"),B.U=!0,js(B,_,null)):js(B,_,p),this.I=2}}else this.I==3&&(l?cr(this,l):this.i.length==0||Ir(this.h)||cr(this))};function cr(l,p){var _;p?_=p.l:_=l.V++;const w=Kt(l.J);Ot(w,"SID",l.M),Ot(w,"RID",_),Ot(w,"AID",l.K),Ls(l,w),l.u&&l.o&&we(w,l.u,l.o),_=new es(l,l.j,_,l.D+1),l.u===null&&(_.J=l.o),p&&(l.i=p.G.concat(l.i)),p=Cr(l,_,1e3),_.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),ri(l.h,_),js(_,w,p)}function Ls(l,p){l.H&&At(l.H,function(_,w){Ot(p,w,_)}),l.l&&At({},function(_,w){Ot(p,w,_)})}function Cr(l,p,_){_=Math.min(l.i.length,_);const w=l.l?b(l.l.Ka,l.l,l):null;e:{var B=l.i;let $e=-1;for(;;){const rt=["count="+_];$e==-1?_>0?($e=B[0].g,rt.push("ofs="+$e)):$e=0:rt.push("ofs="+$e);let Je=!0;for(let pt=0;pt<_;pt++){var X=B[pt].g;const _s=B[pt].map;if(X-=$e,X<0)$e=Math.max(0,B[pt].g-100),Je=!1;else try{X="req"+X+"_"||"";try{var Me=_s instanceof Map?_s:Object.entries(_s);for(const[Dr,dr]of Me){let fr=dr;h(dr)&&(fr=Jn(dr)),rt.push(X+Dr+"="+encodeURIComponent(fr))}}catch(Dr){throw rt.push(X+"type="+encodeURIComponent("_badmap")),Dr}}catch{w&&w(_s)}}if(Je){Me=rt.join("&");break e}}Me=void 0}return l=l.i.splice(0,_),p.G=l,Me}function Ua(l){if(!l.g&&!l.v){l.Y=1;var p=l.Da;ue||L(),Re||(ue(),Re=!0),P.add(p,l),l.A=0}}function oi(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=Js(b(l.Da,l),li(l,l.A)),l.A++,!0)}r.Da=function(){if(this.v=null,ur(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=Js(b(this.Wa,this),l)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Wt(10),Pn(this),ur(this))};function ys(l){l.B!=null&&(f.clearTimeout(l.B),l.B=null)}function ur(l){l.g=new es(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var p=Kt(l.na);Ot(p,"RID","rpc"),Ot(p,"SID",l.M),Ot(p,"AID",l.K),Ot(p,"CI",l.F?"0":"1"),!l.F&&l.ia&&Ot(p,"TO",l.ia),Ot(p,"TYPE","xmlhttp"),Ls(l,p),l.u&&l.o&&we(p,l.u,l.o),l.O&&(l.g.H=l.O);var _=l.g;l=l.ba,_.M=1,_.A=Ps(Kt(p)),_.u=null,_.R=!0,sr(_,l)}r.Va=function(){this.C!=null&&(this.C=null,Pn(this),oi(this),Wt(19))};function Li(l){l.C!=null&&(f.clearTimeout(l.C),l.C=null)}function Vi(l,p){var _=null;if(l.g==p){Li(l),ys(l),l.g=null;var w=2}else if($n(l.h,p))_=p.G,ar(l.h,p),w=1;else return;if(l.I!=0){if(p.o)if(w==1){_=p.u?p.u.length:0,p=Date.now()-p.F;var B=l.D;w=Wr(),rn(w,new ka(w,_)),lr(l)}else Ua(l);else if(B=p.m,B==3||B==0&&p.X>0||!(w==1&&Va(l,p)||w==2&&oi(l)))switch(_&&_.length>0&&(p=l.h,p.i=p.i.concat(_)),B){case 1:Vs(l,5);break;case 4:Vs(l,10);break;case 3:Vs(l,6);break;default:Vs(l,2)}}}function li(l,p){let _=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(_*=2),_*p}function Vs(l,p){if(l.j.info("Error code "+p),p==2){var _=b(l.bb,l),w=l.Ua;const B=!w;w=new ts(w||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Kn(w,"https"),Ps(w),B?U(w.toString(),_):J(w.toString(),_)}else Wt(2);l.I=0,l.l&&l.l.pa(p),Ba(l),gs(l)}r.bb=function(l){l?(this.j.info("Successfully pinged google.com"),Wt(2)):(this.j.info("Failed to ping google.com"),Wt(1))};function Ba(l){if(l.I=0,l.ja=[],l.l){const p=Nr(l.h);(p.length!=0||l.i.length!=0)&&(re(l.ja,p),re(l.ja,l.i),l.h.i.length=0,ae(l.i),l.i.length=0),l.l.oa()}}function Ui(l,p,_){var w=_ instanceof ts?Kt(_):new ts(_);if(w.g!="")p&&(w.g=p+"."+w.g),Rr(w,w.u);else{var B=f.location;w=B.protocol,p=p?p+"."+B.hostname:B.hostname,B=+B.port;const X=new ts(null);w&&Kn(X,w),p&&(X.g=p),B&&Rr(X,B),_&&(X.h=_),w=X}return _=l.G,p=l.wa,_&&p&&Ot(w,_,p),Ot(w,"VER",l.ka),Ls(l,w),w}function Us(l,p,_){if(p&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=l.Aa&&!l.ma?new ye(new be({ab:_})):new ye(l.ma),p.Fa(l.L),p}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ln(){}r=Ln.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function hr(){}hr.prototype.g=function(l,p){return new Rn(l,p)};function Rn(l,p){Xt.call(this),this.g=new kt(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(l?l["X-WebChannel-Client-Profile"]=p.sa:l={"X-WebChannel-Client-Profile":p.sa}),this.g.U=l,(l=p&&p.Qb)&&!G(l)&&(this.g.u=l),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!G(p)&&(this.g.G=p,l=this.h,l!==null&&p in l&&(l=this.h,p in l&&delete l[p])),this.j=new y(this)}j(Rn,Xt),Rn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Rn.prototype.close=function(){Yn(this.g)},Rn.prototype.o=function(l){var p=this.g;if(typeof l=="string"){var _={};_.__data__=l,l=_}else this.v&&(_={},_.__data__=Jn(l),l=_);p.i.push(new Il(p.Ya++,l)),p.I==3&&lr(p)},Rn.prototype.N=function(){this.g.l=null,delete this.j,Yn(this.g),delete this.g,Rn.Z.N.call(this)};function Xn(l){Zs.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){e:{for(const _ in p){l=_;break e}l=void 0}(this.i=l)&&(l=this.i,p=p!==null&&l in p?p[l]:void 0),this.data=p}else this.data=l}j(Xn,Zs);function za(){ds.call(this),this.status=1}j(za,ds);function y(l){this.g=l}j(y,Ln),y.prototype.ra=function(){rn(this.g,"a")},y.prototype.qa=function(l){rn(this.g,new Xn(l))},y.prototype.pa=function(l){rn(this.g,new za)},y.prototype.oa=function(){rn(this.g,"b")},hr.prototype.createWebChannel=hr.prototype.g,Rn.prototype.send=Rn.prototype.o,Rn.prototype.open=Rn.prototype.m,Rn.prototype.close=Rn.prototype.close,mb=function(){return new hr},pb=function(){return Wr()},fb=Hn,Up={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Zt.NO_ERROR=0,Zt.TIMEOUT=8,Zt.HTTP_ERROR=6,yh=Zt,_n.COMPLETE="complete",db=_n,ki.EventType=hs,hs.OPEN="a",hs.CLOSE="b",hs.ERROR="c",hs.MESSAGE="d",Xt.prototype.listen=Xt.prototype.J,bc=ki,ye.prototype.listenOnce=ye.prototype.K,ye.prototype.getLastError=ye.prototype.Ha,ye.prototype.getLastErrorCode=ye.prototype.ya,ye.prototype.getStatus=ye.prototype.ca,ye.prototype.getResponseJson=ye.prototype.La,ye.prototype.getResponseText=ye.prototype.la,ye.prototype.send=ye.prototype.ea,ye.prototype.setWithCredentials=ye.prototype.Fa,hb=ye}).apply(typeof th<"u"?th:typeof self<"u"?self:typeof window<"u"?window:{});const tv="@firebase/firestore",nv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zn.UNAUTHENTICATED=new zn(null),zn.GOOGLE_CREDENTIALS=new zn("google-credentials-uid"),zn.FIRST_PARTY=new zn("first-party-uid"),zn.MOCK_USER=new zn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo=new om("@firebase/firestore");function tl(){return uo.logLevel}function Fe(r,...e){if(uo.logLevel<=xt.DEBUG){const n=e.map(vm);uo.debug(`Firestore (${bl}): ${r}`,...n)}}function Ci(r,...e){if(uo.logLevel<=xt.ERROR){const n=e.map(vm);uo.error(`Firestore (${bl}): ${r}`,...n)}}function fl(r,...e){if(uo.logLevel<=xt.WARN){const n=e.map(vm);uo.warn(`Firestore (${bl}): ${r}`,...n)}}function vm(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(r,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,gb(r,i,n)}function gb(r,e,n){let i=`FIRESTORE (${bl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Ci(i),new Error(i)}function Pt(r,e,n,i){let o="Unexpected state";typeof n=="string"?o=n:i=n,r||gb(e,o,i)}function ft(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qe extends Kr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class MA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(zn.UNAUTHENTICATED)))}shutdown(){}}class jA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class kA{constructor(e){this.t=e,this.currentUser=zn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Pt(this.o===void 0,42304);let i=this.i;const o=v=>this.i!==i?(i=this.i,n(v)):Promise.resolve();let u=new Ti;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Ti,e.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const v=u;e.enqueueRetryable((async()=>{await v.promise,await o(this.currentUser)}))},h=v=>{Fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((v=>h(v))),setTimeout((()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?h(v):(Fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Ti)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(Fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Pt(typeof i.accessToken=="string",31837,{l:i}),new yb(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pt(e===null||typeof e=="string",2055,{h:e}),new zn(e)}}class PA{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=zn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class LA{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new PA(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(zn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class sv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class VA{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_r(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Pt(this.o===void 0,3512);const i=u=>{u.error!=null&&Fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,Fe("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>i(u)))};const o=u=>{Fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):Fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new sv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Pt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new sv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<r;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=UA(40);for(let u=0;u<o.length;++u)i.length<20&&o[u]<n&&(i+=e.charAt(o[u]%62))}return i}}function St(r,e){return r<e?-1:r>e?1:0}function Bp(r,e){const n=Math.min(r.length,e.length);for(let i=0;i<n;i++){const o=r.charAt(i),u=e.charAt(i);if(o!==u)return vp(o)===vp(u)?St(o,u):vp(o)?1:-1}return St(r.length,e.length)}const BA=55296,zA=57343;function vp(r){const e=r.charCodeAt(0);return e>=BA&&e<=zA}function pl(r,e,n){return r.length===e.length&&r.every(((i,o)=>n(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv="__name__";class Lr{constructor(e,n,i){n===void 0?n=0:n>e.length&&ot(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&ot(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Lr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Lr?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let o=0;o<i;o++){const u=Lr.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return St(e.length,n.length)}static compareSegments(e,n){const i=Lr.isNumericId(e),o=Lr.isNumericId(n);return i&&!o?-1:!i&&o?1:i&&o?Lr.extractNumericId(e).compare(Lr.extractNumericId(n)):Bp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ba.fromString(e.substring(4,e.length-2))}}class $t extends Lr{construct(e,n,i){return new $t(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new qe(Ne.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((o=>o.length>0)))}return new $t(n)}static emptyPath(){return new $t([])}}const qA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jn extends Lr{construct(e,n,i){return new jn(e,n,i)}static isValidIdentifier(e){return qA.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===rv}static keyField(){return new jn([rv])}static fromServerFormat(e){const n=[];let i="",o=0;const u=()=>{if(i.length===0)throw new qe(Ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let f=!1;for(;o<e.length;){const h=e[o];if(h==="\\"){if(o+1===e.length)throw new qe(Ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[o+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new qe(Ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=v,o+=2}else h==="`"?(f=!f,o++):h!=="."||f?(i+=h,o++):(u(),o++)}if(u(),f)throw new qe(Ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new jn(n)}static emptyPath(){return new jn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.path=e}static fromPath(e){return new et($t.fromString(e))}static fromName(e){return new et($t.fromString(e).popFirst(5))}static empty(){return new et($t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$t.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return $t.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new et(new $t(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(r,e,n){if(!n)throw new qe(Ne.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function FA(r,e,n,i){if(e===!0&&i===!0)throw new qe(Ne.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function iv(r){if(!et.isDocumentKey(r))throw new qe(Ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function av(r){if(et.isDocumentKey(r))throw new qe(Ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function vb(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Wh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":ot(12329,{type:typeof r})}function ho(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new qe(Ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Wh(r);throw new qe(Ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(r,e){const n={typeString:r};return e&&(n.value=e),n}function Kc(r,e){if(!vb(r))throw new qe(Ne.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const o=e[i].typeString,u="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){n=`JSON missing required field: '${i}'`;break}const f=r[i];if(o&&typeof f!==o){n=`JSON field '${i}' must be a ${o}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${i}' field to equal '${u.value}'`;break}}if(n)throw new qe(Ne.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov=-62135596800,lv=1e6;class Ut{static now(){return Ut.fromMillis(Date.now())}static fromDate(e){return Ut.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*lv);return new Ut(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new qe(Ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new qe(Ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<ov)throw new qe(Ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new qe(Ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/lv}_compareTo(e){return this.seconds===e.seconds?St(this.nanoseconds,e.nanoseconds):St(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ut._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Kc(e,Ut._jsonSchema))return new Ut(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ov;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ut._jsonSchemaVersion="firestore/timestamp/1.0",Ut._jsonSchema={type:pn("string",Ut._jsonSchemaVersion),seconds:pn("number"),nanoseconds:pn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{static fromTimestamp(e){return new dt(e)}static min(){return new dt(new Ut(0,0))}static max(){return new dt(new Ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc=-1;function HA(r,e){const n=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=dt.fromTimestamp(i===1e9?new Ut(n+1,0):new Ut(n,i));return new xa(o,et.empty(),e)}function GA(r){return new xa(r.readTime,r.key,Pc)}class xa{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new xa(dt.min(),et.empty(),Pc)}static max(){return new xa(dt.max(),et.empty(),Pc)}}function QA(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=et.comparator(r.documentKey,e.documentKey),n!==0?n:St(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class KA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function El(r){if(r.code!==Ne.FAILED_PRECONDITION||r.message!==$A)throw r;Fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ot(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Oe(((i,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(i,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(i,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Oe?n:Oe.resolve(n)}catch(n){return Oe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Oe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Oe.reject(n)}static resolve(e){return new Oe(((n,i)=>{n(e)}))}static reject(e){return new Oe(((n,i)=>{i(e)}))}static waitFor(e){return new Oe(((n,i)=>{let o=0,u=0,f=!1;e.forEach((h=>{++o,h.next((()=>{++u,f&&u===o&&n()}),(v=>i(v)))})),f=!0,u===o&&n()}))}static or(e){let n=Oe.resolve(!1);for(const i of e)n=n.next((o=>o?Oe.resolve(o):i()));return n}static forEach(e,n){const i=[];return e.forEach(((o,u)=>{i.push(n.call(this,o,u))})),this.waitFor(i)}static mapArray(e,n){return new Oe(((i,o)=>{const u=e.length,f=new Array(u);let h=0;for(let v=0;v<u;v++){const b=v;n(e[b]).next((E=>{f[b]=E,++h,h===u&&i(f)}),(E=>o(E)))}}))}static doWhile(e,n){return new Oe(((i,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):i()};u()}))}}function YA(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function wl(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Zh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Em=-1;function Jh(r){return r==null}function Oh(r){return r===0&&1/r==-1/0}function XA(r){return typeof r=="number"&&Number.isInteger(r)&&!Oh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb="";function WA(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=cv(e)),e=ZA(r.get(n),e);return cv(e)}function ZA(r,e){let n=e;const i=r.length;for(let o=0;o<i;o++){const u=r.charAt(o);switch(u){case"\0":n+="";break;case bb:n+="";break;default:n+=u}}return n}function cv(r){return r+bb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function go(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function Eb(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,n){this.comparator=e,this.root=n||Mn.EMPTY}insert(e,n){return new tn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Mn.BLACK,null,null))}remove(e){return new tn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return n+i.left.size;o<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nh(this.root,e,this.comparator,!1)}getReverseIterator(){return new nh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nh(this.root,e,this.comparator,!0)}}class nh{constructor(e,n,i,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?i(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mn{constructor(e,n,i,o,u){this.key=e,this.value=n,this.color=i??Mn.RED,this.left=o??Mn.EMPTY,this.right=u??Mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,o,u){return new Mn(e??this.key,n??this.value,i??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this;const u=i(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,i),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Mn.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ot(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ot(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ot(27949);return e+(this.isRed()?0:1)}}Mn.EMPTY=null,Mn.RED=!0,Mn.BLACK=!1;Mn.EMPTY=new class{constructor(){this.size=0}get key(){throw ot(57766)}get value(){throw ot(16141)}get color(){throw ot(16727)}get left(){throw ot(29726)}get right(){throw ot(36894)}copy(e,n,i,o,u){return this}insert(e,n,i){return new Mn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.comparator=e,this.data=new tn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new hv(this.data.getIterator())}getIteratorFrom(e){return new hv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof wn)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=i.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new wn(this.comparator);return n.data=e,n}}class hv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this.fields=e,e.sort(jn.comparator)}static empty(){return new Er([])}unionWith(e){let n=new wn(jn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Er(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return pl(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new wb("Invalid base64 string: "+u):u}})(e);return new kn(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u})(e);return new kn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return St(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kn.EMPTY_BYTE_STRING=new kn("");const JA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sa(r){if(Pt(!!r,39018),typeof r=="string"){let e=0;const n=JA.exec(r);if(Pt(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ln(r.seconds),nanos:ln(r.nanos)}}function ln(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ta(r){return typeof r=="string"?kn.fromBase64String(r):kn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb="server_timestamp",Sb="__type__",Tb="__previous_value__",Ab="__local_write_time__";function wm(r){var n,i;return((i=(((n=r==null?void 0:r.mapValue)==null?void 0:n.fields)||{})[Sb])==null?void 0:i.stringValue)===xb}function ed(r){const e=r.mapValue.fields[Tb];return wm(e)?ed(e):e}function Lc(r){const e=Sa(r.mapValue.fields[Ab].timestampValue);return new Ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e,n,i,o,u,f,h,v,b,E){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=h,this.longPollingOptions=v,this.useFetchStreams=b,this.isUsingEmulator=E}}const Mh="(default)";class Vc{constructor(e,n){this.projectId=e,this.database=n||Mh}static empty(){return new Vc("","")}get isDefaultDatabase(){return this.database===Mh}isEqual(e){return e instanceof Vc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib="__type__",tI="__max__",sh={mapValue:{}},Nb="__vector__",jh="value";function Aa(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?wm(r)?4:sI(r)?9007199254740991:nI(r)?10:11:ot(28295,{value:r})}function Qr(r,e){if(r===e)return!0;const n=Aa(r);if(n!==Aa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Lc(r).isEqual(Lc(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=Sa(o.timestampValue),h=Sa(u.timestampValue);return f.seconds===h.seconds&&f.nanos===h.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,u){return Ta(o.bytesValue).isEqual(Ta(u.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,u){return ln(o.geoPointValue.latitude)===ln(u.geoPointValue.latitude)&&ln(o.geoPointValue.longitude)===ln(u.geoPointValue.longitude)})(r,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return ln(o.integerValue)===ln(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=ln(o.doubleValue),h=ln(u.doubleValue);return f===h?Oh(f)===Oh(h):isNaN(f)&&isNaN(h)}return!1})(r,e);case 9:return pl(r.arrayValue.values||[],e.arrayValue.values||[],Qr);case 10:case 11:return(function(o,u){const f=o.mapValue.fields||{},h=u.mapValue.fields||{};if(uv(f)!==uv(h))return!1;for(const v in f)if(f.hasOwnProperty(v)&&(h[v]===void 0||!Qr(f[v],h[v])))return!1;return!0})(r,e);default:return ot(52216,{left:r})}}function Uc(r,e){return(r.values||[]).find((n=>Qr(n,e)))!==void 0}function ml(r,e){if(r===e)return 0;const n=Aa(r),i=Aa(e);if(n!==i)return St(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return St(r.booleanValue,e.booleanValue);case 2:return(function(u,f){const h=ln(u.integerValue||u.doubleValue),v=ln(f.integerValue||f.doubleValue);return h<v?-1:h>v?1:h===v?0:isNaN(h)?isNaN(v)?0:-1:1})(r,e);case 3:return dv(r.timestampValue,e.timestampValue);case 4:return dv(Lc(r),Lc(e));case 5:return Bp(r.stringValue,e.stringValue);case 6:return(function(u,f){const h=Ta(u),v=Ta(f);return h.compareTo(v)})(r.bytesValue,e.bytesValue);case 7:return(function(u,f){const h=u.split("/"),v=f.split("/");for(let b=0;b<h.length&&b<v.length;b++){const E=St(h[b],v[b]);if(E!==0)return E}return St(h.length,v.length)})(r.referenceValue,e.referenceValue);case 8:return(function(u,f){const h=St(ln(u.latitude),ln(f.latitude));return h!==0?h:St(ln(u.longitude),ln(f.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return fv(r.arrayValue,e.arrayValue);case 10:return(function(u,f){var z,ae,re,ve;const h=u.fields||{},v=f.fields||{},b=(z=h[jh])==null?void 0:z.arrayValue,E=(ae=v[jh])==null?void 0:ae.arrayValue,j=St(((re=b==null?void 0:b.values)==null?void 0:re.length)||0,((ve=E==null?void 0:E.values)==null?void 0:ve.length)||0);return j!==0?j:fv(b,E)})(r.mapValue,e.mapValue);case 11:return(function(u,f){if(u===sh.mapValue&&f===sh.mapValue)return 0;if(u===sh.mapValue)return 1;if(f===sh.mapValue)return-1;const h=u.fields||{},v=Object.keys(h),b=f.fields||{},E=Object.keys(b);v.sort(),E.sort();for(let j=0;j<v.length&&j<E.length;++j){const z=Bp(v[j],E[j]);if(z!==0)return z;const ae=ml(h[v[j]],b[E[j]]);if(ae!==0)return ae}return St(v.length,E.length)})(r.mapValue,e.mapValue);default:throw ot(23264,{he:n})}}function dv(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return St(r,e);const n=Sa(r),i=Sa(e),o=St(n.seconds,i.seconds);return o!==0?o:St(n.nanos,i.nanos)}function fv(r,e){const n=r.values||[],i=e.values||[];for(let o=0;o<n.length&&o<i.length;++o){const u=ml(n[o],i[o]);if(u)return u}return St(n.length,i.length)}function gl(r){return zp(r)}function zp(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const i=Sa(n);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return Ta(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return et.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let i="[",o=!0;for(const u of n.values||[])o?o=!1:i+=",",i+=zp(u);return i+"]"})(r.arrayValue):"mapValue"in r?(function(n){const i=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of i)u?u=!1:o+=",",o+=`${f}:${zp(n.fields[f])}`;return o+"}"})(r.mapValue):ot(61005,{value:r})}function _h(r){switch(Aa(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ed(r);return e?16+_h(e):16;case 5:return 2*r.stringValue.length;case 6:return Ta(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,u)=>o+_h(u)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return go(i.fields,((u,f)=>{o+=u.length+_h(f)})),o})(r.mapValue);default:throw ot(13486,{value:r})}}function pv(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function qp(r){return!!r&&"integerValue"in r}function xm(r){return!!r&&"arrayValue"in r}function mv(r){return!!r&&"nullValue"in r}function gv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function vh(r){return!!r&&"mapValue"in r}function nI(r){var n,i;return((i=(((n=r==null?void 0:r.mapValue)==null?void 0:n.fields)||{})[Ib])==null?void 0:i.stringValue)===Nb}function Ic(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return go(r.mapValue.fields,((n,i)=>e.mapValue.fields[n]=Ic(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ic(r.arrayValue.values[n]);return e}return{...r}}function sI(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===tI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e){this.value=e}static empty(){return new Ks({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!vh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ic(n)}setAll(e){let n=jn.emptyPath(),i={},o=[];e.forEach(((f,h)=>{if(!n.isImmediateParentOf(h)){const v=this.getFieldsMap(n);this.applyChanges(v,i,o),i={},o=[],n=h.popLast()}f?i[h.lastSegment()]=Ic(f):o.push(h.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,i,o)}delete(e){const n=this.field(e.popLast());vh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Qr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=n.mapValue.fields[e.get(i)];vh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,i){go(n,((o,u)=>e[o]=u));for(const o of i)delete e[o]}clone(){return new Ks(Ic(this.value))}}function Rb(r){const e=[];return go(r.fields,((n,i)=>{const o=new jn([n]);if(vh(i)){const u=Rb(i.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)})),new Er(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e,n,i,o,u,f,h){this.key=e,this.documentType=n,this.version=i,this.readTime=o,this.createTime=u,this.data=f,this.documentState=h}static newInvalidDocument(e){return new qn(e,0,dt.min(),dt.min(),dt.min(),Ks.empty(),0)}static newFoundDocument(e,n,i,o){return new qn(e,1,n,dt.min(),i,o,0)}static newNoDocument(e,n){return new qn(e,2,n,dt.min(),dt.min(),Ks.empty(),0)}static newUnknownDocument(e,n){return new qn(e,3,n,dt.min(),dt.min(),Ks.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(dt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ks.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ks.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=dt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof qn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,n){this.position=e,this.inclusive=n}}function yv(r,e,n){let i=0;for(let o=0;o<r.position.length;o++){const u=e[o],f=r.position[o];if(u.field.isKeyField()?i=et.comparator(et.fromName(f.referenceValue),n.key):i=ml(f,n.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return i}function _v(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!Qr(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,n="asc"){this.field=e,this.dir=n}}function rI(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{}class fn extends Cb{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new aI(e,n,i):n==="array-contains"?new cI(e,i):n==="in"?new uI(e,i):n==="not-in"?new hI(e,i):n==="array-contains-any"?new dI(e,i):new fn(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new oI(e,i):new lI(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ml(n,this.value)):n!==null&&Aa(this.value)===Aa(n)&&this.matchesComparison(ml(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ot(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xr extends Cb{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new xr(e,n)}matches(e){return Db(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Db(r){return r.op==="and"}function Ob(r){return iI(r)&&Db(r)}function iI(r){for(const e of r.filters)if(e instanceof xr)return!1;return!0}function Fp(r){if(r instanceof fn)return r.field.canonicalString()+r.op.toString()+gl(r.value);if(Ob(r))return r.filters.map((e=>Fp(e))).join(",");{const e=r.filters.map((n=>Fp(n))).join(",");return`${r.op}(${e})`}}function Mb(r,e){return r instanceof fn?(function(i,o){return o instanceof fn&&i.op===o.op&&i.field.isEqual(o.field)&&Qr(i.value,o.value)})(r,e):r instanceof xr?(function(i,o){return o instanceof xr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((u,f,h)=>u&&Mb(f,o.filters[h])),!0):!1})(r,e):void ot(19439)}function jb(r){return r instanceof fn?(function(n){return`${n.field.canonicalString()} ${n.op} ${gl(n.value)}`})(r):r instanceof xr?(function(n){return n.op.toString()+" {"+n.getFilters().map(jb).join(" ,")+"}"})(r):"Filter"}class aI extends fn{constructor(e,n,i){super(e,n,i),this.key=et.fromName(i.referenceValue)}matches(e){const n=et.comparator(e.key,this.key);return this.matchesComparison(n)}}class oI extends fn{constructor(e,n){super(e,"in",n),this.keys=kb("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class lI extends fn{constructor(e,n){super(e,"not-in",n),this.keys=kb("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function kb(r,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((i=>et.fromName(i.referenceValue)))}class cI extends fn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return xm(n)&&Uc(n.arrayValue,this.value)}}class uI extends fn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Uc(this.value.arrayValue,n)}}class hI extends fn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Uc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Uc(this.value.arrayValue,n)}}class dI extends fn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!xm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>Uc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e,n=null,i=[],o=[],u=null,f=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=o,this.limit=u,this.startAt=f,this.endAt=h,this.Te=null}}function vv(r,e=null,n=[],i=[],o=null,u=null,f=null){return new fI(r,e,n,i,o,u,f)}function Sm(r){const e=ft(r);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>Fp(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(u){return u.field.canonicalString()+u.dir})(i))).join(","),Jh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>gl(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>gl(i))).join(",")),e.Te=n}return e.Te}function Tm(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!rI(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!Mb(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!_v(r.startAt,e.startAt)&&_v(r.endAt,e.endAt)}function Hp(r){return et.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,n=null,i=[],o=[],u=null,f="F",h=null,v=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=o,this.limit=u,this.limitType=f,this.startAt=h,this.endAt=v,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function pI(r,e,n,i,o,u,f,h){return new xl(r,e,n,i,o,u,f,h)}function Am(r){return new xl(r)}function bv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Pb(r){return r.collectionGroup!==null}function Nc(r){const e=ft(r);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let h=new wn(jn.comparator);return f.filters.forEach((v=>{v.getFlattenedFilters().forEach((b=>{b.isInequality()&&(h=h.add(b.field))}))})),h})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Bc(u,i))})),n.has(jn.keyField().canonicalString())||e.Ie.push(new Bc(jn.keyField(),i))}return e.Ie}function zr(r){const e=ft(r);return e.Ee||(e.Ee=mI(e,Nc(r))),e.Ee}function mI(r,e){if(r.limitType==="F")return vv(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Bc(o.field,u)}));const n=r.endAt?new kh(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new kh(r.startAt.position,r.startAt.inclusive):null;return vv(r.path,r.collectionGroup,e,r.filters,r.limit,n,i)}}function Gp(r,e){const n=r.filters.concat([e]);return new xl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function Qp(r,e,n){return new xl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function td(r,e){return Tm(zr(r),zr(e))&&r.limitType===e.limitType}function Lb(r){return`${Sm(zr(r))}|lt:${r.limitType}`}function nl(r){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((o=>jb(o))).join(", ")}]`),Jh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((o=>gl(o))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((o=>gl(o))).join(",")),`Target(${i})`})(zr(r))}; limitType=${r.limitType})`}function nd(r,e){return e.isFoundDocument()&&(function(i,o){const u=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(u):et.isDocumentKey(i.path)?i.path.isEqual(u):i.path.isImmediateParentOf(u)})(r,e)&&(function(i,o){for(const u of Nc(i))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const u of i.filters)if(!u.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(f,h,v){const b=yv(f,h,v);return f.inclusive?b<=0:b<0})(i.startAt,Nc(i),o)||i.endAt&&!(function(f,h,v){const b=yv(f,h,v);return f.inclusive?b>=0:b>0})(i.endAt,Nc(i),o))})(r,e)}function gI(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Vb(r){return(e,n)=>{let i=!1;for(const o of Nc(r)){const u=yI(o,e,n);if(u!==0)return u;i=i||o.field.isKeyField()}return 0}}function yI(r,e,n){const i=r.field.isKeyField()?et.comparator(e.key,n.key):(function(u,f,h){const v=f.data.field(u),b=h.data.field(u);return v!==null&&b!==null?ml(v,b):ot(42886)})(r.field,e,n);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return ot(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[o,u]of i)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[n]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){go(this.inner,((n,i)=>{for(const[o,u]of i)e(o,u)}))}isEmpty(){return Eb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I=new tn(et.comparator);function Di(){return _I}const Ub=new tn(et.comparator);function Ec(...r){let e=Ub;for(const n of r)e=e.insert(n.key,n);return e}function Bb(r){let e=Ub;return r.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function ro(){return Rc()}function zb(){return Rc()}function Rc(){return new yo((r=>r.toString()),((r,e)=>r.isEqual(e)))}const vI=new tn(et.comparator),bI=new wn(et.comparator);function Tt(...r){let e=bI;for(const n of r)e=e.add(n);return e}const EI=new wn(St);function wI(){return EI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Oh(e)?"-0":e}}function qb(r){return{integerValue:""+r}}function xI(r,e){return XA(e)?qb(e):Im(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(){this._=void 0}}function SI(r,e,n){return r instanceof Ph?(function(o,u){const f={fields:{[Sb]:{stringValue:xb},[Ab]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&wm(u)&&(u=ed(u)),u&&(f.fields[Tb]=u),{mapValue:f}})(n,e):r instanceof zc?Hb(r,e):r instanceof qc?Gb(r,e):(function(o,u){const f=Fb(o,u),h=Ev(f)+Ev(o.Ae);return qp(f)&&qp(o.Ae)?qb(h):Im(o.serializer,h)})(r,e)}function TI(r,e,n){return r instanceof zc?Hb(r,e):r instanceof qc?Gb(r,e):n}function Fb(r,e){return r instanceof Lh?(function(i){return qp(i)||(function(u){return!!u&&"doubleValue"in u})(i)})(e)?e:{integerValue:0}:null}class Ph extends sd{}class zc extends sd{constructor(e){super(),this.elements=e}}function Hb(r,e){const n=Qb(e);for(const i of r.elements)n.some((o=>Qr(o,i)))||n.push(i);return{arrayValue:{values:n}}}class qc extends sd{constructor(e){super(),this.elements=e}}function Gb(r,e){let n=Qb(e);for(const i of r.elements)n=n.filter((o=>!Qr(o,i)));return{arrayValue:{values:n}}}class Lh extends sd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Ev(r){return ln(r.integerValue||r.doubleValue)}function Qb(r){return xm(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function AI(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof zc&&o instanceof zc||i instanceof qc&&o instanceof qc?pl(i.elements,o.elements,Qr):i instanceof Lh&&o instanceof Lh?Qr(i.Ae,o.Ae):i instanceof Ph&&o instanceof Ph})(r.transform,e.transform)}class II{constructor(e,n){this.version=e,this.transformResults=n}}class Ai{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ai}static exists(e){return new Ai(void 0,e)}static updateTime(e){return new Ai(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class rd{}function $b(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Yb(r.key,Ai.none()):new Yc(r.key,r.data,Ai.none());{const n=r.data,i=Ks.empty();let o=new wn(jn.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?i.delete(u):i.set(u,f),o=o.add(u)}return new _o(r.key,i,new Er(o.toArray()),Ai.none())}}function NI(r,e,n){r instanceof Yc?(function(o,u,f){const h=o.value.clone(),v=xv(o.fieldTransforms,u,f.transformResults);h.setAll(v),u.convertToFoundDocument(f.version,h).setHasCommittedMutations()})(r,e,n):r instanceof _o?(function(o,u,f){if(!bh(o.precondition,u))return void u.convertToUnknownDocument(f.version);const h=xv(o.fieldTransforms,u,f.transformResults),v=u.data;v.setAll(Kb(o)),v.setAll(h),u.convertToFoundDocument(f.version,v).setHasCommittedMutations()})(r,e,n):(function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function Cc(r,e,n,i){return r instanceof Yc?(function(u,f,h,v){if(!bh(u.precondition,f))return h;const b=u.value.clone(),E=Sv(u.fieldTransforms,v,f);return b.setAll(E),f.convertToFoundDocument(f.version,b).setHasLocalMutations(),null})(r,e,n,i):r instanceof _o?(function(u,f,h,v){if(!bh(u.precondition,f))return h;const b=Sv(u.fieldTransforms,v,f),E=f.data;return E.setAll(Kb(u)),E.setAll(b),f.convertToFoundDocument(f.version,E).setHasLocalMutations(),h===null?null:h.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((j=>j.field)))})(r,e,n,i):(function(u,f,h){return bh(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):h})(r,e,n)}function RI(r,e){let n=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),u=Fb(i.transform,o||null);u!=null&&(n===null&&(n=Ks.empty()),n.set(i.field,u))}return n||null}function wv(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&pl(i,o,((u,f)=>AI(u,f)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Yc extends rd{constructor(e,n,i,o=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class _o extends rd{constructor(e,n,i,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Kb(r){const e=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=r.data.field(n);e.set(n,i)}})),e}function xv(r,e,n){const i=new Map;Pt(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let o=0;o<n.length;o++){const u=r[o],f=u.transform,h=e.data.field(u.field);i.set(u.field,TI(f,h,n[o]))}return i}function Sv(r,e,n){const i=new Map;for(const o of r){const u=o.transform,f=n.data.field(o.field);i.set(o.field,SI(u,f,e))}return i}class Yb extends rd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class CI extends rd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e,n,i,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&NI(u,e,i[o])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Cc(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Cc(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=zb();return this.mutations.forEach((o=>{const u=e.get(o.key),f=u.overlayedDocument;let h=this.applyToLocalView(f,u.mutatedFields);h=n.has(o.key)?null:h;const v=$b(f,h);v!==null&&i.set(o.key,v),f.isValidDocument()||f.convertToNoDocument(dt.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Tt())}isEqual(e){return this.batchId===e.batchId&&pl(this.mutations,e.mutations,((n,i)=>wv(n,i)))&&pl(this.baseMutations,e.baseMutations,((n,i)=>wv(n,i)))}}class Nm{constructor(e,n,i,o){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=o}static from(e,n,i){Pt(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return vI})();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,i[f].version);return new Nm(e,n,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dn,Rt;function jI(r){switch(r){case Ne.OK:return ot(64938);case Ne.CANCELLED:case Ne.UNKNOWN:case Ne.DEADLINE_EXCEEDED:case Ne.RESOURCE_EXHAUSTED:case Ne.INTERNAL:case Ne.UNAVAILABLE:case Ne.UNAUTHENTICATED:return!1;case Ne.INVALID_ARGUMENT:case Ne.NOT_FOUND:case Ne.ALREADY_EXISTS:case Ne.PERMISSION_DENIED:case Ne.FAILED_PRECONDITION:case Ne.ABORTED:case Ne.OUT_OF_RANGE:case Ne.UNIMPLEMENTED:case Ne.DATA_LOSS:return!0;default:return ot(15467,{code:r})}}function Xb(r){if(r===void 0)return Ci("GRPC error has no .code"),Ne.UNKNOWN;switch(r){case dn.OK:return Ne.OK;case dn.CANCELLED:return Ne.CANCELLED;case dn.UNKNOWN:return Ne.UNKNOWN;case dn.DEADLINE_EXCEEDED:return Ne.DEADLINE_EXCEEDED;case dn.RESOURCE_EXHAUSTED:return Ne.RESOURCE_EXHAUSTED;case dn.INTERNAL:return Ne.INTERNAL;case dn.UNAVAILABLE:return Ne.UNAVAILABLE;case dn.UNAUTHENTICATED:return Ne.UNAUTHENTICATED;case dn.INVALID_ARGUMENT:return Ne.INVALID_ARGUMENT;case dn.NOT_FOUND:return Ne.NOT_FOUND;case dn.ALREADY_EXISTS:return Ne.ALREADY_EXISTS;case dn.PERMISSION_DENIED:return Ne.PERMISSION_DENIED;case dn.FAILED_PRECONDITION:return Ne.FAILED_PRECONDITION;case dn.ABORTED:return Ne.ABORTED;case dn.OUT_OF_RANGE:return Ne.OUT_OF_RANGE;case dn.UNIMPLEMENTED:return Ne.UNIMPLEMENTED;case dn.DATA_LOSS:return Ne.DATA_LOSS;default:return ot(39323,{code:r})}}(Rt=dn||(dn={}))[Rt.OK=0]="OK",Rt[Rt.CANCELLED=1]="CANCELLED",Rt[Rt.UNKNOWN=2]="UNKNOWN",Rt[Rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Rt[Rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Rt[Rt.NOT_FOUND=5]="NOT_FOUND",Rt[Rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Rt[Rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Rt[Rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Rt[Rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Rt[Rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Rt[Rt.ABORTED=10]="ABORTED",Rt[Rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Rt[Rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Rt[Rt.INTERNAL=13]="INTERNAL",Rt[Rt.UNAVAILABLE=14]="UNAVAILABLE",Rt[Rt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI=new ba([4294967295,4294967295],0);function Tv(r){const e=kI().encode(r),n=new ub;return n.update(e),new Uint8Array(n.digest())}function Av(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new ba([n,i],0),new ba([o,u],0)]}class Rm{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new wc(`Invalid padding: ${n}`);if(i<0)throw new wc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new wc(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new wc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ba.fromNumber(this.ge)}ye(e,n,i){let o=e.add(n.multiply(ba.fromNumber(i)));return o.compare(PI)===1&&(o=new ba([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Tv(e),[i,o]=Av(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(i,o,u);if(!this.we(f))return!1}return!0}static create(e,n,i){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new Rm(u,o,n);return i.forEach((h=>f.insert(h))),f}insert(e){if(this.ge===0)return;const n=Tv(e),[i,o]=Av(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(i,o,u);this.Se(f)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class wc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,n,i,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const o=new Map;return o.set(e,Xc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new id(dt.min(),o,new tn(St),Di(),Tt())}}class Xc{constructor(e,n,i,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Xc(i,n,Tt(),Tt(),Tt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,n,i,o){this.be=e,this.removedTargetIds=n,this.key=i,this.De=o}}class Wb{constructor(e,n){this.targetId=e,this.Ce=n}}class Zb{constructor(e,n,i=kn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=o}}class Iv{constructor(){this.ve=0,this.Fe=Nv(),this.Me=kn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Tt(),n=Tt(),i=Tt();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:i=i.add(o);break;default:ot(38017,{changeType:u})}})),new Xc(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=Nv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Pt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class LI{constructor(e){this.Ge=e,this.ze=new Map,this.je=Di(),this.Je=rh(),this.He=rh(),this.Ye=new tn(St)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:ot(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,i=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(Hp(u))if(i===0){const f=new et(u.path);this.et(n,f,qn.newNoDocument(f,dt.min()))}else Pt(i===1,20013,{expectedCount:i});else{const f=this._t(n);if(f!==i){const h=this.ut(e),v=h?this.ct(h,e,f):1;if(v!==0){this.it(n);const b=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,b)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:u=0}=n;let f,h;try{f=Ta(i).toUint8Array()}catch(v){if(v instanceof wb)return fl("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{h=new Rm(f,o,u)}catch(v){return fl(v instanceof wc?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return h.ge===0?null:h}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let o=0;return i.forEach((u=>{const f=this.Ge.ht(),h=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(h)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,f)=>{const h=this.ot(f);if(h){if(u.current&&Hp(h.target)){const v=new et(h.target.path);this.It(v).has(f)||this.Et(f,v)||this.et(f,v,qn.newNoDocument(v,e))}u.Be&&(n.set(f,u.ke()),u.qe())}}));let i=Tt();this.He.forEach(((u,f)=>{let h=!0;f.forEachWhile((v=>{const b=this.ot(v);return!b||b.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(i=i.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(e)));const o=new id(e,n,this.Ye,this.je,i);return this.je=Di(),this.Je=rh(),this.He=rh(),this.Ye=new tn(St),o}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Iv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new wn(St),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new wn(St),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Fe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Iv),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function rh(){return new tn(et.comparator)}function Nv(){return new tn(et.comparator)}const VI={asc:"ASCENDING",desc:"DESCENDING"},UI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BI={and:"AND",or:"OR"};class zI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function $p(r,e){return r.useProto3Json||Jh(e)?e:{value:e}}function Vh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Jb(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function qI(r,e){return Vh(r,e.toTimestamp())}function qr(r){return Pt(!!r,49232),dt.fromTimestamp((function(n){const i=Sa(n);return new Ut(i.seconds,i.nanos)})(r))}function Cm(r,e){return Kp(r,e).canonicalString()}function Kp(r,e){const n=(function(o){return new $t(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?n:n.child(e)}function e2(r){const e=$t.fromString(r);return Pt(i2(e),10190,{key:e.toString()}),e}function Yp(r,e){return Cm(r.databaseId,e.path)}function bp(r,e){const n=e2(e);if(n.get(1)!==r.databaseId.projectId)throw new qe(Ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new qe(Ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new et(n2(n))}function t2(r,e){return Cm(r.databaseId,e)}function FI(r){const e=e2(r);return e.length===4?$t.emptyPath():n2(e)}function Xp(r){return new $t(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function n2(r){return Pt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Rv(r,e,n){return{name:Yp(r,e),fields:n.value.mapValue.fields}}function HI(r,e){let n;if("targetChange"in e){e.targetChange;const i=(function(b){return b==="NO_CHANGE"?0:b==="ADD"?1:b==="REMOVE"?2:b==="CURRENT"?3:b==="RESET"?4:ot(39313,{state:b})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(b,E){return b.useProto3Json?(Pt(E===void 0||typeof E=="string",58123),kn.fromBase64String(E||"")):(Pt(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),kn.fromUint8Array(E||new Uint8Array))})(r,e.targetChange.resumeToken),f=e.targetChange.cause,h=f&&(function(b){const E=b.code===void 0?Ne.UNKNOWN:Xb(b.code);return new qe(E,b.message||"")})(f);n=new Zb(i,o,u,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=bp(r,i.document.name),u=qr(i.document.updateTime),f=i.document.createTime?qr(i.document.createTime):dt.min(),h=new Ks({mapValue:{fields:i.document.fields}}),v=qn.newFoundDocument(o,u,f,h),b=i.targetIds||[],E=i.removedTargetIds||[];n=new Eh(b,E,v.key,v)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=bp(r,i.document),u=i.readTime?qr(i.readTime):dt.min(),f=qn.newNoDocument(o,u),h=i.removedTargetIds||[];n=new Eh([],h,f.key,f)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=bp(r,i.document),u=i.removedTargetIds||[];n=new Eh([],u,o,null)}else{if(!("filter"in e))return ot(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:u}=i,f=new MI(o,u),h=i.targetId;n=new Wb(h,f)}}return n}function GI(r,e){let n;if(e instanceof Yc)n={update:Rv(r,e.key,e.value)};else if(e instanceof Yb)n={delete:Yp(r,e.key)};else if(e instanceof _o)n={update:Rv(r,e.key,e.data),updateMask:eN(e.fieldMask)};else{if(!(e instanceof CI))return ot(16599,{Vt:e.type});n={verify:Yp(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(u,f){const h=f.transform;if(h instanceof Ph)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof zc)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof qc)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Lh)return{fieldPath:f.field.canonicalString(),increment:h.Ae};throw ot(20930,{transform:f.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:qI(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:ot(27497)})(r,e.precondition)),n}function QI(r,e){return r&&r.length>0?(Pt(e!==void 0,14353),r.map((n=>(function(o,u){let f=o.updateTime?qr(o.updateTime):qr(u);return f.isEqual(dt.min())&&(f=qr(u)),new II(f,o.transformResults||[])})(n,e)))):[]}function $I(r,e){return{documents:[t2(r,e.path)]}}function KI(r,e){const n={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=t2(r,o);const u=(function(b){if(b.length!==0)return r2(xr.create(b,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const f=(function(b){if(b.length!==0)return b.map((E=>(function(z){return{field:sl(z.field),direction:WI(z.dir)}})(E)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const h=$p(r,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=(function(b){return{before:b.inclusive,values:b.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(b){return{before:!b.inclusive,values:b.position}})(e.endAt)),{ft:n,parent:o}}function YI(r){let e=FI(r.parent);const n=r.structuredQuery,i=n.from?n.from.length:0;let o=null;if(i>0){Pt(i===1,65062);const E=n.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];n.where&&(u=(function(j){const z=s2(j);return z instanceof xr&&Ob(z)?z.getFilters():[z]})(n.where));let f=[];n.orderBy&&(f=(function(j){return j.map((z=>(function(re){return new Bc(rl(re.field),(function(me){switch(me){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(re.direction))})(z)))})(n.orderBy));let h=null;n.limit&&(h=(function(j){let z;return z=typeof j=="object"?j.value:j,Jh(z)?null:z})(n.limit));let v=null;n.startAt&&(v=(function(j){const z=!!j.before,ae=j.values||[];return new kh(ae,z)})(n.startAt));let b=null;return n.endAt&&(b=(function(j){const z=!j.before,ae=j.values||[];return new kh(ae,z)})(n.endAt)),pI(e,o,f,u,h,"F",v,b)}function XI(r,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ot(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function s2(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=rl(n.unaryFilter.field);return fn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=rl(n.unaryFilter.field);return fn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=rl(n.unaryFilter.field);return fn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=rl(n.unaryFilter.field);return fn.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ot(61313);default:return ot(60726)}})(r):r.fieldFilter!==void 0?(function(n){return fn.create(rl(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ot(58110);default:return ot(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return xr.create(n.compositeFilter.filters.map((i=>s2(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ot(1026)}})(n.compositeFilter.op))})(r):ot(30097,{filter:r})}function WI(r){return VI[r]}function ZI(r){return UI[r]}function JI(r){return BI[r]}function sl(r){return{fieldPath:r.canonicalString()}}function rl(r){return jn.fromServerFormat(r.fieldPath)}function r2(r){return r instanceof fn?(function(n){if(n.op==="=="){if(gv(n.value))return{unaryFilter:{field:sl(n.field),op:"IS_NAN"}};if(mv(n.value))return{unaryFilter:{field:sl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(gv(n.value))return{unaryFilter:{field:sl(n.field),op:"IS_NOT_NAN"}};if(mv(n.value))return{unaryFilter:{field:sl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sl(n.field),op:ZI(n.op),value:n.value}}})(r):r instanceof xr?(function(n){const i=n.getFilters().map((o=>r2(o)));return i.length===1?i[0]:{compositeFilter:{op:JI(n.op),filters:i}}})(r):ot(54877,{filter:r})}function eN(r){const e=[];return r.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function i2(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,n,i,o,u=dt.min(),f=dt.min(),h=kn.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=h,this.expectedCount=v}withSequenceNumber(e){return new ga(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ga(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ga(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ga(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e){this.yt=e}}function nN(r){const e=YI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Qp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(){this.Cn=new rN}addToCollectionParentIndex(e,n){return this.Cn.add(n),Oe.resolve()}getCollectionParents(e,n){return Oe.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Oe.resolve()}deleteFieldIndex(e,n){return Oe.resolve()}deleteAllFieldIndexes(e){return Oe.resolve()}createTargetIndexes(e,n){return Oe.resolve()}getDocumentsMatchingTarget(e,n){return Oe.resolve(null)}getIndexType(e,n){return Oe.resolve(0)}getFieldIndexes(e,n){return Oe.resolve([])}getNextCollectionGroupToUpdate(e){return Oe.resolve(null)}getMinOffset(e,n){return Oe.resolve(xa.min())}getMinOffsetFromCollectionGroup(e,n){return Oe.resolve(xa.min())}updateCollectionGroup(e,n,i){return Oe.resolve()}updateIndexEntries(e,n){return Oe.resolve()}}class rN{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n]||new wn($t.comparator),u=!o.has(i);return this.index[n]=o.add(i),u}has(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n];return o&&o.has(i)}getEntries(e){return(this.index[e]||new wn($t.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},a2=41943040;class ls{static withCacheSize(e){return new ls(e,ls.DEFAULT_COLLECTION_PERCENTILE,ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ls.DEFAULT_COLLECTION_PERCENTILE=10,ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ls.DEFAULT=new ls(a2,ls.DEFAULT_COLLECTION_PERCENTILE,ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ls.DISABLED=new ls(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new yl(0)}static cr(){return new yl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv="LruGarbageCollector",iN=1048576;function Ov([r,e],[n,i]){const o=St(r,n);return o===0?St(e,i):o}class aN{constructor(e){this.Ir=e,this.buffer=new wn(Ov),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Ov(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class oN{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Fe(Dv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){wl(n)?Fe(Dv,"Ignoring IndexedDB error during garbage collection: ",n):await El(n)}await this.Vr(3e5)}))}}class lN{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return Oe.resolve(Zh.ce);const i=new aN(n);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Fe("LruGarbageCollector","Garbage collection skipped; disabled"),Oe.resolve(Cv)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Cv):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,o,u,f,h,v,b;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((j=>(j>this.params.maximumSequenceNumbersToCollect?(Fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${j}`),o=this.params.maximumSequenceNumbersToCollect):o=j,f=Date.now(),this.nthSequenceNumber(e,o)))).next((j=>(i=j,h=Date.now(),this.removeTargets(e,i,n)))).next((j=>(u=j,v=Date.now(),this.removeOrphanedDocuments(e,i)))).next((j=>(b=Date.now(),tl()<=xt.DEBUG&&Fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-E}ms
	Determined least recently used ${o} in `+(h-f)+`ms
	Removed ${u} targets in `+(v-h)+`ms
	Removed ${j} documents in `+(b-v)+`ms
Total Duration: ${b-E}ms`),Oe.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:j}))))}}function cN(r,e){return new lN(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(){this.changes=new yo((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,qn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Oe.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e,n,i,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(i!==null&&Cc(i.mutation,o,Er.empty(),Ut.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,Tt()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=Tt()){const o=ro();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,i).next((u=>{let f=Ec();return u.forEach(((h,v)=>{f=f.insert(h,v.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const i=ro();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,Tt())))}populateOverlays(e,n,i){const o=[];return i.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((f,h)=>{n.set(f,h)}))}))}computeViews(e,n,i,o){let u=Di();const f=Rc(),h=(function(){return Rc()})();return n.forEach(((v,b)=>{const E=i.get(b.key);o.has(b.key)&&(E===void 0||E.mutation instanceof _o)?u=u.insert(b.key,b):E!==void 0?(f.set(b.key,E.mutation.getFieldMask()),Cc(E.mutation,b,E.mutation.getFieldMask(),Ut.now())):f.set(b.key,Er.empty())})),this.recalculateAndSaveOverlays(e,u).next((v=>(v.forEach(((b,E)=>f.set(b,E))),n.forEach(((b,E)=>h.set(b,new hN(E,f.get(b)??null)))),h)))}recalculateAndSaveOverlays(e,n){const i=Rc();let o=new tn(((f,h)=>f-h)),u=Tt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const h of f)h.keys().forEach((v=>{const b=n.get(v);if(b===null)return;let E=i.get(v)||Er.empty();E=h.applyToLocalView(b,E),i.set(v,E);const j=(o.get(h.batchId)||Tt()).add(v);o=o.insert(h.batchId,j)}))})).next((()=>{const f=[],h=o.getReverseIterator();for(;h.hasNext();){const v=h.getNext(),b=v.key,E=v.value,j=zb();E.forEach((z=>{if(!u.has(z)){const ae=$b(n.get(z),i.get(z));ae!==null&&j.set(z,ae),u=u.add(z)}})),f.push(this.documentOverlayCache.saveOverlays(e,b,j))}return Oe.waitFor(f)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,o){return(function(f){return et.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Pb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,o):this.getDocumentsMatchingCollectionQuery(e,n,i,o)}getNextDocuments(e,n,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,o).next((u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,o-u.size):Oe.resolve(ro());let h=Pc,v=u;return f.next((b=>Oe.forEach(b,((E,j)=>(h<j.largestBatchId&&(h=j.largestBatchId),u.get(E)?Oe.resolve():this.remoteDocumentCache.getEntry(e,E).next((z=>{v=v.insert(E,z)}))))).next((()=>this.populateOverlays(e,b,u))).next((()=>this.computeViews(e,v,b,Tt()))).next((E=>({batchId:h,changes:Bb(E)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new et(n)).next((i=>{let o=Ec();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,o){const u=n.collectionGroup;let f=Ec();return this.indexManager.getCollectionParents(e,u).next((h=>Oe.forEach(h,(v=>{const b=(function(j,z){return new xl(z,null,j.explicitOrderBy.slice(),j.filters.slice(),j.limit,j.limitType,j.startAt,j.endAt)})(n,v.child(u));return this.getDocumentsMatchingCollectionQuery(e,b,i,o).next((E=>{E.forEach(((j,z)=>{f=f.insert(j,z)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,i,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,u,o)))).next((f=>{u.forEach(((v,b)=>{const E=b.getKey();f.get(E)===null&&(f=f.insert(E,qn.newInvalidDocument(E)))}));let h=Ec();return f.forEach(((v,b)=>{const E=u.get(v);E!==void 0&&Cc(E.mutation,b,Er.empty(),Ut.now()),nd(n,b)&&(h=h.insert(v,b))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Oe.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:qr(o.createTime)}})(n)),Oe.resolve()}getNamedQuery(e,n){return Oe.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:nN(o.bundledQuery),readTime:qr(o.readTime)}})(n)),Oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(){this.overlays=new tn(et.comparator),this.qr=new Map}getOverlay(e,n){return Oe.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ro();return Oe.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&i.set(o,u)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((o,u)=>{this.St(e,n,u)})),Oe.resolve()}removeOverlaysForBatchId(e,n,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(i)),Oe.resolve()}getOverlaysForCollection(e,n,i){const o=ro(),u=n.length+1,f=new et(n.child("")),h=this.overlays.getIteratorFrom(f);for(;h.hasNext();){const v=h.getNext().value,b=v.getKey();if(!n.isPrefixOf(b.path))break;b.path.length===u&&v.largestBatchId>i&&o.set(v.getKey(),v)}return Oe.resolve(o)}getOverlaysForCollectionGroup(e,n,i,o){let u=new tn(((b,E)=>b-E));const f=this.overlays.getIterator();for(;f.hasNext();){const b=f.getNext().value;if(b.getKey().getCollectionGroup()===n&&b.largestBatchId>i){let E=u.get(b.largestBatchId);E===null&&(E=ro(),u=u.insert(b.largestBatchId,E)),E.set(b.getKey(),b)}}const h=ro(),v=u.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach(((b,E)=>h.set(b,E))),!(h.size()>=o)););return Oe.resolve(h)}St(e,n,i){const o=this.overlays.get(i.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(i.key,new OI(n,i));let u=this.qr.get(n);u===void 0&&(u=Tt(),this.qr.set(n,u)),this.qr.set(n,u.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(){this.sessionToken=kn.EMPTY_BYTE_STRING}getSessionToken(e){return Oe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(){this.Qr=new wn(An.$r),this.Ur=new wn(An.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new An(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Gr(new An(e,n))}zr(e,n){e.forEach((i=>this.removeReference(i,n)))}jr(e){const n=new et(new $t([])),i=new An(n,e),o=new An(n,e+1),u=[];return this.Ur.forEachInRange([i,o],(f=>{this.Gr(f),u.push(f.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new et(new $t([])),i=new An(n,e),o=new An(n,e+1);let u=Tt();return this.Ur.forEachInRange([i,o],(f=>{u=u.add(f.key)})),u}containsKey(e){const n=new An(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class An{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return et.comparator(e.key,n.key)||St(e.Yr,n.Yr)}static Kr(e,n){return St(e.Yr,n.Yr)||et.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new wn(An.$r)}checkEmpty(e){return Oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new DI(u,n,i,o);this.mutationQueue.push(f);for(const h of o)this.Zr=this.Zr.add(new An(h.key,u)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return Oe.resolve(f)}lookupMutationBatch(e,n){return Oe.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,o=this.ei(i),u=o<0?0:o;return Oe.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return Oe.resolve(this.mutationQueue.length===0?Em:this.tr-1)}getAllMutationBatches(e){return Oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new An(n,0),o=new An(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([i,o],(f=>{const h=this.Xr(f.Yr);u.push(h)})),Oe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new wn(St);return n.forEach((o=>{const u=new An(o,0),f=new An(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],(h=>{i=i.add(h.Yr)}))})),Oe.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,o=i.length+1;let u=i;et.isDocumentKey(u)||(u=u.child(""));const f=new An(new et(u),0);let h=new wn(St);return this.Zr.forEachWhile((v=>{const b=v.key.path;return!!i.isPrefixOf(b)&&(b.length===o&&(h=h.add(v.Yr)),!0)}),f),Oe.resolve(this.ti(h))}ti(e){const n=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Pt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return Oe.forEach(n.mutations,(o=>{const u=new An(o.key,n.batchId);return i=i.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,n){const i=new An(n,0),o=this.Zr.firstAfterOrEqual(i);return Oe.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Oe.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e){this.ri=e,this.docs=(function(){return new tn(et.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,o=this.docs.get(i),u=o?o.size:0,f=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return Oe.resolve(i?i.document.mutableCopy():qn.newInvalidDocument(n))}getEntries(e,n){let i=Di();return n.forEach((o=>{const u=this.docs.get(o);i=i.insert(o,u?u.document.mutableCopy():qn.newInvalidDocument(o))})),Oe.resolve(i)}getDocumentsMatchingQuery(e,n,i,o){let u=Di();const f=n.path,h=new et(f.child("__id-9223372036854775808__")),v=this.docs.getIteratorFrom(h);for(;v.hasNext();){const{key:b,value:{document:E}}=v.getNext();if(!f.isPrefixOf(b.path))break;b.path.length>f.length+1||QA(GA(E),i)<=0||(o.has(E.key)||nd(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return Oe.resolve(u)}getAllFromCollectionGroup(e,n,i,o){ot(9500)}ii(e,n){return Oe.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new _N(this)}getSize(e){return Oe.resolve(this.size)}}class _N extends uN{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),Oe.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e){this.persistence=e,this.si=new yo((n=>Sm(n)),Tm),this.lastRemoteSnapshotVersion=dt.min(),this.highestTargetId=0,this.oi=0,this._i=new Dm,this.targetCount=0,this.ai=yl.ur()}forEachTarget(e,n){return this.si.forEach(((i,o)=>n(o))),Oe.resolve()}getLastRemoteSnapshotVersion(e){return Oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Oe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Oe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),Oe.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new yl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Oe.resolve()}updateTargetData(e,n){return this.Pr(n),Oe.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Oe.resolve()}removeTargets(e,n,i){let o=0;const u=[];return this.si.forEach(((f,h)=>{h.sequenceNumber<=n&&i.get(h.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(e,h.targetId)),o++)})),Oe.waitFor(u).next((()=>o))}getTargetCount(e){return Oe.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return Oe.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),Oe.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((f=>{u.push(o.markPotentiallyOrphaned(e,f))})),Oe.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Oe.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return Oe.resolve(i)}containsKey(e,n){return Oe.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e,n){this.ui={},this.overlays={},this.ci=new Zh(0),this.li=!1,this.li=!0,this.hi=new mN,this.referenceDelegate=e(this),this.Pi=new vN(this),this.indexManager=new sN,this.remoteDocumentCache=(function(o){return new yN(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new tN(n),this.Ii=new fN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new pN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new gN(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){Fe("MemoryPersistence","Starting transaction:",e);const o=new bN(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return Oe.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,n))))}}class bN extends KA{constructor(e){super(),this.currentSequenceNumber=e}}class Om{constructor(e){this.persistence=e,this.Ri=new Dm,this.Vi=null}static mi(e){return new Om(e)}get fi(){if(this.Vi)return this.Vi;throw ot(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),Oe.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),Oe.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Oe.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>i.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Oe.forEach(this.fi,(i=>{const o=et.fromPath(i);return this.gi(e,o).next((u=>{u||n.removeEntry(o,dt.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return Oe.or([()=>Oe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Uh{constructor(e,n){this.persistence=e,this.pi=new yo((i=>WA(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=cN(this,n)}static mi(e,n){return new Uh(e,n)}Ei(){}di(e){return Oe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((o=>i+o))))}wr(e){let n=0;return this.pr(e,(i=>{n++})).next((()=>n))}pr(e,n){return Oe.forEach(this.pi,((i,o)=>this.br(e,i,o).next((u=>u?Oe.resolve():n(o)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(f=>this.br(e,f,n).next((h=>{h||(i++,u.removeEntry(f,dt.min()))})))).next((()=>u.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Oe.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),Oe.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),Oe.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Oe.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=_h(e.data.value)),n}br(e,n,i){return Oe.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return Oe.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,n,i,o){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=o}static As(e,n){let i=Tt(),o=Tt();for(const u of n.docChanges)switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Mm(e,n.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return mx()?8:YA(Fn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,o){const u={result:null};return this.ys(e,n).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ws(e,n,o,i).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new EN;return this.Ss(e,n,f).next((h=>{if(u.result=h,this.Vs)return this.bs(e,n,f,h.size)}))})).next((()=>u.result))}bs(e,n,i,o){return i.documentReadCount<this.fs?(tl()<=xt.DEBUG&&Fe("QueryEngine","SDK will not create cache indexes for query:",nl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Oe.resolve()):(tl()<=xt.DEBUG&&Fe("QueryEngine","Query:",nl(n),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(tl()<=xt.DEBUG&&Fe("QueryEngine","The SDK decides to create cache indexes for query:",nl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zr(n))):Oe.resolve())}ys(e,n){if(bv(n))return Oe.resolve(null);let i=zr(n);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Qp(n,null,"F"),i=zr(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((u=>{const f=Tt(...u);return this.ps.getDocuments(e,f).next((h=>this.indexManager.getMinOffset(e,i).next((v=>{const b=this.Ds(n,h);return this.Cs(n,b,f,v.readTime)?this.ys(e,Qp(n,null,"F")):this.vs(e,b,n,v)}))))})))))}ws(e,n,i,o){return bv(n)||o.isEqual(dt.min())?Oe.resolve(null):this.ps.getDocuments(e,i).next((u=>{const f=this.Ds(n,u);return this.Cs(n,f,i,o)?Oe.resolve(null):(tl()<=xt.DEBUG&&Fe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),nl(n)),this.vs(e,f,n,HA(o,Pc)).next((h=>h)))}))}Ds(e,n){let i=new wn(Vb(e));return n.forEach(((o,u)=>{nd(e,u)&&(i=i.add(u))})),i}Cs(e,n,i,o){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,i){return tl()<=xt.DEBUG&&Fe("QueryEngine","Using full collection scan to execute query:",nl(n)),this.ps.getDocumentsMatchingQuery(e,n,xa.min(),i)}vs(e,n,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((u=>(n.forEach((f=>{u=u.insert(f.key,f)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="LocalStore",xN=3e8;class SN{constructor(e,n,i,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new tn(St),this.xs=new yo((u=>Sm(u)),Tm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dN(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function TN(r,e,n,i){return new SN(r,e,n,i)}async function l2(r,e){const n=ft(r);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return n.mutationQueue.getAllMutationBatches(i).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(i)))).next((u=>{const f=[],h=[];let v=Tt();for(const b of o){f.push(b.batchId);for(const E of b.mutations)v=v.add(E.key)}for(const b of u){h.push(b.batchId);for(const E of b.mutations)v=v.add(E.key)}return n.localDocuments.getDocuments(i,v).next((b=>({Ls:b,removedBatchIds:f,addedBatchIds:h})))}))}))}function AN(r,e){const n=ft(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,v,b,E){const j=b.batch,z=j.keys();let ae=Oe.resolve();return z.forEach((re=>{ae=ae.next((()=>E.getEntry(v,re))).next((ve=>{const me=b.docVersions.get(re);Pt(me!==null,48541),ve.version.compareTo(me)<0&&(j.applyToRemoteDocument(ve,b),ve.isValidDocument()&&(ve.setReadTime(b.commitVersion),E.addEntry(ve)))}))})),ae.next((()=>h.mutationQueue.removeMutationBatch(v,j)))})(n,i,e,u).next((()=>u.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(h){let v=Tt();for(let b=0;b<h.mutationResults.length;++b)h.mutationResults[b].transformResults.length>0&&(v=v.add(h.batch.mutations[b].key));return v})(e)))).next((()=>n.localDocuments.getDocuments(i,o)))}))}function c2(r){const e=ft(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function IN(r,e){const n=ft(r),i=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const h=[];e.targetChanges.forEach(((E,j)=>{const z=o.get(j);if(!z)return;h.push(n.Pi.removeMatchingKeys(u,E.removedDocuments,j).next((()=>n.Pi.addMatchingKeys(u,E.addedDocuments,j))));let ae=z.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(j)!==null?ae=ae.withResumeToken(kn.EMPTY_BYTE_STRING,dt.min()).withLastLimboFreeSnapshotVersion(dt.min()):E.resumeToken.approximateByteSize()>0&&(ae=ae.withResumeToken(E.resumeToken,i)),o=o.insert(j,ae),(function(ve,me,De){return ve.resumeToken.approximateByteSize()===0||me.snapshotVersion.toMicroseconds()-ve.snapshotVersion.toMicroseconds()>=xN?!0:De.addedDocuments.size+De.modifiedDocuments.size+De.removedDocuments.size>0})(z,ae,E)&&h.push(n.Pi.updateTargetData(u,ae))}));let v=Di(),b=Tt();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))})),h.push(NN(u,f,e.documentUpdates).next((E=>{v=E.ks,b=E.qs}))),!i.isEqual(dt.min())){const E=n.Pi.getLastRemoteSnapshotVersion(u).next((j=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,i)));h.push(E)}return Oe.waitFor(h).next((()=>f.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,v,b))).next((()=>v))})).then((u=>(n.Ms=o,u)))}function NN(r,e,n){let i=Tt(),o=Tt();return n.forEach((u=>i=i.add(u))),e.getEntries(r,i).next((u=>{let f=Di();return n.forEach(((h,v)=>{const b=u.get(h);v.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(h)),v.isNoDocument()&&v.version.isEqual(dt.min())?(e.removeEntry(h,v.readTime),f=f.insert(h,v)):!b.isValidDocument()||v.version.compareTo(b.version)>0||v.version.compareTo(b.version)===0&&b.hasPendingWrites?(e.addEntry(v),f=f.insert(h,v)):Fe(jm,"Ignoring outdated watch update for ",h,". Current version:",b.version," Watch version:",v.version)})),{ks:f,qs:o}}))}function RN(r,e){const n=ft(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Em),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function CN(r,e){const n=ft(r);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return n.Pi.getTargetData(i,e).next((u=>u?(o=u,Oe.resolve(o)):n.Pi.allocateTargetId(i).next((f=>(o=new ga(e,f,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=n.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i}))}async function Wp(r,e,n){const i=ft(r),o=i.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",u,(f=>i.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!wl(f))throw f;Fe(jm,`Failed to update sequence numbers for target ${e}: ${f}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function Mv(r,e,n){const i=ft(r);let o=dt.min(),u=Tt();return i.persistence.runTransaction("Execute query","readwrite",(f=>(function(v,b,E){const j=ft(v),z=j.xs.get(E);return z!==void 0?Oe.resolve(j.Ms.get(z)):j.Pi.getTargetData(b,E)})(i,f,zr(e)).next((h=>{if(h)return o=h.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(f,h.targetId).next((v=>{u=v}))})).next((()=>i.Fs.getDocumentsMatchingQuery(f,e,n?o:dt.min(),n?u:Tt()))).next((h=>(DN(i,gI(e),h),{documents:h,Qs:u})))))}function DN(r,e,n){let i=r.Os.get(e)||dt.min();n.forEach(((o,u)=>{u.readTime.compareTo(i)>0&&(i=u.readTime)})),r.Os.set(e,i)}class jv{constructor(){this.activeTargetIds=wI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ON{constructor(){this.Mo=new jv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new jv,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv="ConnectivityMonitor";class Pv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Fe(kv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Fe(kv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ih=null;function Zp(){return ih===null?ih=(function(){return 268435456+Math.round(2147483648*Math.random())})():ih++,"0x"+ih.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ep="RestConnection",jN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class kN{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===Mh?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,n,i,o,u){const f=Zp(),h=this.zo(e,n.toUriEncodedString());Fe(Ep,`Sending RPC '${e}' ${f}:`,h,i);const v={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(v,o,u);const{host:b}=new URL(h),E=po(b);return this.Jo(e,h,v,i,E).then((j=>(Fe(Ep,`Received RPC '${e}' ${f}: `,j),j)),(j=>{throw fl(Ep,`RPC '${e}' ${f} failed with error: `,j,"url: ",h,"request:",i),j}))}Ho(e,n,i,o,u,f){return this.Go(e,n,i,o,u)}jo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+bl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),i&&i.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const i=jN[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn="WebChannelConnection";class LN extends kN{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,o,u){const f=Zp();return new Promise(((h,v)=>{const b=new hb;b.setWithCredentials(!0),b.listenOnce(db.COMPLETE,(()=>{try{switch(b.getLastErrorCode()){case yh.NO_ERROR:const j=b.getResponseJson();Fe(Bn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(j)),h(j);break;case yh.TIMEOUT:Fe(Bn,`RPC '${e}' ${f} timed out`),v(new qe(Ne.DEADLINE_EXCEEDED,"Request time out"));break;case yh.HTTP_ERROR:const z=b.getStatus();if(Fe(Bn,`RPC '${e}' ${f} failed with status:`,z,"response text:",b.getResponseText()),z>0){let ae=b.getResponseJson();Array.isArray(ae)&&(ae=ae[0]);const re=ae==null?void 0:ae.error;if(re&&re.status&&re.message){const ve=(function(De){const ke=De.toLowerCase().replace(/_/g,"-");return Object.values(Ne).indexOf(ke)>=0?ke:Ne.UNKNOWN})(re.status);v(new qe(ve,re.message))}else v(new qe(Ne.UNKNOWN,"Server responded with status "+b.getStatus()))}else v(new qe(Ne.UNAVAILABLE,"Connection failed."));break;default:ot(9055,{l_:e,streamId:f,h_:b.getLastErrorCode(),P_:b.getLastError()})}}finally{Fe(Bn,`RPC '${e}' ${f} completed.`)}}));const E=JSON.stringify(o);Fe(Bn,`RPC '${e}' ${f} sending request:`,o),b.send(n,"POST",E,i,15)}))}T_(e,n,i){const o=Zp(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=mb(),h=pb(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},b=this.longPollingOptions.timeoutSeconds;b!==void 0&&(v.longPollingTimeout=Math.round(1e3*b)),this.useFetchStreams&&(v.useFetchStreams=!0),this.jo(v.initMessageHeaders,n,i),v.encodeInitMessageHeaders=!0;const E=u.join("");Fe(Bn,`Creating RPC '${e}' stream ${o}: ${E}`,v);const j=f.createWebChannel(E,v);this.I_(j);let z=!1,ae=!1;const re=new PN({Yo:me=>{ae?Fe(Bn,`Not sending because RPC '${e}' stream ${o} is closed:`,me):(z||(Fe(Bn,`Opening RPC '${e}' stream ${o} transport.`),j.open(),z=!0),Fe(Bn,`RPC '${e}' stream ${o} sending:`,me),j.send(me))},Zo:()=>j.close()}),ve=(me,De,ke)=>{me.listen(De,(Pe=>{try{ke(Pe)}catch(xe){setTimeout((()=>{throw xe}),0)}}))};return ve(j,bc.EventType.OPEN,(()=>{ae||(Fe(Bn,`RPC '${e}' stream ${o} transport opened.`),re.o_())})),ve(j,bc.EventType.CLOSE,(()=>{ae||(ae=!0,Fe(Bn,`RPC '${e}' stream ${o} transport closed`),re.a_(),this.E_(j))})),ve(j,bc.EventType.ERROR,(me=>{ae||(ae=!0,fl(Bn,`RPC '${e}' stream ${o} transport errored. Name:`,me.name,"Message:",me.message),re.a_(new qe(Ne.UNAVAILABLE,"The operation could not be completed")))})),ve(j,bc.EventType.MESSAGE,(me=>{var De;if(!ae){const ke=me.data[0];Pt(!!ke,16349);const Pe=ke,xe=(Pe==null?void 0:Pe.error)||((De=Pe[0])==null?void 0:De.error);if(xe){Fe(Bn,`RPC '${e}' stream ${o} received error:`,xe);const ue=xe.status;let Re=(function(H){const ne=dn[H];if(ne!==void 0)return Xb(ne)})(ue),P=xe.message;Re===void 0&&(Re=Ne.INTERNAL,P="Unknown error status: "+ue+" with message "+xe.message),ae=!0,re.a_(new qe(Re,P)),j.close()}else Fe(Bn,`RPC '${e}' stream ${o} received:`,ke),re.u_(ke)}})),ve(h,fb.STAT_EVENT,(me=>{me.stat===Up.PROXY?Fe(Bn,`RPC '${e}' stream ${o} detected buffering proxy`):me.stat===Up.NOPROXY&&Fe(Bn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{re.__()}),0),re}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function wp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ad(r){return new zI(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e,n,i=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-i);o>0&&Fe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv="PersistentStream";class h2{constructor(e,n,i,o,u,f,h,v){this.Mi=e,this.S_=i,this.b_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=h,this.listener=v,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new u2(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Ne.RESOURCE_EXHAUSTED?(Ci(n.toString()),Ci("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===n&&this.G_(i,o)}),(i=>{e((()=>{const o=new qe(Ne.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Fe(Lv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Fe(Lv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class VN extends h2{constructor(e,n,i,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,o,f),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=HI(this.serializer,e),i=(function(u){if(!("targetChange"in u))return dt.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?dt.min():f.readTime?qr(f.readTime):dt.min()})(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=Xp(this.serializer),n.addTarget=(function(u,f){let h;const v=f.target;if(h=Hp(v)?{documents:$I(u,v)}:{query:KI(u,v).ft},h.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){h.resumeToken=Jb(u,f.resumeToken);const b=$p(u,f.expectedCount);b!==null&&(h.expectedCount=b)}else if(f.snapshotVersion.compareTo(dt.min())>0){h.readTime=Vh(u,f.snapshotVersion.toTimestamp());const b=$p(u,f.expectedCount);b!==null&&(h.expectedCount=b)}return h})(this.serializer,e);const i=XI(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=Xp(this.serializer),n.removeTarget=e,this.q_(n)}}class UN extends h2{constructor(e,n,i,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,o,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Pt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Pt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Pt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=QI(e.writeResults,e.commitTime),i=qr(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=Xp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>GI(this.serializer,i)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{}class zN extends BN{constructor(e,n,i,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new qe(Ne.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Go(e,Kp(n,i),o,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new qe(Ne.UNKNOWN,u.toString())}))}Ho(e,n,i,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,h])=>this.connection.Ho(e,Kp(n,i),o,f,h,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===Ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new qe(Ne.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class qN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ci(n),this.aa=!1):Fe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo="RemoteStore";class FN{constructor(e,n,i,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((f=>{i.enqueueAndForget((async()=>{vo(this)&&(Fe(fo,"Restarting streams for network reachability change."),await(async function(v){const b=ft(v);b.Ea.add(4),await Wc(b),b.Ra.set("Unknown"),b.Ea.delete(4),await od(b)})(this))}))})),this.Ra=new qN(i,o)}}async function od(r){if(vo(r))for(const e of r.da)await e(!0)}async function Wc(r){for(const e of r.da)await e(!1)}function d2(r,e){const n=ft(r);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Vm(n)?Lm(n):Sl(n).O_()&&Pm(n,e))}function km(r,e){const n=ft(r),i=Sl(n);n.Ia.delete(e),i.O_()&&f2(n,e),n.Ia.size===0&&(i.O_()?i.L_():vo(n)&&n.Ra.set("Unknown"))}function Pm(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(dt.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Sl(r).Y_(e)}function f2(r,e){r.Va.Ue(e),Sl(r).Z_(e)}function Lm(r){r.Va=new LI({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Sl(r).start(),r.Ra.ua()}function Vm(r){return vo(r)&&!Sl(r).x_()&&r.Ia.size>0}function vo(r){return ft(r).Ea.size===0}function p2(r){r.Va=void 0}async function HN(r){r.Ra.set("Online")}async function GN(r){r.Ia.forEach(((e,n)=>{Pm(r,e)}))}async function QN(r,e){p2(r),Vm(r)?(r.Ra.ha(e),Lm(r)):r.Ra.set("Unknown")}async function $N(r,e,n){if(r.Ra.set("Online"),e instanceof Zb&&e.state===2&&e.cause)try{await(async function(o,u){const f=u.cause;for(const h of u.targetIds)o.Ia.has(h)&&(await o.remoteSyncer.rejectListen(h,f),o.Ia.delete(h),o.Va.removeTarget(h))})(r,e)}catch(i){Fe(fo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Bh(r,i)}else if(e instanceof Eh?r.Va.Ze(e):e instanceof Wb?r.Va.st(e):r.Va.tt(e),!n.isEqual(dt.min()))try{const i=await c2(r.localStore);n.compareTo(i)>=0&&await(function(u,f){const h=u.Va.Tt(f);return h.targetChanges.forEach(((v,b)=>{if(v.resumeToken.approximateByteSize()>0){const E=u.Ia.get(b);E&&u.Ia.set(b,E.withResumeToken(v.resumeToken,f))}})),h.targetMismatches.forEach(((v,b)=>{const E=u.Ia.get(v);if(!E)return;u.Ia.set(v,E.withResumeToken(kn.EMPTY_BYTE_STRING,E.snapshotVersion)),f2(u,v);const j=new ga(E.target,v,b,E.sequenceNumber);Pm(u,j)})),u.remoteSyncer.applyRemoteEvent(h)})(r,n)}catch(i){Fe(fo,"Failed to raise snapshot:",i),await Bh(r,i)}}async function Bh(r,e,n){if(!wl(e))throw e;r.Ea.add(1),await Wc(r),r.Ra.set("Offline"),n||(n=()=>c2(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{Fe(fo,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await od(r)}))}function m2(r,e){return e().catch((n=>Bh(r,n,e)))}async function ld(r){const e=ft(r),n=Ia(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Em;for(;KN(e);)try{const o=await RN(e.localStore,i);if(o===null){e.Ta.length===0&&n.L_();break}i=o.batchId,YN(e,o)}catch(o){await Bh(e,o)}g2(e)&&y2(e)}function KN(r){return vo(r)&&r.Ta.length<10}function YN(r,e){r.Ta.push(e);const n=Ia(r);n.O_()&&n.X_&&n.ea(e.mutations)}function g2(r){return vo(r)&&!Ia(r).x_()&&r.Ta.length>0}function y2(r){Ia(r).start()}async function XN(r){Ia(r).ra()}async function WN(r){const e=Ia(r);for(const n of r.Ta)e.ea(n.mutations)}async function ZN(r,e,n){const i=r.Ta.shift(),o=Nm.from(i,e,n);await m2(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await ld(r)}async function JN(r,e){e&&Ia(r).X_&&await(async function(i,o){if((function(f){return jI(f)&&f!==Ne.ABORTED})(o.code)){const u=i.Ta.shift();Ia(i).B_(),await m2(i,(()=>i.remoteSyncer.rejectFailedWrite(u.batchId,o))),await ld(i)}})(r,e),g2(r)&&y2(r)}async function Vv(r,e){const n=ft(r);n.asyncQueue.verifyOperationInProgress(),Fe(fo,"RemoteStore received new credentials");const i=vo(n);n.Ea.add(3),await Wc(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await od(n)}async function eR(r,e){const n=ft(r);e?(n.Ea.delete(2),await od(n)):e||(n.Ea.add(2),await Wc(n),n.Ra.set("Unknown"))}function Sl(r){return r.ma||(r.ma=(function(n,i,o){const u=ft(n);return u.sa(),new VN(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Xo:HN.bind(null,r),t_:GN.bind(null,r),r_:QN.bind(null,r),H_:$N.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Vm(r)?Lm(r):r.Ra.set("Unknown")):(await r.ma.stop(),p2(r))}))),r.ma}function Ia(r){return r.fa||(r.fa=(function(n,i,o){const u=ft(n);return u.sa(),new UN(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:XN.bind(null,r),r_:JN.bind(null,r),ta:WN.bind(null,r),na:ZN.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await ld(r)):(await r.fa.stop(),r.Ta.length>0&&(Fe(fo,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,n,i,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=o,this.removalCallback=u,this.deferred=new Ti,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,o,u){const f=Date.now()+i,h=new Um(e,n,f,o,u);return h.start(i),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new qe(Ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bm(r,e){if(Ci("AsyncQueue",`${e}: ${r}`),wl(r))return new qe(Ne.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{static emptySet(e){return new cl(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||et.comparator(n.key,i.key):(n,i)=>et.comparator(n.key,i.key),this.keyedMap=Ec(),this.sortedSet=new tn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof cl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=i.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new cl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(){this.ga=new tn(et.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ot(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class _l{constructor(e,n,i,o,u,f,h,v,b){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=h,this.excludesMetadataChanges=v,this.hasCachedResults=b}static fromInitialDocuments(e,n,i,o,u){const f=[];return n.forEach((h=>{f.push({type:0,doc:h})})),new _l(e,n,cl.emptySet(n),f,i,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&td(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==i[o].type||!n[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class nR{constructor(){this.queries=Bv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const o=ft(n),u=o.queries;o.queries=Bv(),u.forEach(((f,h)=>{for(const v of h.Sa)v.onError(i)}))})(this,new qe(Ne.ABORTED,"Firestore shutting down"))}}function Bv(){return new yo((r=>Lb(r)),td)}async function _2(r,e){const n=ft(r);let i=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(i=2):(u=new tR,i=e.Da()?0:1);try{switch(i){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const h=Bm(f,`Initialization of query '${nl(e.query)}' failed`);return void e.onError(h)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&zm(n)}async function v2(r,e){const n=ft(r),i=e.query;let o=3;const u=n.queries.get(i);if(u){const f=u.Sa.indexOf(e);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function sR(r,e){const n=ft(r);let i=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const h of f.Sa)h.Fa(o)&&(i=!0);f.wa=o}}i&&zm(n)}function rR(r,e,n){const i=ft(r),o=i.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);i.queries.delete(e)}function zm(r){r.Ca.forEach((e=>{e.next()}))}var Jp,zv;(zv=Jp||(Jp={})).Ma="default",zv.Cache="cache";class b2{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new _l(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=_l.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Jp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e){this.key=e}}class w2{constructor(e){this.key=e}}class iR{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Tt(),this.mutatedKeys=Tt(),this.eu=Vb(e),this.tu=new cl(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new Uv,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,h=!1;const v=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,b=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,j)=>{const z=o.get(E),ae=nd(this.query,j)?j:null,re=!!z&&this.mutatedKeys.has(z.key),ve=!!ae&&(ae.hasLocalMutations||this.mutatedKeys.has(ae.key)&&ae.hasCommittedMutations);let me=!1;z&&ae?z.data.isEqual(ae.data)?re!==ve&&(i.track({type:3,doc:ae}),me=!0):this.su(z,ae)||(i.track({type:2,doc:ae}),me=!0,(v&&this.eu(ae,v)>0||b&&this.eu(ae,b)<0)&&(h=!0)):!z&&ae?(i.track({type:0,doc:ae}),me=!0):z&&!ae&&(i.track({type:1,doc:z}),me=!0,(v||b)&&(h=!0)),me&&(ae?(f=f.add(ae),u=ve?u.add(E):u.delete(E)):(f=f.delete(E),u=u.delete(E)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const E=this.query.limitType==="F"?f.last():f.first();f=f.delete(E.key),u=u.delete(E.key),i.track({type:1,doc:E})}return{tu:f,iu:i,Cs:h,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((E,j)=>(function(ae,re){const ve=me=>{switch(me){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ot(20277,{Rt:me})}};return ve(ae)-ve(re)})(E.type,j.type)||this.eu(E.doc,j.doc))),this.ou(i),o=o??!1;const h=n&&!o?this._u():[],v=this.Xa.size===0&&this.current&&!o?1:0,b=v!==this.Za;return this.Za=v,f.length!==0||b?{snapshot:new _l(this.query,e.tu,u,f,e.mutatedKeys,v===0,b,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Uv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Tt(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const n=[];return e.forEach((i=>{this.Xa.has(i)||n.push(new w2(i))})),this.Xa.forEach((i=>{e.has(i)||n.push(new E2(i))})),n}cu(e){this.Ya=e.Qs,this.Xa=Tt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return _l.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const qm="SyncEngine";class aR{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class oR{constructor(e){this.key=e,this.hu=!1}}class lR{constructor(e,n,i,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new yo((h=>Lb(h)),td),this.Iu=new Map,this.Eu=new Set,this.du=new tn(et.comparator),this.Au=new Map,this.Ru=new Dm,this.Vu={},this.mu=new Map,this.fu=yl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function cR(r,e,n=!0){const i=N2(r);let o;const u=i.Tu.get(e);return u?(i.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await x2(i,e,n,!0),o}async function uR(r,e){const n=N2(r);await x2(n,e,!0,!1)}async function x2(r,e,n,i){const o=await CN(r.localStore,zr(e)),u=o.targetId,f=r.sharedClientState.addLocalQueryTarget(u,n);let h;return i&&(h=await hR(r,e,u,f==="current",o.resumeToken)),r.isPrimaryClient&&n&&d2(r.remoteStore,o),h}async function hR(r,e,n,i,o){r.pu=(j,z,ae)=>(async function(ve,me,De,ke){let Pe=me.view.ru(De);Pe.Cs&&(Pe=await Mv(ve.localStore,me.query,!1).then((({documents:P})=>me.view.ru(P,Pe))));const xe=ke&&ke.targetChanges.get(me.targetId),ue=ke&&ke.targetMismatches.get(me.targetId)!=null,Re=me.view.applyChanges(Pe,ve.isPrimaryClient,xe,ue);return Fv(ve,me.targetId,Re.au),Re.snapshot})(r,j,z,ae);const u=await Mv(r.localStore,e,!0),f=new iR(e,u.Qs),h=f.ru(u.documents),v=Xc.createSynthesizedTargetChangeForCurrentChange(n,i&&r.onlineState!=="Offline",o),b=f.applyChanges(h,r.isPrimaryClient,v);Fv(r,n,b.au);const E=new aR(e,n,f);return r.Tu.set(e,E),r.Iu.has(n)?r.Iu.get(n).push(e):r.Iu.set(n,[e]),b.snapshot}async function dR(r,e,n){const i=ft(r),o=i.Tu.get(e),u=i.Iu.get(o.targetId);if(u.length>1)return i.Iu.set(o.targetId,u.filter((f=>!td(f,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Wp(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),n&&km(i.remoteStore,o.targetId),em(i,o.targetId)})).catch(El)):(em(i,o.targetId),await Wp(i.localStore,o.targetId,!0))}async function fR(r,e){const n=ft(r),i=n.Tu.get(e),o=n.Iu.get(i.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),km(n.remoteStore,i.targetId))}async function pR(r,e,n){const i=ER(r);try{const o=await(function(f,h){const v=ft(f),b=Ut.now(),E=h.reduce(((ae,re)=>ae.add(re.key)),Tt());let j,z;return v.persistence.runTransaction("Locally write mutations","readwrite",(ae=>{let re=Di(),ve=Tt();return v.Ns.getEntries(ae,E).next((me=>{re=me,re.forEach(((De,ke)=>{ke.isValidDocument()||(ve=ve.add(De))}))})).next((()=>v.localDocuments.getOverlayedDocuments(ae,re))).next((me=>{j=me;const De=[];for(const ke of h){const Pe=RI(ke,j.get(ke.key).overlayedDocument);Pe!=null&&De.push(new _o(ke.key,Pe,Rb(Pe.value.mapValue),Ai.exists(!0)))}return v.mutationQueue.addMutationBatch(ae,b,De,h)})).next((me=>{z=me;const De=me.applyToLocalDocumentSet(j,ve);return v.documentOverlayCache.saveOverlays(ae,me.batchId,De)}))})).then((()=>({batchId:z.batchId,changes:Bb(j)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(f,h,v){let b=f.Vu[f.currentUser.toKey()];b||(b=new tn(St)),b=b.insert(h,v),f.Vu[f.currentUser.toKey()]=b})(i,o.batchId,n),await Zc(i,o.changes),await ld(i.remoteStore)}catch(o){const u=Bm(o,"Failed to persist write");n.reject(u)}}async function S2(r,e){const n=ft(r);try{const i=await IN(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const f=n.Au.get(u);f&&(Pt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?Pt(f.hu,14607):o.removedDocuments.size>0&&(Pt(f.hu,42227),f.hu=!1))})),await Zc(n,i,e)}catch(i){await El(i)}}function qv(r,e,n){const i=ft(r);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const o=[];i.Tu.forEach(((u,f)=>{const h=f.view.va(e);h.snapshot&&o.push(h.snapshot)})),(function(f,h){const v=ft(f);v.onlineState=h;let b=!1;v.queries.forEach(((E,j)=>{for(const z of j.Sa)z.va(h)&&(b=!0)})),b&&zm(v)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function mR(r,e,n){const i=ft(r);i.sharedClientState.updateQueryState(e,"rejected",n);const o=i.Au.get(e),u=o&&o.key;if(u){let f=new tn(et.comparator);f=f.insert(u,qn.newNoDocument(u,dt.min()));const h=Tt().add(u),v=new id(dt.min(),new Map,new tn(St),f,h);await S2(i,v),i.du=i.du.remove(u),i.Au.delete(e),Fm(i)}else await Wp(i.localStore,e,!1).then((()=>em(i,e,n))).catch(El)}async function gR(r,e){const n=ft(r),i=e.batch.batchId;try{const o=await AN(n.localStore,e);A2(n,i,null),T2(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Zc(n,o)}catch(o){await El(o)}}async function yR(r,e,n){const i=ft(r);try{const o=await(function(f,h){const v=ft(f);return v.persistence.runTransaction("Reject batch","readwrite-primary",(b=>{let E;return v.mutationQueue.lookupMutationBatch(b,h).next((j=>(Pt(j!==null,37113),E=j.keys(),v.mutationQueue.removeMutationBatch(b,j)))).next((()=>v.mutationQueue.performConsistencyCheck(b))).next((()=>v.documentOverlayCache.removeOverlaysForBatchId(b,E,h))).next((()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(b,E))).next((()=>v.localDocuments.getDocuments(b,E)))}))})(i.localStore,e);A2(i,e,n),T2(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Zc(i,o)}catch(o){await El(o)}}function T2(r,e){(r.mu.get(e)||[]).forEach((n=>{n.resolve()})),r.mu.delete(e)}function A2(r,e,n){const i=ft(r);let o=i.Vu[i.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function em(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),n&&r.Pu.yu(i,n);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((i=>{r.Ru.containsKey(i)||I2(r,i)}))}function I2(r,e){r.Eu.delete(e.path.canonicalString());const n=r.du.get(e);n!==null&&(km(r.remoteStore,n),r.du=r.du.remove(e),r.Au.delete(n),Fm(r))}function Fv(r,e,n){for(const i of n)i instanceof E2?(r.Ru.addReference(i.key,e),_R(r,i)):i instanceof w2?(Fe(qm,"Document no longer in limbo: "+i.key),r.Ru.removeReference(i.key,e),r.Ru.containsKey(i.key)||I2(r,i.key)):ot(19791,{wu:i})}function _R(r,e){const n=e.key,i=n.path.canonicalString();r.du.get(n)||r.Eu.has(i)||(Fe(qm,"New document in limbo: "+n),r.Eu.add(i),Fm(r))}function Fm(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const n=new et($t.fromString(e)),i=r.fu.next();r.Au.set(i,new oR(n)),r.du=r.du.insert(n,i),d2(r.remoteStore,new ga(zr(Am(n.path)),i,"TargetPurposeLimboResolution",Zh.ce))}}async function Zc(r,e,n){const i=ft(r),o=[],u=[],f=[];i.Tu.isEmpty()||(i.Tu.forEach(((h,v)=>{f.push(i.pu(v,e,n).then((b=>{var E;if((b||n)&&i.isPrimaryClient){const j=b?!b.fromCache:(E=n==null?void 0:n.targetChanges.get(v.targetId))==null?void 0:E.current;i.sharedClientState.updateQueryState(v.targetId,j?"current":"not-current")}if(b){o.push(b);const j=Mm.As(v.targetId,b);u.push(j)}})))})),await Promise.all(f),i.Pu.H_(o),await(async function(v,b){const E=ft(v);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(j=>Oe.forEach(b,(z=>Oe.forEach(z.Es,(ae=>E.persistence.referenceDelegate.addReference(j,z.targetId,ae))).next((()=>Oe.forEach(z.ds,(ae=>E.persistence.referenceDelegate.removeReference(j,z.targetId,ae)))))))))}catch(j){if(!wl(j))throw j;Fe(jm,"Failed to update sequence numbers: "+j)}for(const j of b){const z=j.targetId;if(!j.fromCache){const ae=E.Ms.get(z),re=ae.snapshotVersion,ve=ae.withLastLimboFreeSnapshotVersion(re);E.Ms=E.Ms.insert(z,ve)}}})(i.localStore,u))}async function vR(r,e){const n=ft(r);if(!n.currentUser.isEqual(e)){Fe(qm,"User change. New user:",e.toKey());const i=await l2(n.localStore,e);n.currentUser=e,(function(u,f){u.mu.forEach((h=>{h.forEach((v=>{v.reject(new qe(Ne.CANCELLED,f))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Zc(n,i.Ls)}}function bR(r,e){const n=ft(r),i=n.Au.get(e);if(i&&i.hu)return Tt().add(i.key);{let o=Tt();const u=n.Iu.get(e);if(!u)return o;for(const f of u){const h=n.Tu.get(f);o=o.unionWith(h.view.nu)}return o}}function N2(r){const e=ft(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=S2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mR.bind(null,e),e.Pu.H_=sR.bind(null,e.eventManager),e.Pu.yu=rR.bind(null,e.eventManager),e}function ER(r){const e=ft(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yR.bind(null,e),e}class zh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ad(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return TN(this.persistence,new wN,e.initialUser,this.serializer)}Cu(e){return new o2(Om.mi,this.serializer)}Du(e){return new ON}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zh.provider={build:()=>new zh};class wR extends zh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Pt(this.persistence.referenceDelegate instanceof Uh,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new oN(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ls.withCacheSize(this.cacheSizeBytes):ls.DEFAULT;return new o2((i=>Uh.mi(i,n)),this.serializer)}}class tm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>qv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=vR.bind(null,this.syncEngine),await eR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new nR})()}createDatastore(e){const n=ad(e.databaseInfo.databaseId),i=(function(u){return new LN(u)})(e.databaseInfo);return(function(u,f,h,v){return new zN(u,f,h,v)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,o,u,f,h){return new FN(i,o,u,f,h)})(this.localStore,this.datastore,e.asyncQueue,(n=>qv(this.syncEngine,n,0)),(function(){return Pv.v()?new Pv:new MN})())}createSyncEngine(e,n){return(function(o,u,f,h,v,b,E){const j=new lR(o,u,f,h,v,b);return E&&(j.gu=!0),j})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const u=ft(o);Fe(fo,"RemoteStore shutting down."),u.Ea.add(5),await Wc(u),u.Aa.shutdown(),u.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}tm.provider={build:()=>new tm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ci("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na="FirestoreClient";class xR{constructor(e,n,i,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=o,this.user=zn.UNAUTHENTICATED,this.clientId=bm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(i,(async f=>{Fe(Na,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(i,(f=>(Fe(Na,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ti;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Bm(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function xp(r,e){r.asyncQueue.verifyOperationInProgress(),Fe(Na,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let i=n.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await l2(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Hv(r,e){r.asyncQueue.verifyOperationInProgress();const n=await SR(r);Fe(Na,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener((i=>Vv(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>Vv(e.remoteStore,o))),r._onlineComponents=e}async function SR(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Fe(Na,"Using user provided OfflineComponentProvider");try{await xp(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===Ne.FAILED_PRECONDITION||o.code===Ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;fl("Error using user provided cache. Falling back to memory cache: "+n),await xp(r,new zh)}}else Fe(Na,"Using default OfflineComponentProvider"),await xp(r,new wR(void 0));return r._offlineComponents}async function C2(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Fe(Na,"Using user provided OnlineComponentProvider"),await Hv(r,r._uninitializedComponentsProvider._online)):(Fe(Na,"Using default OnlineComponentProvider"),await Hv(r,new tm))),r._onlineComponents}function TR(r){return C2(r).then((e=>e.syncEngine))}async function D2(r){const e=await C2(r),n=e.eventManager;return n.onListen=cR.bind(null,e.syncEngine),n.onUnlisten=dR.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=uR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=fR.bind(null,e.syncEngine),n}function AR(r,e,n={}){const i=new Ti;return r.asyncQueue.enqueueAndForget((async()=>(function(u,f,h,v,b){const E=new R2({next:z=>{E.Nu(),f.enqueueAndForget((()=>v2(u,j)));const ae=z.docs.has(h);!ae&&z.fromCache?b.reject(new qe(Ne.UNAVAILABLE,"Failed to get document because the client is offline.")):ae&&z.fromCache&&v&&v.source==="server"?b.reject(new qe(Ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):b.resolve(z)},error:z=>b.reject(z)}),j=new b2(Am(h.path),E,{includeMetadataChanges:!0,qa:!0});return _2(u,j)})(await D2(r),r.asyncQueue,e,n,i))),i.promise}function IR(r,e,n={}){const i=new Ti;return r.asyncQueue.enqueueAndForget((async()=>(function(u,f,h,v,b){const E=new R2({next:z=>{E.Nu(),f.enqueueAndForget((()=>v2(u,j))),z.fromCache&&v.source==="server"?b.reject(new qe(Ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):b.resolve(z)},error:z=>b.reject(z)}),j=new b2(h,E,{includeMetadataChanges:!0,qa:!0});return _2(u,j)})(await D2(r),r.asyncQueue,e,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O2(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2="firestore.googleapis.com",Qv=!0;class $v{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new qe(Ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=M2,this.ssl=Qv}else this.host=e.host,this.ssl=e.ssl??Qv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=a2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<iN)throw new qe(Ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}FA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=O2(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new qe(Ne.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new qe(Ne.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new qe(Ne.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cd{constructor(e,n,i,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $v({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new qe(Ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new qe(Ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $v(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new MA;switch(i.type){case"firstParty":return new LA(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new qe(Ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=Gv.get(n);i&&(Fe("ComponentProvider","Removing Datastore"),Gv.delete(n),i.terminate())})(this),Promise.resolve()}}function NR(r,e,n,i={}){var b;r=ho(r,cd);const o=po(e),u=r._getSettings(),f={...u,emulatorOptions:r._getEmulatorOptions()},h=`${e}:${n}`;o&&(im(`https://${h}`),am("Firestore",!0)),u.host!==M2&&u.host!==h&&fl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v={...u,host:h,ssl:o,emulatorOptions:i};if(!oo(v,f)&&(r._setSettings(v),i.mockUserToken)){let E,j;if(typeof i.mockUserToken=="string")E=i.mockUserToken,j=zn.MOCK_USER;else{E=I1(i.mockUserToken,(b=r._app)==null?void 0:b.options.projectId);const z=i.mockUserToken.sub||i.mockUserToken.user_id;if(!z)throw new qe(Ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");j=new zn(z)}r._authCredentials=new jA(new yb(E,j))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new bo(this.firestore,e,this._query)}}class mn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ea(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mn(this.firestore,e,this._key)}toJSON(){return{type:mn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Kc(n,mn._jsonSchema))return new mn(e,i||null,new et($t.fromString(n.referencePath)))}}mn._jsonSchemaVersion="firestore/documentReference/1.0",mn._jsonSchema={type:pn("string",mn._jsonSchemaVersion),referencePath:pn("string")};class Ea extends bo{constructor(e,n,i){super(e,n,Am(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mn(this.firestore,null,new et(e))}withConverter(e){return new Ea(this.firestore,e,this._path)}}function ah(r,e,...n){if(r=Is(r),_b("collection","path",e),r instanceof cd){const i=$t.fromString(e,...n);return av(i),new Ea(r,null,i)}{if(!(r instanceof mn||r instanceof Ea))throw new qe(Ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child($t.fromString(e,...n));return av(i),new Ea(r.firestore,null,i)}}function _c(r,e,...n){if(r=Is(r),arguments.length===1&&(e=bm.newId()),_b("doc","path",e),r instanceof cd){const i=$t.fromString(e,...n);return iv(i),new mn(r,null,new et(i))}{if(!(r instanceof mn||r instanceof Ea))throw new qe(Ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child($t.fromString(e,...n));return iv(i),new mn(r.firestore,r instanceof Ea?r.converter:null,new et(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv="AsyncQueue";class Yv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new u2(this,"async_queue_retry"),this._c=()=>{const i=wp();i&&Fe(Kv,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=wp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=wp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Ti;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!wl(e))throw e;Fe(Kv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Ci("INTERNAL UNHANDLED ERROR: ",Xv(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Um.createAndSchedule(this,e,n,i,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&ot(47125,{Pc:Xv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Xv(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class ud extends cd{constructor(e,n,i,o){super(e,n,i,o),this.type="firestore",this._queue=new Yv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Yv(e),this._firestoreClient=void 0,await e}}}function RR(r,e){const n=typeof r=="object"?r:cm(),i=typeof r=="string"?r:Mh,o=Kh(n,"firestore").getImmediate({identifier:i});if(!o._initialized){const u=S1("firestore");u&&NR(o,...u)}return o}function Hm(r){if(r._terminated)throw new qe(Ne.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||CR(r),r._firestoreClient}function CR(r){var i,o,u;const e=r._freezeSettings(),n=(function(h,v,b,E){return new eI(h,v,b,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,O2(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)})(r._databaseId,((i=r._app)==null?void 0:i.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new xR(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(h){const v=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(v),_online:v}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ys(kn.fromBase64String(e))}catch(n){throw new qe(Ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ys(kn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ys._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Kc(e,Ys._jsonSchema))return Ys.fromBase64String(e.bytes)}}Ys._jsonSchemaVersion="firestore/bytes/1.0",Ys._jsonSchema={type:pn("string",Ys._jsonSchemaVersion),bytes:pn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new qe(Ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new qe(Ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new qe(Ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return St(this._lat,e._lat)||St(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Fr._jsonSchemaVersion}}static fromJSON(e){if(Kc(e,Fr._jsonSchema))return new Fr(e.latitude,e.longitude)}}Fr._jsonSchemaVersion="firestore/geoPoint/1.0",Fr._jsonSchema={type:pn("string",Fr._jsonSchemaVersion),latitude:pn("number"),longitude:pn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Hr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Kc(e,Hr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Hr(e.vectorValues);throw new qe(Ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Hr._jsonSchemaVersion="firestore/vectorValue/1.0",Hr._jsonSchema={type:pn("string",Hr._jsonSchemaVersion),vectorValues:pn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR=/^__.*__$/;class OR{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new _o(e,this.data,this.fieldMask,n,this.fieldTransforms):new Yc(e,this.data,n,this.fieldTransforms)}}function k2(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ot(40011,{Ac:r})}}class Qm{constructor(e,n,i,o,u,f){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Qm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return qh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(k2(this.Ac)&&DR.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class MR{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||ad(e)}Cc(e,n,i,o=!1){return new Qm({Ac:e,methodName:n,Dc:i,path:jn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function P2(r){const e=r._freezeSettings(),n=ad(r._databaseId);return new MR(r._databaseId,!!e.ignoreUndefinedProperties,n)}function jR(r,e,n,i,o,u={}){const f=r.Cc(u.merge||u.mergeFields?2:0,e,n,o);U2("Data must be an object, but it was:",f,i);const h=L2(i,f);let v,b;if(u.merge)v=new Er(f.fieldMask),b=f.fieldTransforms;else if(u.mergeFields){const E=[];for(const j of u.mergeFields){const z=PR(e,j,n);if(!f.contains(z))throw new qe(Ne.INVALID_ARGUMENT,`Field '${z}' is specified in your field mask but missing from your input data.`);VR(E,z)||E.push(z)}v=new Er(E),b=f.fieldTransforms.filter((j=>v.covers(j.field)))}else v=null,b=f.fieldTransforms;return new OR(new Ks(h),v,b)}function kR(r,e,n,i=!1){return $m(n,r.Cc(i?4:3,e))}function $m(r,e){if(V2(r=Is(r)))return U2("Unsupported field value:",e,r),L2(r,e);if(r instanceof j2)return(function(i,o){if(!k2(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const u=i._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const u=[];let f=0;for(const h of i){let v=$m(h,o.wc(f));v==null&&(v={nullValue:"NULL_VALUE"}),u.push(v),f++}return{arrayValue:{values:u}}})(r,e)}return(function(i,o){if((i=Is(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return xI(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const u=Ut.fromDate(i);return{timestampValue:Vh(o.serializer,u)}}if(i instanceof Ut){const u=new Ut(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Vh(o.serializer,u)}}if(i instanceof Fr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ys)return{bytesValue:Jb(o.serializer,i._byteString)};if(i instanceof mn){const u=o.databaseId,f=i.firestore._databaseId;if(!f.isEqual(u))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Cm(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Hr)return(function(f,h){return{mapValue:{fields:{[Ib]:{stringValue:Nb},[jh]:{arrayValue:{values:f.toArray().map((b=>{if(typeof b!="number")throw h.Sc("VectorValues must only contain numeric values.");return Im(h.serializer,b)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${Wh(i)}`)})(r,e)}function L2(r,e){const n={};return Eb(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):go(r,((i,o)=>{const u=$m(o,e.mc(i));u!=null&&(n[i]=u)})),{mapValue:{fields:n}}}function V2(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Ut||r instanceof Fr||r instanceof Ys||r instanceof mn||r instanceof j2||r instanceof Hr)}function U2(r,e,n){if(!V2(n)||!vb(n)){const i=Wh(n);throw i==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+i)}}function PR(r,e,n){if((e=Is(e))instanceof Gm)return e._internalPath;if(typeof e=="string")return B2(r,e);throw qh("Field path arguments must be of type string or ",r,!1,void 0,n)}const LR=new RegExp("[~\\*/\\[\\]]");function B2(r,e,n){if(e.search(LR)>=0)throw qh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Gm(...e.split("."))._internalPath}catch{throw qh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function qh(r,e,n,i,o){const u=i&&!i.isEmpty(),f=o!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let v="";return(u||f)&&(v+=" (found",u&&(v+=` in field ${i}`),f&&(v+=` in document ${o}`),v+=")"),new qe(Ne.INVALID_ARGUMENT,h+r+v)}function VR(r,e){return r.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e,n,i,o,u){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new UR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(hd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class UR extends z2{data(){return super.data()}}function hd(r,e){return typeof e=="string"?B2(r,e):e instanceof Gm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new qe(Ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Km{}class q2 extends Km{}function Wv(r,e,...n){let i=[];e instanceof Km&&i.push(e),i=i.concat(n),(function(u){const f=u.filter((v=>v instanceof Ym)).length,h=u.filter((v=>v instanceof dd)).length;if(f>1||f>0&&h>0)throw new qe(Ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)r=o._apply(r);return r}class dd extends q2{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new dd(e,n,i)}_apply(e){const n=this._parse(e);return F2(e._query,n),new bo(e.firestore,e.converter,Gp(e._query,n))}_parse(e){const n=P2(e.firestore);return(function(u,f,h,v,b,E,j){let z;if(b.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new qe(Ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){e1(j,E);const re=[];for(const ve of j)re.push(Jv(v,u,ve));z={arrayValue:{values:re}}}else z=Jv(v,u,j)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||e1(j,E),z=kR(h,f,j,E==="in"||E==="not-in");return fn.create(b,E,z)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Sp(r,e,n){const i=e,o=hd("where",r);return dd._create(o,i,n)}class Ym extends Km{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ym(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:xr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let f=o;const h=u.getFlattenedFilters();for(const v of h)F2(f,v),f=Gp(f,v)})(e._query,n),new bo(e.firestore,e.converter,Gp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Xm extends q2{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Xm(e,n)}_apply(e){const n=(function(o,u,f){if(o.startAt!==null)throw new qe(Ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new qe(Ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Bc(u,f)})(e._query,this._field,this._direction);return new bo(e.firestore,e.converter,(function(o,u){const f=o.explicitOrderBy.concat([u]);return new xl(o.path,o.collectionGroup,f,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function Zv(r,e="asc"){const n=e,i=hd("orderBy",r);return Xm._create(i,n)}function Jv(r,e,n){if(typeof(n=Is(n))=="string"){if(n==="")throw new qe(Ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Pb(e)&&n.indexOf("/")!==-1)throw new qe(Ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child($t.fromString(n));if(!et.isDocumentKey(i))throw new qe(Ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return pv(r,new et(i))}if(n instanceof mn)return pv(r,n._key);throw new qe(Ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wh(n)}.`)}function e1(r,e){if(!Array.isArray(r)||r.length===0)throw new qe(Ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function F2(r,e){const n=(function(o,u){for(const f of o)for(const h of f.getFlattenedFilters())if(u.indexOf(h.op)>=0)return h.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new qe(Ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new qe(Ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class zR{convertValue(e,n="none"){switch(Aa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ln(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ta(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ot(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return go(e,((o,u)=>{i[o]=this.convertValue(u,n)})),i}convertVectorValue(e){var i,o,u;const n=(u=(o=(i=e.fields)==null?void 0:i[jh].arrayValue)==null?void 0:o.values)==null?void 0:u.map((f=>ln(f.doubleValue)));return new Hr(n)}convertGeoPoint(e){return new Fr(ln(e.latitude),ln(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=ed(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Lc(e));default:return null}}convertTimestamp(e){const n=Sa(e);return new Ut(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=$t.fromString(e);Pt(i2(i),9688,{name:e});const o=new Vc(i.get(1),i.get(3)),u=new et(i.popFirst(5));return o.isEqual(n)||Ci(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(r,e,n){let i;return i=r?r.toFirestore(e):e,i}class xc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ao extends z2{constructor(e,n,i,o,u,f){super(e,n,i,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new wh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(hd("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new qe(Ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ao._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ao._jsonSchemaVersion="firestore/documentSnapshot/1.0",ao._jsonSchema={type:pn("string",ao._jsonSchemaVersion),bundleSource:pn("string","DocumentSnapshot"),bundleName:pn("string"),bundle:pn("string")};class wh extends ao{data(e={}){return super.data(e)}}class ul{constructor(e,n,i,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new xc(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new wh(this._firestore,this._userDataWriter,i.key,i,new xc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new qe(Ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((h=>{const v=new wh(o._firestore,o._userDataWriter,h.doc.key,h.doc,new xc(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);return h.doc,{type:"added",doc:v,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((h=>u||h.type!==3)).map((h=>{const v=new wh(o._firestore,o._userDataWriter,h.doc.key,h.doc,new xc(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);let b=-1,E=-1;return h.type!==0&&(b=f.indexOf(h.doc.key),f=f.delete(h.doc.key)),h.type!==1&&(f=f.add(h.doc),E=f.indexOf(h.doc.key)),{type:FR(h.type),doc:v,oldIndex:b,newIndex:E}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new qe(Ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ul._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=bm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),i.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function FR(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ot(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(r){r=ho(r,mn);const e=ho(r.firestore,ud);return AR(Hm(e),r._key).then((n=>QR(e,r,n)))}ul._jsonSchemaVersion="firestore/querySnapshot/1.0",ul._jsonSchema={type:pn("string",ul._jsonSchemaVersion),bundleSource:pn("string","QuerySnapshot"),bundleName:pn("string"),bundle:pn("string")};class H2 extends zR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ys(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new mn(this.firestore,null,n)}}function Tp(r){r=ho(r,bo);const e=ho(r.firestore,ud),n=Hm(e),i=new H2(e);return BR(r._query),IR(n,r._query).then((o=>new ul(e,i,r,o)))}function oh(r,e,n){r=ho(r,mn);const i=ho(r.firestore,ud),o=qR(r.converter,e);return GR(i,[jR(P2(i),"setDoc",r._key,o,r.converter!==null,n).toMutation(r._key,Ai.none())])}function GR(r,e){return(function(i,o){const u=new Ti;return i.asyncQueue.enqueueAndForget((async()=>pR(await TR(i),o,u))),u.promise})(Hm(r),e)}function QR(r,e,n){const i=n.docs.get(e._key),o=new H2(r);return new ao(r,o,e._key,i,new xc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(o){bl=o})(mo),lo(new wa("firestore",((i,{instanceIdentifier:o,options:u})=>{const f=i.getProvider("app").getImmediate(),h=new ud(new kA(i.getProvider("auth-internal")),new VA(f,i.getProvider("app-check-internal")),(function(b,E){if(!Object.prototype.hasOwnProperty.apply(b.options,["projectId"]))throw new qe(Ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vc(b.options.projectId,E)})(f,o),f);return u={useFetchStreams:n,...u},h._setSettings(u),h}),"PUBLIC").setMultipleInstances(!0)),Vr(tv,nv,e),Vr(tv,nv,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2="firebasestorage.googleapis.com",$R="storageBucket",KR=120*1e3,YR=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr extends Kr{constructor(e,n,i=0){super(Ap(e),`Firebase Storage: ${n} (${Ap(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Yr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ap(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var $r;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})($r||($r={}));function Ap(r){return"storage/"+r}function XR(){const r="An unknown error occurred, please check the error payload for server response.";return new Yr($r.UNKNOWN,r)}function WR(){return new Yr($r.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ZR(){return new Yr($r.CANCELED,"User canceled the upload/download.")}function JR(r){return new Yr($r.INVALID_URL,"Invalid URL '"+r+"'.")}function eC(r){return new Yr($r.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function t1(r){return new Yr($r.INVALID_ARGUMENT,r)}function Q2(){return new Yr($r.APP_DELETED,"The Firebase app was deleted.")}function tC(r){return new Yr($r.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=wr.makeFromUrl(e,n)}catch{return new wr(e,"")}if(i.path==="")return i;throw eC(e)}static makeFromUrl(e,n){let i=null;const o="([A-Za-z0-9.\\-_]+)";function u(xe){xe.path.charAt(xe.path.length-1)==="/"&&(xe.path_=xe.path_.slice(0,-1))}const f="(/(.*))?$",h=new RegExp("^gs://"+o+f,"i"),v={bucket:1,path:3};function b(xe){xe.path_=decodeURIComponent(xe.path)}const E="v[A-Za-z0-9_]+",j=n.replace(/[.]/g,"\\."),z="(/([^?#]*).*)?$",ae=new RegExp(`^https?://${j}/${E}/b/${o}/o${z}`,"i"),re={bucket:1,path:3},ve=n===G2?"(?:storage.googleapis.com|storage.cloud.google.com)":n,me="([^?#]*)",De=new RegExp(`^https?://${ve}/${o}/${me}`,"i"),Pe=[{regex:h,indices:v,postModify:u},{regex:ae,indices:re,postModify:b},{regex:De,indices:{bucket:1,path:2},postModify:b}];for(let xe=0;xe<Pe.length;xe++){const ue=Pe[xe],Re=ue.regex.exec(e);if(Re){const P=Re[ue.indices.bucket];let L=Re[ue.indices.path];L||(L=""),i=new wr(P,L),ue.postModify(i);break}}if(i==null)throw JR(e);return i}}class nC{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sC(r,e,n){let i=1,o=null,u=null,f=!1,h=0;function v(){return h===2}let b=!1;function E(...me){b||(b=!0,e.apply(null,me))}function j(me){o=setTimeout(()=>{o=null,r(ae,v())},me)}function z(){u&&clearTimeout(u)}function ae(me,...De){if(b){z();return}if(me){z(),E.call(null,me,...De);return}if(v()||f){z(),E.call(null,me,...De);return}i<64&&(i*=2);let Pe;h===1?(h=2,Pe=0):Pe=(i+Math.random())*1e3,j(Pe)}let re=!1;function ve(me){re||(re=!0,z(),!b&&(o!==null?(me||(h=2),clearTimeout(o),j(0)):me||(h=1)))}return j(0),u=setTimeout(()=>{f=!0,ve(!0)},n),ve}function rC(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(r){return r!==void 0}function n1(r,e,n,i){if(i<e)throw t1(`Invalid value for '${r}'. Expected ${e} or greater.`);if(i>n)throw t1(`Invalid value for '${r}'. Expected ${n} or less.`)}function aC(r){const e=encodeURIComponent;let n="?";for(const i in r)if(r.hasOwnProperty(i)){const o=e(i)+"="+e(r[i]);n=n+o+"&"}return n=n.slice(0,-1),n}var Fh;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(Fh||(Fh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(r,e){const n=r>=500&&r<600,o=[408,429].indexOf(r)!==-1,u=e.indexOf(r)!==-1;return n||o||u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e,n,i,o,u,f,h,v,b,E,j,z=!0,ae=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=f,this.callback_=h,this.errorCallback_=v,this.timeout_=b,this.progressCallback_=E,this.connectionFactory_=j,this.retry=z,this.isUsingEmulator=ae,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((re,ve)=>{this.resolve_=re,this.reject_=ve,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new lh(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const f=h=>{const v=h.loaded,b=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(v,b)};this.progressCallback_!==null&&u.addUploadProgressListener(f),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(f),this.pendingConnection_=null;const h=u.getErrorCode()===Fh.NO_ERROR,v=u.getStatus();if(!h||oC(v,this.additionalRetryCodes_)&&this.retry){const E=u.getErrorCode()===Fh.ABORT;i(!1,new lh(!1,null,E));return}const b=this.successCodes_.indexOf(v)!==-1;i(!0,new lh(b,u))})},n=(i,o)=>{const u=this.resolve_,f=this.reject_,h=o.connection;if(o.wasSuccessCode)try{const v=this.callback_(h,h.getResponse());iC(v)?u(v):u()}catch(v){f(v)}else if(h!==null){const v=XR();v.serverResponse=h.getErrorText(),this.errorCallback_?f(this.errorCallback_(h,v)):f(v)}else if(o.canceled){const v=this.appDelete_?Q2():ZR();f(v)}else{const v=WR();f(v)}};this.canceled_?n(!1,new lh(!1,null,!0)):this.backoffId_=sC(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&rC(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class lh{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function cC(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function uC(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function hC(r,e){e&&(r["X-Firebase-GMPID"]=e)}function dC(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function fC(r,e,n,i,o,u,f=!0,h=!1){const v=aC(r.urlParams),b=r.url+v,E=Object.assign({},r.headers);return hC(E,e),cC(E,n),uC(E,u),dC(E,i),new lC(b,r.method,E,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,o,f,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function mC(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,n){this._service=e,n instanceof wr?this._location=n:this._location=wr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Hh(e,n)}get root(){const e=new wr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return mC(this._location.path)}get storage(){return this._service}get parent(){const e=pC(this._location.path);if(e===null)return null;const n=new wr(this._location.bucket,e);return new Hh(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw tC(e)}}function s1(r,e){const n=e==null?void 0:e[$R];return n==null?null:wr.makeFromBucketSpec(n,r)}function gC(r,e,n,i={}){r.host=`${e}:${n}`;const o=po(e);o&&(im(`https://${r.host}/b`),am("Storage",!0)),r._isUsingEmulator=!0,r._protocol=o?"https":"http";const{mockUserToken:u}=i;u&&(r._overrideAuthToken=typeof u=="string"?u:I1(u,r.app.options.projectId))}class yC{constructor(e,n,i,o,u,f=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=o,this._firebaseVersion=u,this._isUsingEmulator=f,this._bucket=null,this._host=G2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=KR,this._maxUploadRetryTime=YR,this._requests=new Set,o!=null?this._bucket=wr.makeFromBucketSpec(o,this._host):this._bucket=s1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=wr.makeFromBucketSpec(this._url,e):this._bucket=s1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){n1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){n1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(_r(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Hh(this,e)}_makeRequest(e,n,i,o,u=!0){if(this._deleted)return new nC(Q2());{const f=fC(e,this._appId,i,o,n,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(f),f.getPromise().then(()=>this._requests.delete(f),()=>this._requests.delete(f)),f}}async makeRequestWithTokens(e,n){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,o).getPromise()}}const r1="@firebase/storage",i1="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2="storage";function _C(r=cm(),e){r=Is(r);const i=Kh(r,$2).getImmediate({identifier:e}),o=S1("storage");return o&&vC(i,...o),i}function vC(r,e,n,i={}){gC(r,e,n,i)}function bC(r,{instanceIdentifier:e}){const n=r.getProvider("app").getImmediate(),i=r.getProvider("auth-internal"),o=r.getProvider("app-check-internal");return new yC(n,i,o,e,mo)}function EC(){lo(new wa($2,bC,"PUBLIC").setMultipleInstances(!0)),Vr(r1,i1,""),Vr(r1,i1,"esm2020")}EC();const wC={apiKey:"AIzaSyCFQSuzdalFAKgCeNOh44T6zLpGm8PD0e0",authDomain:"studio-2008079270-29431.firebaseapp.com",projectId:"studio-2008079270-29431",storageBucket:"studio-2008079270-29431.firebasestorage.app",messagingSenderId:"376682035127",appId:"1:376682035127:web:3e377f2c48371e4ab81a32"},Wm=C1(wC);DA(Wm);const la=RR(Wm);_C(Wm);const xC={:"Coordinator",:"Doctor",:"Nurse","  ":"PhysicalTherapist","  ":"PhysicalTherapist"," ":"SocialWorker",:"Driver"},SC=[{email:"salshahrani173@moh.gov.sa",name:"   ",role:""},{email:"amemahmoud@mog.gov.sa",name:"  ",role:""},{email:"rowa.ali.omer@gmail.com",name:"   ",role:""},{email:"aaldawsari23@moh.gov.sa",name:"   ",role:"  "},{email:"atante@moh.gov.sa",name:" ",role:"  "},{email:"yalbishe@moh.gov.sa",name:"   ",role:" "},{email:"relbarahamtoshy@moh.gov.sa",name:"   ",role:""},{email:"zdalamri@outlook.sa",name:"  ",role:""},{email:"handaa@mog.gov.sa",name:"  ",role:""},{email:"nalqahtani112@moh.gov.sa",name:"   ",role:""},{email:"hamad1234nmnm@moh.gov.sa",name:"   ",role:""},{email:"thamralshhrany188@gmail.com",name:"   ",role:""},{email:"salsahrani@moh.gov.sa",name:"   ",role:""},{email:"fahhadms10@gmail.com",name:"   ",role:""},{email:"halmanfi@moh.gov.sa",name:"  ",role:""}];class ya{static async signIn(e,n){try{const i=SC.find(u=>u.email.toLowerCase()===e.toLowerCase());if(!i)throw new Error("    ");if(n!=="12345")throw new Error("   ");const o={email:i.email,name:i.name,role:i.role,mappedRole:xC[i.role]||"Coordinator",uid:btoa(i.email),loginTime:new Date().toISOString()};return localStorage.setItem("currentUser",JSON.stringify(o)),{user:o,success:!0}}catch(i){throw console.error("Login error:",i),i}}static async signOut(){return localStorage.removeItem("currentUser"),{success:!0}}static getCurrentUser(){const e=localStorage.getItem("currentUser");return e?JSON.parse(e):null}static isAuthenticated(){return this.getCurrentUser()!==null}}class vr{static async savePatient(e){var n;try{const i=_c(la,"patients",e.nationalId);return await oh(i,{...e,updatedAt:Ut.now(),updatedBy:((n=ya.getCurrentUser())==null?void 0:n.email)||"system"}),{success:!0}}catch(i){throw console.error("Error saving patient:",i),i}}static async getPatient(e){try{const n=_c(la,"patients",e),i=await HR(n);return i.exists()?{id:i.id,...i.data()}:null}catch(n){throw console.error("Error getting patient:",n),n}}static async getAllPatients(){try{return(await Tp(ah(la,"patients"))).docs.map(n=>({id:n.id,...n.data()}))}catch(e){throw console.error("Error getting patients:",e),e}}static async saveVisit(e){var n;try{const i=`${e.patientId}_${e.date}`,o=_c(la,"visits",i);return await oh(o,{...e,updatedAt:Ut.now(),updatedBy:((n=ya.getCurrentUser())==null?void 0:n.email)||"system"}),{success:!0}}catch(i){throw console.error("Error saving visit:",i),i}}static async getVisitsByDateRange(e,n){try{const i=Wv(ah(la,"visits"),Sp("date",">=",e),Sp("date","<=",n),Zv("date","desc"));return(await Tp(i)).docs.map(u=>({id:u.id,...u.data()}))}catch(i){throw console.error("Error getting visits:",i),i}}static async saveAssessment(e){var n;try{const i=_c(la,"assessments",e.id);return await oh(i,{...e,updatedAt:Ut.now(),updatedBy:((n=ya.getCurrentUser())==null?void 0:n.email)||"system"}),{success:!0}}catch(i){throw console.error("Error saving assessment:",i),i}}static async getAssessmentsByPatient(e){try{const n=Wv(ah(la,"assessments"),Sp("patientId","==",e),Zv("date","desc"));return(await Tp(n)).docs.map(o=>({id:o.id,...o.data()}))}catch(n){throw console.error("Error getting assessments:",n),n}}static async logActivity(e,n){try{const i=ya.getCurrentUser(),o={action:e,details:n,user:(i==null?void 0:i.email)||"system",userName:(i==null?void 0:i.name)||"System",timestamp:Ut.now(),date:new Date().toISOString().split("T")[0]},u=_c(ah(la,"activityLog"));return await oh(u,o),{success:!0}}catch(i){throw console.error("Error logging activity:",i),i}}}const Mc=class Mc{static init(){const e=localStorage.getItem("firebase-sync-queue");if(e)try{this.syncQueue=JSON.parse(e)}catch(n){console.error("Error loading sync queue:",n)}window.addEventListener("online",()=>{this.isOnline=!0,this.processSyncQueue()}),window.addEventListener("offline",()=>{this.isOnline=!1}),this.isOnline&&setTimeout(()=>this.processSyncQueue(),1e3)}static queueForSync(e,n){const i={id:Date.now().toString(),operation:e,data:n,timestamp:new Date().toISOString(),retryCount:0};this.syncQueue.push(i),this.persistQueue(),this.isOnline&&!this.syncInProgress&&this.processSyncQueue()}static async processSyncQueue(){if(!this.isOnline||this.syncInProgress||this.syncQueue.length===0)return;this.syncInProgress=!0;const e=[];for(const n of this.syncQueue)try{switch(n.operation){case"savePatient":await vr.savePatient(n.data);break;case"saveVisit":await vr.saveVisit(n.data);break;case"saveAssessment":await vr.saveAssessment(n.data);break;case"logActivity":await vr.logActivity(n.data.action,n.data.details);break;default:console.warn("Unknown sync operation:",n.operation)}e.push(n.id)}catch(i){console.error("Sync failed for item:",n,i),n.retryCount=(n.retryCount||0)+1,n.retryCount>=3&&e.push(n.id)}this.syncQueue=this.syncQueue.filter(n=>!e.includes(n.id)),this.persistQueue(),this.syncInProgress=!1}static persistQueue(){try{localStorage.setItem("firebase-sync-queue",JSON.stringify(this.syncQueue))}catch(e){console.error("Error persisting sync queue:",e)}}static getSyncStatus(){return{isOnline:this.isOnline,queueLength:this.syncQueue.length,syncInProgress:this.syncInProgress}}};Mc.syncQueue=[],Mc.isOnline=navigator.onLine,Mc.syncInProgress=!1;let wi=Mc;wi.init();var ch={},Ip,a1;function TC(){if(a1)return Ip;a1=1;var r=Object.create,e=Object.defineProperty,n=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,o=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty,f=($,D,C)=>D in $?e($,D,{enumerable:!0,configurable:!0,writable:!0,value:C}):$[D]=C,h=($,D)=>e($,"name",{value:D,configurable:!0}),v=($,D)=>()=>($&&(D=$($=0)),D),b=($,D)=>()=>(D||$((D={exports:{}}).exports,D),D.exports),E=($,D)=>{for(var C in D)e($,C,{get:D[C],enumerable:!0})},j=($,D,C,O)=>{if(D&&typeof D=="object"||typeof D=="function")for(let N of i(D))!u.call($,N)&&N!==C&&e($,N,{get:()=>D[N],enumerable:!(O=n(D,N))||O.enumerable});return $},z=($,D,C)=>(C=$!=null?r(o($)):{},j(D||!$||!$.__esModule?e(C,"default",{value:$,enumerable:!0}):C,$)),ae=$=>j(e({},"__esModule",{value:!0}),$),re=($,D,C)=>f($,typeof D!="symbol"?D+"":D,C),ve=b($=>{P(),$.byteLength=k,$.toByteArray=q,$.fromByteArray=Y;var D=[],C=[],O=typeof Uint8Array<"u"?Uint8Array:Array,N="ABCDEFGHIJKLMNO	PQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(T=0,R=N.length;T<R;++T)D[T]=N[T],C[N.charCodeAt(T)]=T;var T,R;C[45]=62,C[95]=63;function A(x){var I=x.length;if(I%4>0)throw new Error("Invalid string. Length must be a multip	le of 4");var U=x.indexOf("=");U===-1&&(U=I);var J=U===I?0:4-U%4;return[U,J]}h(A,"getLens");function k(x){var I=A(x),U=I[0],J=I[1];return(U+J)*3/4-J}h(k,"byte	Length");function Z(x,I,U){return(I+U)*3/4-U}h(Z,"_byteLength");function q(x){var I,U=A(x),J=U[0],ee=U[1],ie=new O(Z(x,J,ee)),be=0,Se=ee>0?J-4:J,W;for(W=0;W<Se;W+=4)I=C[x.charCodeAt(W)]<<18|C[x.charCodeAt(W+1)]<<12|C[x.charCodeAt(W+2)]<<6|C[x.charCodeAt(W+3)],ie[be++]=I>>16&255,ie[be++]=I>>8&255,ie[be++]=I&255;return ee===2&&(I=C[x.charCodeAt(W)]<<2|C[x.charCodeAt(W+1)]>>4,ie[be++]=I&255),ee===1&&(I=C[x.charCodeAt(W)]<<10|C[x.charCodeAt(W+1)]<<4|C[x.charCodeAt(W+2)]>>2,ie[be++]=I>>8&255,ie[be++]=I&255),ie}h(q,"toByteArray");function Q(x){return D[x>>18&63]+D[x>>12&63]+D[x>>6&63]+D[x&63]}h(Q,"tripletToBase64");function V(x,I,U){for(var J,ee=[],ie=I;ie<U;ie+=3)J=(x[ie]<<16&16711680)+(x[ie+1]<<8&65280)+(x[ie+2]&255),ee.push(Q(J));return ee.join("")}h(V,"encodeChunk");function Y(x){for(var I,U=x.length,J=U%3,ee=[],ie=16383,be=0,Se=U-J;be<Se;be+=ie)ee.push(V(x,be,be+ie>Se?Se:be+ie));return J===1?(I=x[U-1],ee.push(D[I>>2]+D[I<<4&63]+"==")):J===2&&(I=(x[U-2]<<8)+x[U-1],ee.push(D[I>>10]+D[I>>4&63]+D[I<<2&63]+"=")),ee.join("")}h(Y,"fromByteArray")}),me=b($=>{P(),$.read=function(D,C,O,N,T){var R,A,k=T*8-N-1,Z=(1<<k)-1,q=Z>>1,Q=-7,V=O?T-1:0,Y=O?-1:1,x=D[C+V];for(V+=Y,R=x&(1<<-Q)-1,x>>=-Q,Q+=k;Q>0;R=R*256+D[C+V],V+=Y,Q-=8);for(A=R&(1<<-Q)-1,R>>=-Q,Q+=N;Q>0;A=A*256+D[C+V],V+=Y,Q-=8);if(R===0)R=1-q;else{if(R===Z)return A?NaN:(x?-1:1)*(1/0);A=A+Math.pow(2,N),R=R-q}return(x?-1:1)*A*Math.pow(2,R-N)},$.write=function(D,C,O,N,T,R){var A,k,Z,q=R*8-T-1,Q=(1<<q)-1,V=Q>>1,Y=T===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=N?0:R-1,I=N?1:-1,U=C<0||C===0&&1/C<0?1:0;for(C=Math.abs(C),isNaN(C)||C===1/0?(k=isNaN(C)?1:0,A=Q):(A=Math.floor(Math.log(C)/Math.LN2),C*(Z=Math.pow(2,-A))<1&&(A--,Z*=2),A+V>=1?C+=Y/Z:C+=Y*Math.pow(2,1-V),C*Z>=2&&(A++,Z/=2),A+V>=Q?(k=0,A=Q):A+V>=1?(k=(C*Z-1)*Math.pow(2,T),A=A+V):(k=C*Math.pow(2,V-1)*Math.pow(2,T),A=0));T>=8;D[O+x]=k&255,x+=I,k/=256,T-=8);for(A=A<<T|k,q+=T;q>0;D[O+x]=A&255,x+=I,A/=256,q-=8);D[O+x-I]|=U*128}}),De=b($=>{P();var D=ve(),C=me(),O=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;$.Buffer=A,$.SlowBuffer=ee,$.INSPECT_MAX_BYTES=50;var N=2147483647;$.kMaxLength=N,A.TYPED_ARRAY_SUPPORT=T(),!A.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) su	pport which is required by `buffer` v5.x. Use `buffer` v4.x if you require old b	rowser support.");function T(){try{let y=new Uint8Array(1),l={foo:h(function(){return 42},"foo")};return Object.setPrototypeOf(l,Uint8Array.prototype),Object.setPrototypeOf(y,l),y.foo()===42}catch{return!1}}h(T,"typedArraySupport"),Object.defineProperty(A.prototype,"parent",{enumerable:!0,get:h(function(){if(A.isBuffer(this))return this.buffer},"get")}),Object.defineProperty(A.prototype,"offset",{enumerable:!0,get:h(function(){if(A.isBuffer(this))return this.byteOffset},"get")});function R(y){if(y>N)throw new RangeError('The value "'+y+'" is invalid for option "size"');let l=new Uint8Array(y);return Object.setPrototypeOf(l,A.prototype),l}h(R,"createBuffer");function A(y,l,p){if(typeof y=="number"){if(typeof l=="string")throw new TypeError('The "string" a	rgument must be of type string. Received type number');return Q(y)}return k(y,l,p)}h(A,"Buffer"),A.poolSize=8192;function k(y,l,p){if(typeof y=="string")return V(y,l);if(ArrayBuffer.isView(y))return x(y);if(y==null)throw new TypeError("The f	irst argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-l	ike Object. Received type "+typeof y);if(Ln(y,ArrayBuffer)||y&&Ln(y.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ln(y,SharedArrayBuffer)||y&&Ln(y.buffer,SharedArrayBuffer)))return I(y,l,p);if(typeof y=="number")throw new TypeError('The "value" argument	 must not be of type number. Received type number');let _=y.valueOf&&y.valueOf();if(_!=null&&_!==y)return A.from(_,l,p);let w=U(y);if(w)return w;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof y[Symbol.toPrimitive]=="function")return A.from(y[Symbol.toPrimitive]("string"),l,p);throw new TypeError("The first argumen	t must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. 	Received type "+typeof y)}h(k,"from"),A.from=function(y,l,p){return k(y,l,p)},Object.setPrototypeOf(A.prototype,Uint8Array.prototype),Object.setPrototypeOf(A,Uint8Array);function Z(y){if(typeof y!="number")throw new TypeError('"size" arg	ument must be of type number');if(y<0)throw new RangeError('The value "'+y+'" is	 invalid for option "size"')}h(Z,"assertSize");function q(y,l,p){return Z(y),y<=0?R(y):l!==void 0?typeof p=="string"?R(y).fill(l,p):R(y).fill(l):R(y)}h(q,"alloc"),A.alloc=function(y,l,p){return q(y,l,p)};function Q(y){return Z(y),R(y<0?0:J(y)|0)}h(Q,"allocUnsafe"),A.allocUnsafe=function(y){return Q(y)},A.allocUnsafeSlow=function(y){return Q(y)};function V(y,l){if((typeof l!="string"||l==="")&&(l="	utf8"),!A.isEncoding(l))throw new TypeError("Unknown encoding: "+l);let p=ie(y,l)|0,_=R(p),w=_.write(y,l);return w!==p&&(_=_.slice(0,w)),_}h(V,"fromString");function Y(y){let l=y.length<0?0:J(y.length)|0,p=R(l);for(let _=0;_<l;_+=1)p[_]=y[_]&255;return p}h(Y,"fromArrayLike");function x(y){if(Ln(y,Uint8Array)){let l=new Uint8Array(y);return I(l.buffer,l.byteOffset,l.byteLength)}return Y(y)}h(x,"fromArrayView");function I(y,l,p){if(l<0||y.byteLength<l)throw new RangeError('"offset" is outs	ide of buffer bounds');if(y.byteLength<l+(p||0))throw new RangeError('"length" i	s outside of buffer bounds');let _;return l===void 0&&p===void 0?_=new Uint8Array(y):p===void 0?_=new Uint8Array(y,l):_=new Uint8Array(y,l,p),Object.setPrototypeOf(_,A.prototype),_}h(I,"fromArrayBuffer");function U(y){if(A.isBuffer(y)){let l=J(y.length)|0,p=R(l);return p.length===0||y.copy(p,0,0,l),p}if(y.length!==void 0)return typeof y.length!="number"||hr(y.length)?R(0):Y(y);if(y.type==="Buffer"&&Array.isArray(y.data))return Y(y.data)}h(U,"fromObject");function J(y){if(y>=N)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+N.toString(16)+" bytes");return y|0}h(J,"checked");function ee(y){return+y!=y&&(y=0),A.alloc(+y)}h(ee,"SlowBuffer"),A.isBuffer=h(function(y){return y!=null&&y._isBuffer===!0&&y!==A.prototype},"isBuffer"),A.compare=h(function(y,l){if(Ln(y,Uint8Array)&&(y=A.from(y,y.offset,y.byteLength)),Ln(l,Uint8Array)&&(l=A.from(l,l.offset,l.byteLength)),!A.isBuffer(y)||!A.isBuffer(l))throw new TypeError('The "buf1", "buf2" arguments	 must be one of type Buffer or Uint8Array');if(y===l)return 0;let p=y.length,_=l.length;for(let w=0,B=Math.min(p,_);w<B;++w)if(y[w]!==l[w]){p=y[w],_=l[w];break}return p<_?-1:_<p?1:0},"compare"),A.isEncoding=h(function(y){switch(String(y).toLowerCase()){case"	hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"	ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},"isEn	coding"),A.concat=h(function(y,l){if(!Array.isArray(y))throw new TypeError('"lis	t" argument must be an Array of Buffers');if(y.length===0)return A.alloc(0);let p;if(l===void 0)for(l=0,p=0;p<y.length;++p)l+=y[p].length;let _=A.allocUnsafe(l),w=0;for(p=0;p<y.length;++p){let B=y[p];if(Ln(B,Uint8Array))w+B.length>_.length?(A.isBuffer(B)||(B=A.from(B)),B.copy(_,w)):Uint8Array.prototype.set.call(_,B,w);else if(A.isBuffer(B))B.copy(_,w);else throw new TypeError('"list" argument must be an Array of Buf	fers');w+=B.length}return _},"concat");function ie(y,l){if(A.isBuffer(y))return y.length;if(ArrayBuffer.isView(y)||Ln(y,ArrayBuffer))return y.byteLength;if(typeof y!="string")throw new TypeError('The "string" argument must be one of type string, 	Buffer, or ArrayBuffer. Received type '+typeof y);let p=y.length,_=arguments.length>2&&arguments[2]===!0;if(!_&&p===0)return 0;let w=!1;for(;;)switch(l){case"ascii":case"	latin1":case"binary":return p;case"utf8":case"utf-8":return li(y).length;case"uc	s2":case"ucs-2":case"utf16le":case"utf-16le":return p*2;case"hex":return p>>>1;case"	base64":return Ui(y).length;default:if(w)return _?-1:li(y).length;l=(""+l).toLowerCase(),w=!0}}h(ie,"byteLength"),A.byteLength=ie;function be(y,l,p){let _=!1;if((l===void 0||l<0)&&(l=0),l>this.length||((p===void 0||p>this.length)&&(p=this.length),p<=0)||(p>>>=0,l>>>=0,p<=l))return"";for(y||(y="utf8");;)switch(y){case"hex":return vt(this,l,p);case"utf8":case"utf-8":return Te(this,l,p);case"ascii":return Qe(this,l,p);case"latin1":case"binary":return lt(this,l,p);case"base64":return Ke(this,l,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ht(this,l,p);default:if(_)throw new TypeError("Unknown encoding: "+y);y=(y+"").toLowerCase(),_=!0}}h(be,"slowToString"),A.prototype._isBuffer=!0;function Se(y,l,p){let _=y[l];y[l]=y[p],y[p]=_}h(Se,"swap"),A.prototype.swap16=h(function(){let y=this.length;if(y%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let l=0;l<y;l+=2)Se(this,l,l+1);return this},"swap16"),A.prototype.swap32=h(function(){let y=this.length;if(y%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bit	s");for(let l=0;l<y;l+=4)Se(this,l,l+3),Se(this,l+1,l+2);return this},"swap32"),A.prototype.swap64=h(function(){let y=this.length;if(y%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let l=0;l<y;l+=8)Se(this,l,l+7),Se(this,l+1,l+6),Se(this,l+2,l+5),Se(this,l+3,l+4);return this},"swap64"),A.prototype.toString=h(function(){let y=this.length;return y===0?"":arguments.length===0?Te(this,0,y):be.apply(this,arguments)},"toString"),A.prototype.toLocaleString=A.prototype.toString,A.prototype.equals=h(function(y){if(!A.isBuffer(y))throw new TypeError("Argument must be a Buffer");return this===y?!0:A.compare(this,y)===0},"equals"),A.prototype.inspect=h(function(){let y="",l=$.INSPECT_MAX_BYTES;return y=this.toString("hex",0,l).replace(/(.{2})/g,"$1 ").trim(),this.length>l&&(y+=" ... "),"<Buffer "+y+">"},"inspect"),O&&(A.prototype[O]=A.prototype.inspect),A.prototype.compare=h(function(y,l,p,_,w){if(Ln(y,Uint8Array)&&(y=A.from(y,y.offset,y.byteLength)),!A.isBuffer(y))throw new TypeError('The "target" argument must be one of type Buffe	r or Uint8Array. Received type '+typeof y);if(l===void 0&&(l=0),p===void 0&&(p=y?y.length:0),_===void 0&&(_=0),w===void 0&&(w=this.length),l<0||p>y.length||_<0||w>this.length)throw new RangeError("out of range index");if(_>=w&&l>=p)return 0;if(_>=w)return-1;if(l>=p)return 1;if(l>>>=0,p>>>=0,_>>>=0,w>>>=0,this===y)return 0;let B=w-_,X=p-l,Me=Math.min(B,X),$e=this.slice(_,w),rt=y.slice(l,p);for(let Je=0;Je<Me;++Je)if($e[Je]!==rt[Je]){B=$e[Je],X=rt[Je];break}return B<X?-1:X<B?1:0},"compare");function W(y,l,p,_,w){if(y.length===0)return-1;if(typeof p=="string"?(_=p,p=0):p>2147483647?p=2147483647:p<-2147483648&&(p=-2147483648),p=+p,hr(p)&&(p=w?0:y.length-1),p<0&&(p=y.length+p),p>=y.length){if(w)return-1;p=y.length-1}else if(p<0)if(w)p=0;else return-1;if(typeof l=="string"&&(l=A.from(l,_)),A.isBuffer(l))return l.length===0?-1:he(y,l,p,_,w);if(typeof l=="number")return l=l&255,typeof Uint8Array.prototype.indexOf=="function"?w?Uint8Array.prototype.indexOf.call(y,l,p):Uint8Array.prototype.lastIndexOf.call(y,l,p):he(y,[l],p,_,w);throw new TypeError("val must be string, number or Buffer")}h(W,"bid	irectionalIndexOf");function he(y,l,p,_,w){let B=1,X=y.length,Me=l.length;if(_!==void 0&&(_=String(_).toLowerCase(),_==="ucs2"||_==="ucs-2"||_==="utf16le"||_==="	utf-16le")){if(y.length<2||l.length<2)return-1;B=2,X/=2,Me/=2,p/=2}function $e(Je,pt){return B===1?Je[pt]:Je.readUInt16BE(pt*B)}h($e,"read");let rt;if(w){let Je=-1;for(rt=p;rt<X;rt++)if($e(y,rt)===$e(l,Je===-1?0:rt-Je)){if(Je===-1&&(Je=rt),rt-Je+1===Me)return Je*B}else Je!==-1&&(rt-=rt-Je),Je=-1}else for(p+Me>X&&(p=X-Me),rt=p;rt>=0;rt--){let Je=!0;for(let pt=0;pt<Me;pt++)if($e(y,rt+pt)!==$e(l,pt)){Je=!1;break}if(Je)return rt}return-1}h(he,"arrayIndexOf"),A.prototype.includes=h(function(y,l,p){return this.indexOf(y,l,p)!==-1},"includes"),A.prototype.indexOf=h(function(y,l,p){return W(this,y,l,p,!0)},"indexOf"),A.prototype.lastIndexOf=h(function(y,l,p){return W(this,y,l,p,!1)},"lastIndexOf");function fe(y,l,p,_){p=Number(p)||0;let w=y.length-p;_?(_=Number(_),_>w&&(_=w)):_=w;let B=l.length;_>B/2&&(_=B/2);let X;for(X=0;X<_;++X){let Me=parseInt(l.substr(X*2,2),16);if(hr(Me))return X;y[p+X]=Me}return X}h(fe,"hexWrite");function se(y,l,p,_){return Us(li(l,y.length-p),y,p,_)}h(se,"utf8Write");function we(y,l,p,_){return Us(Vs(l),y,p,_)}h(we,"asciiWrite");function ye(y,l,p,_){return Us(Ui(l),y,p,_)}h(ye,"base64Write");function He(y,l,p,_){return Us(Ba(l,y.length-p),y,p,_)}h(He,"ucs2Write"),A.prototype.write=h(function(y,l,p,_){if(l===void 0)_="utf8",p=this.length,l=0;else if(p===void 0&&typeof l=="string")_=l,p=this.length,l=0;else if(isFinite(l))l=l>>>0,isFinite(p)?(p=p>>>0,_===void 0&&(_="utf8")):(_=p,p=void 0);else throw new Error("Buffer.wri	te(string, encoding, offset[, length]) is no longer supported");let w=this.length-l;if((p===void 0||p>w)&&(p=w),y.length>0&&(p<0||l<0)||l>this.length)throw new RangeError("Attempt to write outside buffer bounds");_||(_="utf8");let B=!1;for(;;)switch(_){case"	hex":return fe(this,y,l,p);case"utf8":case"utf-8":return se(this,y,l,p);case"asc	ii":case"latin1":case"binary":return we(this,y,l,p);case"base64":return ye(this,y,l,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return He(this,y,l,p);default:if(B)throw new TypeError("Unknown encoding: "+_);_=(""+_).toLowerCase(),B=!0}},"	write"),A.prototype.toJSON=h(function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},"toJSON");function Ke(y,l,p){return l===0&&p===y.length?D.fromByteArray(y):D.fromByteArray(y.slice(l,p))}h(Ke,"base64Slice");function Te(y,l,p){p=Math.min(y.length,p);let _=[],w=l;for(;w<p;){let B=y[w],X=null,Me=B>239?4:B>223?3:B>191?2:1;if(w+Me<=p){let $e,rt,Je,pt;switch(Me){case 1:B<128&&(X=B);break;case 2:$e=y[w+1],($e&192)===128&&(pt=(B&31)<<6|$e&63,pt>127&&(X=pt));break;case 3:$e=y[w+1],rt=y[w+2],($e&192)===128&&(rt&192)===128&&(pt=(B&15)<<12|($e&63)<<6|rt&63,pt>2047&&(pt<55296||pt>57343)&&(X=pt));break;case 4:$e=y[w+1],rt=y[w+2],Je=y[w+3],($e&192)===128&&(rt&192)===128&&(Je&192)===128&&(pt=(B&15)<<18|($e&63)<<12|(rt&63)<<6|Je&63,pt>65535&&pt<1114112&&(X=pt))}}X===null?(X=65533,Me=1):X>65535&&(X-=65536,_.push(X>>>10&1023|55296),X=56320|X&1023),_.push(X),w+=Me}return We(_)}h(Te,"utf8Slice");var Ue=4096;function We(y){let l=y.length;if(l<=Ue)return String.fromCharCode.apply(String,y);let p="",_=0;for(;_<l;)p+=String.fromCharCode.apply(String,y.slice(_,_+=Ue));return p}h(We,"d	ecodeCodePointsArray");function Qe(y,l,p){let _="";p=Math.min(y.length,p);for(let w=l;w<p;++w)_+=String.fromCharCode(y[w]&127);return _}h(Qe,"asciiSlice");function lt(y,l,p){let _="";p=Math.min(y.length,p);for(let w=l;w<p;++w)_+=String.fromCharCode(y[w]);return _}h(lt,"latin1Slice");function vt(y,l,p){let _=y.length;(!l||l<0)&&(l=0),(!p||p<0||p>_)&&(p=_);let w="";for(let B=l;B<p;++B)w+=Rn[y[B]];return w}h(vt,"he	xSlice");function Ht(y,l,p){let _=y.slice(l,p),w="";for(let B=0;B<_.length-1;B+=2)w+=String.fromCharCode(_[B]+_[B+1]*256);return w}h(Ht,"utf16leSlice"),A.prototype.slice=h(function(y,l){let p=this.length;y=~~y,l=l===void 0?p:~~l,y<0?(y+=p,y<0&&(y=0)):y>p&&(y=p),l<0?(l+=p,l<0&&(l=0)):l>p&&(l=p),l<y&&(l=y);let _=this.subarray(y,l);return Object.setPrototypeOf(_,A.prototype),_},"slice");function It(y,l,p){if(y%1!==0||y<0)throw new RangeError("offset is not uint");if(y+l>p)throw new RangeError("Trying to access beyond buffer length")}h(It,"checkOffset"),A.prototype.readUintLE=A.prototype.readUIntLE=h(function(y,l,p){y=y>>>0,l=l>>>0,p||It(y,l,this.length);let _=this[y],w=1,B=0;for(;++B<l&&(w*=256);)_+=this[y+B]*w;return _},"readUIntLE"),A.prototype.readUintBE=A.prototype.readUIntBE=h(function(y,l,p){y=y>>>0,l=l>>>0,p||It(y,l,this.length);let _=this[y+--l],w=1;for(;l>0&&(w*=256);)_+=this[y+--l]*w;return _},"re	adUIntBE"),A.prototype.readUint8=A.prototype.readUInt8=h(function(y,l){return y=y>>>0,l||It(y,1,this.length),this[y]},"readUInt8"),A.prototype.readUint16LE=A.prototype.readUInt16LE=h(function(y,l){return y=y>>>0,l||It(y,2,this.length),this[y]|this[y+1]<<8},"readUInt16LE"),A.prototype.readUint16BE=A.prototype.readUInt16BE=h(function(y,l){return y=y>>>0,l||It(y,2,this.length),this[y]<<8|this[y+1]},"readUInt16BE"),A.prototype.readUint32LE=A.prototype.readUInt32LE=h(function(y,l){return y=y>>>0,l||It(y,4,this.length),(this[y]|this[y+1]<<8|this[y+2]<<16)+this[y+3]*16777216},"readUInt32LE"),A.prototype.readUint32BE=A.prototype.readUInt32BE=h(function(y,l){return y=y>>>0,l||It(y,4,this.length),this[y]*16777216+(this[y+1]<<16|this[y+2]<<8|this[y+3])},"	readUInt32BE"),A.prototype.readBigUInt64LE=Xn(h(function(y){y=y>>>0,ys(y,"offset");let l=this[y],p=this[y+7];(l===void 0||p===void 0)&&ur(y,this.length-8);let _=l+this[++y]*2**8+this[++y]*2**16+this[++y]*2**24,w=this[++y]+this[++y]*2**8+this[++y]*2**16+p*2**24;return BigInt(_)+(BigInt(w)<<BigInt(32))},"readBigUInt64LE")),A.prototype.readBigUInt64BE=Xn(h(function(y){y=y>>>0,ys(y,"offset");let l=this[y],p=this[y+7];(l===void 0||p===void 0)&&ur(y,this.length-8);let _=l*2**24+this[++y]*2**16+this[++y]*2**8+this[++y],w=this[++y]*2**24+this[++y]*2**16+this[++y]*2**8+p;return(BigInt(_)<<BigInt(32))+BigInt(w)},"readBigUInt64BE")),A.prototype.readIntLE=h(function(y,l,p){y=y>>>0,l=l>>>0,p||It(y,l,this.length);let _=this[y],w=1,B=0;for(;++B<l&&(w*=256);)_+=this[y+B]*w;return w*=128,_>=w&&(_-=Math.pow(2,8*l)),_},"readIntLE"),A.prototype.readIntBE=h(function(y,l,p){y=y>>>0,l=l>>>0,p||It(y,l,this.length);let _=l,w=1,B=this[y+--_];for(;_>0&&(w*=256);)B+=this[y+--_]*w;return w*=128,B>=w&&(B-=Math.pow(2,8*l)),B},"readIntBE"),A.prototype.readInt8=h(function(y,l){return y=y>>>0,l||It(y,1,this.length),this[y]&128?(255-this[y]+1)*-1:this[y]},"readInt8"),A.prototype.readInt16LE=h(function(y,l){y=y>>>0,l||It(y,2,this.length);let p=this[y]|this[y+1]<<8;return p&32768?p|4294901760:p},"readInt16LE"),A.prototype.readInt16BE=h(function(y,l){y=y>>>0,l||It(y,2,this.length);let p=this[y+1]|this[y]<<8;return p&32768?p|4294901760:p},"readInt16BE"),A.prototype.readInt32LE=h(function(y,l){return y=y>>>0,l||It(y,4,this.length),this[y]|this[y+1]<<8|this[y+2]<<16|this[y+3]<<24},"readInt32LE"),A.prototype.readInt32BE=h(function(y,l){return y=y>>>0,l||It(y,4,this.length),this[y]<<24|this[y+1]<<16|this[y+2]<<8|this[y+3]},"readInt32BE"),A.prototype.readBigInt64LE=Xn(h(function(y){y=y>>>0,ys(y,"offset");let l=this[y],p=this[y+7];(l===void 0||p===void 0)&&ur(y,this.length-8);let _=this[y+4]+this[y+5]*2**8+this[y+6]*2**16+(p<<24);return(BigInt(_)<<BigInt(32))+BigInt(l+this[++y]*2**8+this[++y]*2**16+this[++y]*2**24)},"readB	igInt64LE")),A.prototype.readBigInt64BE=Xn(h(function(y){y=y>>>0,ys(y,"offset");let l=this[y],p=this[y+7];(l===void 0||p===void 0)&&ur(y,this.length-8);let _=(l<<24)+this[++y]*2**16+this[++y]*2**8+this[++y];return(BigInt(_)<<BigInt(32))+BigInt(this[++y]*2**24+this[++y]*2**16+this[++y]*2**8+p)},"readBigInt64BE")),A.prototype.readFloatLE=h(function(y,l){return y=y>>>0,l||It(y,4,this.length),C.read(this,y,!0,23,4)},"readFloatLE"),A.prototype.readFloatBE=h(function(y,l){return y=y>>>0,l||It(y,4,this.length),C.read(this,y,!1,23,4)},"readFloatBE"),A.prototype.readDoubleLE=h(function(y,l){return y=y>>>0,l||It(y,8,this.length),C.read(this,y,!0,52,8)},"r	eadDoubleLE"),A.prototype.readDoubleBE=h(function(y,l){return y=y>>>0,l||It(y,8,this.length),C.read(this,y,!1,52,8)},"readDoubleBE");function kt(y,l,p,_,w,B){if(!A.isBuffer(y))throw new TypeError('"buffer" argument must be a Buffer instance');if(l>w||l<B)throw new RangeError('"value" argument is out of bounds');if(p+_>y.length)throw new RangeError("Index out of range")}h(kt,"checkInt"),A.prototype.writeUintLE=A.prototype.writeUIntLE=h(function(y,l,p,_){if(y=+y,l=l>>>0,p=p>>>0,!_){let X=Math.pow(2,8*p)-1;kt(this,y,l,p,X,0)}let w=1,B=0;for(this[l]=y&255;++B<p&&(w*=256);)this[l+B]=y/w&255;return l+p},"writeUIntLE"),A.prototype.writeUintBE=A.prototype.writeUIntBE=h(function(y,l,p,_){if(y=+y,l=l>>>0,p=p>>>0,!_){let X=Math.pow(2,8*p)-1;kt(this,y,l,p,X,0)}let w=p-1,B=1;for(this[l+w]=y&255;--w>=0&&(B*=256);)this[l+w]=y/B&255;return l+p},"writeUI	ntBE"),A.prototype.writeUint8=A.prototype.writeUInt8=h(function(y,l,p){return y=+y,l=l>>>0,p||kt(this,y,l,1,255,0),this[l]=y&255,l+1},"writeUInt8"),A.prototype.writeUint16LE=A.prototype.writeUInt16LE=h(function(y,l,p){return y=+y,l=l>>>0,p||kt(this,y,l,2,65535,0),this[l]=y&255,this[l+1]=y>>>8,l+2},"writeUInt16LE"),A.prototype.writeUint16BE=A.prototype.writeUInt16BE=h(function(y,l,p){return y=+y,l=l>>>0,p||kt(this,y,l,2,65535,0),this[l]=y>>>8,this[l+1]=y&255,l+2},"writeUInt16BE"),A.prototype.writeUint32LE=A.prototype.writeUInt32LE=h(function(y,l,p){return y=+y,l=l>>>0,p||kt(this,y,l,4,4294967295,0),this[l+3]=y>>>24,this[l+2]=y>>>16,this[l+1]=y>>>8,this[l]=y&255,l+4},"writeUInt32LE"),A.prototype.writeUint32BE=A.prototype.writeUInt32BE=h(function(y,l,p){return y=+y,l=l>>>0,p||kt(this,y,l,4,4294967295,0),this[l]=y>>>24,this[l+1]=y>>>16,this[l+2]=y>>>8,this[l+3]=y&255,l+4},"writeUInt32BE");function Yn(y,l,p,_,w){oi(l,_,w,y,p,7);let B=Number(l&BigInt(4294967295));y[p++]=B,B=B>>8,y[p++]=B,B=B>>8,y[p++]=B,B=B>>8,y[p++]=B;let X=Number(l>>BigInt(32)&BigInt(4294967295));return y[p++]=X,X=X>>8,y[p++]=X,X=X>>8,y[p++]=X,X=X>>8,y[p++]=X,p}h(Yn,"wrtBigUInt64LE");function Pn(y,l,p,_,w){oi(l,_,w,y,p,7);let B=Number(l&BigInt(4294967295));y[p+7]=B,B=B>>8,y[p+6]=B,B=B>>8,y[p+5]=B,B=B>>8,y[p+4]=B;let X=Number(l>>BigInt(32)&BigInt(4294967295));return y[p+3]=X,X=X>>8,y[p+2]=X,X=X>>8,y[p+1]=X,X=X>>8,y[p]=X,p+8}h(Pn,"wrtBigUInt64BE"),A.prototype.writeBigUInt64LE=Xn(h(function(y,l=0){return Yn(this,y,l,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64LE")),A.prototype.writeBigUInt64BE=Xn(h(function(y,l=0){return Pn(this,y,l,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64BE")),A.prototype.writeIntLE=h(function(y,l,p,_){if(y=+y,l=l>>>0,!_){let Me=Math.pow(2,8*p-1);kt(this,y,l,p,Me-1,-Me)}let w=0,B=1,X=0;for(this[l]=y&255;++w<p&&(B*=256);)y<0&&X===0&&this[l+w-1]!==0&&(X=1),this[l+w]=(y/B>>0)-X&255;return l+p},"writeIntL	E"),A.prototype.writeIntBE=h(function(y,l,p,_){if(y=+y,l=l>>>0,!_){let Me=Math.pow(2,8*p-1);kt(this,y,l,p,Me-1,-Me)}let w=p-1,B=1,X=0;for(this[l+w]=y&255;--w>=0&&(B*=256);)y<0&&X===0&&this[l+w+1]!==0&&(X=1),this[l+w]=(y/B>>0)-X&255;return l+p},"w	riteIntBE"),A.prototype.writeInt8=h(function(y,l,p){return y=+y,l=l>>>0,p||kt(this,y,l,1,127,-128),y<0&&(y=255+y+1),this[l]=y&255,l+1},"writeInt8"),A.prototype.writeInt16LE=h(function(y,l,p){return y=+y,l=l>>>0,p||kt(this,y,l,2,32767,-32768),this[l]=y&255,this[l+1]=y>>>8,l+2},"writeInt16LE"),A.prototype.writeInt16BE=h(function(y,l,p){return y=+y,l=l>>>0,p||kt(this,y,l,2,32767,-32768),this[l]=y>>>8,this[l+1]=y&255,l+2},"writeInt16BE"),A.prototype.writeInt32LE=h(function(y,l,p){return y=+y,l=l>>>0,p||kt(this,y,l,4,2147483647,-2147483648),this[l]=y&255,this[l+1]=y>>>8,this[l+2]=y>>>16,this[l+3]=y>>>24,l+4},"writeInt32LE"),A.prototype.writeInt32BE=h(function(y,l,p){return y=+y,l=l>>>0,p||kt(this,y,l,4,2147483647,-2147483648),y<0&&(y=4294967295+y+1),this[l]=y>>>24,this[l+1]=y>>>16,this[l+2]=y>>>8,this[l+3]=y&255,l+4},"writeIn	t32BE"),A.prototype.writeBigInt64LE=Xn(h(function(y,l=0){return Yn(this,y,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64LE")),A.prototype.writeBigInt64BE=Xn(h(function(y,l=0){return Pn(this,y,l,-BigInt("0x8000000000000	000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64BE"));function gs(y,l,p,_,w,B){if(p+_>y.length)throw new RangeError("Index out of range");if(p<0)throw new RangeError("Index out of range")}h(gs,"checkIEEE754");function lr(y,l,p,_,w){return l=+l,p=p>>>0,w||gs(y,l,p,4),C.write(y,l,p,_,23,4),p+4}h(lr,"writeFloat"),A.prototype.writeFloatLE=h(function(y,l,p){return lr(this,y,l,!0,p)},"writeFloatLE"),A.prototype.writeFloatBE=h(function(y,l,p){return lr(this,y,l,!1,p)},"writeFloatBE");function Va(y,l,p,_,w){return l=+l,p=p>>>0,w||gs(y,l,p,8),C.write(y,l,p,_,52,8),p+8}h(Va,"writeDouble"),A.prototype.writeDoubleLE=h(function(y,l,p){return Va(this,y,l,!0,p)},"writeDoubleLE"),A.prototype.writeDoubleBE=h(function(y,l,p){return Va(this,y,l,!1,p)},"writeDoubleBE"),A.prototype.copy=h(function(y,l,p,_){if(!A.isBuffer(y))throw new TypeError("argument should be a Buffer");if(p||(p=0),!_&&_!==0&&(_=this.length),l>=y.length&&(l=y.length),l||(l=0),_>0&&_<p&&(_=p),_===p||y.length===0||this.length===0)return 0;if(l<0)throw new RangeError("targetStart out of boun	ds");if(p<0||p>=this.length)throw new RangeError("Index out of range");if(_<0)throw new RangeError("sourceEnd out of bounds");_>this.length&&(_=this.length),y.length-l<_-p&&(_=y.length-l+p);let w=_-p;return this===y&&typeof Uint8Array.prototype.copyWithin=="functio	n"?this.copyWithin(l,p,_):Uint8Array.prototype.set.call(y,this.subarray(p,_),l),w},"copy"),A.prototype.fill=h(function(y,l,p,_){if(typeof y=="string"){if(typeof l=="string"?(_=l,l=0,p=this.length):typeof p=="string"&&(_=p,p=this.length),_!==void 0&&typeof _!="string")throw new TypeError("encoding must be a string");if(typeof _=="string"&&!A.isEncoding(_))throw new TypeError("Unknown encoding: "+_);if(y.length===1){let B=y.charCodeAt(0);(_==="utf8"&&B<128||_==="latin1")&&(y=B)}}else typeof y=="number"?y=y&255:typeof y=="boolean"&&(y=Number(y));if(l<0||this.length<l||this.length<p)throw new RangeError("Out of range index");if(p<=l)return this;l=l>>>0,p=p===void 0?this.length:p>>>0,y||(y=0);let w;if(typeof y=="number")for(w=l;w<p;++w)this[w]=y;else{let B=A.isBuffer(y)?y:A.from(y,_),X=B.length;if(X===0)throw new TypeError('The value "'+y+'" is invalid for argument "value"');for(w=0;w<p-l;++w)this[w+l]=B[w%X]}return this},"fill");var cr={};function Ls(y,l,p){var _;cr[y]=(_=class extends p{constructor(){super(),Object.defineProperty(this,"message",{value:l.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${y}]`,this.stack,delete this.name}get code(){return y}set code(w){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:w,writable:!0})}toString(){return`${this.name} [${y}]: ${this.message}`}},h(_,"NodeError"),_)}h(Ls,"E"),Ls("ERR_BUFFER_OUT_OF_BOUNDS",function(y){return y?`${y} is outside of buffer bounds`:"Attempt to access memory outside buffer boun	ds"},RangeError),Ls("ERR_INVALID_ARG_TYPE",function(y,l){return`The "${y}" argument must be of type number. Received type ${typeof l}`},TypeError),Ls("ERR_OUT_O	F_RANGE",function(y,l,p){let _=`The value of "${y}" is out of range.`,w=p;return Number.isInteger(p)&&Math.abs(p)>2**32?w=Cr(String(p)):typeof p=="bigint"&&(w=String(p),(p>BigInt(2)**BigInt(32)||p<-(BigInt(2)**BigInt(32)))&&(w=Cr(w)),w+="n"),_+=` It must be ${l}. Received ${w}`,_},RangeError);function Cr(y){let l="",p=y.length,_=y[0]==="-"?1:0;for(;p>=_+4;p-=3)l=`_${y.slice(p-3,p)}${l}`;return`${y.slice(0,p)}${l}`}h(Cr,"addNumericalSeparator");function Ua(y,l,p){ys(l,"offset"),(y[l]===void 0||y[l+p]===void 0)&&ur(l,y.length-(p+1))}h(Ua,"checkBounds");function oi(y,l,p,_,w,B){if(y>p||y<l){let X=typeof l=="bigint"?"n":"",Me;throw B>3?l===0||l===BigInt(0)?Me=`>= 0${X} and < 2${X} ** ${(B+1)*8}${X}`:Me=`>= -(2${X} ** ${(B+1)*8-1}${X}) and < 2 ** ${(B+1)*8-1}${X}`:Me=`>= ${l}${X} and <= ${p}${X}`,new cr.ERR_OUT_OF_RANGE("value",Me,y)}Ua(_,w,B)}h(oi,"checkIntBI");function ys(y,l){if(typeof y!="number")throw new cr.ERR_INVALID_ARG_TYPE(l,"number",y)}h(ys,"validateNumber");function ur(y,l,p){throw Math.floor(y)!==y?(ys(y,p),new cr.ERR_OUT_OF_RANGE(p||"offset","an integer",y)):l<0?new cr.ERR_BUFFER_OUT_OF_BOUNDS:new cr.ERR_OUT_OF_RANGE(p||"offset",`>= ${p?1:0} and <= ${l}`,y)}h(ur,"boundsError");var Li=/[^+/0-9A-Za-z-_]/g;function Vi(y){if(y=y.split("=")[0],y=y.trim().replace(Li,""),y.length<2)return"";for(;y.length%4!==0;)y=y+"=";return y}h(Vi,"base64clean");function li(y,l){l=l||1/0;let p,_=y.length,w=null,B=[];for(let X=0;X<_;++X){if(p=y.charCodeAt(X),p>55295&&p<57344){if(!w){if(p>56319){(l-=3)>-1&&B.push(239,191,189);continue}else if(X+1===_){(l-=3)>-1&&B.push(239,191,189);continue}w=p;continue}if(p<56320){(l-=3)>-1&&B.push(239,191,189),w=p;continue}p=(w-55296<<10|p-56320)+65536}else w&&(l-=3)>-1&&B.push(239,191,189);if(w=null,p<128){if((l-=1)<0)break;B.push(p)}else if(p<2048){if((l-=2)<0)break;B.push(p>>6|192,p&63|128)}else if(p<65536){if((l-=3)<0)break;B.push(p>>12|224,p>>6&63|128,p&63|128)}else if(p<1114112){if((l-=4)<0)break;B.push(p>>18|240,p>>12&63|128,p>>6&63|128,p&63|128)}else throw new Error("Invalid code point")}return B}h(li,"utf8ToBytes");function Vs(y){let l=[];for(let p=0;p<y.length;++p)l.push(y.charCodeAt(p)&255);return l}h(Vs,"asciiToBytes");function Ba(y,l){let p,_,w,B=[];for(let X=0;X<y.length&&!((l-=2)<0);++X)p=y.charCodeAt(X),_=p>>8,w=p%256,B.push(w),B.push(_);return B}h(Ba,"utf16leToBytes");function Ui(y){return D.toByteArray(Vi(y))}h(Ui,"base64T	oBytes");function Us(y,l,p,_){let w;for(w=0;w<_&&!(w+p>=l.length||w>=y.length);++w)l[w+p]=y[w];return w}h(Us,"blitBuffer");function Ln(y,l){return y instanceof l||y!=null&&y.constructor!=null&&y.constructor.name!=null&&y.constructor.name===l.name}h(Ln,"isInstance");function hr(y){return y!==y}h(hr,"numberIsNaN");var Rn=(function(){let y="0123456789abcdef",l=new Array(256);for(let p=0;p<16;++p){let _=p*16;for(let w=0;w<16;++w)l[_+w]=y[p]+y[w]}return l})();function Xn(y){return typeof BigInt>"u"?za:y}h(Xn,"defineBigIntMethod");function za(){throw new Error("BigInt not supported")}h(za,"BufferBigIntNotDefined")}),ke,Pe,xe,ue,Re,P=v(()=>{ke=globalThis,Pe=globalThis.setImmediate??($=>setTimeout($,0)),xe=globalThis.crypto??{},xe.subtle??(xe.subtle={}),ue=typeof globalThis.Buffer=="function"&&typeof globalThis.Buffer.allocUnsafe=="function"?globalThis.Buffer:De().Buffer,Re=globalThis.process??{},Re.env??(Re.env={});try{Re.nextTick(()=>{})}catch{let $=Promise.resolve();Re.nextTick=$.then.bind($)}}),L=b(($,D)=>{P();var C=typeof Reflect=="object"?Reflect:null,O=C&&typeof C.apply=="function"?C.apply:h(function(W,he,fe){return Function.prototype.apply.call(W,he,fe)},"ReflectApply"),N;C&&typeof C.ownKeys=="function"?N=C.ownKeys:Object.getOwnPropertySymbols?N=h(function(W){return Object.getOwnPropertyNames(W).concat(Object.getOwnPropertySymbols(W))},"ReflectOwnKeys"):N=h(function(W){return Object.getOwnPropertyNames(W)},"ReflectOwnKeys");function T(W){console&&console.warn&&console.warn(W)}h(T,"ProcessEmitWarning");var R=Number.isNaN||h(function(W){return W!==W},"NumberIsNaN");function A(){A.init.call(this)}h(A,"EventEmitter"),D.exports=A,D.exports.once=ie,A.EventEmitter=A,A.prototype._events=void 0,A.prototype._eventsCount=0,A.prototype._maxListeners=void 0;var k=10;function Z(W){if(typeof W!="functi	on")throw new TypeError('The "listener" argument must be of type Function. Recei	ved type '+typeof W)}h(Z,"checkListener"),Object.defineProperty(A,"defaultMaxLi	steners",{enumerable:!0,get:h(function(){return k},"get"),set:h(function(W){if(typeof W!="number"||W<0||R(W))throw new RangeError('The value of "defaultMaxListeners" is	 out of range. It must be a non-negative number. Received '+W+".");k=W},"set")}),A.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},A.prototype.setMaxListeners=h(function(W){if(typeof W!="number"||W<0||R(W))throw new RangeError('The value of "n" is out of range. It 	must be a non-negative number. Received '+W+".");return this._maxListeners=W,this},"setMaxListeners");function q(W){return W._maxListeners===void 0?A.defaultMaxListeners:W._maxListeners}h(q,"_getMaxListeners"),A.prototype.getMaxListeners=h(function(){return q(this)},"getMaxListeners"),A.prototype.emit=h(function(W){for(var he=[],fe=1;fe<arguments.length;fe++)he.push(arguments[fe]);var se=W==="error",we=this._events;if(we!==void 0)se=se&&we.error===void 0;else if(!se)return!1;if(se){var ye;if(he.length>0&&(ye=he[0]),ye instanceof Error)throw ye;var He=new Error("Unhandled error."+(ye?" ("+ye.message+")":""));throw He.context=ye,He}var Ke=we[W];if(Ke===void 0)return!1;if(typeof Ke=="function")O(Ke,this,he);else for(var Te=Ke.length,Ue=U(Ke,Te),fe=0;fe<Te;++fe)O(Ue[fe],this,he);return!0},"emit");function Q(W,he,fe,se){var we,ye,He;if(Z(fe),ye=W._events,ye===void 0?(ye=W._events=Object.create(null),W._eventsCount=0):(ye.newListener!==void 0&&(W.emit("newListener",he,fe.listener?fe.listener:fe),ye=W._events),He=ye[he]),He===void 0)He=ye[he]=fe,++W._eventsCount;else if(typeof He=="function"?He=ye[he]=se?[fe,He]:[He,fe]:se?He.unshift(fe):He.push(fe),we=q(W),we>0&&He.length>we&&!He.warned){He.warned=!0;var Ke=new Error("Po	ssible EventEmitter memory leak detected. "+He.length+" "+String(he)+" listeners a	dded. Use emitter.setMaxListeners() to increase limit");Ke.name="MaxListenersExce	ededWarning",Ke.emitter=W,Ke.type=he,Ke.count=He.length,T(Ke)}return W}h(Q,"_addList	ener"),A.prototype.addListener=h(function(W,he){return Q(this,W,he,!1)},"addListe	ner"),A.prototype.on=A.prototype.addListener,A.prototype.prependListener=h(function(W,he){return Q(this,W,he,!0)},"prependListener");function V(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}h(V,"onceWrapper");function Y(W,he,fe){var se={fired:!1,wrapFn:void 0,target:W,type:he,listener:fe},we=V.bind(se);return we.listener=fe,se.wrapFn=we,we}h(Y,"_onceWrap"),A.prototype.once=h(function(W,he){return Z(he),this.on(W,Y(this,W,he)),this},"once"),A.prototype.prependOnceListener=h(function(W,he){return Z(he),this.prependListener(W,Y(this,W,he)),this},"prependOnceListener"),A.prototype.removeListener=h(function(W,he){var fe,se,we,ye,He;if(Z(he),se=this._events,se===void 0)return this;if(fe=se[W],fe===void 0)return this;if(fe===he||fe.listener===he)--this._eventsCount===0?this._events=Object.create(null):(delete se[W],se.removeListener&&this.emit("removeListener",W,fe.listener||he));else if(typeof fe!="function"){for(we=-1,ye=fe.length-1;ye>=0;ye--)if(fe[ye]===he||fe[ye].listener===he){He=fe[ye].listener,we=ye;break}if(we<0)return this;we===0?fe.shift():J(fe,we),fe.length===1&&(se[W]=fe[0]),se.removeListener!==void 0&&this.emit("removeListener",W,He||he)}return this},"removeListener"),A.prototype.off=A.prototype.removeListener,A.prototype.removeAllListeners=h(function(W){var he,fe,se;if(fe=this._events,fe===void 0)return this;if(fe.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):fe[W]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete fe[W]),this;if(arguments.length===0){var we=Object.keys(fe),ye;for(se=0;se<we.length;++se)ye=we[se],ye!=="removeListener"&&this.removeAllListeners(ye);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(he=fe[W],typeof he=="function")this.removeListener(W,he);else if(he!==void 0)for(se=he.length-1;se>=0;se--)this.removeListener(W,he[se]);return this},"removeAllListeners");function x(W,he,fe){var se=W._events;if(se===void 0)return[];var we=se[he];return we===void 0?[]:typeof we=="function"?fe?[we.listener||we]:[we]:fe?ee(we):U(we,we.length)}h(x,"_listeners"),A.prototype.listeners=h(function(W){return x(this,W,!0)},"listeners"),A.prototype.rawListeners=h(function(W){return x(this,W,!1)},"rawListeners"),A.listenerCount=function(W,he){return typeof W.listenerCount=="function"?W.listenerCount(he):I.call(W,he)},A.prototype.listenerCount=I;function I(W){var he=this._events;if(he!==void 0){var fe=he[W];if(typeof fe=="function")return 1;if(fe!==void 0)return fe.length}return 0}h(I,"listenerCount"),A.prototype.eventNames=h(function(){return this._eventsCount>0?N(this._events):[]},"eventNames");function U(W,he){for(var fe=new Array(he),se=0;se<he;++se)fe[se]=W[se];return fe}h(U,"arrayClone");function J(W,he){for(;he+1<W.length;he++)W[he]=W[he+1];W.pop()}h(J,"spliceOne");function ee(W){for(var he=new Array(W.length),fe=0;fe<he.length;++fe)he[fe]=W[fe].listener||W[fe];return he}h(ee,"unwrapListeners");function ie(W,he){return new Promise(function(fe,se){function we(He){W.removeListener(he,ye),se(He)}h(we,"errorListener");function ye(){typeof W.removeListener=="function"&&W.removeListener("error",we),fe([].slice.call(arguments))}h(ye,"resolver"),Se(W,he,ye,{once:!0}),he!=="error"&&be(W,we,{once:!0})})}h(ie,"once");function be(W,he,fe){typeof W.on=="function"&&Se(W,"error",he,fe)}h(be,"addErrorHandlerIfEventEmitter");function Se(W,he,fe,se){if(typeof W.on=="function")se.once?W.once(he,fe):W.on(he,fe);else if(typeof W.addEventListener=="function")W.addEventListener(he,h(function we(ye){se.once&&W.removeEventListener(he,we),fe(ye)},"wrapListener"));else throw new TypeError('The "emitter" argument must be of type EventEmitter. Receiv	ed type '+typeof W)}h(Se,"eventTargetAgnosticAddListener")}),H={};E(H,{default:()=>ne});var ne,F=v(()=>{P(),ne={}});function le($){let D=1779033703,C=3144134277,O=1013904242,N=2773480762,T=1359893119,R=2600822924,A=528734635,k=1541459225,Z=0,q=0,Q=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],V=h((ee,ie)=>ee>>>ie|ee<<32-ie,"rrot"),Y=new Uint32Array(64),x=new Uint8Array(64),I=h(()=>{for(let we=0,ye=0;we<16;we++,ye+=4)Y[we]=x[ye]<<24|x[ye+1]<<16|x[ye+2]<<8|x[ye+3];for(let we=16;we<64;we++){let ye=V(Y[we-15],7)^V(Y[we-15],18)^Y[we-15]>>>3,He=V(Y[we-2],17)^V(Y[we-2],19)^Y[we-2]>>>10;Y[we]=Y[we-16]+ye+Y[we-7]+He|0}let ee=D,ie=C,be=O,Se=N,W=T,he=R,fe=A,se=k;for(let we=0;we<64;we++){let ye=V(W,6)^V(W,11)^V(W,25),He=W&he^~W&fe,Ke=se+ye+He+Q[we]+Y[we]|0,Te=V(ee,2)^V(ee,13)^V(ee,22),Ue=ee&ie^ee&be^ie&be,We=Te+Ue|0;se=fe,fe=he,he=W,W=Se+Ke|0,Se=be,be=ie,ie=ee,ee=Ke+We|0}D=D+ee|0,C=C+ie|0,O=O+be|0,N=N+Se|0,T=T+W|0,R=R+he|0,A=A+fe|0,k=k+se|0,q=0},"process"),U=h(ee=>{typeof ee=="string"&&(ee=new TextEncoder().encode(ee));for(let ie=0;ie<ee.length;ie++)x[q++]=ee[ie],q===64&&I();Z+=ee.length},"add"),J=h(()=>{if(x[q++]=128,q==64&&I(),q+8>64){for(;q<64;)x[q++]=0;I()}for(;q<58;)x[q++]=0;let ee=Z*8;x[q++]=ee/1099511627776&255,x[q++]=ee/4294967296&255,x[q++]=ee>>>24,x[q++]=ee>>>16&255,x[q++]=ee>>>8&255,x[q++]=ee&255,I();let ie=new Uint8Array(32);return ie[0]=D>>>24,ie[1]=D>>>16&255,ie[2]=D>>>8&255,ie[3]=D&255,ie[4]=C>>>24,ie[5]=C>>>16&255,ie[6]=C>>>8&255,ie[7]=C&255,ie[8]=O>>>24,ie[9]=O>>>16&255,ie[10]=O>>>8&255,ie[11]=O&255,ie[12]=N>>>24,ie[13]=N>>>16&255,ie[14]=N>>>8&255,ie[15]=N&255,ie[16]=T>>>24,ie[17]=T>>>16&255,ie[18]=T>>>8&255,ie[19]=T&255,ie[20]=R>>>24,ie[21]=R>>>16&255,ie[22]=R>>>8&255,ie[23]=R&255,ie[24]=A>>>24,ie[25]=A>>>16&255,ie[26]=A>>>8&255,ie[27]=A&255,ie[28]=k>>>24,ie[29]=k>>>16&255,ie[30]=k>>>8&255,ie[31]=k&255,ie},"digest");return $===void 0?{add:U,digest:J}:(U($),J())}var G=v(()=>{P(),h(le,"sha256")}),gt,Ct,Ee=v(()=>{P(),gt=class $s{constructor(){re(this,"_dataLength",0),re(this,"_bufferLength",0),re(this,"_state",new Int32Array(4)),re(this,"_buffer",new ArrayBuffer(68)),re(this,"_buffer8"),re(this,"_buffer32"),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashByteArray(D,C=!1){return this.onePassHasher.start().appendByteArray(D).end(C)}static hashStr(D,C=!1){return this.onePassHasher.start().appendStr(D).end(C)}static hashAsciiStr(D,C=!1){return this.onePassHasher.start().appendAsciiStr(D).end(C)}static _hex(D){let C=$s.hexChars,O=$s.hexOut,N,T,R,A;for(A=0;A<4;A+=1)for(T=A*8,N=D[A],R=0;R<8;R+=2)O[T+1+R]=C.charAt(N&15),N>>>=4,O[T+0+R]=C.charAt(N&15),N>>>=4;return O.join("")}static _md5cycle(D,C){let O=D[0],N=D[1],T=D[2],R=D[3];O+=(N&T|~N&R)+C[0]-680876936|0,O=(O<<7|O>>>25)+N|0,R+=(O&N|~O&T)+C[1]-389564586|0,R=(R<<12|R>>>20)+O|0,T+=(R&O|~R&N)+C[2]+606105819|0,T=(T<<17|T>>>15)+R|0,N+=(T&R|~T&O)+C[3]-1044525330|0,N=(N<<22|N>>>10)+T|0,O+=(N&T|~N&R)+C[4]-176418897|0,O=(O<<7|O>>>25)+N|0,R+=(O&N|~O&T)+C[5]+1200080426|0,R=(R<<12|R>>>20)+O|0,T+=(R&O|~R&N)+C[6]-1473231341|0,T=(T<<17|T>>>15)+R|0,N+=(T&R|~T&O)+C[7]-45705983|0,N=(N<<22|N>>>10)+T|0,O+=(N&T|~N&R)+C[8]+1770035416|0,O=(O<<7|O>>>25)+N|0,R+=(O&N|~O&T)+C[9]-1958414417|0,R=(R<<12|R>>>20)+O|0,T+=(R&O|~R&N)+C[10]-42063|0,T=(T<<17|T>>>15)+R|0,N+=(T&R|~T&O)+C[11]-1990404162|0,N=(N<<22|N>>>10)+T|0,O+=(N&T|~N&R)+C[12]+1804603682|0,O=(O<<7|O>>>25)+N|0,R+=(O&N|~O&T)+C[13]-40341101|0,R=(R<<12|R>>>20)+O|0,T+=(R&O|~R&N)+C[14]-1502002290|0,T=(T<<17|T>>>15)+R|0,N+=(T&R|~T&O)+C[15]+1236535329|0,N=(N<<22|N>>>10)+T|0,O+=(N&R|T&~R)+C[1]-165796510|0,O=(O<<5|O>>>27)+N|0,R+=(O&T|N&~T)+C[6]-1069501632|0,R=(R<<9|R>>>23)+O|0,T+=(R&N|O&~N)+C[11]+643717713|0,T=(T<<14|T>>>18)+R|0,N+=(T&O|R&~O)+C[0]-373897302|0,N=(N<<20|N>>>12)+T|0,O+=(N&R|T&~R)+C[5]-701558691|0,O=(O<<5|O>>>27)+N|0,R+=(O&T|N&~T)+C[10]+38016083|0,R=(R<<9|R>>>23)+O|0,T+=(R&N|O&~N)+C[15]-660478335|0,T=(T<<14|T>>>18)+R|0,N+=(T&O|R&~O)+C[4]-405537848|0,N=(N<<20|N>>>12)+T|0,O+=(N&R|T&~R)+C[9]+568446438|0,O=(O<<5|O>>>27)+N|0,R+=(O&T|N&~T)+C[14]-1019803690|0,R=(R<<9|R>>>23)+O|0,T+=(R&N|O&~N)+C[3]-187363961|0,T=(T<<14|T>>>18)+R|0,N+=(T&O|R&~O)+C[8]+1163531501|0,N=(N<<20|N>>>12)+T|0,O+=(N&R|T&~R)+C[13]-1444681467|0,O=(O<<5|O>>>27)+N|0,R+=(O&T|N&~T)+C[2]-51403784|0,R=(R<<9|R>>>23)+O|0,T+=(R&N|O&~N)+C[7]+1735328473|0,T=(T<<14|T>>>18)+R|0,N+=(T&O|R&~O)+C[12]-1926607734|0,N=(N<<20|N>>>12)+T|0,O+=(N^T^R)+C[5]-378558|0,O=(O<<4|O>>>28)+N|0,R+=(O^N^T)+C[8]-2022574463|0,R=(R<<11|R>>>21)+O|0,T+=(R^O^N)+C[11]+1839030562|0,T=(T<<16|T>>>16)+R|0,N+=(T^R^O)+C[14]-35309556|0,N=(N<<23|N>>>9)+T|0,O+=(N^T^R)+C[1]-1530992060|0,O=(O<<4|O>>>28)+N|0,R+=(O^N^T)+C[4]+1272893353|0,R=(R<<11|R>>>21)+O|0,T+=(R^O^N)+C[7]-155497632|0,T=(T<<16|T>>>16)+R|0,N+=(T^R^O)+C[10]-1094730640|0,N=(N<<23|N>>>9)+T|0,O+=(N^T^R)+C[13]+681279174|0,O=(O<<4|O>>>28)+N|0,R+=(O^N^T)+C[0]-358537222|0,R=(R<<11|R>>>21)+O|0,T+=(R^O^N)+C[3]-722521979|0,T=(T<<16|T>>>16)+R|0,N+=(T^R^O)+C[6]+76029189|0,N=(N<<23|N>>>9)+T|0,O+=(N^T^R)+C[9]-640364487|0,O=(O<<4|O>>>28)+N|0,R+=(O^N^T)+C[12]-421815835|0,R=(R<<11|R>>>21)+O|0,T+=(R^O^N)+C[15]+530742520|0,T=(T<<16|T>>>16)+R|0,N+=(T^R^O)+C[2]-995338651|0,N=(N<<23|N>>>9)+T|0,O+=(T^(N|~R))+C[0]-198630844|0,O=(O<<6|O>>>26)+N|0,R+=(N^(O|~T))+C[7]+1126891415|0,R=(R<<10|R>>>22)+O|0,T+=(O^(R|~N))+C[14]-1416354905|0,T=(T<<15|T>>>17)+R|0,N+=(R^(T|~O))+C[5]-57434055|0,N=(N<<21|N>>>11)+T|0,O+=(T^(N|~R))+C[12]+1700485571|0,O=(O<<6|O>>>26)+N|0,R+=(N^(O|~T))+C[3]-1894986606|0,R=(R<<10|R>>>22)+O|0,T+=(O^(R|~N))+C[10]-1051523|0,T=(T<<15|T>>>17)+R|0,N+=(R^(T|~O))+C[1]-2054922799|0,N=(N<<21|N>>>11)+T|0,O+=(T^(N|~R))+C[8]+1873313359|0,O=(O<<6|O>>>26)+N|0,R+=(N^(O|~T))+C[15]-30611744|0,R=(R<<10|R>>>22)+O|0,T+=(O^(R|~N))+C[6]-1560198380|0,T=(T<<15|T>>>17)+R|0,N+=(R^(T|~O))+C[13]+1309151649|0,N=(N<<21|N>>>11)+T|0,O+=(T^(N|~R))+C[4]-145523070|0,O=(O<<6|O>>>26)+N|0,R+=(N^(O|~T))+C[11]-1120210379|0,R=(R<<10|R>>>22)+O|0,T+=(O^(R|~N))+C[2]+718787259|0,T=(T<<15|T>>>17)+R|0,N+=(R^(T|~O))+C[9]-343485551|0,N=(N<<21|N>>>11)+T|0,D[0]=O+D[0]|0,D[1]=N+D[1]|0,D[2]=T+D[2]|0,D[3]=R+D[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set($s.stateIdentity),this}appendStr(D){let C=this._buffer8,O=this._buffer32,N=this._bufferLength,T,R;for(R=0;R<D.length;R+=1){if(T=D.charCodeAt(R),T<128)C[N++]=T;else if(T<2048)C[N++]=(T>>>6)+192,C[N++]=T&63|128;else if(T<55296||T>56319)C[N++]=(T>>>12)+224,C[N++]=T>>>6&63|128,C[N++]=T&63|128;else{if(T=(T-55296)*1024+(D.charCodeAt(++R)-56320)+65536,T>1114111)throw new Error("Unicode standard	 supports code points up to U+10FFFF");C[N++]=(T>>>18)+240,C[N++]=T>>>12&63|128,C[N++]=T>>>6&63|128,C[N++]=T&63|128}N>=64&&(this._dataLength+=64,$s._md5cycle(this._state,O),N-=64,O[0]=O[16])}return this._bufferLength=N,this}appendAsciiStr(D){let C=this._buffer8,O=this._buffer32,N=this._bufferLength,T,R=0;for(;;){for(T=Math.min(D.length-R,64-N);T--;)C[N++]=D.charCodeAt(R++);if(N<64)break;this._dataLength+=64,$s._md5cycle(this._state,O),N=0}return this._bufferLength=N,this}appendByteArray(D){let C=this._buffer8,O=this._buffer32,N=this._bufferLength,T,R=0;for(;;){for(T=Math.min(D.length-R,64-N);T--;)C[N++]=D[R++];if(N<64)break;this._dataLength+=64,$s._md5cycle(this._state,O),N=0}return this._bufferLength=N,this}getState(){let D=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[D[0],D[1],D[2],D[3]]}}setState(D){let C=D.buffer,O=D.state,N=this._state,T;for(this._dataLength=D.length,this._bufferLength=D.buflen,N[0]=O[0],N[1]=O[1],N[2]=O[2],N[3]=O[3],T=0;T<C.length;T+=1)this._buffer8[T]=C.charCodeAt(T)}end(D=!1){let C=this._bufferLength,O=this._buffer8,N=this._buffer32,T=(C>>2)+1;this._dataLength+=C;let R=this._dataLength*8;if(O[C]=128,O[C+1]=O[C+2]=O[C+3]=0,N.set($s.buffer32Identity.subarray(T),T),C>55&&($s._md5cycle(this._state,N),N.set($s.buffer32Identity)),R<=4294967295)N[14]=R;else{let A=R.toString(16).match(/(.*?)(.{0,8})$/);if(A===null)return;let k=parseInt(A[2],16),Z=parseInt(A[1],16)||0;N[14]=k,N[15]=Z}return $s._md5cycle(this._state,N),D?this._state:$s._hex(this._state)}},h(gt,"Md5"),re(gt,"stateIdentity",new Int32Array([1732584193,-271733879,-1732584194,271733878])),re(gt,"buffer32Identity",new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),re(gt,"hexChars","0123456789abcdef"),re(gt,"hexO	ut",[]),re(gt,"onePassHasher",new gt),Ct=gt}),Le={};E(Le,{createHash:()=>At,createHmac:()=>te,randomBytes:()=>Ye});function Ye($){return xe.getRandomValues(ue.alloc($))}function At($){if($==="sha256")return{update:h(function(D){return{digest:h(function(){return ue.from(le(D))},"digest")}},"update")};if($==="md5")return{update:h(function(D){return{digest:h(function(){return typeof D=="string"?Ct.hashStr(D):Ct.hashByteArray(D)},"digest")}},"update")};throw new Error(`Hash type '${$}' not supported`)}function te($,D){if($!=="sha256")throw new Error(`Only sha256 is supported (requested: '${$}')`);return{update:h(function(C){return{digest:h(function(){typeof D=="string"&&(D=new TextEncoder().encode(D)),typeof C=="string"&&(C=new TextEncoder().encode(C));let O=D.length;if(O>64)D=le(D);else if(O<64){let k=new Uint8Array(64);k.set(D),D=k}let N=new Uint8Array(64),T=new Uint8Array(64);for(let k=0;k<64;k++)N[k]=54^D[k],T[k]=92^D[k];let R=new Uint8Array(C.length+64);R.set(N,0),R.set(C,64);let A=new Uint8Array(96);return A.set(T,0),A.set(le(R),64),ue.from(le(A))},"digest")}},"update")}}var je=v(()=>{P(),G(),Ee(),h(Ye,"randomBytes"),h(At,"createHash"),h(te,"createHmac")}),ze=b($=>{P(),$.parse=function(N,T){return new C(N,T).parse()};var D=class K2{constructor(T,R){this.source=T,this.transform=R||O,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var T=this.source[this.position++];return T==="\\"?{value:this.source[this.position++],escaped:!0}:{value:T,escaped:!1}}record(T){this.recorded.push(T)}newEntry(T){var R;(this.recorded.length>0||T)&&(R=this.recorded.join(""),R==="NULL"&&!T&&(R=null),R!==null&&(R=this.transform(R)),this.entries.push(R),this.recorded=[])}consumeDimensions(){if(this.source[0]==="[")for(;!this.isEof();){var T=this.nextCharacter();if(T.value==="=")break}}parse(T){var R,A,k;for(this.consumeDimensions();!this.isEof();)if(R=this.nextCharacter(),R.value==="{"&&!k)this.dimension++,this.dimension>1&&(A=new K2(this.source.substr(this.position-1),this.transform),this.entries.push(A.parse(!0)),this.position+=A.position-2);else if(R.value==="}"&&!k){if(this.dimension--,!this.dimension&&(this.newEntry(),T))return this.entries}else R.value==='"'&&!R.escaped?(k&&this.newEntry(!0),k=!k):R.value===","&&!k?this.newEntry():this.record(R.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}};h(D,"ArrayParser");var C=D;function O(N){return N}h(O,"identity")}),Ve=b(($,D)=>{P();var C=ze();D.exports={create:h(function(O,N){return{parse:h(function(){return C.parse(O,N)},"parse")}},"create")}}),Xe=b(($,D)=>{P();var C=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,O=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,N=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,T=/^-?infinity$/;D.exports=h(function(q){if(T.test(q))return Number(q.replace("i","I"));var Q=C.exec(q);if(!Q)return R(q)||null;var V=!!Q[8],Y=parseInt(Q[1],10);V&&(Y=k(Y));var x=parseInt(Q[2],10)-1,I=Q[3],U=parseInt(Q[4],10),J=parseInt(Q[5],10),ee=parseInt(Q[6],10),ie=Q[7];ie=ie?1e3*parseFloat(ie):0;var be,Se=A(q);return Se!=null?(be=new Date(Date.UTC(Y,x,I,U,J,ee,ie)),Z(Y)&&be.setUTCFullYear(Y),Se!==0&&be.setTime(be.getTime()-Se)):(be=new Date(Y,x,I,U,J,ee,ie),Z(Y)&&be.setFullYear(Y)),be},"parseDate");function R(q){var Q=O.exec(q);if(Q){var V=parseInt(Q[1],10),Y=!!Q[4];Y&&(V=k(V));var x=parseInt(Q[2],10)-1,I=Q[3],U=new Date(V,x,I);return Z(V)&&U.setFullYear(V),U}}h(R,"getDate");function A(q){if(q.endsWith("+00"))return 0;var Q=N.exec(q.split(" ")[1]);if(Q){var V=Q[1];if(V==="Z")return 0;var Y=V==="-"?-1:1,x=parseInt(Q[2],10)*3600+parseInt(Q[3]||0,10)*60+parseInt(Q[4]||0,10);return x*Y*1e3}}h(A,"timeZoneOffset");function k(q){return-(q-1)}h(k,"bcYearToNegativeYear");function Z(q){return q>=0&&q<100}h(Z,"is0To99")}),_t=b(($,D)=>{P(),D.exports=O;var C=Object.prototype.hasOwnProperty;function O(N){for(var T=1;T<arguments.length;T++){var R=arguments[T];for(var A in R)C.call(R,A)&&(N[A]=R[A])}return N}h(O,"extend")}),st=b(($,D)=>{P();var C=_t();D.exports=O;function O(ee){if(!(this instanceof O))return new O(ee);C(this,J(ee))}h(O,"PostgresInterval");var N=["seconds","	minutes","hours","days","months","years"];O.prototype.toPostgres=function(){var ee=N.filter(this.hasOwnProperty,this);return this.milliseconds&&ee.indexOf("seconds")<0&&ee.push("seconds"),ee.length===0?"0":ee.map(function(ie){var be=this[ie]||0;return ie==="seconds"&&this.milliseconds&&(be=(be+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),be+" "+ie},this).join(" ")};var T={years:"Y",months:"M",days:"D",hours:"H",minutes:"	M",seconds:"S"},R=["years","months","days"],A=["hours","minutes","seconds"];O.prototype.toISOString=O.prototype.toISO=function(){var ee=R.map(be,this).join(""),ie=A.map(be,this).join("");return"P"+ee+"T"+ie;function be(Se){var W=this[Se]||0;return Se==="seconds"&&this.milliseconds&&(W=(W+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),W+T[Se]}};var k="([+-]?\\d+)",Z=k+"\\s+years?",q=k+"\\s+mons?",Q=k+"	\\s+days?",V="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",Y=new RegExp([Z,q,Q,V].map(function(ee){return"("+ee+")?"}).join("\\s*")),x={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},I=["hours","minutes","sec	onds","milliseconds"];function U(ee){var ie=ee+"000000".slice(ee.length);return parseInt(ie,10)/1e3}h(U,"parseMilliseconds");function J(ee){if(!ee)return{};var ie=Y.exec(ee),be=ie[8]==="-";return Object.keys(x).reduce(function(Se,W){var he=x[W],fe=ie[he];return!fe||(fe=W==="milliseconds"?U(fe):parseInt(fe,10),!fe)||(be&&~I.indexOf(W)&&(fe*=-1),Se[W]=fe),Se},{})}h(J,"parse")}),gn=b(($,D)=>{P(),D.exports=h(function(C){if(/^\\x/.test(C))return new ue(C.substr(2),"hex");for(var O="",N=0;N<C.length;)if(C[N]!=="\\")O+=C[N],++N;else if(/[0-7]{3}/.test(C.substr(N+1,3)))O+=String.fromCharCode(parseInt(C.substr(N+1,3),8)),N+=4;else{for(var T=1;N+T<C.length&&C[N+T]==="\\";)T++;for(var R=0;R<Math.floor(T/2);++R)O+="\\";N+=Math.floor(T/2)*2}return new ue(O,"binary")},"parseBytea")}),jt=b(($,D)=>{P();var C=ze(),O=Ve(),N=Xe(),T=st(),R=gn();function A(se){return h(function(we){return we===null?we:se(we)},"nullAllowed")}h(A,"allowNull");function k(se){return se===null?se:se==="TRUE"||se==="t"||se==="true"||se==="y"||se==="yes"||se==="on"||se==="1"}h(k,"parseBool");function Z(se){return se?C.parse(se,k):null}h(Z,"pars	eBoolArray");function q(se){return parseInt(se,10)}h(q,"parseBaseTenInt");function Q(se){return se?C.parse(se,A(q)):null}h(Q,"parseIntegerArray");function V(se){return se?C.parse(se,A(function(we){return be(we).trim()})):null}h(V,"parseBigIntegerArray");var Y=h(function(se){if(!se)return null;var we=O.create(se,function(ye){return ye!==null&&(ye=W(ye)),ye});return we.parse()},"parsePointArray"),x=h(function(se){if(!se)return null;var we=O.create(se,function(ye){return ye!==null&&(ye=parseFloat(ye)),ye});return we.parse()},"parseFloatArray"),I=h(function(se){if(!se)return null;var we=O.create(se);return we.parse()},"parseStringArray"),U=h(function(se){if(!se)return null;var we=O.create(se,function(ye){return ye!==null&&(ye=N(ye)),ye});return we.parse()},"	parseDateArray"),J=h(function(se){if(!se)return null;var we=O.create(se,function(ye){return ye!==null&&(ye=T(ye)),ye});return we.parse()},"parseIntervalArray"),ee=h(function(se){return se?C.parse(se,A(R)):null},"parseByteAArray"),ie=h(function(se){return parseInt(se,10)},"parseInteger"),be=h(function(se){var we=String(se);return/^\d+$/.test(we)?we:se},"parseBigInteger"),Se=h(function(se){return se?C.parse(se,A(JSON.parse)):null},"parseJsonArray"),W=h(function(se){return se[0]!=="("?null:(se=se.substring(1,se.length-1).split(","),{x:parseFloat(se[0]),y:parseFloat(se[1])})},"parsePoint"),he=h(function(se){if(se[0]!=="<"&&se[1]!=="(")return null;for(var we="(",ye="",He=!1,Ke=2;Ke<se.length-1;Ke++){if(He||(we+=se[Ke]),se[Ke]===")"){He=!0;continue}else if(!He)continue;se[Ke]!==","&&(ye+=se[Ke])}var Te=W(we);return Te.radius=parseFloat(ye),Te},"parseCircle"),fe=h(function(se){se(20,be),se(21,ie),se(23,ie),se(26,ie),se(700,parseFloat),se(701,parseFloat),se(16,k),se(1082,N),se(1114,N),se(1184,N),se(600,W),se(651,I),se(718,he),se(1e3,Z),se(1001,ee),se(1005,Q),se(1007,Q),se(1028,Q),se(1016,V),se(1017,Y),se(1021,x),se(1022,x),se(1231,x),se(1014,I),se(1015,I),se(1008,I),se(1009,I),se(1040,I),se(1041,I),se(1115,U),se(1182,U),se(1185,U),se(1186,T),se(1187,J),se(17,R),se(114,JSON.parse.bind(JSON)),se(3802,JSON.parse.bind(JSON)),se(199,Se),se(3807,Se),se(3907,I),se(2951,I),se(791,I),se(1183,I),se(1270,I)},"init");D.exports={init:fe}}),us=b(($,D)=>{P();var C=1e6;function O(N){var T=N.readInt32BE(0),R=N.readUInt32BE(4),A="";T<0&&(T=~T+(R===0),R=~R+1>>>0,A="-");var k="",Z,q,Q,V,Y,x;{if(Z=T%C,T=T/C>>>0,q=4294967296*Z+R,R=q/C>>>0,Q=""+(q-C*R),R===0&&T===0)return A+Q+k;for(V="",Y=6-Q.length,x=0;x<Y;x++)V+="0";k=V+Q+k}{if(Z=T%C,T=T/C>>>0,q=4294967296*Z+R,R=q/C>>>0,Q=""+(q-C*R),R===0&&T===0)return A+Q+k;for(V="",Y=6-Q.length,x=0;x<Y;x++)V+="0";k=V+Q+k}{if(Z=T%C,T=T/C>>>0,q=4294967296*Z+R,R=q/C>>>0,Q=""+(q-C*R),R===0&&T===0)return A+Q+k;for(V="",Y=6-Q.length,x=0;x<Y;x++)V+="0";k=V+Q+k}return Z=T%C,q=4294967296*Z+R,Q=""+q%C,A+Q+k}h(O,"readInt8"),D.exports=O}),Da=b(($,D)=>{P();var C=us(),O=h(function(I,U,J,ee,ie){J=J||0,ee=ee||!1,ie=ie||function(He,Ke,Te){return He*Math.pow(2,Te)+Ke};var be=J>>3,Se=h(function(He){return ee?~He&255:He},"inv"),W=255,he=8-J%8;U<he&&(W=255<<8-U&255,he=U),J&&(W=W>>J%8);var fe=0;J%8+U>=8&&(fe=ie(0,Se(I[be])&W,he));for(var se=U+J>>3,we=be+1;we<se;we++)fe=ie(fe,Se(I[we]),8);var ye=(U+J)%8;return ye>0&&(fe=ie(fe,Se(I[se])>>8-ye,ye)),fe},"parseBits"),N=h(function(I,U,J){var ee=Math.pow(2,J-1)-1,ie=O(I,1),be=O(I,J,1);if(be===0)return 0;var Se=1,W=h(function(fe,se,we){fe===0&&(fe=1);for(var ye=1;ye<=we;ye++)Se/=2,(se&1<<we-ye)>0&&(fe+=Se);return fe},"parsePrecisionBits"),he=O(I,U,J+1,!1,W);return be==Math.pow(2,J+1)-1?he===0?ie===0?1/0:-1/0:NaN:(ie===0?1:-1)*Math.pow(2,be-ee)*he},"parseFloatFromBits"),T=h(function(I){return O(I,1)==1?-1*(O(I,15,1,!0)+1):O(I,15,1)},"parseInt16"),R=h(function(I){return O(I,1)==1?-1*(O(I,31,1,!0)+1):O(I,31,1)},"parseInt32"),A=h(function(I){return N(I,23,8)},"pars	eFloat32"),k=h(function(I){return N(I,52,11)},"parseFloat64"),Z=h(function(I){var U=O(I,16,32);if(U==49152)return NaN;for(var J=Math.pow(1e4,O(I,16,16)),ee=0,ie=[],be=O(I,16),Se=0;Se<be;Se++)ee+=O(I,16,64+16*Se)*J,J/=1e4;var W=Math.pow(10,O(I,16,48));return(U===0?1:-1)*Math.round(ee*W)/W},"parseNumeric"),q=h(function(I,U){var J=O(U,1),ee=O(U,63,1),ie=new Date((J===0?1:-1)*ee/1e3+9466848e5);return I||ie.setTime(ie.getTime()+ie.getTimezoneOffset()*6e4),ie.usec=ee%1e3,ie.getMicroSeconds=function(){return this.usec},ie.setMicroSeconds=function(be){this.usec=be},ie.getUTCMicroSeconds=function(){return this.usec},ie},"parseDate"),Q=h(function(I){for(var U=O(I,32),J=O(I,32,32),ee=O(I,32,64),ie=96,be=[],Se=0;Se<U;Se++)be[Se]=O(I,32,ie),ie+=32,ie+=32;var W=h(function(fe){var se=O(I,32,ie);if(ie+=32,se==4294967295)return null;var we;if(fe==23||fe==20)return we=O(I,se*8,ie),ie+=se*8,we;if(fe==25)return we=I.toString(this.encoding,ie>>3,(ie+=se<<3)>>3),we;console.log("ERROR: ElementType not implemented: "+fe)},"parseElement"),he=h(function(fe,se){var we=[],ye;if(fe.length>1){var He=fe.shift();for(ye=0;ye<He;ye++)we[ye]=he(fe,se);fe.unshift(He)}else for(ye=0;ye<fe[0];ye++)we[ye]=W(se);return we},"parse");return he(be,ee)},"parseArr	ay"),V=h(function(I){return I.toString("utf8")},"parseText"),Y=h(function(I){return I===null?null:O(I,8)>0},"parseBool"),x=h(function(I){I(20,C),I(21,T),I(23,R),I(26,R),I(1700,Z),I(700,A),I(701,k),I(16,Y),I(1114,q.bind(null,!1)),I(1184,q.bind(null,!0)),I(1e3,Q),I(1007,Q),I(1016,Q),I(1008,Q),I(1009,Q),I(25,V)},"init");D.exports={init:x}}),Mi=b(($,D)=>{P(),D.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}}),Xs=b($=>{P();var D=jt(),C=Da(),O=Ve(),N=Mi();$.getTypeParser=A,$.setTypeParser=k,$.arrayParser=O,$.builtins=N;var T={text:{},binary:{}};function R(Z){return String(Z)}h(R,"noParse");function A(Z,q){return q=q||"text",T[q]&&T[q][Z]||R}h(A,"getTypeParser");function k(Z,q,Q){typeof q=="function"&&(Q=q,q="text"),T[q][Z]=Q}h(k,"setTypeParser"),D.init(function(Z,q){T.text[Z]=q}),C.init(function(Z,q){T.binary[Z]=q})}),Ns=b(($,D)=>{P(),D.exports={host:"localhost",user:Re.platform==="win32"?Re.env.USERNAME:Re.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var C=Xs(),O=C.getTypeParser(20,"text"),N=C.getTypeParser(1016,"text");D.exports.__defineSetter__("parseIn	t8",function(T){C.setTypeParser(20,"text",T?C.getTypeParser(23,"text"):O),C.setTypeParser(1016,"text",T?C.getTypeParser(1007,"text"):N)})}),Ws=b(($,D)=>{P();var C=(je(),ae(Le)),O=Ns();function N(x){var I=x.replace(/\\/g,"\\\\").replace(/"/g,'\\"');return'"'+I+'"'}h(N,"escapeElement");function T(x){for(var I="{",U=0;U<x.length;U++)U>0&&(I=I+","),x[U]===null||typeof x[U]>"u"?I=I+"NULL":Array.isArray(x[U])?I=I+T(x[U]):x[U]instanceof ue?I+="\\\\x"+x[U].toString("hex"):I+=N(R(x[U]));return I=I+"}",I}h(T,"arrayString");var R=h(function(x,I){if(x==null)return null;if(x instanceof ue)return x;if(ArrayBuffer.isView(x)){var U=ue.from(x.buffer,x.byteOffset,x.byteLength);return U.length===x.byteLength?U:U.slice(x.byteOffset,x.byteOffset+x.byteLength)}return x instanceof Date?O.parseInputDatesAsUTC?q(x):Z(x):Array.isArray(x)?T(x):typeof x=="object"?A(x,I):x.toString()},"pre	pareValue");function A(x,I){if(x&&typeof x.toPostgres=="function"){if(I=I||[],I.indexOf(x)!==-1)throw new Error('circular reference detected while preparing "'+x+'" for query');return I.push(x),R(x.toPostgres(R),I)}return JSON.stringify(x)}h(A,"prepareObject");function k(x,I){for(x=""+x;x.length<I;)x="0"+x;return x}h(k,"pad");function Z(x){var I=-x.getTimezoneOffset(),U=x.getFullYear(),J=U<1;J&&(U=Math.abs(U)+1);var ee=k(U,4)+"-"+k(x.getMonth()+1,2)+"-"+k(x.getDate(),2)+"T"+k(x.getHours(),2)+":"+k(x.getMinutes(),2)+":"+k(x.getSeconds(),2)+"."+k(x.getMilliseconds(),3);return I<0?(ee+="-",I*=-1):ee+="+",ee+=k(Math.floor(I/60),2)+":"+k(I%60,2),J&&(ee+=" BC"),ee}h(Z,"dateToString");function q(x){var I=x.getUTCFullYear(),U=I<1;U&&(I=Math.abs(I)+1);var J=k(I,4)+"-"+k(x.getUTCMonth()+1,2)+"-"+k(x.getUTCDate(),2)+"	T"+k(x.getUTCHours(),2)+":"+k(x.getUTCMinutes(),2)+":"+k(x.getUTCSeconds(),2)+"."+k(x.getUTCMilliseconds(),3);return J+="+00:00",U&&(J+=" BC"),J}h(q,"dateToStrin	gUTC");function Q(x,I,U){return x=typeof x=="string"?{text:x}:x,I&&(typeof I=="	function"?x.callback=I:x.values=I),U&&(x.callback=U),x}h(Q,"normalizeQueryConfi	g");var V=h(function(x){return C.createHash("md5").update(x,"utf-8").digest("h	ex")},"md5"),Y=h(function(x,I,U){var J=V(I+x),ee=V(ue.concat([ue.from(J),U]));return"	md5"+ee},"postgresMd5PasswordHash");D.exports={prepareValue:h(function(x){return R(x)},"prepareValueWrapper"),normalizeQueryConfig:Q,postgresMd5PasswordHash:Y,md5:V}}),Tl=b(($,D)=>{P();var C=(je(),ae(Le));function O(I){if(I.indexOf("SCRAM-SHA-256")===-1)throw new Error("SASL: Only mechanism SCRAM-SHA-256 is cur	rently supported");let U=C.randomBytes(18).toString("base64");return{mechanism:"	SCRAM-SHA-256",clientNonce:U,response:"n,,n=*,r="+U,message:"SASLInitialResponse"}}h(O,"startSession");function N(I,U,J){if(I.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof U!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(typeof J!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a	 string");let ee=Z(J);if(ee.nonce.startsWith(I.clientNonce)){if(ee.nonce.length===I.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server n	once is too short")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serv	er nonce does not start with client nonce");var ie=ue.from(ee.salt,"base64"),be=x(U,ie,ee.iteration),Se=Y(be,"Client Key"),W=V(Se),he="n=*,r="+I.clientNonce,fe="r="+ee.nonce+",s="+ee.salt+",i="+ee.iteration,se="c=biws,r="+ee.nonce,we=he+","+fe+","+se,ye=Y(W,we),He=Q(Se,ye),Ke=He.toString("base64"),Te=Y(be,"Server Key"),Ue=Y(Te,we);I.message="SASLRespon	se",I.serverSignature=Ue.toString("base64"),I.response=se+",p="+Ke}h(N,"continueSe	ssion");function T(I,U){if(I.message!=="SASLResponse")throw new Error("SASL: La	st message was not SASLResponse");if(typeof U!="string")throw new Error("SASL: S	CRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:J}=q(U);if(J!==I.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: s	erver signature does not match")}h(T,"finalizeSession");function R(I){if(typeof I!="string")throw new TypeError("SASL: text must be a string");return I.split("").map((U,J)=>I.charCodeAt(J)).every(U=>U>=33&&U<=43||U>=45&&U<=126)}h(R,"isPrintableC	hars");function A(I){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(I)}h(A,"isBase64");function k(I){if(typeof I!="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map(I.split(",").map(U=>{if(!/^.=/.test(U))throw new Error("SASL: Invalid attribute pair entry");let J=U[0],ee=U.substring(2);return[J,ee]}))}h(k,"parseAttributePairs");function Z(I){let U=k(I),J=U.get("r");if(J){if(!R(J))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAG	E: nonce must only contain printable characters")}else throw new Error("SASL: SC	RAM-SERVER-FIRST-MESSAGE: nonce missing");let ee=U.get("s");if(ee){if(!A(ee))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw new Error("S	ASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let ie=U.get("i");if(ie){if(!/^[1-9][0-9]*$/.test(ie))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration cou	nt")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");let be=parseInt(ie,10);return{nonce:J,salt:ee,iteration:be}}h(Z,"parseServerFirstMe	ssage");function q(I){let U=k(I).get("v");if(U){if(!A(U))throw new Error("SAS	L: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:U}}h(q,"parseServerFinalMessage");function Q(I,U){if(!ue.isBuffer(I))throw new TypeError("first argument must be a Buffer");if(!ue.isBuffer(U))throw new TypeError("second	 argument must be a Buffer");if(I.length!==U.length)throw new Error("Buffer leng	ths must match");if(I.length===0)throw new Error("Buffers cannot be empty");return ue.from(I.map((J,ee)=>I[ee]^U[ee]))}h(Q,"xorBuffers");function V(I){return C.createHash("sha256").update(I).digest()}h(V,"sha256");function Y(I,U){return C.createHmac("sha256",I).update(U).digest()}h(Y,"hmacSha256");function x(I,U,J){for(var ee=Y(I,ue.concat([U,ue.from([0,0,0,1])])),ie=ee,be=0;be<J-1;be++)ee=Y(I,ee),ie=Q(ie,ee);return ie}h(x,"Hi"),D.exports={startSession:O,continueSession:N,finalizeSession:T}}),Xr={};E(Xr,{join:()=>In});function In(...$){return $.join("/")}var Oa=v(()=>{P(),h(In,"join")}),Xt={};E(Xt,{stat:()=>rn});function rn($,D){D(new Error("No filesystem"))}var Rs=v(()=>{P(),h(rn,"stat")}),Ma={};E(Ma,{default:()=>ji});var ji,Eo=v(()=>{P(),ji={}}),Sr={};E(Sr,{StringDecoder:()=>yn});var Cs,yn,Jn=v(()=>{P(),Cs=class{constructor(D){re(this,"td"),this.td=new TextDecoder(D)}write(D){return this.td.decode(D,{stream:!0})}end(D){return this.td.decode(D)}},h(Cs,"StringDecoder"),yn=Cs}),Nn=b(($,D)=>{P();var{Transform:C}=(Eo(),ae(Ma)),{StringDecoder:O}=(Jn(),ae(Sr)),N=Symbol("last"),T=Symbol("decoder");function R(Q,V,Y){let x;if(this.overflow){if(x=this[T].write(Q).split(this.matcher),x.length===1)return Y();x.shift(),this.overflow=!1}else this[N]+=this[T].write(Q),x=this[N].split(this.matcher);this[N]=x.pop();for(let I=0;I<x.length;I++)try{k(this,this.mapper(x[I]))}catch(U){return Y(U)}if(this.overflow=this[N].length>this.maxLength,this.overflow&&!this.skipOverflow){Y(new Error("maximum buffer reached"));return}Y()}h(R,"transform");function A(Q){if(this[N]+=this[T].end(),this[N])try{k(this,this.mapper(this[N]))}catch(V){return Q(V)}Q()}h(A,"flush");function k(Q,V){V!==void 0&&Q.push(V)}h(k,"push");function Z(Q){return Q}h(Z,"noop");function q(Q,V,Y){switch(Q=Q||/\r?\n/,V=V||Z,Y=Y||{},arguments.length){case 1:typeof Q=="function"?(V=Q,Q=/\r?\n/):typeof Q=="object"&&!(Q instanceof RegExp)&&!Q[Symbol.split]&&(Y=Q,Q=/\r?\n/);break;case 2:typeof Q=="function"?(Y=V,V=Q,Q=/\r?\n/):typeof V=="object"&&(Y=V,V=Z)}Y=Object.assign({},Y),Y.autoDestroy=!0,Y.transform=R,Y.flush=A,Y.readableObjectMode=!0;let x=new C(Y);return x[N]="",x[T]=new O("utf8"),x.matcher=Q,x.mapper=V,x.maxLength=Y.maxLength,x.skipOverflow=Y.skipOverflow||!1,x.overflow=!1,x._destroy=function(I,U){this._writableState.errorEmitted=!1,U(I)},x}h(q,"split"),D.exports=q}),Al=b(($,D)=>{P();var C=(Oa(),ae(Xr)),O=(Eo(),ae(Ma)).Stream,N=Nn(),T=(F(),ae(H)),R=5432,A=Re.platform==="win32",k=Re.stderr,Z=56,q=7,Q=61440,V=32768;function Y(Se){return(Se&Q)==V}h(Y,"isRegFile");var x=["host","port","database","user","password"],I=x.length,U=x[I-1];function J(){var Se=k instanceof O&&k.writable===!0;if(Se){var W=Array.prototype.slice.call(arguments).concat(`
`);k.write(T.format.apply(T,W))}}h(J,"warn"),Object.defineProperty(D.exports,"isWin",{get:h(function(){return A},"get"),set:h(function(Se){A=Se},"set")}),D.exports.warnTo=function(Se){var W=k;return k=Se,W},D.exports.getFileName=function(Se){var W=Se||Re.env,he=W.PGPASSFILE||(A?C.join(W.APPDATA||"./","postgresql","pgpass.	conf"):C.join(W.HOME||"./",".pgpass"));return he},D.exports.usePgPass=function(Se,W){return Object.prototype.hasOwnProperty.call(Re.env,"PGPASSWORD")?!1:A?!0:(W=W||"	<unkn>",Y(Se.mode)?Se.mode&(Z|q)?(J('WARNING: password file "%s" has group or 	world access; permissions should be u=rw (0600) or less',W),!1):!0:(J('WARNING:	 password file "%s" is not a plain file',W),!1))};var ee=D.exports.match=function(Se,W){return x.slice(0,-1).reduce(function(he,fe,se){return se==1&&Number(Se[fe]||R)===Number(W[fe])?he&&!0:he&&(W[fe]==="*"||W[fe]===Se[fe])},!0)};D.exports.getPassword=function(Se,W,he){var fe,se=W.pipe(N());function we(Ke){var Te=ie(Ke);Te&&be(Te)&&ee(Se,Te)&&(fe=Te[U],se.end())}h(we,"onLine");var ye=h(function(){W.destroy(),he(fe)},"onEnd"),He=h(function(Ke){W.destroy(),J("WARNING: error on reading file: %s",Ke),he(void 0)},"onErr");W.on("error",He),se.on("data",we).on("end",ye).on("error",He)};var ie=D.exports.parseLine=function(Se){if(Se.length<11||Se.match(/^\s+#/))return null;for(var W="",he="",fe=0,se=0,we=0,ye={},He=!1,Ke=h(function(Ue,We,Qe){var lt=Se.substring(We,Qe);Object.hasOwnProperty.call(Re.env,"PGPASS_NO_DEESCAPE")||(lt=lt.replace(/\\([:\\])/g,"$1")),ye[x[Ue]]=lt},"addToObj"),Te=0;Te<Se.length-1;Te+=1){if(W=Se.charAt(Te+1),he=Se.charAt(Te),He=fe==I-1,He){Ke(fe,se);break}Te>=0&&W==":"&&he!=="\\"&&(Ke(fe,se,Te+1),se=Te+2,fe+=1)}return ye=Object.keys(ye).length===I?ye:null,ye},be=D.exports.isValidEntry=function(Se){for(var W={0:function(ye){return ye.length>0},1:function(ye){return ye==="*"?!0:(ye=Number(ye),isFinite(ye)&&ye>0&&ye<9007199254740992&&Math.floor(ye)===ye)},2:function(ye){return ye.length>0},3:function(ye){return ye.length>0},4:function(ye){return ye.length>0}},he=0;he<x.length;he+=1){var fe=W[he],se=Se[x[he]]||"",we=fe(se);if(!we)return!1}return!0}}),wo=b(($,D)=>{P(),Oa(),ae(Xr);var C=(Rs(),ae(Xt)),O=Al();D.exports=function(N,T){var R=O.getFileName();C.stat(R,function(A,k){if(A||!O.usePgPass(k,R))return T(void 0);var Z=C.createReadStream(R);O.getPassword(N,Z,T)})},D.exports.warnTo=O.warnTo}),ki=b(($,D)=>{P();var C=Xs();function O(N){this._types=N||C,this.text={},this.binary={}}h(O,"TypeOverrides"),O.prototype.getOverrides=function(N){switch(N){case"text":return this.text;case"binary":return this.binary;default:return{}}},O.prototype.setTypeParser=function(N,T,R){typeof T=="function"&&(R=T,T="text"),this.getOverrides(T)[N]=R},O.prototype.getTypeParser=function(N,T){return T=T||"text",this.getOverrides(T)[N]||this._types.getTypeParser(N,T)},D.exports=O}),hs={};E(hs,{default:()=>Zs});var Zs,ds=v(()=>{P(),Zs={}}),Hn={};E(Hn,{parse:()=>Ds});function Ds($,D=!1){let{protocol:C}=new URL($),O="	http:"+$.substring(C.length),{username:N,password:T,host:R,hostname:A,port:k,pathname:Z,search:q,searchParams:Q,hash:V}=new URL(O);T=decodeURIComponent(T),N=decodeURIComponent(N),Z=decodeURIComponent(Z);let Y=N+":"+T,x=D?Object.fromEntries(Q.entries()):q;return{href:$,protocol:C,auth:Y,username:N,password:T,host:R,hostname:A,port:k,pathname:Z,search:q,query:x,hash:V}}var Wr=v(()=>{P(),h(Ds,"parse")}),ja=b(($,D)=>{P();var C=(Wr(),ae(Hn)),O=(Rs(),ae(Xt));function N(T){if(T.charAt(0)==="/"){var A=T.split(" ");return{host:A[0],database:A[1]}}var R=C.parse(/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(T)?encodeURI(T).replace(/\%25(\d\d)/g,"%$1"):T,!0),A=R.query;for(var k in A)Array.isArray(A[k])&&(A[k]=A[k][A[k].length-1]);var Z=(R.auth||":").split(":");if(A.user=Z[0],A.password=Z.splice(1).join(":"),A.port=R.port,R.protocol=="socket:")return A.host=decodeURI(R.pathname),A.database=R.query.db,A.client_encoding=R.query.encoding,A;A.host||(A.host=R.hostname);var q=R.pathname;if(!A.host&&q&&/^%2f/i.test(q)){var Q=q.split("/");A.host=decodeURIComponent(Q[0]),q=Q.splice(1).join("/")}switch(q&&q.charAt(0)==="/"&&(q=q.slice(1)||null),A.database=q&&decodeURI(q),(A.ssl==="true"||A.ssl==="1")&&(A.ssl=!0),A.ssl==="0"&&(A.ssl=!1),(A.sslcert||A.sslkey||A.sslrootcert||A.sslmode)&&(A.ssl={}),A.sslcert&&(A.ssl.cert=O.readFileSync(A.sslcert).toString()),A.sslkey&&(A.ssl.key=O.readFileSync(A.sslkey).toString()),A.sslrootcert&&(A.ssl.ca=O.readFileSync(A.sslrootcert).toString()),A.sslmode){case"disable":{A.ssl=!1;break}case"prefer":case"require":case"verify-	ca":case"verify-full":break;case"no-verify":{A.ssl.rejectUnauthorized=!1;break}}return A}h(N,"parse"),D.exports=N,N.parse=N}),Os=b(($,D)=>{P();var C=(ds(),ae(hs)),O=Ns(),N=ja().parse,T=h(function(Q,V,Y){return Y===void 0?Y=Re.env["PG"+Q.toUpperCase()]:Y===!1||(Y=Re.env[Y]),V[Q]||Y||O[Q]},"val"),R=h(function(){switch(Re.env.PGSSLMODE){case"disable":return!1;case"	prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return O.ssl},"readSSLConfigFromEnvironment"),A=h(function(Q){return"'"+(""+Q).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},"quo	teParamValue"),k=h(function(Q,V,Y){var x=V[Y];x!=null&&Q.push(Y+"="+A(x))},"ad	d"),Z=class{constructor(V){V=typeof V=="string"?N(V):V||{},V.connectionString&&(V=Object.assign({},V,N(V.connectionString))),this.user=T("user",V),this.database=T("database",V),this.database===void 0&&(this.database=this.user),this.port=parseInt(T("port",V),10),this.host=T("host",V),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:T("password",V)}),this.binary=T("binary",V),this.options=T("options",V),this.ssl=typeof V.ssl>"u"?R():V.ssl,typeof this.ssl=="st	ring"&&this.ssl==="true"&&(this.ssl=!0),this.ssl==="no-verify"&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=T("client_encoding",V),this.replication=T("replication",V),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=T("applicatio	n_name",V,"PGAPPNAME"),this.fallback_application_name=T("fallback_application_na	me",V,!1),this.statement_timeout=T("statement_timeout",V,!1),this.lock_timeout=T("lock_timeout",V,!1),this.idle_in_transaction_session_timeout=T("idle_in_transac	tion_session_timeout",V,!1),this.query_timeout=T("query_timeout",V,!1),V.connectionTimeoutMillis===void 0?this.connect_timeout=Re.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(V.connectionTimeoutMillis/1e3),V.keepAlive===!1?this.keepalives=0:V.keepAlive===!0&&(this.keepalives=1),typeof V.keepAliveInitialDelayMillis=="number"&&(this.keepalives_idle=Math.floor(V.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(V){var Y=[];k(Y,this,"user"),k(Y,this,"password"),k(Y,this,"port"),k(Y,this,"application	_name"),k(Y,this,"fallback_application_name"),k(Y,this,"connect_timeout"),k(Y,this,"options");var x=typeof this.ssl=="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(k(Y,x,"sslmode"),k(Y,x,"sslca"),k(Y,x,"sslkey"),k(Y,x,"sslcert"),k(Y,x,"sslrootcert"),this.database&&Y.push("dbname="+A(this.database)),this.replication&&Y.push("replication="+A(this.replication)),this.host&&Y.push("host="+A(this.host)),this.isDomainSocket)return V(null,Y.join(" "));this.client_encoding&&Y.push("cli	ent_encoding="+A(this.client_encoding)),C.lookup(this.host,function(I,U){return I?V(I,null):(Y.push("hostaddr="+A(U)),V(null,Y.join(" ")))})}};h(Z,"ConnectionPa	rameters");var q=Z;D.exports=q}),Pi=b(($,D)=>{P();var C=Xs(),O=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,N=class{constructor(A,k){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=k,this.RowCtor=null,this.rowAsArray=A==="array",this.rowAsArray&&(this.parseRow=this._parseRowAsArray)}addCommandComplete(A){var k;A.text?k=O.exec(A.text):k=O.exec(A.command),k&&(this.command=k[1],k[3]?(this.oid=parseInt(k[2],10),this.rowCount=parseInt(k[3],10)):k[2]&&(this.rowCount=parseInt(k[2],10)))}_parseRowAsArray(A){for(var k=new Array(A.length),Z=0,q=A.length;Z<q;Z++){var Q=A[Z];Q!==null?k[Z]=this._parsers[Z](Q):k[Z]=null}return k}parseRow(A){for(var k={},Z=0,q=A.length;Z<q;Z++){var Q=A[Z],V=this.fields[Z].name;Q!==null?k[V]=this._parsers[Z](Q):k[V]=null}return k}addRow(A){this.rows.push(A)}addFields(A){this.fields=A,this.fields.length&&(this._parsers=new Array(A.length));for(var k=0;k<A.length;k++){var Z=A[k];this._types?this._parsers[k]=this._types.getTypeParser(Z.dataTypeID,Z.format||"t	ext"):this._parsers[k]=C.getTypeParser(Z.dataTypeID,Z.format||"text")}}};h(N,"	Result");var T=N;D.exports=T}),Wt=b(($,D)=>{P();var{EventEmitter:C}=L(),O=Pi(),N=Ws(),T=class extends C{constructor(k,Z,q){super(),k=N.normalizeQueryConfig(k,Z,q),this.text=k.text,this.values=k.values,this.rows=k.rows,this.types=k.types,this.name=k.name,this.binary=k.binary,this.portal=k.portal||"",this.callback=k.callback,this._rowMode=k.rowMode,Re.domain&&k.callback&&(this.callback=Re.domain.bind(k.callback)),this._result=new O(this._rowMode,this.types),this._results=this._result,this.isPreparedStatement=!1,this._canceledDueToError=!1,this._promise=null}requiresPreparation(){return this.name||this.rows?!0:!this.text||!this.values?!1:this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new O(this._rowMode,this.types),this._results.push(this._result))}handleRowDescription(k){this._checkForMultirow(),this._result.addFields(k.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(k){let Z;if(!this._canceledDueToError){try{Z=this._result.parseRow(k.fields)}catch(q){this._canceledDueToError=q;return}this.emit("row",Z,this._result),this._accumulateRows&&this._result.addRow(Z)}}handleCommandComplete(k,Z){this._checkForMultirow(),this._result.addCommandComplete(k),this.rows&&Z.sync()}handleEmptyQuery(k){this.rows&&k.sync()}handleError(k,Z){if(this._canceledDueToError&&(k=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(k);this.emit("er	ror",k)}handleReadyForQuery(k){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,k);if(this.callback)try{this.callback(null,this._results)}catch(Z){Re.nextTick(()=>{throw Z})}this.emit("end",this._results)}submit(k){if(typeof this.text!="string"&&typeof this.name!="string")return new Error("A query must have e	ither text or a name. Supplying neither is unsupported.");let Z=k.parsedStatements[this.name];return this.text&&Z&&this.text!==Z?new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`):this.values&&!Array.isArray(this.values)?new Error("Query values must be an array"):(this.requiresPreparation()?this.prepare(k):k.query(this.text),null)}hasBeenParsed(k){return this.name&&k.parsedStatements[this.name]}handlePortalSuspended(k){this._getRows(k,this.rows)}_getRows(k,Z){k.execute({portal:this.portal,rows:Z}),Z?k.flush():k.sync()}prepare(k){this.isPreparedStatement=!0,this.hasBeenParsed(k)||k.parse({text:this.text,name:this.name,types:this.types});try{k.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:N.prepareValue})}catch(Z){this.handleError(Z,k);return}k.describe({type:"P",name:this.portal||""}),this._getRows(k,this.rows)}handleCopyInResponse(k){k.sendCopyFail("No source stream defined")}handleCopyData(k,Z){}};h(T,"Query");var R=T;D.exports=R}),ka={};E(ka,{Socket:()=>Gn,isIP:()=>Js});function Js($){return 0}var er,Zr,tr,Gn,Pa=v(()=>{P(),er=z(L(),1),h(Js,"isIP"),Zr=/^[^.]+\./,tr=class at extends er.EventEmitter{constructor(){super(...arguments),re(this,"opts",{}),re(this,"connecting",!1),re(this,"pending",!0),re(this,"writable",!0),re(this,"encrypted",!1),re(this,"authorized",!1),re(this,"des	troyed",!1),re(this,"ws",null),re(this,"writeBuffer"),re(this,"tlsState",0),re(this,"tlsRead"),re(this,"tlsWrite")}static get poolQueryViaFetch(){return at.opts.poolQueryViaFetch??at.defaults.poolQueryViaFetch}static set poolQueryViaFetch(D){at.opts.poolQueryViaFetch=D}static get fetchEndpoint(){return at.opts.fetchEndpoint??at.defaults.fetchEndpoint}static set fetchEndpoint(D){at.opts.fetchEndpoint=D}static get fetchConnectionCache(){return!0}static set fetchConnectionCache(D){console.warn("The `fetchConnectionCache` option is deprecated (now always `true`	)")}static get fetchFunction(){return at.opts.fetchFunction??at.defaults.fetchFunction}static set fetchFunction(D){at.opts.fetchFunction=D}static get webSocketConstructor(){return at.opts.webSocketConstructor??at.defaults.webSocketConstructor}static set webSocketConstructor(D){at.opts.webSocketConstructor=D}get webSocketConstructor(){return this.opts.webSocketConstructor??at.webSocketConstructor}set webSocketConstructor(D){this.opts.webSocketConstructor=D}static get wsProxy(){return at.opts.wsProxy??at.defaults.wsProxy}static set wsProxy(D){at.opts.wsProxy=D}get wsProxy(){return this.opts.wsProxy??at.wsProxy}set wsProxy(D){this.opts.wsProxy=D}static get coalesceWrites(){return at.opts.coalesceWrites??at.defaults.coalesceWrites}static set coalesceWrites(D){at.opts.coalesceWrites=D}get coalesceWrites(){return this.opts.coalesceWrites??at.coalesceWrites}set coalesceWrites(D){this.opts.coalesceWrites=D}static get useSecureWebSocket(){return at.opts.useSecureWebSocket??at.defaults.useSecureWebSocket}static set useSecureWebSocket(D){at.opts.useSecureWebSocket=D}get useSecureWebSocket(){return this.opts.useSecureWebSocket??at.useSecureWebSocket}set useSecureWebSocket(D){this.opts.useSecureWebSocket=D}static get forceDisablePgSSL(){return at.opts.forceDisablePgSSL??at.defaults.forceDisablePgSSL}static set forceDisablePgSSL(D){at.opts.forceDisablePgSSL=D}get forceDisablePgSSL(){return this.opts.forceDisablePgSSL??at.forceDisablePgSSL}set forceDisablePgSSL(D){this.opts.forceDisablePgSSL=D}static get disableSNI(){return at.opts.disableSNI??at.defaults.disableSNI}static set disableSNI(D){at.opts.disableSNI=D}get disableSNI(){return this.opts.disableSNI??at.disableSNI}set disableSNI(D){this.opts.disableSNI=D}static get pipelineConnect(){return at.opts.pipelineConnect??at.defaults.pipelineConnect}static set pipelineConnect(D){at.opts.pipelineConnect=D}get pipelineConnect(){return this.opts.pipelineConnect??at.pipelineConnect}set pipelineConnect(D){this.opts.pipelineConnect=D}static get subtls(){return at.opts.subtls??at.defaults.subtls}static set subtls(D){at.opts.subtls=D}get subtls(){return this.opts.subtls??at.subtls}set subtls(D){this.opts.subtls=D}static get pipelineTLS(){return at.opts.pipelineTLS??at.defaults.pipelineTLS}static set pipelineTLS(D){at.opts.pipelineTLS=D}get pipelineTLS(){return this.opts.pipelineTLS??at.pipelineTLS}set pipelineTLS(D){this.opts.pipelineTLS=D}static get rootCerts(){return at.opts.rootCerts??at.defaults.rootCerts}static set rootCerts(D){at.opts.rootCerts=D}get rootCerts(){return this.opts.rootCerts??at.rootCerts}set rootCerts(D){this.opts.rootCerts=D}wsProxyAddrForHost(D,C){let O=this.wsProxy;if(O===void 0)throw new Error("No WebSocket proxy is configur	ed. Please see https://github.com/neondatabase/serverless/blob/main/CONFIG.md#ws	proxy-string--host-string-port-number--string--string");return typeof O=="functi	on"?O(D,C):`${O}?address=${D}:${C}`}setNoDelay(){return this}setKeepAlive(){return this}ref(){return this}unref(){return this}connect(D,C,O){this.connecting=!0,O&&this.once("	connect",O);let N=h(()=>{this.connecting=!1,this.pending=!1,this.emit("connect"),this.emit("ready")},"handleWebSocketOpen"),T=h((A,k=!1)=>{A.binaryType="arraybuf	fer",A.addEventListener("error",Z=>{this.emit("error",Z),this.emit("close")}),A.addEventListener("message",Z=>{if(this.tlsState===0){let q=ue.from(Z.data);this.emit("data",q)}}),A.addEventListener("close",()=>{this.emit("close")}),k?N():A.addEventListener("open",N)},"configureWebSocket"),R;try{R=this.wsProxyAddrForHost(C,typeof D=="st	ring"?parseInt(D,10):D)}catch(A){this.emit("error",A),this.emit("close");return}try{let A=(this.useSecureWebSocket?"wss:":"ws:")+"//"+R;if(this.webSocketConstructor!==void 0)this.ws=new this.webSocketConstructor(A),T(this.ws);else try{this.ws=new WebSocket(A),T(this.ws)}catch{this.ws=new __unstable_WebSocket(A),T(this.ws)}}catch(A){let k=(this.useSecureWebSocket?"https:":"http:")+"//"+R;fetch(k,{headers:{Upgrade:"websocket"}}).then(Z=>{if(this.ws=Z.webSocket,this.ws==null)throw A;this.ws.accept(),T(this.ws,!0)}).catch(Z=>{this.emit("error",new Error(`All attempts to open a WebSocket to connect to the database failed. Please refer to https://github.com/neondatabase/serverless/blob/main/CONFIG.md#websocketconstructor-typeof-websocket--undefined. Details: ${Z.message}`)),this.emit("close")})}}async startTls(D){if(this.subtls===void 0)throw new Error("For Postgres SSL connections, you must set `neonConfig.s	ubtls` to the subtls library. See https://github.com/neondatabase/serverless/blo	b/main/CONFIG.md for more information.");this.tlsState=1;let C=this.subtls.TrustedCert.fromPEM(this.rootCerts),O=new this.subtls.WebSocketReadQueue(this.ws),N=O.read.bind(O),T=this.rawWrite.bind(this),[R,A]=await this.subtls.startTls(D,C,N,T,{useSNI:!this.disableSNI,expectPreData:this.pipelineTLS?new Uint8Array([83]):void 0});this.tlsRead=R,this.tlsWrite=A,this.tlsState=2,this.encrypted=!0,this.authorized=!0,this.emit("secureConnection",this),this.tlsReadLoop()}async tlsReadLoop(){for(;;){let D=await this.tlsRead();if(D===void 0)break;{let C=ue.from(D);this.emit("data",C)}}}rawWrite(D){if(!this.coalesceWrites){this.ws.send(D);return}if(this.writeBuffer===void 0)this.writeBuffer=D,setTimeout(()=>{this.ws.send(this.writeBuffer),this.writeBuffer=void 0},0);else{let C=new Uint8Array(this.writeBuffer.length+D.length);C.set(this.writeBuffer),C.set(D,this.writeBuffer.length),this.writeBuffer=C}}write(D,C="utf8",O=N=>{}){return D.length===0?(O(),!0):(typeof D=="string"&&(D=ue.from(D,C)),this.tlsState===0?(this.rawWrite(D),O()):this.tlsState===1?this.once("secureConnection",()=>{this.write(D,C,O)}):(this.tlsWrite(D),O()),!0)}end(D=ue.alloc(0),C="utf8",O=()=>{}){return this.write(D,C,()=>{this.ws.close(),O()}),this}destroy(){return this.destroyed=!0,this.end()}},h(tr,"Socket"),re(tr,"defaults",{poolQueryViaFetch:!1,fetchEndpoint:h(($,D,C)=>{let O;return C!=null&&C.jwtAuth?O=$.replace(Zr,"apiauth."):O=$.replace(Zr,"api."),"https	://"+O+"/sql"},"fetchEndpoint"),fetchConnectionCache:!0,fetchFunction:void 0,webSocketConstructor:void 0,wsProxy:h($=>$+"/v2","wsProxy"),useSecureWebSocket:!0,forceDisablePgSSL:!0,coalesceWrites:!0,pipelineConnect:"password",subtls:void 0,rootCerts:"",pipelineTLS:!1,disableSNI:!1}),re(tr,"opts",{}),Gn=tr}),fs=b($=>{P(),Object.defineProperty($,"__esModule",{value:!0}),$.NoticeMessage=$.DataRowMessage=$.CommandCompleteMessage=$.ReadyForQueryMessage=$.NotificationResponseMessage=$.BackendKeyDataMessage=$.AuthenticationMD5Password=$.ParameterStatusMessage=$.ParameterDescriptionMessage=$.RowDescriptionMessage=$.Field=$.CopyResponse=$.CopyDataMessage=$.DatabaseError=$.copyDone=$.emptyQuery=$.replicationStart=$.portalSuspended=$.noData=$.closeComplete=$.bindComplete=$.parseComplete=void 0,$.parseComplete={name:"parseComplete",length:5},$.bindComplete={name:"bin	dComplete",length:5},$.closeComplete={name:"closeComplete",length:5},$.noData={name:"	noData",length:5},$.portalSuspended={name:"portalSuspended",length:5},$.replicationStart={name:"replicationStart",length:4},$.emptyQuery={name:"emptyQuery",length:4},$.copyDone={name:"copyDone",length:4};var D=class extends Error{constructor(Te,Ue,We){super(Te),this.length=Ue,this.name=We}};h(D,"DatabaseError");var C=D;$.DatabaseError=C;var O=class{constructor(Te,Ue){this.length=Te,this.chunk=Ue,this.name="copyData"}};h(O,"CopyDataMessage");var N=O;$.CopyDataMessage=N;var T=class{constructor(Te,Ue,We,Qe){this.length=Te,this.name=Ue,this.binary=We,this.columnTypes=new Array(Qe)}};h(T,"Co	pyResponse");var R=T;$.CopyResponse=R;var A=class{constructor(Te,Ue,We,Qe,lt,vt,Ht){this.name=Te,this.tableID=Ue,this.columnID=We,this.dataTypeID=Qe,this.dataTypeSize=lt,this.dataTypeModifier=vt,this.format=Ht}};h(A,"Field");var k=A;$.Field=k;var Z=class{constructor(Te,Ue){this.length=Te,this.fieldCount=Ue,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};h(Z,"RowDescriptionMessage");var q=Z;$.RowDescriptionMessage=q;var Q=class{constructor(Te,Ue){this.length=Te,this.parameterCount=Ue,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};h(Q,"P	arameterDescriptionMessage");var V=Q;$.ParameterDescriptionMessage=V;var Y=class{constructor(Te,Ue,We){this.length=Te,this.parameterName=Ue,this.parameterValue=We,this.name="parameterSta	tus"}};h(Y,"ParameterStatusMessage");var x=Y;$.ParameterStatusMessage=x;var I=class{constructor(Te,Ue){this.length=Te,this.salt=Ue,this.name="authenticationMD5Password"}};h(I,"Authenti	cationMD5Password");var U=I;$.AuthenticationMD5Password=U;var J=class{constructor(Te,Ue,We){this.length=Te,this.processID=Ue,this.secretKey=We,this.name="backendKeyData"}};h(J,"BackendKeyDataMessage");var ee=J;$.BackendKeyDataMessage=ee;var ie=class{constructor(Te,Ue,We,Qe){this.length=Te,this.processId=Ue,this.channel=We,this.payload=Qe,this.name="notifica	tion"}};h(ie,"NotificationResponseMessage");var be=ie;$.NotificationResponseMessage=be;var Se=class{constructor(Te,Ue){this.length=Te,this.status=Ue,this.name="ready	ForQuery"}};h(Se,"ReadyForQueryMessage");var W=Se;$.ReadyForQueryMessage=W;var he=class{constructor(Te,Ue){this.length=Te,this.text=Ue,this.name="commandComplete"}};h(he,"CommandCompleteMes	sage");var fe=he;$.CommandCompleteMessage=fe;var se=class{constructor(Te,Ue){this.length=Te,this.fields=Ue,this.name="dataRow",this.fieldCount=Ue.length}};h(se,"Data	RowMessage");var we=se;$.DataRowMessage=we;var ye=class{constructor(Te,Ue){this.length=Te,this.message=Ue,this.name="notice"}};h(ye,"NoticeMessage");var He=ye;$.NoticeMessage=He}),Zt=b($=>{P(),Object.defineProperty($,"__esModule",{value:!0}),$.Writer=void 0;var D=class{constructor(N=256){this.size=N,this.offset=5,this.headerPosition=0,this.buffer=ue.allocUnsafe(N)}ensure(N){var T=this.buffer.length-this.offset;if(T<N){var R=this.buffer,A=R.length+(R.length>>1)+N;this.buffer=ue.allocUnsafe(A),R.copy(this.buffer)}}addInt32(N){return this.ensure(4),this.buffer[this.offset++]=N>>>24&255,this.buffer[this.offset++]=N>>>16&255,this.buffer[this.offset++]=N>>>8&255,this.buffer[this.offset++]=N>>>0&255,this}addInt16(N){return this.ensure(2),this.buffer[this.offset++]=N>>>8&255,this.buffer[this.offset++]=N>>>0&255,this}addCString(N){if(!N)this.ensure(1);else{var T=ue.byteLength(N);this.ensure(T+1),this.buffer.write(N,this.offset,"utf-8"),this.offset+=T}return this.buffer[this.offset++]=0,this}addString(N=""){var T=ue.byteLength(N);return this.ensure(T),this.buffer.write(N,this.offset),this.offset+=T,this}add(N){return this.ensure(N.length),N.copy(this.buffer,this.offset),this.offset+=N.length,this}join(N){if(N){this.buffer[this.headerPosition]=N;let T=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(T,this.headerPosition+1)}return this.buffer.slice(N?0:5,this.offset)}flush(N){var T=this.join(N);return this.offset=5,this.headerPosition=0,this.buffer=ue.allocUnsafe(this.size),T}};h(D,"Wr	iter");var C=D;$.Writer=C}),_n=b($=>{P(),Object.defineProperty($,"__esModule",{value:!0}),$.serialize=void 0;var D=Zt(),C=new D.Writer,O=h(Te=>{C.addInt16(3).addInt16(0);for(let Qe of Object.keys(Te))C.addCString(Qe).addCString(Te[Qe]);C.addCString("cl	ient_encoding").addCString("UTF8");var Ue=C.addCString("").flush(),We=Ue.length+4;return new D.Writer().addInt32(We).add(Ue).flush()},"startup"),N=h(()=>{let Te=ue.allocUnsafe(8);return Te.writeInt32BE(8,0),Te.writeInt32BE(80877103,4),Te},"requestSsl"),T=h(Te=>C.addCString(Te).flush(112),"password"),R=h(function(Te,Ue){return C.addCString(Te).addInt32(ue.byteLength(Ue)).addString(Ue),C.flush(112)},"sendSASLInitialResponseMessage"),A=h(function(Te){return C.addString(Te).flush(112)},"sendSCRAMClientFinalMessage"),k=h(Te=>C.addCString(Te).flush(81),"query"),Z=[],q=h(Te=>{let Ue=Te.name||"";Ue.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",Ue,Ue.length),console.error("This can cause c	onflicts and silent errors executing queries"));let We=Te.types||Z;for(var Qe=We.length,lt=C.addCString(Ue).addCString(Te.text).addInt16(Qe),vt=0;vt<Qe;vt++)lt.addInt32(We[vt]);return C.flush(80)},"parse"),Q=new D.Writer,V=h(function(Te,Ue){for(let We=0;We<Te.length;We++){let Qe=Ue?Ue(Te[We],We):Te[We];Qe==null?(C.addInt16(0),Q.addInt32(-1)):Qe instanceof ue?(C.addInt16(1),Q.addInt32(Qe.length),Q.add(Qe)):(C.addInt16(0),Q.addInt32(ue.byteLength(Qe)),Q.addString(Qe))}},"writeValues"),Y=h((Te={})=>{let Ue=Te.portal||"",We=Te.statement||"",Qe=Te.binary||!1,lt=Te.values||Z,vt=lt.length;return C.addCString(Ue).addCString(We),C.addInt16(vt),V(lt,Te.valueMapper),C.addInt16(vt),C.add(Q.flush()),C.addInt16(Qe?1:0),C.flush(66)},"bind"),x=ue.from([69,0,0,0,9,0,0,0,0,0]),I=h(Te=>{if(!Te||!Te.portal&&!Te.rows)return x;let Ue=Te.portal||"",We=Te.rows||0,Qe=ue.byteLength(Ue),lt=4+Qe+1+4,vt=ue.allocUnsafe(1+lt);return vt[0]=69,vt.writeInt32BE(lt,1),vt.write(Ue,5,"utf-8"),vt[Qe+5]=0,vt.writeUInt32BE(We,vt.length-4),vt},"execute"),U=h((Te,Ue)=>{let We=ue.allocUnsafe(16);return We.writeInt32BE(16,0),We.writeInt16BE(1234,4),We.writeInt16BE(5678,6),We.writeInt32BE(Te,8),We.writeInt32BE(Ue,12),We},"cancel"),J=h((Te,Ue)=>{let We=4+ue.byteLength(Ue)+1,Qe=ue.allocUnsafe(1+We);return Qe[0]=Te,Qe.writeInt32BE(We,1),Qe.write(Ue,5,"utf-8"),Qe[We]=0,Qe},"cstringMessage"),ee=C.addCString("P").flush(68),ie=C.addCString("S").flush(68),be=h(Te=>Te.name?J(68,`${Te.type}${Te.name||""}`):Te.type==="P"?ee:ie,"describe"),Se=h(Te=>{let Ue=`${Te.type}${Te.name||""}`;return J(67,Ue)},"close"),W=h(Te=>C.add(Te).flush(100),"copyData"),he=h(Te=>J(102,Te),"copyFail"),fe=h(Te=>ue.from([Te,0,0,0,4]),"code	OnlyBuffer"),se=fe(72),we=fe(83),ye=fe(88),He=fe(99),Ke={startup:O,password:T,requestSsl:N,sendSASLInitialResponseMessage:R,sendSCRAMClientFinalMessage:A,query:k,parse:q,bind:Y,execute:I,describe:be,close:Se,flush:h(()=>se,"flush"),sync:h(()=>we,"sync"),end:h(()=>ye,"end"),copyData:W,copyDone:h(()=>He,"copyDone"),copyFail:he,cancel:U};$.serialize=Ke}),nr=b($=>{P(),Object.defineProperty($,"__esModule",{value:!0}),$.BufferReader=void 0;var D=ue.allocUnsafe(0),C=class{constructor(T=0){this.offset=T,this.buffer=D,this.encoding="utf-8"}setBuffer(T,R){this.offset=T,this.buffer=R}int16(){let T=this.buffer.readInt16BE(this.offset);return this.offset+=2,T}byte(){let T=this.buffer[this.offset];return this.offset++,T}int32(){let T=this.buffer.readInt32BE(this.offset);return this.offset+=4,T}string(T){let R=this.buffer.toString(this.encoding,this.offset,this.offset+T);return this.offset+=T,R}cstring(){let T=this.offset,R=T;for(;this.buffer[R++]!==0;);return this.offset=R,this.buffer.toString(this.encoding,T,R-1)}bytes(T){let R=this.buffer.slice(this.offset,this.offset+T);return this.offset+=T,R}};h(C,"BufferReader");var O=C;$.BufferReader=O}),Jr=b($=>{P(),Object.defineProperty($,"__esModule",{value:!0}),$.Parser=void 0;var D=fs(),C=nr(),O=1,N=4,T=O+N,R=ue.allocUnsafe(0),A=class{constructor(q){if(this.buffer=R,this.bufferLength=0,this.bufferOffset=0,this.reader=new C.BufferReader,(q==null?void 0:q.mode)==="binary")throw new Error("Binary mode not supported yet");this.mode=(q==null?void 0:q.mode)||"text"}parse(q,Q){this.mergeBuffer(q);let V=this.bufferOffset+this.bufferLength,Y=this.bufferOffset;for(;Y+T<=V;){let x=this.buffer[Y],I=this.buffer.readUInt32BE(Y+O),U=O+I;if(U+Y<=V){let J=this.handlePacket(Y+T,x,I,this.buffer);Q(J),Y+=U}else break}Y===V?(this.buffer=R,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=V-Y,this.bufferOffset=Y)}mergeBuffer(q){if(this.bufferLength>0){let Q=this.bufferLength+q.byteLength;if(Q+this.bufferOffset>this.buffer.byteLength){let V;if(Q<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)V=this.buffer;else{let Y=this.buffer.byteLength*2;for(;Q>=Y;)Y*=2;V=ue.allocUnsafe(Y)}this.buffer.copy(V,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=V,this.bufferOffset=0}q.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=Q}else this.buffer=q,this.bufferOffset=0,this.bufferLength=q.byteLength}handlePacket(q,Q,V,Y){switch(Q){case 50:return D.bindComplete;case 49:return D.parseComplete;case 51:return D.closeComplete;case 110:return D.noData;case 115:return D.portalSuspended;case 99:return D.copyDone;case 87:return D.replicationStart;case 73:return D.emptyQuery;case 68:return this.parseDataRowMessage(q,V,Y);case 67:return this.parseCommandCompleteMessage(q,V,Y);case 90:return this.parseReadyForQueryMessage(q,V,Y);case 65:return this.parseNotificationMessage(q,V,Y);case 82:return this.parseAuthenticationResponse(q,V,Y);case 83:return this.parseParameterStatusMessage(q,V,Y);case 75:return this.parseBackendKeyData(q,V,Y);case 69:return this.parseErrorMessage(q,V,Y,"error");case 78:return this.parseErrorMessage(q,V,Y,"notice");case 84:return this.parseRowDescriptionMessage(q,V,Y);case 116:return this.parseParameterDescriptionMessage(q,V,Y);case 71:return this.parseCopyInMessage(q,V,Y);case 72:return this.parseCopyOutMessage(q,V,Y);case 100:return this.parseCopyData(q,V,Y);default:return new D.DatabaseError("received invalid response: "+Q.toString(16),V,"error")}}parseReadyForQueryMessage(q,Q,V){this.reader.setBuffer(q,V);let Y=this.reader.string(1);return new D.ReadyForQueryMessage(Q,Y)}parseCommandCompleteMessage(q,Q,V){this.reader.setBuffer(q,V);let Y=this.reader.cstring();return new D.CommandCompleteMessage(Q,Y)}parseCopyData(q,Q,V){let Y=V.slice(q,q+(Q-4));return new D.CopyDataMessage(Q,Y)}parseCopyInMessage(q,Q,V){return this.parseCopyMessage(q,Q,V,"copyInRespons	e")}parseCopyOutMessage(q,Q,V){return this.parseCopyMessage(q,Q,V,"copyOutRespon	se")}parseCopyMessage(q,Q,V,Y){this.reader.setBuffer(q,V);let x=this.reader.byte()!==0,I=this.reader.int16(),U=new D.CopyResponse(Q,Y,x,I);for(let J=0;J<I;J++)U.columnTypes[J]=this.reader.int16();return U}parseNotificationMessage(q,Q,V){this.reader.setBuffer(q,V);let Y=this.reader.int32(),x=this.reader.cstring(),I=this.reader.cstring();return new D.NotificationResponseMessage(Q,Y,x,I)}parseRowDescriptionMessage(q,Q,V){this.reader.setBuffer(q,V);let Y=this.reader.int16(),x=new D.RowDescriptionMessage(Q,Y);for(let I=0;I<Y;I++)x.fields[I]=this.parseField();return x}parseField(){let q=this.reader.cstring(),Q=this.reader.int32(),V=this.reader.int16(),Y=this.reader.int32(),x=this.reader.int16(),I=this.reader.int32(),U=this.reader.int16()===0?"text":"binary";return new D.Field(q,Q,V,Y,x,I,U)}parseParameterDescriptionMessage(q,Q,V){this.reader.setBuffer(q,V);let Y=this.reader.int16(),x=new D.ParameterDescriptionMessage(Q,Y);for(let I=0;I<Y;I++)x.dataTypeIDs[I]=this.reader.int32();return x}parseDataRowMessage(q,Q,V){this.reader.setBuffer(q,V);let Y=this.reader.int16(),x=new Array(Y);for(let I=0;I<Y;I++){let U=this.reader.int32();x[I]=U===-1?null:this.reader.string(U)}return new D.DataRowMessage(Q,x)}parseParameterStatusMessage(q,Q,V){this.reader.setBuffer(q,V);let Y=this.reader.cstring(),x=this.reader.cstring();return new D.ParameterStatusMessage(Q,Y,x)}parseBackendKeyData(q,Q,V){this.reader.setBuffer(q,V);let Y=this.reader.int32(),x=this.reader.int32();return new D.BackendKeyDataMessage(Q,Y,x)}parseAuthenticationResponse(q,Q,V){this.reader.setBuffer(q,V);let Y=this.reader.int32(),x={name:"authenticationOk",length:Q};switch(Y){case 0:break;case 3:x.length===8&&(x.name="authenticationCleartextPassword");break;case 5:if(x.length===12){x.name="authenticationMD5Password";let U=this.reader.bytes(4);return new D.AuthenticationMD5Password(Q,U)}break;case 10:x.name="authentication	SASL",x.mechanisms=[];let I;do I=this.reader.cstring(),I&&x.mechanisms.push(I);while(I);break;case 11:x.name="authenticationSASLContinue",x.data=this.reader.string(Q-8);break;case 12:x.name="authenticationSASLFinal",x.data=this.reader.string(Q-8);break;default:throw new Error("Unknown authenticationOk message type "+Y)}return x}parseErrorMessage(q,Q,V,Y){this.reader.setBuffer(q,V);let x={},I=this.reader.string(1);for(;I!=="\0";)x[I]=this.reader.cstring(),I=this.reader.string(1);let U=x.M,J=Y==="notice"?new D.NoticeMessage(Q,U):new D.DatabaseError(U,Q,Y);return J.severity=x.S,J.code=x.C,J.detail=x.D,J.hint=x.H,J.position=x.P,J.internalPosition=x.p,J.internalQuery=x.q,J.where=x.W,J.schema=x.s,J.table=x.t,J.column=x.c,J.dataType=x.d,J.constraint=x.n,J.file=x.F,J.line=x.L,J.routine=x.R,J}};h(A,"Parser");var k=A;$.Parser=k}),Tr=b($=>{P(),Object.defineProperty($,"__esModule",{value:!0}),$.DatabaseError=$.serialize=$.parse=void 0;var D=fs();Object.defineProperty($,"DatabaseError",{enumerable:!0,get:h(function(){return D.DatabaseError},"get")});var C=_n();Object.defineProperty($,"serialize",{enumerable:!0,get:h(function(){return C.serialize},"get")});var O=Jr();function N(T,R){let A=new O.Parser;return T.on("data",k=>A.parse(k,R)),new Promise(k=>T.on("end",()=>k()))}h(N,"parse"),$.parse=N}),xo={};E(xo,{connect:()=>es});function es({socket:$,servername:D}){return $.startTls(D),$}var Ar=v(()=>{P(),h(es,"connect")}),ei=b(($,D)=>{P();var C=(Pa(),ae(ka)),O=L().EventEmitter,{parse:N,serialize:T}=Tr(),R=T.flush(),A=T.sync(),k=T.end(),Z=class extends O{constructor(V){super(),V=V||{},this.stream=V.stream||new C.Socket,this._keepAlive=V.keepAlive,this._keepAliveInitialDelayMillis=V.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=V.ssl||!1,this._ending=!1,this._emitMessage=!1;var Y=this;this.on("newListener",function(x){x==="message"&&(Y._emitMessage=!0)})}connect(V,Y){var x=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(V,Y),this.stream.once("connect",function(){x._keepAlive&&x.stream.setKeepAlive(!0,x._keepAliveInitialDelayMillis),x.emit("connect")});let I=h(function(U){x._ending&&(U.code==="ECONNRESET"||U.code==="EPIPE")||x.emit("error",U)},"reportStreamError");if(this.stream.on("error",I),this.stream.on("close",function(){x.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(U){var J=U.toString("utf8");switch(J){case"S":break;case"N":return x.stream.end(),x.emit("error",new Error("The server does not support SSL connections"));default:return x.stream.end(),x.emit("error",new Error("There was an error establishing an SSL co	nnection"))}var ee=(Ar(),ae(xo));let ie={socket:x.stream};x.ssl!==!0&&(Object.assign(ie,x.ssl),"key"in x.ssl&&(ie.key=x.ssl.key)),C.isIP(Y)===0&&(ie.servername=Y);try{x.stream=ee.connect(ie)}catch(be){return x.emit("error",be)}x.attachListeners(x.stream),x.stream.on("error",I),x.emit("sslconnect")})}attachListeners(V){V.on("end",()=>{this.emit("end")}),N(V,Y=>{var x=Y.name==="error"?"errorMessage":Y.name;this._emitMessage&&this.emit("message",Y),this.emit(x,Y)})}requestSsl(){this.stream.write(T.requestSsl())}startup(V){this.stream.write(T.startup(V))}cancel(V,Y){this._send(T.cancel(V,Y))}password(V){this._send(T.password(V))}sendSASLInitialResponseMessage(V,Y){this._send(T.sendSASLInitialResponseMessage(V,Y))}sendSCRAMClientFinalMessage(V){this._send(T.sendSCRAMClientFinalMessage(V))}_send(V){return this.stream.writable?this.stream.write(V):!1}query(V){this._send(T.query(V))}parse(V){this._send(T.parse(V))}bind(V){this._send(T.bind(V))}execute(V){this._send(T.execute(V))}flush(){this.stream.writable&&this.stream.write(R)}sync(){this._ending=!0,this._send(R),this._send(A)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(k,()=>{this.stream.end()})}close(V){this._send(T.close(V))}describe(V){this._send(T.describe(V))}sendCopyFromChunk(V){this._send(T.copyData(V))}endCopyFrom(){this._send(T.copyDone())}sendCopyFail(V){this._send(T.copyFail(V))}};h(Z,"Connection");var q=Z;D.exports=q}),Ms=b(($,D)=>{P();var C=L().EventEmitter;F(),ae(H);var O=Ws(),N=Tl(),T=wo(),R=ki(),A=Os(),k=Wt(),Z=Ns(),q=ei(),Q=class extends C{constructor(x){super(),this.connectionParameters=new A(x),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"passwo	rd",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;var I=x||{};this._Promise=I.Promise||ke.Promise,this._types=new R(I.types),this._ending=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.connection=I.connection||new q({stream:I.stream,ssl:this.connectionParameters.ssl,keepAlive:I.keepAlive||!1,keepAliveInitialDelayMillis:I.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=I.binary||Z.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=I.connectionTimeoutMillis||0}_errorAllQueries(x){let I=h(U=>{Re.nextTick(()=>{U.handleError(x,this.connection)})},"enqueueError");this.activeQuery&&(I(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(I),this.queryQueue.length=0}_connect(x){var I=this,U=this.connection;if(this._connectionCallback=x,this._connecting||this._connected){let J=new Error("Client has already been conn	ected. You cannot reuse a client.");Re.nextTick(()=>{x(J)});return}this._connecting=!0,this.connectionTimeoutHandle,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{U._ending=!0,U.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis)),this.host&&this.host.indexOf("/")===0?U.connect(this.host+"/.s.PGSQL."+this.port):U.connect(this.port,this.host),U.on("connect",function(){I.ssl?U.requestSsl():U.startup(I.getStartupConf())}),U.on("sslconnect",function(){U.startup(I.getStartupConf())}),this._attachListeners(U),U.once("end",()=>{let J=this._ending?new Error("Connection terminated"):new Error("Connection terminated unex	pectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(J),this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(J):this._handleErrorEvent(J):this._connectionError||this._handleErrorEvent(J)),Re.nextTick(()=>{this.emit("end")})})}connect(x){if(x){this._connect(x);return}return new this._Promise((I,U)=>{this._connect(J=>{J?U(J):I()})})}_attachListeners(x){x.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),x.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),x.on("a	uthenticationSASL",this._handleAuthSASL.bind(this)),x.on("authenticationSASLCont	inue",this._handleAuthSASLContinue.bind(this)),x.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),x.on("backendKeyData",this._handleBackendKeyData.bind(this)),x.on("error",this._handleErrorEvent.bind(this)),x.on("errorMessage",this._handleErrorMessage.bind(this)),x.on("readyForQuery",this._handleReadyForQuery.bind(this)),x.on("notice",this._handleNotice.bind(this)),x.on("rowDescription",this._handleRowDescription.bind(this)),x.on("dataRow",this._handleDataRow.bind(this)),x.on("portalSuspended",this._handlePortalSuspended.bind(this)),x.on("emptyQuery",this._handleEmptyQuery.bind(this)),x.on("commandComplete",this._handleCommandComplete.bind(this)),x.on("parseComplete",this._handleParseComplete.bind(this)),x.on("cop	yInResponse",this._handleCopyInResponse.bind(this)),x.on("copyData",this._handleCopyData.bind(this)),x.on("notification",this._handleNotification.bind(this))}_checkPgPass(x){let I=this.connection;typeof this.password=="function"?this._Promise.resolve().then(()=>this.password()).then(U=>{if(U!==void 0){if(typeof U!="string"){I.emit("erro	r",new TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=U}else this.connectionParameters.password=this.password=null;x()}).catch(U=>{I.emit("error",U)}):this.password!==null?x():T(this.connectionParameters,U=>{U!==void 0&&(this.connectionParameters.password=this.password=U),x()})}_handleAuthCleartextPassword(x){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(x){this._checkPgPass(()=>{let I=O.postgresMd5PasswordHash(this.user,this.password,x.salt);this.connection.password(I)})}_handleAuthSASL(x){this._checkPgPass(()=>{this.saslSession=N.startSession(x.mechanisms),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)})}_handleAuthSASLContinue(x){N.continueSession(this.saslSession,this.password,x.data),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}_handleAuthSASLFinal(x){N.finalizeSession(this.saslSession,x.data),this.saslSession=null}_handleBackendKeyData(x){this.processID=x.processID,this.secretKey=x.secretKey}_handleReadyForQuery(x){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("c	onnect"));let{activeQuery:I}=this;this.activeQuery=null,this.readyForQuery=!0,I&&I.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(x){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(x);this.emit("error",x)}}_handleErrorEvent(x){if(this._connecting)return this._handleErrorWhileConnecting(x);this._queryable=!1,this._errorAllQueries(x),this.emit("error",x)}_handleErrorMessage(x){if(this._connecting)return this._handleErrorWhileConnecting(x);let I=this.activeQuery;if(!I){this._handleErrorEvent(x);return}this.activeQuery=null,I.handleError(x,this.connection)}_handleRowDescription(x){this.activeQuery.handleRowDescription(x)}_handleDataRow(x){this.activeQuery.handleDataRow(x)}_handlePortalSuspended(x){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(x){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(x){this.activeQuery.handleCommandComplete(x,this.connection)}_handleParseComplete(x){this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(x){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(x){this.activeQuery.handleCopyData(x,this.connection)}_handleNotification(x){this.emit("notification",x)}_handleNotice(x){this.emit("notice",x)}getStartupConf(){var x=this.connectionParameters,I={user:x.user,database:x.database},U=x.application_name||x.fallback_application_name;return U&&(I.application_name=U),x.replication&&(I.replication=""+x.replication),x.statement_timeout&&(I.statement_timeout=String(parseInt(x.statement_timeout,10))),x.lock_timeout&&(I.lock_timeout=String(parseInt(x.lock_timeout,10))),x.idle_in_transaction_session_timeout&&(I.idle_in_transaction_session_timeout=String(parseInt(x.idle_in_transaction_session_timeout,10))),x.options&&(I.options=x.options),I}cancel(x,I){if(x.activeQuery===I){var U=this.connection;this.host&&this.host.indexOf("/")===0?U.connect(this.host+"/.s.PGSQL."+this.port):U.connect(this.port,this.host),U.on("connect",function(){U.cancel(x.processID,x.secretKey)})}else x.queryQueue.indexOf(I)!==-1&&x.queryQueue.splice(x.queryQueue.indexOf(I),1)}setTypeParser(x,I,U){return this._types.setTypeParser(x,I,U)}getTypeParser(x,I){return this._types.getTypeParser(x,I)}escapeIdentifier(x){return'"'+x.replace(/"/g,'""')+'"'}escapeLiteral(x){for(var I=!1,U="'",J=0;J<x.length;J++){var ee=x[J];ee==="'"?U+=ee+ee:ee==="\\"?(U+=ee+ee,I=!0):U+=ee}return U+="'",I===!0&&(U=" E"+U),U}_pulseQueryQueue(){if(this.readyForQuery===!0)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let x=this.activeQuery.submit(this.connection);x&&Re.nextTick(()=>{this.activeQuery.handleError(x,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}query(x,I,U){var J,ee,ie,be,Se;if(x==null)throw new TypeError("Client	 was passed a null or undefined query");return typeof x.submit=="function"?(ie=x.query_timeout||this.connectionParameters.query_timeout,ee=J=x,typeof I=="function"&&(J.callback=J.callback||I)):(ie=this.connectionParameters.query_timeout,J=new k(x,I,U),J.callback||(ee=new this._Promise((W,he)=>{J.callback=(fe,se)=>fe?he(fe):W(se)}))),ie&&(Se=J.callback,be=setTimeout(()=>{var W=new Error("Query read timeout");Re.nextTick(()=>{J.handleError(W,this.connection)}),Se(W),J.callback=()=>{};var he=this.queryQueue.indexOf(J);he>-1&&this.queryQueue.splice(he,1),this._pulseQueryQueue()},ie),J.callback=(W,he)=>{clearTimeout(be),Se(W,he)}),this.binary&&!J.binary&&(J.binary=!0),J._result&&!J._result._types&&(J._result._types=this._types),this._queryable?this._ending?(Re.nextTick(()=>{J.handleError(new Error("Client was closed and is not queryable"),this.connection)}),ee):(this.queryQueue.push(J),this._pulseQueryQueue(),ee):(Re.nextTick(()=>{J.handleError(new Error("Client has encountered a connection error and is n	ot queryable"),this.connection)}),ee)}ref(){this.connection.ref()}unref(){this.connection.unref()}end(x){if(this._ending=!0,!this.connection._connecting)if(x)x();else return this._Promise.resolve();if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),x)this.connection.once("end",x);else return new this._Promise(I=>{this.connection.once("end",I)})}};h(Q,"Client");var V=Q;V.Query=k,D.exports=V}),js=b(($,D)=>{P();var C=L().EventEmitter,O=h(function(){},"	NOOP"),N=h((x,I)=>{let U=x.findIndex(I);return U===-1?void 0:x.splice(U,1)[0]},"removeWhere"),T=class{constructor(I,U,J){this.client=I,this.idleListener=U,this.timeoutId=J}};h(T,"IdleItem");var R=T,A=class{constructor(I){this.callback=I}};h(A,"PendingItem");var k=A;function Z(){throw new Error("Release called 	on client which has already been released to the pool.")}h(Z,"throwOnDoubleRele	ase");function q(x,I){if(I)return{callback:I,result:void 0};let U,J,ee=h(function(be,Se){be?U(be):J(Se)},"cb"),ie=new x(function(be,Se){J=be,U=Se}).catch(be=>{throw Error.captureStackTrace(be),be});return{callback:ee,result:ie}}h(q,"promisify");function Q(x,I){return h(function U(J){J.client=I,I.removeListener("error",U),I.on("error",()=>{x.log("additional clien	t error after disconnection due to error",J)}),x._remove(I),x.emit("error",J,I)},"idleListener")}h(Q,"makeIdleListener");var V=class extends C{constructor(I,U){super(),this.options=Object.assign({},I),I!=null&&"password"in I&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:I.password}),I!=null&&I.ssl&&I.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||U||ir().Client,this.Promise=this.options.Promise||ke.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_pulseQueue(){if(this.log("pulse q	ueue"),this.ended){this.log("pulse queue ended");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(U=>{this._remove(U.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let I=this._pendingQueue.shift();if(this._idle.length){let U=this._idle.pop();clearTimeout(U.timeoutId);let J=U.client;J.ref&&J.ref();let ee=U.idleListener;return this._acquireClient(J,I,ee,!1)}if(!this._isFull())return this.newClient(I);throw new Error("unexpected condition")}_remove(I){let U=N(this._idle,J=>J.client===I);U!==void 0&&clearTimeout(U.timeoutId),this._clients=this._clients.filter(J=>J!==I),I.end(),this.emit("remove",I)}connect(I){if(this.ending){let ee=new Error("Can	not use a pool after calling end on the pool");return I?I(ee):this.Promise.reject(ee)}let U=q(this.Promise,I),J=U.result;if(this._isFull()||this._idle.length){if(this._idle.length&&Re.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new k(U.callback)),J;let ee=h((Se,W,he)=>{clearTimeout(be),U.callback(Se,W,he)},"queueCallback"),ie=new k(ee),be=setTimeout(()=>{N(this._pendingQueue,Se=>Se.callback===ee),ie.timedOut=!0,U.callback(new Error("timeout exceeded when try	ing to connect"))},this.options.connectionTimeoutMillis);return this._pendingQueue.push(ie),J}return this.newClient(new k(U.callback)),J}newClient(I){let U=new this.Client(this.options);this._clients.push(U);let J=Q(this,U);this.log("checking c	lient timeout");let ee,ie=!1;this.options.connectionTimeoutMillis&&(ee=setTimeout(()=>{this.log("ending client due to timeout"),ie=!0,U.connection?U.connection.stream.destroy():U.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),U.connect(be=>{if(ee&&clearTimeout(ee),U.on("error",J),be)this.log("client failed to	 connect",be),this._clients=this._clients.filter(Se=>Se!==U),ie&&(be.message="Connect	ion terminated due to connection timeout"),this._pulseQueue(),I.timedOut||I.callback(be,void 0,O);else{if(this.log("new client connected"),this.options.maxLifetimeSeconds!==0){let Se=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(U),this._idle.findIndex(W=>W.client===U)!==-1&&this._acquireClient(U,new k((W,he,fe)=>fe()),J,!1)},this.options.maxLifetimeSeconds*1e3);Se.unref(),U.once("end",()=>clearTimeout(Se))}return this._acquireClient(U,I,J,!0)}})}_acquireClient(I,U,J,ee){ee&&this.emit("connect",I),this.emit("acquire",I),I.release=this._releaseOnce(I,J),I.removeListener("error",J),U.timedOut?ee&&this.options.verify?this.options.verify(I,I.release):I.release():ee&&this.options.verify?this.options.verify(I,ie=>{if(ie)return I.release(ie),U.callback(ie,void 0,O);U.callback(void 0,I,I.release)}):U.callback(void 0,I,I.release)}_releaseOnce(I,U){let J=!1;return ee=>{J&&Z(),J=!0,this._release(I,U,ee)}}_release(I,U,J){if(I.on("error",U),I._poolUseCount=(I._poolUseCount||0)+1,this.emit("release",J,I),J||this.ending||!I._queryable||I._ending||I._poolUseCount>=this.options.maxUses){I._poolUseCount>=this.options.maxUses&&this.log("remove ex	pended client"),this._remove(I),this._pulseQueue();return}if(this._expired.has(I)){this.log("remove expired client"),this._expired.delete(I),this._remove(I),this._pulseQueue();return}let ee;this.options.idleTimeoutMillis&&(ee=setTimeout(()=>{this.log("remove	 idle client"),this._remove(I)},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&ee.unref()),this.options.allowExitOnIdle&&I.unref(),this._idle.push(new R(I,U,ee)),this._pulseQueue()}query(I,U,J){if(typeof I=="function"){let ie=q(this.Promise,I);return Pe(function(){return ie.callback(new Error("Passing a function as the first	 parameter to pool.query is not supported"))}),ie.result}typeof U=="function"&&(J=U,U=void 0);let ee=q(this.Promise,J);return J=ee.callback,this.connect((ie,be)=>{if(ie)return J(ie);let Se=!1,W=h(he=>{Se||(Se=!0,be.release(he),J(he))},"onError");be.once("err	or",W),this.log("dispatching query");try{be.query(I,U,(he,fe)=>{if(this.log("query 	dispatched"),be.removeListener("error",W),!Se)return Se=!0,be.release(he),he?J(he):J(void 0,fe)})}catch(he){return be.release(he),J(he)}}),ee.result}end(I){if(this.log("ending"),this.ending){let J=new Error("Called end on pool more than once");return I?I(J):this.Promise.reject(J)}this.ending=!0;let U=q(this.Promise,I);return this._endCallback=U.callback,this._pulseQueue(),U.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((I,U)=>I+(this._expired.has(U)?1:0),0)}get totalCount(){return this._clients.length}};h(V,"Pool");var Y=V;D.exports=Y}),sr={};E(sr,{default:()=>rr});var rr,Jt=v(()=>{P(),rr={}}),So=b(($,D)=>{D.exports={name:"pg",version:"8.8.0",description:"PostgreSQL	 client - pure javascript & libpq with the same API",keywords:["database","libpq","pg","postgre","postgres","postgresql","rdbms"],homepage:"https://github.com/bri	anc/node-postgres",repository:{type:"git",url:"git://github.com/brianc/node-post	gres.git",directory:"packages/pg"},author:"Brian Carlson <brian.m.carlson@gmail.	com>",main:"./lib",dependencies:{"buffer-writer":"2.0.0","packet-reader":"1.0.0","pg-connection-string":"^2.5.0","pg-pool":"^3.5.2","pg-protocol":"^1.5.0","pg-ty	pes":"^2.1.0",pgpass:"1.x"},devDependencies:{async:"2.6.4",bluebird:"3.5.2",co:"	4.6.0","pg-copy-streams":"0.3.0"},peerDependencies:{"pg-native":">=3.0.1"},peerDependenciesMeta:{"pg-native":{optional:!0}},scripts:{test:"make test-all"},files:["lib","SPONSORS	.md"],license:"MIT",engines:{node:">= 8.0.0"},gitHead:"c99fb2c127ddf8d712500db2c	7b9a5491a178655"}}),ti=b(($,D)=>{P();var C=L().EventEmitter,O=(F(),ae(H)),N=Ws(),T=D.exports=function(A,k,Z){C.call(this),A=N.normalizeQueryConfig(A,k,Z),this.text=A.text,this.values=A.values,this.name=A.name,this.callback=A.callback,this.state="new",this._arrayMode=A.rowMode==="array",this._emitRowEvents=!1,this.on("	newListener",(function(q){q==="row"&&(this._emitRowEvents=!0)}).bind(this))};O.inherits(T,C);var R={sqlState:"code",statementPosition:"position",messagePrimary:"mess	age",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"	dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"	routine"};T.prototype.handleError=function(A){var k=this.native.pq.resultErrorFields();if(k)for(var Z in k){var q=R[Z]||Z;A[q]=k[Z]}this.callback?this.callback(A):this.emit("error",A),this.state="error"},T.prototype.then=function(A,k){return this._getPromise().then(A,k)},T.prototype.catch=function(A){return this._getPromise().catch(A)},T.prototype._getPromise=function(){return this._promise?this._promise:(this._promise=new Promise((function(A,k){this._once("end",A),this._once("error",k)}).bind(this)),this._promise)},T.prototype.submit=function(A){this.state="runn	ing";var k=this;this.native=A.native,A.native.arrayMode=this._arrayMode;var Z=h(function(V,Y,x){if(A.native.arrayMode=!1,Pe(function(){k.emit("_done")}),V)return k.handleError(V);k._emitRowEvents&&(x.length>1?Y.forEach((I,U)=>{I.forEach(J=>{k.emit("row",J,x[U])})}):Y.forEach(function(I){k.emit("row",I,x)})),k.state="end",k.emit("end",x),k.callback&&k.callback(null,x)},"after");if(Re.domain&&(Z=Re.domain.bind(Z)),this.name){this.name.length>63&&(console.error("Warning! Postgres only suppo	rts 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors exec	uting queries"));var q=(this.values||[]).map(N.prepareValue);if(A.namedQueries[this.name]){if(this.text&&A.namedQueries[this.name]!==this.text){let V=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return Z(V)}return A.native.execute(this.name,q,Z)}return A.native.prepare(this.name,this.text,q.length,function(V){return V?Z(V):(A.namedQueries[k.name]=k.text,k.native.execute(k.name,q,Z))})}else if(this.values){if(!Array.isArray(this.values)){let V=new Error("Query values must be an array");return Z(V)}var Q=this.values.map(N.prepareValue);A.native.query(this.text,Q,Z)}else A.native.query(this.text,Z)}}),ks=b(($,D)=>{P();var C=(Jt(),ae(sr)),O=ki();So();var N=L().EventEmitter,T=(F(),ae(H)),R=Os(),A=ti(),k=D.exports=function(Z){N.call(this),Z=Z||{},this._Promise=Z.Promise||ke.Promise,this._types=new O(Z.types),this.native=new C({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;var q=this.connectionParameters=new R(Z);this.user=q.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:q.password}),this.database=q.database,this.host=q.host,this.port=q.port,this.namedQueries={}};k.Query=A,T.inherits(k,N),k.prototype._errorAllQueries=function(Z){let q=h(Q=>{Re.nextTick(()=>{Q.native=this.native,Q.handleError(Z)})},"enqueueError");this._hasActiveQuery()&&(q(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(q),this._queryQueue.length=0},k.prototype._connect=function(Z){var q=this;if(this._connecting){Re.nextTick(()=>Z(new Error("Client h	as already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(Q,V){if(Q)return Z(Q);q.native.connect(V,function(Y){if(Y)return q.native.end(),Z(Y);q._connected=!0,q.native.on("error",function(x){q._queryable=!1,q._errorAllQueries(x),q.emit("er	ror",x)}),q.native.on("notification",function(x){q.emit("notification",{channel:x.relname,payload:x.extra})}),q.emit("connect"),q._pulseQueryQueue(!0),Z()})})},k.prototype.connect=function(Z){if(Z){this._connect(Z);return}return new this._Promise((q,Q)=>{this._connect(V=>{V?Q(V):q()})})},k.prototype.query=function(Z,q,Q){var V,Y,x,I,U;if(Z==null)throw new TypeError("Client was passed a null or undefined qu	ery");if(typeof Z.submit=="function")x=Z.query_timeout||this.connectionParameters.query_timeout,Y=V=Z,typeof q=="function"&&(Z.callback=q);else if(x=this.connectionParameters.query_timeout,V=new A(Z,q,Q),!V.callback){let J,ee;Y=new this._Promise((ie,be)=>{J=ie,ee=be}),V.callback=(ie,be)=>ie?ee(ie):J(be)}return x&&(U=V.callback,I=setTimeout(()=>{var J=new Error("Query read timeout");Re.nextTick(()=>{V.handleError(J,this.connection)}),U(J),V.callback=()=>{};var ee=this._queryQueue.indexOf(V);ee>-1&&this._queryQueue.splice(ee,1),this._pulseQueryQueue()},x),V.callback=(J,ee)=>{clearTimeout(I),U(J,ee)}),this._queryable?this._ending?(V.native=this.native,Re.nextTick(()=>{V.handleError(new Error("Client was closed and is not queryable"))}),Y):(this._queryQueue.push(V),this._pulseQueryQueue(),Y):(V.native=this.native,Re.nextTick(()=>{V.handleError(new Error("Client has encountered a connection error and is not queryable"))}),Y)},k.prototype.end=function(Z){var q=this;this._ending=!0,this._connected||this.once("connect",this.end.bind(this,Z));var Q;return Z||(Q=new this._Promise(function(V,Y){Z=h(x=>x?Y(x):V(),"cb")})),this.native.end(function(){q._errorAllQueries(new Error("Connection terminated")),Re.nextTick(()=>{q.emit("end"),Z&&Z()})}),Q},k.prototype._hasActiveQuery=function(){return this._activeQuery&&this._activeQuery.state!=="	error"&&this._activeQuery.state!=="end"},k.prototype._pulseQueryQueue=function(Z){if(this._connected&&!this._hasActiveQuery()){var q=this._queryQueue.shift();if(!q){Z||this.emit("drain");return}this._activeQuery=q,q.submit(this);var Q=this;q.once("_done",function(){Q._pulseQueryQueue()})}},k.prototype.cancel=function(Z){this._activeQuery===Z?this.native.cancel(function(){}):this._queryQueue.indexOf(Z)!==-1&&this._queryQueue.splice(this._queryQueue.indexOf(Z),1)},k.prototype.ref=function(){},k.prototype.unref=function(){},k.prototype.setTypeParser=function(Z,q,Q){return this._types.setTypeParser(Z,q,Q)},k.prototype.getTypeParser=function(Z,q){return this._types.getTypeParser(Z,q)}}),ps=b(($,D)=>{P(),D.exports=ks()}),ir=b(($,D)=>{P();var C=Ms(),O=Ns(),N=ei(),T=js(),{DatabaseError:R}=Tr(),A=h(Z=>{var q;return q=class extends T{constructor(Q){super(Q,Z)}},h(q,"BoundP	ool"),q},"poolFactory"),k=h(function(Z){this.defaults=O,this.Client=Z,this.Query=this.Client.Query,this.Pool=A(this.Client),this._pools=[],this.Connection=N,this.types=Xs(),this.DatabaseError=R},"PG");typeof Re.env.NODE_PG_FORCE_NATIVE<"u"?D.exports=new k(ps()):(D.exports=new k(C),Object.defineProperty(D.exports,"na	tive",{configurable:!0,enumerable:!1,get(){var Z=null;try{Z=new k(ps())}catch(q){if(q.code!=="MODULE_NOT_FOUND")throw q}return Object.defineProperty(D.exports,"	native",{value:Z}),Z}}))}),ms={};E(ms,{Client:()=>or,ClientBase:()=>Kn.ClientBase,Connection:()=>Kn.Connection,DatabaseError:()=>Kn.DatabaseError,NeonDbError:()=>$n,Pool:()=>ai,Query:()=>Kn.Query,defaults:()=>Kn.defaults,neon:()=>Nr,neonConfig:()=>Gn,types:()=>Kn.types}),Ip=ae(ms),P();var ni=z(ir());Pa(),P(),Pa(),Wr();var Il=z(Ws()),si=z(ki());function Ir($){return $ instanceof ue?"\\x"+$.toString("hex"):$}h(Ir,"encodeBuffe	rsAsBytea");var Qn=class Y2 extends Error{constructor(D){super(D),re(this,"name","NeonDbError"),re(this,"severity"),re(this,"code"),re(this,"detail"),re(this,"hint"),re(this,"position"),re(this,"internalPosition"),re(this,"internalQuery"),re(this,"wh	ere"),re(this,"schema"),re(this,"table"),re(this,"column"),re(this,"dataType"),re(this,"constraint"),re(this,"file"),re(this,"line"),re(this,"routine"),re(this,"sourceErro	r"),"captureStackTrace"in Error&&typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Y2)}};h(Qn,"NeonDbError");var $n=Qn,ri="transaction() exp	ects an array of queries, or a function returning an array of queries",ar=["seve	rity","code","detail","hint","position","internalPosition","internalQuery","wher	e","schema","table","column","dataType","constraint","file","line","routine"];function Nr($,{arrayMode:D,fullResults:C,fetchOptions:O,isolationLevel:N,readOnly:T,deferrable:R,queryCallback:A,resultCallback:k,authToken:Z}={}){if(!$)throw new Error("No data	base connection string was provided to `neon()`. Perhaps an environment variable	 has not been set?");let q;try{q=Ds($)}catch{throw new Error("Database connectio	n string provided to `neon()` is not a valid URL. Connection string: "+String($))}let{protocol:Q,username:V,hostname:Y,port:x,pathname:I}=q;if(Q!=="postgres:"&&Q!=="postgresql:"||!V||!Y||!I)throw new Error("Database connection string format for	 `neon()` should be: postgresql://user:password@host.tld/dbname?option=value");function U(ee,...ie){let be,Se;if(typeof ee=="string")be=ee,Se=ie[1],ie=ie[0]??[];else{be="";for(let he=0;he<ee.length;he++)be+=ee[he],he<ie.length&&(be+="$"+(he+1))}ie=ie.map(he=>Ir((0,Il.prepareValue)(he)));let W={query:be,params:ie};return A&&A(W),ii(J,W,Se)}h(U,"resolve"),U.transaction=async(ee,ie)=>{if(typeof ee=="function"&&(ee=ee(U)),!Array.isArray(ee))throw new Error(ri);ee.forEach(W=>{if(W[Symbol.toStringTag]!=="NeonQueryPromise")throw new Error(ri)});let be=ee.map(W=>W.parameterizedQuery),Se=ee.map(W=>W.opts??{});return J(be,Se,ie)};async function J(ee,ie,be){let{fetchEndpoint:Se,fetchFunction:W}=Gn,he=Array.isArray(ee)?{queries:ee}:ee,fe=O??{},se=D??!1,we=C??!1,ye=N,He=T,Ke=R;be!==void 0&&(be.fetchOptions!==void 0&&(fe={...fe,...be.fetchOptions}),be.arrayMode!==void 0&&(se=be.arrayMode),be.fullResults!==void 0&&(we=be.fullResults),be.isolationLevel!==void 0&&(ye=be.isolationLevel),be.readOnly!==void 0&&(He=be.readOnly),be.deferrable!==void 0&&(Ke=be.deferrable)),ie!==void 0&&!Array.isArray(ie)&&ie.fetchOptions!==void 0&&(fe={...fe,...ie.fetchOptions});let Te=Z;!Array.isArray(ie)&&(ie==null?void 0:ie.authToken)!==void 0&&(Te=ie.authToken);let Ue=typeof Se=="function"?Se(Y,x,{jwtAuth:Te!==void 0}):Se,We={"Neon-Connection-String":$,"Neon-Raw-Text-Output":"true","Neon-Ar	ray-Mode":"true"},Qe=await ts(Te);Qe&&(We.Authorization=`Bearer ${Qe}`),Array.isArray(ee)&&(ye!==void 0&&(We["Neon-Batch-Isolation-Level"]=ye),He!==void 0&&(We["Neon-Bat	ch-Read-Only"]=String(He)),Ke!==void 0&&(We["Neon-Batch-Deferrable"]=String(Ke)));let lt;try{lt=await(W??fetch)(Ue,{method:"POST",body:JSON.stringify(he),headers:We,...fe})}catch(vt){let Ht=new $n(`Error connecting to database: ${vt.message}`);throw Ht.sourceError=vt,Ht}if(lt.ok){let vt=await lt.json();if(Array.isArray(ee)){let Ht=vt.results;if(!Array.isArray(Ht))throw new $n("Neon internal error: unexpected result format");return Ht.map((It,kt)=>{let Yn=ie[kt]??{},Pn=Yn.arrayMode??se,gs=Yn.fullResults??we;return La(It,{arrayMode:Pn,fullResults:gs,parameterizedQuery:ee[kt],resultCallback:k,types:Yn.types})})}else{let Ht=ie??{},It=Ht.arrayMode??se,kt=Ht.fullResults??we;return La(vt,{arrayMode:It,fullResults:kt,parameterizedQuery:ee,resultCallback:k,types:Ht.types})}}else{let{status:vt}=lt;if(vt===400){let Ht=await lt.json(),It=new $n(Ht.message);for(let kt of ar)It[kt]=Ht[kt]??void 0;throw It}else{let Ht=await lt.text();throw new $n(`Server error (HTTP status ${vt}): ${Ht}`)}}}return h(J,"execute"),U}h(Nr,"neon");function ii($,D,C){return{[Symbol.toStringTag]:"NeonQueryPromise",parameterizedQuery:D,opts:C,then:h((O,N)=>$(D,C).then(O,N),"then"),catch:h(O=>$(D,C).catch(O),"catch"),finally:h(O=>$(D,C).finally(O),"finally")}}h(ii,"createNeonQueryPromise");function La($,{arrayMode:D,fullResults:C,parameterizedQuery:O,resultCallback:N,types:T}){let R=new si.default(T),A=$.fields.map(q=>q.name),k=$.fields.map(q=>R.getTypeParser(q.dataTypeID)),Z=D===!0?$.rows.map(q=>q.map((Q,V)=>Q===null?null:k[V](Q))):$.rows.map(q=>Object.fromEntries(q.map((Q,V)=>[A[V],Q===null?null:k[V](Q)])));return N&&N(O,$,Z,{arrayMode:D,fullResults:C}),C?($.viaNeonFetch=!0,$.rowAsArray=D,$.rows=Z,$._parsers=k,$._types=R,$):Z}h(La,"	processQueryResult");async function ts($){if(typeof $=="string")return $;if(typeof $=="function")try{return await Promise.resolve($())}catch(D){let C=new $n("Error ge	tting auth token.");throw D instanceof Error&&(C=new $n(`Error getting auth token: ${D.message}`)),C}}h(ts,"getAuthToken");var Kt=z(Os()),Kn=z(ir()),Rr=class extends ni.Client{constructor(D){super(D),this.config=D}get neonConfig(){return this.connection.stream}connect(D){var Z,q;let{neonConfig:C}=this;C.forceDisablePgSSL&&(this.ssl=this.connection.ssl=!1),this.ssl&&C.useSecureWebSocket&&console.warn("	SSL is enabled for both Postgres (e.g. ?sslmode=require in the connection string	 + forceDisablePgSSL = false) and the WebSocket tunnel (useSecureWebSocket = tru	e). Double encryption will increase latency and CPU usage. It may be appropriate	 to disable SSL in the Postgres connection parameters or set forceDisablePgSSL =	 true.");let O=((Z=this.config)==null?void 0:Z.host)!==void 0||((q=this.config)==null?void 0:q.connectionString)!==void 0||Re.env.PGHOST!==void 0,N=Re.env.USER??Re.env.USERNAME;if(!O&&this.host==="localhost"&&this.user===N&&this.database===N&&this.password===null)throw new Error(`No database host or connection string was set, and key parameters have default values (host: localhost, user: ${N}, db: ${N}, password: null). Is an environment variable missing? Alternatively, if you intended to connect with these parameters, please set the host to 'localhost' explicitly.`);let T=super.connect(D),R=C.pipelineTLS&&this.ssl,A=C.pipelineConnect==="password";if(!R&&!C.pipelineConnect)return T;let k=this.connection;if(R&&k.on("connect",()=>k.stream.emit("data","S")),A){k.removeAllListeners("authenticationCleartextPassword"),k.removeAllListeners("readyForQuery"),k.once("readyForQuery",()=>k.on("readyForQuery",this._handleReadyForQuery.bind(this)));let Q=this.ssl?"sslconnect":"connect";k.on(Q,()=>{this._handleAuthCleartextPassword(),this._handleReadyForQuery()})}return T}async _handleAuthSASLContinue(D){let C=this.saslSession,O=this.password,N=D.data;if(C.message!=="SASLInitialResponse"||typeof O!="string"||typeof N!="string")throw new Error("SASL: protocol error");let T=Object.fromEntries(N.split(",").map(Qe=>{if(!/^.=/.test(Qe))throw new Error("SASL: Inva	lid attribute pair entry");let lt=Qe[0],vt=Qe.substring(2);return[lt,vt]})),R=T.r,A=T.s,k=T.i;if(!R||!/^[!-+--~]+$/.test(R))throw new Error("SASL: SCRAM-SERVER-FIRST-	MESSAGE: nonce missing/unprintable");if(!A||!/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(A))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing/not base	64");if(!k||!/^[1-9][0-9]*$/.test(k))throw new Error("SASL: SCRAM-SERVER-FIRST-M	ESSAGE: missing/invalid iteration count");if(!R.startsWith(C.clientNonce))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");if(R.length===C.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MES	SAGE: server nonce is too short");let Z=parseInt(k,10),q=ue.from(A,"base64"),Q=new TextEncoder,V=Q.encode(O),Y=await xe.subtle.importKey("raw",V,{name:"HMAC",hash:{name:"SHA-25	6"}},!1,["sign"]),x=new Uint8Array(await xe.subtle.sign("HMAC",Y,ue.concat([q,ue.from([0,0,0,1])]))),I=x;for(var U=0;U<Z-1;U++)x=new Uint8Array(await xe.subtle.sign("HMAC",Y,x)),I=ue.from(I.map((Qe,lt)=>I[lt]^x[lt]));let J=I,ee=await xe.subtle.importKey("raw",J,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),ie=new Uint8Array(await xe.subtle.sign("HMAC",ee,Q.encode("Client Key"))),be=await xe.subtle.digest("SHA-256",ie),Se="n=*,r="+C.clientNonce,W="r="+R+",s="+A+",i="+Z,he="c=biws,r="+R,fe=Se+","+W+","+he,se=await xe.subtle.importKey("raw",be,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var we=new Uint8Array(await xe.subtle.sign("HMAC",se,Q.encode(fe))),ye=ue.from(ie.map((Qe,lt)=>ie[lt]^we[lt])),He=ye.toString("base64");let Ke=await xe.subtle.importKey("raw",J,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),Te=await xe.subtle.sign("HMAC",Ke,Q.encode("Server Key")),Ue=await xe.subtle.importKey("raw",Te,{name:"HM	AC",hash:{name:"SHA-256"}},!1,["sign"]);var We=ue.from(await xe.subtle.sign("HMAC",Ue,Q.encode(fe)));C.message="SASLResponse",C.serverSignature=We.toString("base64"),C.response=he+",p="+He,this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}};h(Rr,"NeonClient");var or=Rr;function Ot($,D){if(D)return{callback:D,result:void 0};let C,O,N=h(function(R,A){R?C(R):O(A)},"cb"),T=new $(function(R,A){O=R,C=A});return{callback:N,result:T}}h(Ot,"promisify");var Ps=class extends ni.Pool{constructor(){super(...arguments),re(this,"Client",or),re(this,"hasFetchUnsupportedListeners",!1)}on(D,C){return D!=="error"&&(this.hasFetchUnsupportedListeners=!0),super.on(D,C)}query(D,C,O){var T;if(!Gn.poolQueryViaFetch||this.hasFetchUnsupportedListeners||typeof D=="function")return super.query(D,C,O);typeof C=="function"&&(O=C,C=void 0);let N=Ot(this.Promise,O);O=N.callback;try{let R=new Kt.default(this.options),A=encodeURIComponent,k=encodeURI,Z=`postgresql://${A(R.user)}:${A(R.password)}@${A(R.host)}/${k(R.database)}`,q=typeof D=="string"?D:D.text,Q=C??D.values??[];Nr(Z,{fullResults:!0,arrayMode:D.rowMode==="	array"})(q,Q,{types:D.types??((T=this.options)==null?void 0:T.types)}).then(V=>O(void 0,V)).catch(V=>O(V))}catch(R){O(R)}return N.result}};h(Ps,"NeonPool");var ai=Ps;/*! Bundled license information:

	ieee754/index.js:
	  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

	buffer/index.js:
	  (*!
	   * The buffer module from node.js, for the browser.
	   *
	   * @author   Feross Aboukhadijeh <https://feross.org>
	   * @license  MIT
	   *)
	*/return Ip}var o1;function AC(){if(o1)return ch;o1=1;var r={};Object.defineProperty(ch,"__esModule",{value:!0}),ch.neon=n;const e=TC();function n(i,o){let u,f;if(typeof i=="string"?(u=i,f=o):(u=void 0,f=i),u===void 0&&r.NETLIFY_DATABASE_URL===void 0)throw new Error("[@netlify/neon] Failed to instantiate Neon client: connection string is not provided either as an argument or as an environment variable (`NETLIFY_DATABASE_URL`).\n      \nYou can initialize a Database in Netlify by running the command: `netlify db init`\n\nThe `netlify db init` command will create a new database and add the `NETLIFY_DATABASE_URL` environment variable to your Netlify site.\n\nRead more: https://cli.netlify.com/#db\n");return(0,e.neon)(u??r.NETLIFY_DATABASE_URL,f)}return ch}var X2=AC(),IC={};const NC=IC.DATABASE_URL||"postgresql://neondb_owner:npg_l1ihrQg7wRdv@ep-cold-feather-aecrkjj2-pooler.c-2.us-east-2.aws.neon.tech/neondb?channel_binding=require&sslmode=require",is=X2.neon(NC);class ca{static async savePdfFile(e){var n;try{return{success:!0,pdfId:(n=(await is`
        INSERT INTO pdf_files (
          filename, original_filename, file_type, file_size, content,
          patient_id, category, description, uploaded_by
        ) VALUES (
          ${e.filename},
          ${e.originalFilename},
          ${e.fileType},
          ${e.fileSize},
          ${e.content},
          ${e.patientId||null},
          ${e.category},
          ${e.description||null},
          ${e.uploadedBy||null}
        ) RETURNING id
      `)[0])==null?void 0:n.id}}catch(i){throw console.error("Error saving PDF file:",i),i}}static async getPdfFile(e){try{return(await is`
        SELECT * FROM pdf_files WHERE id = ${e}
      `)[0]||null}catch(n){throw console.error("Error getting PDF file:",n),n}}static async getPdfsByPatient(e){try{return await is`
        SELECT id, filename, original_filename, file_type, file_size,
               category, description, uploaded_by, uploaded_at
        FROM pdf_files 
        WHERE patient_id = ${e}
        ORDER BY uploaded_at DESC
      `}catch(n){throw console.error("Error getting PDFs by patient:",n),n}}static async getAllPdfs(e=100){try{return await is`
        SELECT p.id, p.filename, p.original_filename, p.file_type, p.file_size,
               p.category, p.description, p.uploaded_by, p.uploaded_at,
               pt.name_ar as patient_name
        FROM pdf_files p
        LEFT JOIN patients pt ON p.patient_id = pt.national_id
        ORDER BY p.uploaded_at DESC
        LIMIT ${e}
      `}catch(n){throw console.error("Error getting all PDFs:",n),n}}static async deletePdfFile(e){try{return await is`DELETE FROM pdf_files WHERE id = ${e}`,{success:!0}}catch(n){throw console.error("Error deleting PDF file:",n),n}}static async getPdfTemplates(){try{return await is`
        SELECT * FROM pdf_templates 
        WHERE is_active = true
        ORDER BY name_ar
      `}catch(e){throw console.error("Error getting PDF templates:",e),e}}static async getPdfTemplate(e){try{return(await is`
        SELECT * FROM pdf_templates WHERE id = ${e}
      `)[0]||null}catch(n){throw console.error("Error getting PDF template:",n),n}}static async createPdfTemplate(e){var n;try{return{success:!0,templateId:(n=(await is`
        INSERT INTO pdf_templates (
          name, name_ar, template_type, html_template, css_styles, created_by
        ) VALUES (
          ${e.name},
          ${e.nameAr},
          ${e.templateType},
          ${e.htmlTemplate},
          ${e.cssStyles||null},
          ${e.createdBy||null}
        ) RETURNING id
      `)[0])==null?void 0:n.id}}catch(i){throw console.error("Error creating PDF template:",i),i}}static async generatePdfFromTemplate(e,n,i={}){try{const o=await this.getPdfTemplate(e);if(!o)throw new Error("Template not found");const u=this.processTemplate(o.htmlTemplate,n),f=o.cssStyles||"",h=await this.htmlToPdf(u,f),v=new Date().toISOString().replace(/[:.]/g,"-"),b=`${o.templateType}_${i.patientId||"general"}_${v}.pdf`;await is`
        INSERT INTO pdf_generation_history (
          template_id, patient_id, visit_id, assessment_id,
          generated_filename, generation_data, generated_by
        ) VALUES (
          ${e},
          ${i.patientId||null},
          ${i.visitId||null},
          ${i.assessmentId||null},
          ${b},
          ${JSON.stringify(n)},
          ${i.generatedBy||null}
        )
      `;const E={filename:b,originalFilename:b,fileType:"application/pdf",fileSize:h.length,content:h,patientId:i.patientId,category:"report",description:`Generated from template: ${o.nameAr}`,uploadedBy:i.generatedBy};return await this.savePdfFile(E),{success:!0,pdfContent:h,filename:b}}catch(o){throw console.error("Error generating PDF from template:",o),o}}static processTemplate(e,n){let i=e;Object.keys(n).forEach(u=>{const f=new RegExp(`{{${u}}}`,"g");i=i.replace(f,n[u]||"")});const o=/{{(\w+)\.(\w+)}}/g;return i=i.replace(o,(u,f,h)=>n[f]&&n[f][h]?n[f][h]:""),i=i.replace(/{{generationDate}}/g,new Date().toLocaleDateString("ar-SA")),i}static async htmlToPdf(e,n){const i=`
      <!DOCTYPE html>
      <html>
        <head>
          <meta charset="UTF-8">
          <style>${n}</style>
        </head>
        <body>${e}</body>
      </html>
    `;return new TextEncoder().encode(i)}static async getPdfStats(){var e,n;try{const[i,o,u,f]=await Promise.all([is`SELECT COUNT(*) as count FROM pdf_files`,is`SELECT SUM(file_size) as total_size FROM pdf_files`,is`
          SELECT category, COUNT(*) as count, SUM(file_size) as size
          FROM pdf_files 
          GROUP BY category 
          ORDER BY count DESC
        `,is`
          SELECT id, filename, original_filename, category, uploaded_at, uploaded_by
          FROM pdf_files 
          ORDER BY uploaded_at DESC 
          LIMIT 10
        `]);return{totalPdfs:((e=i[0])==null?void 0:e.count)||0,totalSize:((n=o[0])==null?void 0:n.total_size)||0,pdfsByCategory:u,recentPdfs:f}}catch(i){throw console.error("Error getting PDF stats:",i),i}}static async searchPdfs(e,n,i){try{let o=`
        SELECT p.*, pt.name_ar as patient_name
        FROM pdf_files p
        LEFT JOIN patients pt ON p.patient_id = pt.national_id
        WHERE (
          p.filename ILIKE ${"%"+e+"%"} OR
          p.original_filename ILIKE ${"%"+e+"%"} OR
          p.description ILIKE ${"%"+e+"%"} OR
          pt.name_ar ILIKE ${"%"+e+"%"}
        )
      `;const u=[e];return n&&(o+=` AND p.category = $${u.length+1}`,u.push(n)),i&&(o+=` AND p.patient_id = $${u.length+1}`,u.push(i)),o+=" ORDER BY p.uploaded_at DESC LIMIT 50",await is.unsafe(o,u)}catch(o){throw console.error("Error searching PDFs:",o),o}}}var RC={};const CC=RC.DATABASE_URL||"postgresql://neondb_owner:npg_l1ihrQg7wRdv@ep-cold-feather-aecrkjj2-pooler.c-2.us-east-2.aws.neon.tech/neondb?channel_binding=require&sslmode=require",As=X2.neon(CC);class pa{static async initializeDatabase(){try{const i=(await(await fetch("/database/schema.sql")).text()).split(";").filter(o=>o.trim());for(const o of i)o.trim()&&await As`${o}`;return console.log("Database initialized successfully"),{success:!0}}catch(e){throw console.error("Error initializing database:",e),e}}static async savePatient(e){var n;try{return{success:!0,nationalId:(n=(await As`
        INSERT INTO patients (
          national_id, name_ar, name_en, age, sex, admission_date,
          area_id, phone, address, medical_diagnosis, braden_score,
          status, tags, contact_attempts, assessments
        ) VALUES (
          ${e.nationalId}, ${e.nameAr}, ${e.nameEn||null},
          ${e.age||null}, ${e.sex||null}, ${e.admissionDate||null},
          ${e.areaId||null}, ${e.phone||null}, ${e.address||null},
          ${e.medicalDiagnosis||null}, ${e.bradenScore||null},
          ${e.status||"active"}, ${JSON.stringify(e.tags||[])},
          ${JSON.stringify(e.contactAttempts||[])}, ${JSON.stringify(e.assessments||[])}
        )
        ON CONFLICT (national_id) 
        DO UPDATE SET
          name_ar = EXCLUDED.name_ar,
          name_en = EXCLUDED.name_en,
          age = EXCLUDED.age,
          sex = EXCLUDED.sex,
          admission_date = EXCLUDED.admission_date,
          area_id = EXCLUDED.area_id,
          phone = EXCLUDED.phone,
          address = EXCLUDED.address,
          medical_diagnosis = EXCLUDED.medical_diagnosis,
          braden_score = EXCLUDED.braden_score,
          status = EXCLUDED.status,
          tags = EXCLUDED.tags,
          contact_attempts = EXCLUDED.contact_attempts,
          assessments = EXCLUDED.assessments,
          updated_at = CURRENT_TIMESTAMP
        RETURNING national_id
      `)[0])==null?void 0:n.national_id}}catch(i){throw console.error("Error saving patient:",i),i}}static async getPatient(e){try{return(await As`
        SELECT * FROM patients WHERE national_id = ${e}
      `)[0]||null}catch(n){throw console.error("Error getting patient:",n),n}}static async getAllPatients(){try{return await As`
        SELECT * FROM patients ORDER BY created_at DESC
      `}catch(e){throw console.error("Error getting all patients:",e),e}}static async getPatientsByArea(e){try{return await As`
        SELECT * FROM patients WHERE area_id = ${e} ORDER BY name_ar
      `}catch(n){throw console.error("Error getting patients by area:",n),n}}static async saveVisit(e){var n;try{return{success:!0,visitId:(n=(await As`
        INSERT INTO visits (
          patient_id, team_id, visit_date, status,
          doctor_note, nurse_note, pt_note, sw_note,
          doctor_sign, nurse_sign, pt_sign, sw_sign
        ) VALUES (
          ${e.patientId}, ${e.teamId||null}, ${e.visitDate},
          ${e.status||"Scheduled"}, ${JSON.stringify(e.doctorNote||null)},
          ${JSON.stringify(e.nurseNote||null)}, ${JSON.stringify(e.ptNote||null)},
          ${JSON.stringify(e.swNote||null)}, ${e.doctorSign||null},
          ${e.nurseSign||null}, ${e.ptSign||null}, ${e.swSign||null}
        )
        ON CONFLICT (patient_id, visit_date)
        DO UPDATE SET
          team_id = EXCLUDED.team_id,
          status = EXCLUDED.status,
          doctor_note = EXCLUDED.doctor_note,
          nurse_note = EXCLUDED.nurse_note,
          pt_note = EXCLUDED.pt_note,
          sw_note = EXCLUDED.sw_note,
          doctor_sign = EXCLUDED.doctor_sign,
          nurse_sign = EXCLUDED.nurse_sign,
          pt_sign = EXCLUDED.pt_sign,
          sw_sign = EXCLUDED.sw_sign,
          updated_at = CURRENT_TIMESTAMP
        RETURNING id
      `)[0])==null?void 0:n.id}}catch(i){throw console.error("Error saving visit:",i),i}}static async getVisitsByDateRange(e,n){try{return await As`
        SELECT v.*, p.name_ar as patient_name
        FROM visits v
        JOIN patients p ON v.patient_id = p.national_id
        WHERE v.visit_date >= ${e} AND v.visit_date <= ${n}
        ORDER BY v.visit_date DESC, p.name_ar
      `}catch(i){throw console.error("Error getting visits by date range:",i),i}}static async getTodayVisits(){const e=new Date().toISOString().split("T")[0];return this.getVisitsByDateRange(e,e)}static async saveStaff(e){var n;try{return{success:!0,staffId:(n=(await As`
        INSERT INTO staff (
          name_ar, name_en, profession_ar, profession_en,
          phone, email, area_id
        ) VALUES (
          ${e.nameAr}, ${e.nameEn||null}, ${e.professionAr||null},
          ${e.professionEn||null}, ${e.phone||null}, ${e.email||null},
          ${e.areaId||null}
        ) RETURNING id
      `)[0])==null?void 0:n.id}}catch(i){throw console.error("Error saving staff:",i),i}}static async getAllStaff(){try{return await As`
        SELECT * FROM staff ORDER BY name_ar
      `}catch(e){throw console.error("Error getting all staff:",e),e}}static async saveAssessment(e){var n;try{return{success:!0,assessmentId:(n=(await As`
        INSERT INTO assessments (
          id, patient_id, role, assessment_data, created_by
        ) VALUES (
          ${e.id}, ${e.patientId}, ${e.role},
          ${JSON.stringify(e)}, ${e.createdBy||null}
        )
        ON CONFLICT (id)
        DO UPDATE SET
          assessment_data = EXCLUDED.assessment_data,
          updated_at = CURRENT_TIMESTAMP
        RETURNING id
      `)[0])==null?void 0:n.id}}catch(i){throw console.error("Error saving assessment:",i),i}}static async getAssessmentsByPatient(e){try{return await As`
        SELECT * FROM assessments 
        WHERE patient_id = ${e}
        ORDER BY created_at DESC
      `}catch(n){throw console.error("Error getting assessments by patient:",n),n}}static async logActivity(e,n,i,o){var u;try{return{success:!0,logId:(u=(await As`
        INSERT INTO activity_log (action, details, user_email, user_name)
        VALUES (${e}, ${JSON.stringify(n)}, ${i||null}, ${o||null})
        RETURNING id
      `)[0])==null?void 0:u.id}}catch(f){throw console.error("Error logging activity:",f),f}}static async syncFromFirebase(e){var n,i,o;try{if(e.patients)for(const u of e.patients)await this.savePatient(u);if(e.staff)for(const u of e.staff)await this.saveStaff(u);if(e.visits)for(const u of e.visits)await this.saveVisit(u);return await this.logActivity("sync_from_firebase",{patientsCount:((n=e.patients)==null?void 0:n.length)||0,staffCount:((i=e.staff)==null?void 0:i.length)||0,visitsCount:((o=e.visits)==null?void 0:o.length)||0}),{success:!0}}catch(u){throw console.error("Error syncing from Firebase:",u),u}}static async savePdf(e){return ca.savePdfFile(e)}static async getPdfsByPatient(e){return ca.getPdfsByPatient(e)}static async getAllPdfs(e=100){return ca.getAllPdfs(e)}static async generatePatientCard(e,n){const i=await this.getPatient(e);if(!i)throw new Error("Patient not found");return ca.generatePdfFromTemplate(1,{patient:{nameAr:i.name_ar,nationalId:i.national_id,age:i.age,sex:i.sex==="M"?"":"",phone:i.phone,areaId:i.area_id,admissionDate:i.admission_date,bradenScore:i.braden_score,medicalDiagnosis:i.medical_diagnosis},generationDate:new Date().toLocaleDateString("ar-SA"),generatedBy:n||""},{patientId:e,generatedBy:n})}static async generateVisitReport(e,n,i){const[o,u]=await Promise.all([this.getPatient(e),As`SELECT * FROM visits WHERE id = ${n}`]);if(!o||!u[0])throw new Error("Patient or visit not found");const f=u[0];return ca.generatePdfFromTemplate(2,{patient:{nameAr:o.name_ar,nationalId:o.national_id},visit:{visitDate:f.visit_date,status:f.status,doctorNote:f.doctor_note?JSON.stringify(f.doctor_note):null,nurseNote:f.nurse_note?JSON.stringify(f.nurse_note):null,doctorSign:f.doctor_sign,nurseSign:f.nurse_sign},generationDate:new Date().toLocaleDateString("ar-SA")},{patientId:e,visitId:n,generatedBy:i})}static async getPdfStats(){return ca.getPdfStats()}static async searchPdfs(e,n,i){return ca.searchPdfs(e,n,i)}}const Zm=v1(),Np=Zm.staff.filter(r=>r.===""),Jo=Zm.staff.filter(r=>r.===""),W2={...Zm,filters:{search:"",areas:[],tags:[],sex:[],risk:[]},selectedPatientIds:new Set,currentRole:ut.Coordinator,visits:[],teams:[{id:"team1",name:"Team 1",members:[Np[0],Jo[0],Jo[1]]},{id:"team2",name:"Team 2",members:[Np[1],Jo[2],Jo[3]]},{id:"team3",name:"Team 3",members:[Np[2],Jo[4],Jo[5]]}],customLists:[]},DC=(r,e)=>{switch(e.type){case"SET_SEARCH":return{...r,filters:{...r.filters,search:e.payload}};case"TOGGLE_AREA_FILTER":const n=r.filters.areas.includes(e.payload)?r.filters.areas.filter(h=>h!==e.payload):[...r.filters.areas,e.payload];return{...r,filters:{...r.filters,areas:n}};case"TOGGLE_TAG_FILTER":const i=r.filters.tags.includes(e.payload)?r.filters.tags.filter(h=>h!==e.payload):[...r.filters.tags,e.payload];return{...r,filters:{...r.filters,tags:i}};case"TOGGLE_SEX_FILTER":const o=r.filters.sex.includes(e.payload)?r.filters.sex.filter(h=>h!==e.payload):[...r.filters.sex,e.payload];return{...r,filters:{...r.filters,sex:o}};case"TOGGLE_RISK_FILTER":const u=r.filters.risk.includes(e.payload)?r.filters.risk.filter(h=>h!==e.payload):[...r.filters.risk,e.payload];return{...r,filters:{...r.filters,risk:u}};case"CLEAR_FILTERS":return{...r,filters:{search:"",areas:[],tags:[],sex:[],risk:[]}};case"TOGGLE_PATIENT_SELECTION":const f=new Set(r.selectedPatientIds);return f.has(e.payload)?f.delete(e.payload):f.add(e.payload),{...r,selectedPatientIds:f};case"CLEAR_SELECTIONS":return{...r,selectedPatientIds:new Set};case"SELECT_ALL_FILTERED":return{...r,selectedPatientIds:new Set(e.payload)};case"SET_ROLE":return{...r,currentRole:e.payload};case"ASSIGN_TO_VISITS":{const h=e.payload.patientIds.map(E=>({patientId:E,date:e.payload.date,teamId:e.payload.teamId,status:"Scheduled"})),v=new Set(r.visits.map(E=>`${E.patientId}-${E.date}`)),b=h.filter(E=>!v.has(`${E.patientId}-${E.date}`));return b.forEach(E=>{wi.queueForSync("saveVisit",E),vr.logActivity("assign_visit",{patientIds:e.payload.patientIds,teamId:e.payload.teamId,date:e.payload.date})}),{...r,visits:[...r.visits,...b],selectedPatientIds:new Set}}case"SAVE_VISIT_NOTE":{const{visitId:h,role:v,note:b,user:E}=e.payload,[j,z]=h.split("_"),ae=r.visits.map(re=>{if(re.patientId===j&&re.date===z){const ve={...re};v===ut.Doctor?(ve.doctorNote=b,ve.doctorSign=E):v===ut.Nurse?(ve.nurseNote=b,ve.nurseSign=E):v===ut.PhysicalTherapist?(ve.ptNote=b,ve.ptSign=E):v===ut.SocialWorker&&(ve.swNote=b,ve.swSign=E);const me=!!ve.doctorNote,De=!!ve.nurseNote;let ke="Scheduled";return me&&De?ke="Completed":me?ke="DoctorCompleted":De&&(ke="NurseCompleted"),ve.status=ke,wi.queueForSync("saveVisit",ve),vr.logActivity("save_visit_note",{visitId:h,role:v,status:ke}),ve}return re});return{...r,visits:ae}}case"SAVE_ASSESSMENT":{const{patientId:h,assessment:v}=e.payload,b=r.patients.map(E=>{if(E.nationalId===h){const j=[v,...E.assessments||[]];let z=E.bradenScore;v.role===ut.Nurse&&"bradenScore"in v&&v.bradenScore&&(z=parseInt(String(v.bradenScore),10));const ae={...E,assessments:j,bradenScore:z||E.bradenScore};return wi.queueForSync("savePatient",ae),wi.queueForSync("saveAssessment",v),vr.logActivity("save_assessment",{patientId:h,assessmentId:v.id,role:v.role}),ae}return E});return{...r,patients:b}}case"LOG_CONTACT_ATTEMPT":{const h=r.patients.map(v=>{if(v.nationalId===e.payload.patientId){const b={date:new Date().toISOString(),type:e.payload.type,staffName:e.payload.staffName},E={...v,contactAttempts:[b,...v.contactAttempts||[]]};return wi.queueForSync("savePatient",E),vr.logActivity("log_contact_attempt",{patientId:e.payload.patientId,type:e.payload.type,staffName:e.payload.staffName}),E}return v});return{...r,patients:h}}case"CANCEL_VISIT":{const h=r.visits.filter(v=>!(v.patientId===e.payload.patientId&&v.date===e.payload.date));return vr.logActivity("cancel_visit",{patientId:e.payload.patientId,date:e.payload.date}),{...r,visits:h}}case"IMPORT_STATE":return e.payload&&e.payload.patients&&e.payload.filters?{...W2,...e.payload,selectedPatientIds:new Set(e.payload.selectedPatientIds||[])}:r;case"CREATE_CUSTOM_LIST":{if(r.selectedPatientIds.size===0||!e.payload.name)return r;const h={id:Date.now().toString(),name:e.payload.name,patientIds:Array.from(r.selectedPatientIds)};return{...r,customLists:[...r.customLists,h]}}case"DELETE_CUSTOM_LIST":return{...r,customLists:r.customLists.filter(h=>h.id!==e.payload.id)};case"APPLY_CUSTOM_LIST":{const h=r.customLists.find(v=>v.id===e.payload.id);return h?{...r,selectedPatientIds:new Set(h.patientIds)}:r}case"LOAD_NETLIFY_DATA":return{...r,patients:e.payload.patients||r.patients,staff:e.payload.staff||r.staff,visits:e.payload.visits||r.visits,selectedPatientIds:new Set};default:return r}},Z2=Be.createContext(void 0),OC=({children:r})=>{const[e,n]=Be.useReducer(DC,W2),[i,o]=vc.useState(null),[u,f]=vc.useState(!1),[h,v]=vc.useState({isOnline:!0,queueLength:0,syncInProgress:!1}),[b,E]=vc.useState(!1);Be.useEffect(()=>{const De=ya.getCurrentUser();if(De){o(De),f(!0);const ke=De.mappedRole;ke&&Object.values(ut).includes(ke)&&n({type:"SET_ROLE",payload:ke})}},[]),Be.useEffect(()=>{u&&(b?z():j())},[u,b]),Be.useEffect(()=>{const De=setInterval(()=>{v(wi.getSyncStatus())},5e3);return()=>clearInterval(De)},[]);const j=async()=>{try{const De=await vr.getAllPatients();De.length>0&&console.log("Loaded patients from Firebase:",De.length);const ke=new Date().toISOString().split("T")[0],Pe=new Date(Date.now()-10080*60*1e3).toISOString().split("T")[0],xe=await vr.getVisitsByDateRange(Pe,ke);console.log("Loaded visits from Firebase:",xe.length)}catch(De){console.error("Error loading data from Firebase:",De)}},z=async()=>{try{const De=await pa.getAllPatients();console.log("Loaded patients from Netlify DB:",De.length);const ke=await pa.getAllStaff();if(console.log("Loaded staff from Netlify DB:",ke.length),De.length>0){const Pe=De.map(ue=>({nationalId:ue.national_id,nameAr:ue.name_ar,nameEn:ue.name_en||"",age:ue.age||0,sex:ue.sex||"",admissionDate:ue.admission_date||"",areaId:ue.area_id||"",phone:ue.phone||"",address:ue.address||"",medicalDiagnosis:ue.medical_diagnosis||"",bradenScore:ue.braden_score||0,status:ue.status||"active",tags:ue.tags||[],contactAttempts:ue.contact_attempts||[],assessments:ue.assessments||[]})),xe=ke.map(ue=>({id:ue.id,:ue.name_ar,nameEn:ue.name_en||ue.name_ar,:ue.profession_ar,professionEn:ue.profession_en||ue.profession_ar,phone:ue.phone||"",email:ue.email||"",areaId:ue.area_id||""}));n({type:"LOAD_NETLIFY_DATA",payload:{patients:Pe,staff:xe}}),console.log(` Loaded ${Pe.length} patients and ${xe.length} staff from Netlify DB`)}}catch(De){console.error("Error loading data from Netlify DB:",De)}},ae=async()=>{E(!0),localStorage.setItem("useNetlifyDb","true"),u&&await z()},re=()=>{E(!1),localStorage.setItem("useNetlifyDb","false")};Be.useEffect(()=>{const De=localStorage.getItem("useNetlifyDb");De==="true"?E(!0):(E(!0),localStorage.setItem("useNetlifyDb","true")),u&&(De==="true"||!De)&&(console.log(" Force loading Netlify DB data on mount..."),z())},[u]);const ve=Be.useMemo(()=>{const{patients:De,filters:ke}=e,{search:Pe,areas:xe,tags:ue,sex:Re,risk:P}=ke,L=Pe.toLowerCase();return De.filter(H=>{if(H.status==="deceased")return!1;const ne=rm(H.admissionDate).level,F=H.nameAr.toLowerCase().includes(L),le=H.nationalId.includes(Pe),G=Pe===""||F||le,gt=xe.length===0||H.areaId&&xe.includes(H.areaId),Ct=ue.length===0||ue.every(Ye=>H.tags.includes(Ye)),Ee=Re.length===0||H.sex&&Re.includes(H.sex),Le=P.length===0||P.includes(ne);return G&&gt&&Ct&&Ee&&Le})},[e.patients,e.filters]),me={state:e,dispatch:n,filteredPatients:ve,currentUser:i,isAuthenticated:u,syncStatus:h,useNetlifyDb:b,switchToNetlifyDb:ae,switchToFirebase:re};return m.jsx(Z2.Provider,{value:me,children:r})},Jc=()=>{const r=Be.useContext(Z2);if(r===void 0)throw new Error("useFirebase must be used within a FirebaseProvider");return r},Jm=v1(),Rp=Jm.staff.filter(r=>r.===""),el=Jm.staff.filter(r=>r.===""),J2={...Jm,filters:{search:"",areas:[],tags:[],sex:[],risk:[]},selectedPatientIds:new Set,currentRole:ut.Coordinator,visits:[],teams:[{id:"team1",name:"Team 1",members:[Rp[0],el[0],el[1]]},{id:"team2",name:"Team 2",members:[Rp[1],el[2],el[3]]},{id:"team3",name:"Team 3",members:[Rp[2],el[4],el[5]]}],customLists:[]},MC=(r,e)=>{switch(e.type){case"SET_SEARCH":return{...r,filters:{...r.filters,search:e.payload}};case"TOGGLE_AREA_FILTER":const n=r.filters.areas.includes(e.payload)?r.filters.areas.filter(h=>h!==e.payload):[...r.filters.areas,e.payload];return{...r,filters:{...r.filters,areas:n}};case"TOGGLE_TAG_FILTER":const i=r.filters.tags.includes(e.payload)?r.filters.tags.filter(h=>h!==e.payload):[...r.filters.tags,e.payload];return{...r,filters:{...r.filters,tags:i}};case"TOGGLE_SEX_FILTER":const o=r.filters.sex.includes(e.payload)?r.filters.sex.filter(h=>h!==e.payload):[...r.filters.sex,e.payload];return{...r,filters:{...r.filters,sex:o}};case"TOGGLE_RISK_FILTER":const u=r.filters.risk.includes(e.payload)?r.filters.risk.filter(h=>h!==e.payload):[...r.filters.risk,e.payload];return{...r,filters:{...r.filters,risk:u}};case"CLEAR_FILTERS":return{...r,filters:{search:"",areas:[],tags:[],sex:[],risk:[]}};case"TOGGLE_PATIENT_SELECTION":const f=new Set(r.selectedPatientIds);return f.has(e.payload)?f.delete(e.payload):f.add(e.payload),{...r,selectedPatientIds:f};case"CLEAR_SELECTIONS":return{...r,selectedPatientIds:new Set};case"SELECT_ALL_FILTERED":return{...r,selectedPatientIds:new Set(e.payload)};case"SET_ROLE":return{...r,currentRole:e.payload};case"ASSIGN_TO_VISITS":{const h=e.payload.patientIds.map(E=>({patientId:E,date:e.payload.date,teamId:e.payload.teamId,status:"Scheduled"})),v=new Set(r.visits.map(E=>`${E.patientId}-${E.date}`)),b=h.filter(E=>!v.has(`${E.patientId}-${E.date}`));return{...r,visits:[...r.visits,...b],selectedPatientIds:new Set}}case"SAVE_VISIT_NOTE":{const{visitId:h,role:v,note:b,user:E}=e.payload,[j,z]=h.split("_");return{...r,visits:r.visits.map(ae=>{if(ae.patientId===j&&ae.date===z){const re={...ae};v===ut.Doctor?(re.doctorNote=b,re.doctorSign=E):v===ut.Nurse?(re.nurseNote=b,re.nurseSign=E):v===ut.PhysicalTherapist?(re.ptNote=b,re.ptSign=E):v===ut.SocialWorker&&(re.swNote=b,re.swSign=E);const ve=!!re.doctorNote,me=!!re.nurseNote;let De="Scheduled";return ve&&me?De="Completed":ve?De="DoctorCompleted":me&&(De="NurseCompleted"),re.status=De,re}return ae})}}case"SAVE_ASSESSMENT":{const{patientId:h,assessment:v}=e.payload;return{...r,patients:r.patients.map(b=>{if(b.nationalId===h){const E=[v,...b.assessments||[]];let j=b.bradenScore;return v.role===ut.Nurse&&"bradenScore"in v&&v.bradenScore&&(j=parseInt(String(v.bradenScore),10)),{...b,assessments:E,bradenScore:j||b.bradenScore}}return b})}}case"LOG_CONTACT_ATTEMPT":return{...r,patients:r.patients.map(h=>{if(h.nationalId===e.payload.patientId){const v={date:new Date().toISOString(),type:e.payload.type,staffName:e.payload.staffName};return{...h,contactAttempts:[v,...h.contactAttempts||[]]}}return h})};case"CANCEL_VISIT":return{...r,visits:r.visits.filter(h=>!(h.patientId===e.payload.patientId&&h.date===e.payload.date))};case"IMPORT_STATE":return e.payload&&e.payload.patients&&e.payload.filters?{...J2,...e.payload,selectedPatientIds:new Set(e.payload.selectedPatientIds||[])}:r;case"CREATE_CUSTOM_LIST":{if(r.selectedPatientIds.size===0||!e.payload.name)return r;const h={id:Date.now().toString(),name:e.payload.name,patientIds:Array.from(r.selectedPatientIds)};return{...r,customLists:[...r.customLists,h]}}case"DELETE_CUSTOM_LIST":return{...r,customLists:r.customLists.filter(h=>h.id!==e.payload.id)};case"APPLY_CUSTOM_LIST":{const h=r.customLists.find(v=>v.id===e.payload.id);return h?{...r,selectedPatientIds:new Set(h.patientIds)}:r}default:return r}},eE=Be.createContext(void 0),jC=({children:r})=>{const[e,n]=Be.useReducer(MC,J2),i=Be.useMemo(()=>{const{patients:o,filters:u}=e,{search:f,areas:h,tags:v,sex:b,risk:E}=u,j=f.toLowerCase();return o.filter(z=>{if(z.status==="deceased")return!1;const ae=rm(z.admissionDate).level,re=z.nameAr.toLowerCase().includes(j),ve=z.nationalId.includes(f),me=f===""||re||ve,De=h.length===0||z.areaId&&h.includes(z.areaId),ke=v.length===0||v.every(ue=>z.tags.includes(ue)),Pe=b.length===0||z.sex&&b.includes(z.sex),xe=E.length===0||E.includes(ae);return me&&De&&ke&&Pe&&xe})},[e.patients,e.filters]);return m.jsx(eE.Provider,{value:{state:e,dispatch:n,filteredPatients:i},children:r})},cs=()=>{const r=Be.useContext(eE);if(r===void 0)throw new Error("useHomeHealthcare must be used within a HomeHealthcareProvider");return r};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),PC=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase()),l1=r=>{const e=PC(r);return e.charAt(0).toUpperCase()+e.slice(1)},tE=(...r)=>r.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim(),LC=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var VC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UC=Be.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:o="",children:u,iconNode:f,...h},v)=>Be.createElement("svg",{ref:v,...VC,width:e,height:e,stroke:r,strokeWidth:i?Number(n)*24/Number(e):n,className:tE("lucide",o),...!u&&!LC(h)&&{"aria-hidden":"true"},...h},[...f.map(([b,E])=>Be.createElement(b,E)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=(r,e)=>{const n=Be.forwardRef(({className:i,...o},u)=>Be.createElement(UC,{ref:u,iconNode:e,className:tE(`lucide-${kC(l1(r))}`,`lucide-${r}`,i),...o}));return n.displayName=l1(r),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=[["circle",{cx:"16",cy:"4",r:"1",key:"1grugj"}],["path",{d:"m18 19 1-7-6 1",key:"r0i19z"}],["path",{d:"m5 8 3-3 5.5 3-2.36 3.5",key:"9ptxx2"}],["path",{d:"M4.24 14.5a5 5 0 0 0 6.88 6",key:"10kmtu"}],["path",{d:"M13.76 17.5a5 5 0 0 0-6.88-6",key:"2qq6rc"}]],eg=nt("accessibility",BC);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zC=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],qC=nt("briefcase",zC);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FC=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],nE=nt("calendar",FC);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],GC=nt("car",HC);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QC=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],$C=nt("chart-no-axes-column",QC);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KC=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],YC=nt("chevron-down",KC);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XC=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],WC=nt("chevron-left",XC);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZC=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],JC=nt("chevron-right",ZC);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Gh=nt("circle-alert",e4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ma=nt("circle-check-big",t4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],s4=nt("clipboard-list",n4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Dc=nt("clock",r4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],Sc=nt("cloud",i4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],c1=nt("database",a4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=[["path",{d:"M10 12h.01",key:"1kxr2c"}],["path",{d:"M18 20V6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14",key:"36qu9e"}],["path",{d:"M2 20h20",key:"owomy5"}]],l4=nt("door-closed",o4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],sE=nt("download",c4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],h4=nt("eye-off",u4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],rE=nt("eye",d4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],xh=nt("file-text",f4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=[["path",{d:"M11 14h2a2 2 0 0 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 16",key:"1v1a37"}],["path",{d:"m14.45 13.39 5.05-4.694C20.196 8 21 6.85 21 5.75a2.75 2.75 0 0 0-4.797-1.837.276.276 0 0 1-.406 0A2.75 2.75 0 0 0 11 5.75c0 1.2.802 2.248 1.5 2.946L16 11.95",key:"fhfbnt"}],["path",{d:"m2 15 6 6",key:"10dquu"}],["path",{d:"m7 20 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a1 1 0 0 0-2.75-2.91",key:"1x6kdw"}]],fd=nt("hand-heart",p4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],g4=nt("hash",m4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}],["path",{d:"M3.22 13H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"auskq0"}]],tg=nt("heart-pulse",y4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],v4=nt("inbox",_4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],E4=nt("list",b4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Cp=nt("loader",w4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],S4=nt("lock",x4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],A4=nt("log-in",T4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],N4=nt("mail",I4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Qh=nt("map-pin",R4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],D4=nt("menu",C4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],iE=nt("pen-line",O4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=[["path",{d:"M10.1 13.9a14 14 0 0 0 3.732 2.668 1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2 18 18 0 0 1-12.728-5.272",key:"1wngk7"}],["path",{d:"M22 2 2 22",key:"y4kqgn"}],["path",{d:"M4.76 13.582A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 .244.473",key:"10hv5p"}]],u1=nt("phone-off",M4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],aE=nt("phone",j4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],P4=nt("plus",k4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],hl=nt("printer",L4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],U4=nt("qr-code",V4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],z4=nt("refresh-cw",B4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Oi=nt("save",q4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],oE=nt("search",F4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],h1=nt("server",H4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],lE=nt("settings",G4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],pd=nt("stethoscope",Q4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],K4=nt("tag",$4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],X4=nt("trash-2",Y4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],cE=nt("upload",W4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],J4=nt("user-cog",Z4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],t6=nt("user-plus",e6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ng=nt("users",n6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s6=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],uE=nt("wifi-off",s6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r6=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],d1=nt("wifi",r6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i6=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ra=nt("x",i6),a6=({onLoginSuccess:r})=>{const[e,n]=Be.useState(""),[i,o]=Be.useState(""),[u,f]=Be.useState(!1),[h,v]=Be.useState(!1),[b,E]=Be.useState(""),[j,z]=Be.useState(""),ae=async me=>{me.preventDefault(),v(!0),E(""),z("");try{const De=await ya.signIn(e,i);De.success&&(z("   "),setTimeout(()=>{r(De.user)},1e3))}catch(De){E(De.message||"    ")}finally{v(!1)}},re=[{email:"salshahrani173@moh.gov.sa",name:" - ",role:""},{email:"amemahmoud@mog.gov.sa",name:" - ",role:""},{email:"aaldawsari23@moh.gov.sa",name:" -  ",role:" "},{email:"relbarahamtoshy@moh.gov.sa",name:" - ",role:""},{email:"yalbishe@moh.gov.sa",name:" - ",role:""},{email:"thamralshhrany188@gmail.com",name:" - ",role:""}],ve=me=>{n(me),o("12345")};return m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-600 via-blue-700 to-indigo-800 flex items-center justify-center p-4",children:m.jsxs("div",{className:"w-full max-w-md space-y-6",children:[m.jsxs("div",{className:"text-center space-y-4",children:[m.jsx("div",{className:"mx-auto w-20 h-20 bg-white rounded-full flex items-center justify-center shadow-xl",children:m.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center",children:m.jsx("span",{className:"text-white font-bold text-xl",children:"KA"})})}),m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold text-white",children:"Home Healthcare"}),m.jsx("p",{className:"text-blue-200 mt-2",children:"   - "}),m.jsx("p",{className:"text-blue-300 text-sm mt-1",children:"  "})]})]}),m.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 space-y-6",children:[m.jsxs("div",{className:"text-center",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:" "}),m.jsx("p",{className:"text-gray-600 mt-2",children:"   "})]}),b&&m.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4 flex items-center gap-3",children:[m.jsx(Gh,{size:20,className:"text-red-500 flex-shrink-0"}),m.jsx("p",{className:"text-red-700 text-sm",children:b})]}),j&&m.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-4 flex items-center gap-3",children:[m.jsx(ma,{size:20,className:"text-green-500 flex-shrink-0"}),m.jsx("p",{className:"text-green-700 text-sm",children:j})]}),m.jsxs("form",{onSubmit:ae,className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),m.jsxs("div",{className:"relative",children:[m.jsx(N4,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),m.jsx("input",{type:"email",value:e,onChange:me=>n(me.target.value),className:"w-full pl-12 pr-4 py-3 border-2 border-gray-300 rounded-xl focus:border-blue-500 focus:ring-4 focus:ring-blue-200 transition-all duration-200",placeholder:"  ",required:!0,disabled:h})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),m.jsxs("div",{className:"relative",children:[m.jsx(S4,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),m.jsx("input",{type:u?"text":"password",value:i,onChange:me=>o(me.target.value),className:"w-full pl-12 pr-12 py-3 border-2 border-gray-300 rounded-xl focus:border-blue-500 focus:ring-4 focus:ring-blue-200 transition-all duration-200",placeholder:"  ",required:!0,disabled:h}),m.jsx("button",{type:"button",onClick:()=>f(!u),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",disabled:h,children:u?m.jsx(h4,{size:20}):m.jsx(rE,{size:20})})]}),m.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"  : 12345"})]}),m.jsxs("button",{type:"submit",disabled:h||!e||!i,className:"w-full bg-blue-600 text-white py-3 px-6 rounded-xl font-medium hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-all duration-200 flex items-center justify-center gap-2",children:[h?m.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):m.jsx(A4,{size:20}),h?"  ...":" "]})]}),m.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[m.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3 text-center",children:"  :"}),m.jsx("div",{className:"grid grid-cols-1 gap-2",children:re.map((me,De)=>m.jsx("button",{onClick:()=>ve(me.email),disabled:h,className:"w-full text-left px-4 py-2 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-sm font-medium text-gray-800",children:me.name}),m.jsx("span",{className:"text-xs text-gray-500 px-2 py-1 bg-white rounded-full",children:me.role})]})},De))})]}),m.jsx("div",{className:"text-center pt-4 border-t border-gray-200",children:m.jsx("p",{className:"text-xs text-gray-500",children:"           "})})]}),m.jsxs("div",{className:"text-center text-blue-200 text-sm",children:[m.jsx("p",{children:" 2024    - "}),m.jsx("p",{children:"   "})]})]})})},o6=({role:r,currentRole:e,onClick:n,icon:i})=>m.jsxs("button",{onClick:()=>n(r),className:`flex items-center gap-1.5 px-2 md:px-3 py-1.5 text-xs md:text-sm rounded-lg font-medium transition-all duration-200 touch-target-44 ${e===r?"bg-white text-blue-700 shadow-md scale-105":"bg-white/20 text-white hover:bg-white/30 backdrop-blur-sm"}`,children:[m.jsx("span",{className:"flex-shrink-0",children:i}),m.jsx("span",{className:"hidden sm:inline truncate",children:r})]}),l6=({activeView:r,setActiveView:e})=>{const n=[{id:"patients",label:"Patients",icon:m.jsx(ng,{size:16})},{id:"visits",label:"Today's Visits",icon:m.jsx(qC,{size:16})},{id:"scheduler",label:"Scheduler",icon:m.jsx(nE,{size:16})},{id:"settings",label:"Settings",icon:m.jsx(lE,{size:16})}];return m.jsx("div",{className:"flex items-center bg-white/90 backdrop-blur-sm rounded-xl p-1 shadow-lg border border-white/20",children:n.map(i=>m.jsxs("button",{onClick:()=>e(i.id),className:`flex items-center gap-1.5 px-2 md:px-4 py-2 text-xs md:text-sm rounded-lg font-medium transition-all duration-200 touch-target-44 ${r===i.id?"bg-blue-600 text-white shadow-md":"text-blue-700 hover:bg-blue-50"}`,children:[i.icon,m.jsx("span",{className:"hidden md:inline",children:i.label})]},i.id))})},f1=({activeView:r,setActiveView:e})=>{const{state:n,dispatch:i}=cs(),o=f=>{i({type:"SET_ROLE",payload:f})},u=[{role:ut.Coordinator,icon:m.jsx(J4,{size:16})},{role:ut.Doctor,icon:m.jsx(pd,{size:16})},{role:ut.Nurse,icon:m.jsx(fd,{size:16})},{role:ut.PhysicalTherapist,icon:m.jsx(tg,{size:16})},{role:ut.SocialWorker,icon:m.jsx(eg,{size:16})},{role:ut.Driver,icon:m.jsx(GC,{size:16})}];return m.jsxs("header",{className:"bg-gradient-to-r from-blue-700 to-blue-600 border-b border-blue-800 p-3 md:p-4 flex flex-col lg:flex-row items-center justify-between gap-3 md:gap-4 sticky top-0 z-50 shadow-lg",children:[m.jsxs("div",{className:"flex items-center gap-2 md:gap-3 w-full lg:w-auto justify-center lg:justify-start",children:[m.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-white rounded-full flex items-center justify-center shadow-md",children:m.jsx("div",{className:"w-6 h-6 md:w-8 md:h-8 bg-blue-600 rounded-full flex items-center justify-center",children:m.jsx("span",{className:"text-white font-bold text-sm md:text-base",children:"KA"})})}),m.jsxs("div",{className:"text-center lg:text-left",children:[m.jsx("h1",{className:"text-lg md:text-xl font-bold text-white leading-tight",children:"Home Healthcare"}),m.jsx("p",{className:"text-xs md:text-sm text-blue-100",children:"   - "})]})]}),m.jsx("div",{className:"flex-grow flex items-center justify-center w-full lg:w-auto order-3 lg:order-2",children:n.currentRole!==ut.Driver&&m.jsx(l6,{activeView:r,setActiveView:e})}),m.jsx("div",{className:"flex items-center gap-1 p-1 bg-white/10 rounded-lg overflow-x-auto w-full lg:w-auto justify-center lg:justify-end order-2 lg:order-3",children:u.map(f=>m.jsx(o6,{role:f.role,currentRole:n.currentRole,onClick:o,icon:f.icon},f.role))})]})},uh=({label:r,isActive:e,onClick:n})=>m.jsx("button",{onClick:n,className:`px-3 md:px-4 py-2 text-xs md:text-sm rounded-xl border-2 transition-all duration-200 flex-shrink-0 font-semibold touch-target-44 ${e?"bg-blue-600 text-white border-blue-600 shadow-lg scale-105":"bg-white text-gray-700 border-gray-200 hover:border-blue-400 hover:text-blue-600 hover:bg-blue-50 shadow-sm"}`,children:r}),c6=()=>{const{state:r,dispatch:e}=cs(),[n,i]=Be.useState("team1"),o=r.selectedPatientIds.size>0,u=()=>{if(r.selectedPatientIds.size>0){const f=new Date().toISOString().split("T")[0];e({type:"ASSIGN_TO_VISITS",payload:{patientIds:Array.from(r.selectedPatientIds),date:f,teamId:n}})}};return o?m.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:[m.jsxs("h3",{className:"text-sm font-bold text-gray-700 mb-3",children:[r.selectedPatientIds.size," patients selected"]}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{children:[m.jsx("label",{className:"text-xs font-semibold text-gray-600 mb-2 block",children:"Assign to Team"}),m.jsx("div",{className:"flex gap-2",children:r.teams.map(f=>m.jsx("button",{onClick:()=>i(f.id),className:`px-3 py-1 text-xs rounded-full border transition-all duration-200 ${n===f.id?"bg-blue-500 text-white border-blue-500":"bg-white"}`,children:f.name},f.id))})]}),m.jsxs("button",{onClick:u,className:"w-full bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[m.jsx(t6,{size:16}),"Add to Today's Visits"]}),m.jsx("button",{onClick:()=>e({type:"CLEAR_SELECTIONS"}),className:"w-full text-center text-xs text-gray-500 hover:text-red-500",children:"Clear Selection"})]})]}):null},u6=()=>{const{state:r,dispatch:e}=cs(),[n,i]=Be.useState(""),o=r.selectedPatientIds.size>0,u=()=>{n.trim()&&o&&(e({type:"CREATE_CUSTOM_LIST",payload:{name:n.trim()}}),i(""))};return m.jsxs("div",{className:"p-4 border-t border-gray-200",children:[m.jsxs("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-2 flex items-center gap-2",children:[m.jsx(E4,{size:16})," Custom Lists"]}),o&&m.jsxs("div",{className:"flex gap-2 mb-3",children:[m.jsx("input",{type:"text",value:n,onChange:f=>i(f.target.value),placeholder:"New list name...",className:"w-full bg-white border border-gray-300 rounded-md px-2 py-1 text-sm focus:outline-none focus:ring-1 focus:ring-blue-400"}),m.jsx("button",{onClick:u,className:"p-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:opacity-50",disabled:!n.trim(),children:m.jsx(Oi,{size:16})})]}),m.jsx("div",{className:"flex flex-wrap gap-2",children:r.customLists.map(f=>m.jsxs("div",{className:"group flex items-center bg-gray-200 rounded-full text-xs",children:[m.jsxs("button",{onClick:()=>e({type:"APPLY_CUSTOM_LIST",payload:{id:f.id}}),className:"px-3 py-1 hover:bg-gray-300 rounded-l-full",children:[f.name," ",m.jsxs("span",{className:"text-gray-500",children:["(",f.patientIds.length,")"]})]}),m.jsx("button",{onClick:()=>e({type:"DELETE_CUSTOM_LIST",payload:{id:f.id}}),className:"px-2 py-1 text-gray-500 hover:bg-red-200 hover:text-red-600 rounded-r-full",children:m.jsx(X4,{size:12})})]},f.id))})]})},p1=()=>{const{state:r,dispatch:e,filteredPatients:n}=cs(),{filters:i,areas:o,selectedPatientIds:u}=r,f=Be.useMemo(()=>{const E=new Set;return r.patients.forEach(j=>j.tags.forEach(z=>E.add(z))),Array.from(E)},[r.patients]),h=()=>{const E=n.map(j=>j.nationalId);e({type:"SELECT_ALL_FILTERED",payload:E})},v=()=>{const E={...r,selectedPatientIds:Array.from(r.selectedPatientIds),customLists:r.customLists},j="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(E,null,2)),z=document.createElement("a");z.setAttribute("href",j),z.setAttribute("download",`hhc_export_${new Date().toISOString().split("T")[0]}.json`),document.body.appendChild(z),z.click(),z.remove()},b=E=>{var z;const j=(z=E.target.files)==null?void 0:z[0];if(j){const ae=new FileReader;ae.onload=re=>{var ve;try{const me=JSON.parse((ve=re.target)==null?void 0:ve.result);e({type:"IMPORT_STATE",payload:me}),alert("Data imported successfully!")}catch(me){console.error("Failed to import data:",me),alert("Failed to import data. The file might be corrupted.")}},ae.readAsText(j)}E.target.value=""};return m.jsxs("aside",{className:"w-full lg:w-80 bg-white border-r border-gray-200 flex flex-col flex-shrink-0 h-full overflow-y-hidden",children:[m.jsxs("div",{className:"p-3 md:p-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[m.jsxs("div",{className:"relative",children:[m.jsx(oE,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-blue-500",size:18}),m.jsx("input",{type:"text",placeholder:"Smart search: name, ID, area, diagnosis...",value:i.search,onChange:E=>e({type:"SET_SEARCH",payload:E.target.value}),className:"w-full bg-white border-2 border-blue-200 rounded-xl pl-11 pr-4 py-3 text-sm md:text-base font-medium focus:outline-none focus:ring-4 focus:ring-blue-300 focus:border-blue-500 shadow-sm placeholder-gray-500 touch-target-44"})]}),m.jsxs("div",{className:"flex items-center justify-between mt-3 text-xs md:text-sm",children:[m.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[m.jsx("input",{type:"checkbox",id:"select-all",className:"h-5 w-5 md:h-6 md:w-6 rounded-md border-2 border-gray-300 text-blue-600 focus:ring-blue-500 focus:ring-2 touch-target-44",onChange:E=>E.target.checked?h():e({type:"CLEAR_SELECTIONS"}),checked:n.length>0&&u.size===n.length}),m.jsxs("label",{htmlFor:"select-all",className:"text-gray-700 font-medium",children:[m.jsx("span",{className:"text-blue-600 font-bold",children:n.length})," Results",u.size>0&&m.jsxs("span",{className:"text-green-600 ml-1",children:["(",u.size," selected)"]})]})]}),m.jsxs("button",{onClick:()=>e({type:"CLEAR_FILTERS"}),className:"flex items-center gap-1 text-red-500 hover:text-red-700 font-medium px-2 py-1 rounded-lg hover:bg-red-50 transition-colors touch-target-44",children:[m.jsx(Ra,{size:14})," Clear"]})]})]}),m.jsxs("div",{className:"flex-1 overflow-y-auto",children:[m.jsxs("div",{className:"p-3 md:p-4 space-y-4 md:space-y-5",children:[m.jsx(hh,{icon:m.jsx(Qh,{size:16}),title:"Areas",children:o.map(E=>m.jsx(uh,{label:E,isActive:i.areas.includes(E),onClick:()=>e({type:"TOGGLE_AREA_FILTER",payload:E})},E))}),m.jsx(hh,{icon:m.jsx(K4,{size:16}),title:"Tags",children:f.map(E=>m.jsx(uh,{label:E,isActive:i.tags.includes(E),onClick:()=>e({type:"TOGGLE_TAG_FILTER",payload:E})},E))}),m.jsx(hh,{icon:m.jsx(ng,{size:16}),title:"Sex",children:["Male","Female"].map(E=>m.jsx(uh,{label:E,isActive:i.sex.includes(E),onClick:()=>e({type:"TOGGLE_SEX_FILTER",payload:E})},E))}),m.jsx(hh,{icon:m.jsx($C,{size:16}),title:"Last Visit Risk",children:["green","yellow","red"].map(E=>m.jsx(uh,{label:E.charAt(0).toUpperCase()+E.slice(1),isActive:i.risk.includes(E),onClick:()=>e({type:"TOGGLE_RISK_FILTER",payload:E})},E))})]}),m.jsx(u6,{})]}),m.jsx(c6,{}),m.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:[m.jsx("h3",{className:"text-sm font-bold text-gray-700 mb-3",children:"Data Management"}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("button",{onClick:v,className:"w-full bg-gray-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-gray-700 transition-colors text-sm",children:"Export Data"}),m.jsx("input",{type:"file",id:"import-file",accept:".json",onChange:b,className:"hidden"}),m.jsx("label",{htmlFor:"import-file",className:"w-full block text-center bg-gray-200 text-gray-800 font-bold py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors cursor-pointer text-sm",children:"Import Data"})]})]})]})},hh=({icon:r,title:e,children:n})=>m.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-3 md:p-4 shadow-sm",children:[m.jsxs("h3",{className:"text-sm md:text-base font-bold text-gray-800 uppercase tracking-wider mb-3 flex items-center gap-2",children:[m.jsx("span",{className:"text-blue-600",children:r})," ",e]}),m.jsx("div",{className:"flex flex-wrap gap-2 md:gap-3",children:n})]}),Gr=({title:r,children:e,defaultOpen:n=!1})=>{const[i,o]=Be.useState(n);return m.jsxs("div",{className:"border-2 border-blue-200 rounded-xl bg-white shadow-lg overflow-hidden",children:[m.jsxs("button",{type:"button",onClick:()=>o(!i),className:"w-full text-left p-3 md:p-4 font-bold text-sm md:text-base text-gray-800 bg-gradient-to-r from-blue-50 to-indigo-50 hover:from-blue-100 hover:to-indigo-100 flex justify-between items-center transition-all duration-200 touch-target-44",children:[m.jsx("span",{children:r}),m.jsx(YC,{size:18,className:`transition-transform duration-300 ${i?"rotate-180 text-blue-600":"text-gray-500"}`})]}),i&&m.jsx("div",{className:"p-3 md:p-4 border-t-2 border-blue-100 bg-white animate-slide-up",children:m.jsx("div",{className:"space-y-4",children:e})})]})},Ft=({legend:r,children:e})=>m.jsxs("div",{className:"space-y-2",children:[m.jsxs("label",{className:"font-bold text-sm md:text-base text-blue-800 mb-2 block flex items-center",children:[m.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),r]}),m.jsx("div",{className:"pl-4",children:e})]}),hE="px-3 md:px-4 py-2 md:py-2.5 text-xs md:text-sm rounded-xl border-2 transition-all duration-200 font-medium touch-target-44",dE="bg-blue-600 text-white font-bold border-blue-600 shadow-lg scale-105",fE="bg-white text-gray-700 hover:border-blue-400 hover:bg-blue-50 hover:text-blue-700 border-gray-300 shadow-sm",En=({value:r,onChange:e,options:n})=>m.jsx("div",{className:"flex gap-2 md:gap-3 flex-wrap",children:n.map(i=>m.jsx("button",{type:"button",onClick:()=>e(i),className:`${hE} ${r===i?dE:fE} ${r===i?"ring-4 ring-blue-200":""}`,children:i},i))}),Ca=({value:r,onChange:e,options:n})=>m.jsx("div",{className:"flex gap-2 md:gap-3 flex-wrap",children:n.map(i=>m.jsx("button",{type:"button",onClick:()=>e(i),className:`${hE} ${r.has(i)?dE:fE} ${r.has(i)?"ring-4 ring-blue-200":""}`,children:m.jsxs("span",{className:"flex items-center gap-1.5",children:[m.jsx("span",{className:`w-2 h-2 rounded-full ${r.has(i)?"bg-white":"bg-gray-400"}`}),i]})},i))}),h6=["Wound care","Infection suspicion","Pain mgmt","DM","HTN","CHF/COPD","CKD","Post-op","Catheter","Tube feeding"],d6=["Fever 38","SpO <90","Chest pain","Active bleeding","New neuro deficit","Sepsis concern"],f6=({patient:r,onSave:e,onCancel:n})=>{const{state:i}=cs(),[o,u]=Be.useState({role:ut.Doctor,status:"Unchanged",plan:"Continue same plan",chiefFocus:[],redFlags:[],assessment:{etiology:[],severity:"Mild"},followUpTiming:"24w"}),f=(v,b)=>{u(E=>{const j=E[v]||[],z=j.includes(b)?j.filter(ae=>ae!==b):[...j,b];return{...E,[v]:z}})},h=v=>{v.preventDefault();const b=i.staff.find(j=>j.==="")||i.staff[0],E={id:Date.now().toString(),date:new Date().toISOString(),assessorId:b._,assessorName:b.,...o};e(E)};return m.jsxs("form",{onSubmit:h,className:"p-4 md:p-6 bg-gradient-to-br from-blue-50 to-white flex flex-col h-full",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6 pb-3 border-b-2 border-blue-200",children:[m.jsxs("div",{children:[m.jsx("h4",{className:"font-bold text-lg md:text-xl text-blue-900",children:"Doctor Assessment"}),m.jsx("p",{className:"text-sm text-gray-600 mt-1",children:r.nameAr})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{type:"button",onClick:n,title:"Cancel",className:"p-2.5 md:p-3 rounded-xl hover:bg-red-500 bg-red-100 text-red-600 hover:text-white transition-all duration-200 shadow-md touch-target-44",children:m.jsx(Ra,{size:18})}),m.jsx("button",{type:"submit",title:"Save Assessment",className:"p-2.5 md:p-3 rounded-xl hover:bg-green-600 bg-green-500 text-white hover:shadow-lg transition-all duration-200 shadow-md touch-target-44",children:m.jsx(Oi,{size:18})})]})]}),m.jsxs("div",{className:"space-y-4 md:space-y-5 overflow-y-auto flex-grow pr-1 text-sm md:text-base",children:[m.jsxs(Gr,{title:"Chief Focus & Red Flags",defaultOpen:!0,children:[m.jsx(Ft,{legend:"Chief Focus",children:m.jsx(Ca,{value:new Set(o.chiefFocus),onChange:v=>f("chiefFocus",v),options:h6})}),m.jsx(Ft,{legend:"Red Flags",children:m.jsx(Ca,{value:new Set(o.redFlags),onChange:v=>f("redFlags",v),options:d6})})]}),m.jsxs(Gr,{title:"Status & Plan",children:[m.jsx(Ft,{legend:"Status",children:m.jsx(En,{value:o.status,onChange:v=>u(b=>({...b,status:v})),options:["Improved","Unchanged","Worsened"]})}),m.jsx(Ft,{legend:"Plan",children:m.jsx(En,{value:o.plan,onChange:v=>u(b=>({...b,plan:v})),options:["Continue same plan","Change plan"]})})]}),m.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-4 shadow-sm",children:[m.jsxs("label",{className:"font-bold text-sm md:text-base text-blue-800 mb-2 block flex items-center",children:[m.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),"MD Note (Optional)"]}),m.jsx("textarea",{value:o.mdNote||"",onChange:v=>u(b=>({...b,mdNote:v.target.value})),rows:3,placeholder:"Brief clinical note (max 80 characters)",maxLength:80,className:"w-full p-3 text-sm md:text-base border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-200 transition-all duration-200 resize-none"}),m.jsxs("div",{className:"text-xs text-gray-500 mt-1 text-right",children:[(o.mdNote||"").length,"/80 characters"]})]})]})]})},p6=({patient:r,onSave:e,onCancel:n})=>{var v,b,E,j,z,ae;const{state:i}=cs(),[o,u]=Be.useState({role:ut.Nurse,vitals:{bp:"",hr:"",temp:"",rr:"",o2sat:"",pain:"0"},status:"Unchanged",impression:"Stable",plan:"Continue same plan"}),f=re=>{const{name:ve,value:me}=re.target;u(De=>({...De,vitals:{...De.vitals,[ve]:me}}))},h=re=>{re.preventDefault();const ve=i.staff.find(De=>De.==="")||i.staff[0],me={id:Date.now().toString(),date:new Date().toISOString(),assessorId:ve._,assessorName:ve.,...o};e(me)};return m.jsxs("form",{onSubmit:h,className:"p-4 bg-gray-50 flex flex-col h-full",children:[m.jsxs("div",{className:"flex justify-between items-center mb-3",children:[m.jsx("h4",{className:"font-bold text-gray-800",children:"Nurse Assessment"}),m.jsxs("div",{className:"flex gap-1",children:[m.jsx("button",{type:"button",onClick:n,title:"Cancel",className:"p-1.5 rounded-full hover:bg-red-100 text-red-500",children:m.jsx(Ra,{size:16})}),m.jsx("button",{type:"submit",title:"Save",className:"p-1.5 rounded-full hover:bg-green-100 text-green-600",children:m.jsx(Oi,{size:16})})]})]}),m.jsxs("div",{className:"space-y-2 overflow-y-auto flex-grow pr-1 text-sm",children:[m.jsx(Gr,{title:"Vitals",defaultOpen:!0,children:m.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[m.jsx("input",{name:"bp",value:(v=o.vitals)==null?void 0:v.bp,onChange:f,placeholder:"BP",className:"p-1 border rounded"}),m.jsx("input",{name:"hr",value:(b=o.vitals)==null?void 0:b.hr,onChange:f,placeholder:"HR",className:"p-1 border rounded"}),m.jsx("input",{name:"temp",value:(E=o.vitals)==null?void 0:E.temp,onChange:f,placeholder:"Temp",className:"p-1 border rounded"}),m.jsx("input",{name:"rr",value:(j=o.vitals)==null?void 0:j.rr,onChange:f,placeholder:"RR",className:"p-1 border rounded"}),m.jsx("input",{name:"o2sat",value:(z=o.vitals)==null?void 0:z.o2sat,onChange:f,placeholder:"SpO",className:"p-1 border rounded"}),m.jsx("input",{name:"pain",value:(ae=o.vitals)==null?void 0:ae.pain,onChange:f,placeholder:"Pain/10",className:"p-1 border rounded"})]})}),m.jsx(Gr,{title:"Wounds / Pressure Ulcers",children:m.jsx("p",{className:"text-xs text-gray-500",children:"Wound care checklists here..."})}),m.jsxs(Gr,{title:"Impression & Status",children:[m.jsx(Ft,{legend:"Status",children:m.jsx(En,{value:o.status,onChange:re=>u(ve=>({...ve,status:re})),options:["Improved","Unchanged","Worsened"]})}),m.jsx(Ft,{legend:"Impression",children:m.jsx(En,{value:o.impression,onChange:re=>u(ve=>({...ve,impression:re})),options:["Stable","Improving","Deteriorating","Needs MD call today"]})})]}),m.jsx("textarea",{value:o.nurseNote||"",onChange:re=>u(ve=>({...ve,nurseNote:re.target.value})),rows:2,placeholder:"Optional nurse note (max 80 chars)",maxLength:80,className:"w-full p-2 text-sm border rounded-md"})]})]})},m6=["TKA/THA/ACL/RCR/Stroke/LBP/Neck"],g6=["ROM","Stretch","Strength","Balance","Gait","TENS","NMES","US","Ice","Heat","soft tissue","joint mobs"],y6=({patient:r,onSave:e,onCancel:n})=>{var v;const{state:i}=cs(),[o,u]=Be.useState({role:ut.PhysicalTherapist,status:"Unchanged",plan:"Continue same plan",dxFocus:[],phase:"subacute",pain:"0",function:{bedMobility:"supervision",transfers:"supervision",gaitDistance:"520m",assistiveDevice:"walker",stairs:"none",balance:{static:"fair",dynamic:"fair"}},romMmt:{region:[],rom:"mild",mmt:"3"},interventions:[]}),f=(b,E)=>{u(j=>{const z=j[b]||[],ae=z.includes(E)?z.filter(re=>re!==E):[...z,E];return{...j,[b]:ae}})},h=b=>{b.preventDefault();const E=i.staff.find(z=>z..includes(" "))||i.staff[0],j={id:Date.now().toString(),date:new Date().toISOString(),assessorId:E._,assessorName:E.,...o};e(j)};return m.jsxs("form",{onSubmit:h,className:"p-4 bg-gray-50 flex flex-col h-full",children:[m.jsxs("div",{className:"flex justify-between items-center mb-3",children:[m.jsx("h4",{className:"font-bold text-gray-800",children:"Physical Therapy Assessment"}),m.jsxs("div",{className:"flex gap-1",children:[m.jsx("button",{type:"button",onClick:n,title:"Cancel",className:"p-1.5 rounded-full hover:bg-red-100 text-red-500",children:m.jsx(Ra,{size:16})}),m.jsx("button",{type:"submit",title:"Save",className:"p-1.5 rounded-full hover:bg-green-100 text-green-600",children:m.jsx(Oi,{size:16})})]})]}),m.jsxs("div",{className:"space-y-2 overflow-y-auto flex-grow pr-1 text-sm",children:[m.jsxs(Gr,{title:"Focus & Function",defaultOpen:!0,children:[m.jsx(Ft,{legend:"Dx Focus",children:m.jsx(Ca,{value:new Set(o.dxFocus),onChange:b=>f("dxFocus",b),options:m6})}),m.jsx(Ft,{legend:"Gait Distance",children:m.jsx(En,{value:(v=o.function)==null?void 0:v.gaitDistance,onChange:b=>u(E=>({...E,function:{...E.function,gaitDistance:b}})),options:["05m","520m","20100m",">100m"]})})]}),m.jsx(Gr,{title:"Interventions",children:m.jsx(Ft,{legend:"Interventions Today",children:m.jsx(Ca,{value:new Set(o.interventions),onChange:b=>f("interventions",b),options:g6})})}),m.jsxs(Gr,{title:"Status & Plan",children:[m.jsx(Ft,{legend:"Status",children:m.jsx(En,{value:o.status,onChange:b=>u(E=>({...E,status:b})),options:["Improved","Unchanged","Worsened"]})}),m.jsx(Ft,{legend:"Plan",children:m.jsx(En,{value:o.plan,onChange:b=>u(E=>({...E,plan:b})),options:["Continue same plan","Change plan"]})})]}),m.jsx("textarea",{value:o.ptNote||"",onChange:b=>u(E=>({...E,ptNote:b.target.value})),rows:2,placeholder:"Optional PT note...",maxLength:80,className:"w-full p-2 text-sm border rounded-md"})]})]})},_6=({patient:r,onSave:e,onCancel:n})=>{var h;const{state:i}=cs(),[o,u]=Be.useState({role:ut.SocialWorker,status:"Unchanged",plan:"Continue same plan",residence:" ",caregiverHours:"  30",adlAssistance:" ",economic:{income:"",coverage:"",transport:""},homeSafety:{risks:[],aids:[]},needs:[],psychosocial:{mood:"",memory:"",abuseSuspicion:""},actions:[]}),f=v=>{v.preventDefault();const b=i.staff.find(j=>j..includes(""))||i.staff[0],E={id:Date.now().toString(),date:new Date().toISOString(),assessorId:b._,assessorName:b.,...o};e(E)};return m.jsxs("form",{onSubmit:f,className:"p-4 bg-gray-50 flex flex-col h-full",dir:"rtl",children:[m.jsxs("div",{className:"flex justify-between items-center mb-3",children:[m.jsx("h4",{className:"font-bold text-gray-800",children:" "}),m.jsxs("div",{className:"flex gap-1",children:[m.jsx("button",{type:"button",onClick:n,title:"",className:"p-1.5 rounded-full hover:bg-red-100 text-red-500",children:m.jsx(Ra,{size:16})}),m.jsx("button",{type:"submit",title:"",className:"p-1.5 rounded-full hover:bg-green-100 text-green-600",children:m.jsx(Oi,{size:16})})]})]}),m.jsxs("div",{className:"space-y-2 overflow-y-auto flex-grow pr-1 text-sm",children:[m.jsx(Gr,{title:" ",defaultOpen:!0,children:m.jsx(Ft,{legend:"",children:m.jsx(En,{value:o.residence,onChange:v=>u(b=>({...b,residence:v})),options:[" "," "," "]})})}),m.jsx(Gr,{title:"   ",children:m.jsx(Ft,{legend:" ",children:m.jsx(En,{value:(h=o.economic)==null?void 0:h.income,onChange:v=>u(b=>({...b,economic:{...b.economic,income:v}})),options:["","",""]})})}),m.jsx("textarea",{value:o.swNote||"",onChange:v=>u(b=>({...b,swNote:v.target.value})),rows:2,placeholder:"  ()",maxLength:80,className:"w-full p-2 text-sm border rounded-md"})]})]})},v6=({label:r})=>{const e={Catheter:"bg-blue-500 text-white shadow-sm","Pressure Ulcer":"bg-red-500 text-white shadow-sm","Tube Feeding":"bg-amber-500 text-white shadow-sm","Fall Risk":"bg-purple-500 text-white shadow-sm","IV Therapy":"bg-indigo-500 text-white shadow-sm",Ventilation:"bg-pink-500 text-white shadow-sm"};return m.jsx("span",{className:`px-2.5 py-1 text-xs font-bold rounded-full border-2 border-white/50 ${e[r]||"bg-gray-500 text-white shadow-sm"}`,children:r})},b6=({patient:r})=>{var xe;const{state:e,dispatch:n}=cs(),{useNetlifyDb:i,currentUser:o}=Jc(),[u,f]=Be.useState(null),[h,v]=Be.useState(!1),b=e.selectedPatientIds.has(r.nationalId),E=rm(r.admissionDate),j=(xe=r.assessments)==null?void 0:xe[0],z=()=>{n({type:"TOGGLE_PATIENT_SELECTION",payload:r.nationalId})},ae=ue=>{n({type:"SAVE_ASSESSMENT",payload:{patientId:r.nationalId,assessment:ue}}),f(null)},re=ue=>{const Re=e.staff.find(P=>P..includes(""))||{:"System"};n({type:"LOG_CONTACT_ATTEMPT",payload:{patientId:r.nationalId,type:ue,staffName:Re.}})},ve=[ut.Doctor,ut.Nurse,ut.PhysicalTherapist,ut.SocialWorker].includes(e.currentRole),me=()=>{switch(u){case ut.Doctor:return m.jsx(f6,{patient:r,onSave:ae,onCancel:()=>f(null)});case ut.Nurse:return m.jsx(p6,{patient:r,onSave:ae,onCancel:()=>f(null)});case ut.PhysicalTherapist:return m.jsx(y6,{patient:r,onSave:ae,onCancel:()=>f(null)});case ut.SocialWorker:return m.jsx(_6,{patient:r,onSave:ae,onCancel:()=>f(null)});default:return null}};if(u&&u===e.currentRole)return m.jsx("div",{className:"bg-white rounded-2xl shadow-2xl border-2 border-blue-500 ring-4 ring-blue-200/50 flex flex-col min-h-[450px] md:min-h-[500px]",children:me()});const De=({role:ue})=>{switch(ue){case ut.Doctor:return m.jsx(pd,{size:12});case ut.Nurse:return m.jsx(fd,{size:12});case ut.PhysicalTherapist:return m.jsx(tg,{size:12});case ut.SocialWorker:return m.jsx(eg,{size:12});default:return null}},ke=ue=>{switch(ue.role){case ut.Doctor:return m.jsxs("p",{className:"truncate",children:[m.jsx("strong",{children:"Plan:"})," ",ue.plan||"N/A"]});case ut.Nurse:const Re=ue;return m.jsxs("p",{children:[Re.vitals.bp&&`BP ${Re.vitals.bp}, `,Re.vitals.hr&&`HR ${Re.vitals.hr}, `,Re.bradenScore&&`Braden ${Re.bradenScore}`]});case ut.PhysicalTherapist:const P=ue;return m.jsxs("p",{children:[m.jsx("strong",{children:"Function:"})," ",P.function.gaitDistance,", ",P.function.assistiveDevice]});case ut.SocialWorker:const L=ue;return m.jsxs("p",{children:[m.jsx("strong",{children:":"})," ",L.residence,", ",L.economic.income]});default:return null}},Pe=async()=>{if(!i){alert("PDF generation is only available with Netlify DB. Please switch to Netlify DB in Settings.");return}try{v(!0);const ue=await pa.generatePatientCard(r.nationalId,(o==null?void 0:o.name)||"");if(ue.success&&ue.pdfContent){const Re=new Blob([ue.pdfContent],{type:"application/pdf"}),P=URL.createObjectURL(Re),L=document.createElement("a");L.href=P,L.download=ue.filename||`patient_card_${r.nationalId}.pdf`,document.body.appendChild(L),L.click(),document.body.removeChild(L),URL.revokeObjectURL(P),alert("    ")}}catch(ue){console.error("Error generating patient card:",ue),alert("    ")}finally{v(!1)}};return m.jsxs("div",{className:`bg-white rounded-2xl shadow-lg border-2 ${b?"border-blue-500 ring-4 ring-blue-200/50 shadow-blue-100":"border-gray-100 hover:border-blue-200"} transition-all duration-300 flex flex-col hover:shadow-xl`,children:[m.jsxs("div",{className:"p-4 md:p-5 flex-grow",children:[m.jsxs("div",{className:"flex items-start justify-between mb-4",children:[m.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[m.jsx("div",{className:`w-12 h-12 md:w-14 md:h-14 rounded-full flex items-center justify-center font-bold text-sm md:text-base shadow-md ${T_[E.level]}`,children:_1(r.nameAr)}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("h3",{className:"font-bold text-gray-900 text-base md:text-lg leading-tight truncate",children:r.nameAr}),m.jsx("p",{className:"text-xs md:text-sm text-gray-500 mt-0.5",children:r.sex})]})]}),m.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 ml-2",children:[r.contactAttempts&&r.contactAttempts.length>0&&m.jsxs("span",{className:"bg-orange-500 text-white text-xs font-bold px-2.5 py-1 rounded-full flex items-center gap-1 shadow-sm",title:`${r.contactAttempts.length} failed contact attempts`,children:[m.jsx(u1,{size:12}),r.contactAttempts.length]}),m.jsx("input",{type:"checkbox",checked:b,onChange:z,className:"h-5 w-5 md:h-6 md:w-6 rounded-md border-2 border-gray-300 text-blue-600 focus:ring-blue-500 focus:ring-2 cursor-pointer touch-target-44"})]})]}),m.jsxs("div",{className:"space-y-2.5 text-sm md:text-base text-gray-700",children:[m.jsxs("div",{className:"flex items-center gap-3 bg-gray-50 rounded-lg p-2.5",children:[m.jsx(g4,{size:16,className:"text-blue-500 flex-shrink-0"}),m.jsx("span",{className:"font-medium",children:r.nationalId})]}),m.jsxs("div",{className:"flex items-center gap-3 bg-gray-50 rounded-lg p-2.5",children:[m.jsx(aE,{size:16,className:"text-green-500 flex-shrink-0"}),m.jsx("span",{className:"font-medium",children:r.phone||"N/A"})]}),m.jsxs("div",{className:"flex items-center gap-3 bg-gray-50 rounded-lg p-2.5",children:[m.jsx(Qh,{size:16,className:"text-purple-500 flex-shrink-0"}),m.jsx("span",{className:"font-medium",children:r.areaId||"N/A"})]})]}),m.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:r.tags.map(ue=>m.jsx(v6,{label:ue},ue))})]}),j&&m.jsxs("div",{className:"px-4 pb-3 text-xs text-gray-600 border-t border-gray-100 mt-2 pt-2",children:[m.jsxs("h4",{className:"font-bold text-gray-500 mb-1 flex items-center gap-1",children:[m.jsx(De,{role:j.role}),"Last Assessment (",new Date(j.date).toLocaleDateString(),")"]}),m.jsx("div",{className:"truncate",children:ke(j)})]}),m.jsxs("div",{className:"border-t-2 border-gray-100 bg-gradient-to-r from-gray-50 to-blue-50/30 px-4 md:px-5 py-3 md:py-4 flex items-center justify-between rounded-b-2xl",children:[m.jsxs("div",{className:`px-3 py-2 text-xs md:text-sm font-bold rounded-xl flex items-center gap-2 shadow-sm border ${T_[E.level]}`,children:[m.jsx("div",{className:`w-2.5 h-2.5 rounded-full animate-pulse ${E.level==="red"?"bg-red-500":E.level==="yellow"?"bg-yellow-500":"bg-green-500"}`}),E.label]}),m.jsxs("div",{className:"flex items-center gap-1.5",children:[m.jsx("button",{onClick:()=>re("No Answer"),title:"Log 'No Answer'",className:"p-2 md:p-2.5 rounded-xl hover:bg-yellow-500 text-gray-600 hover:text-white transition-all duration-200 shadow-sm hover:shadow-md touch-target-44",children:m.jsx(u1,{size:16})}),m.jsx("button",{onClick:()=>re("Door Not Opened"),title:"Log 'Door Not Opened'",className:"p-2 md:p-2.5 rounded-xl hover:bg-orange-500 text-gray-600 hover:text-white transition-all duration-200 shadow-sm hover:shadow-md touch-target-44",children:m.jsx(l4,{size:16})}),m.jsx("button",{onClick:()=>f(e.currentRole),disabled:!ve,title:"Add Assessment",className:"p-2 md:p-2.5 rounded-xl hover:bg-blue-500 text-gray-600 hover:text-white transition-all duration-200 shadow-sm hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed touch-target-44",children:m.jsx(s4,{size:16})}),m.jsx("button",{className:"p-2 md:p-2.5 rounded-xl hover:bg-purple-500 text-gray-600 hover:text-white transition-all duration-200 shadow-sm hover:shadow-md touch-target-44",children:m.jsx(U4,{size:16})}),i&&m.jsx("button",{onClick:Pe,disabled:h,title:"   PDF",className:"p-2 md:p-2.5 rounded-xl hover:bg-green-500 text-gray-600 hover:text-white transition-all duration-200 shadow-sm hover:shadow-md disabled:opacity-50 touch-target-44",children:h?m.jsx("div",{className:"animate-spin",children:m.jsx(xh,{size:16})}):m.jsx(hl,{size:16})})]})]})]})},E6=()=>{const{filteredPatients:r}=cs();return r.length===0?m.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 p-8 animate-fade-in",children:[m.jsx("div",{className:"bg-blue-50 rounded-full p-6 mb-6",children:m.jsx(v4,{size:48,className:"text-blue-400"})}),m.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-800 mb-2",children:"No Patients Found"}),m.jsx("p",{className:"text-center text-gray-600 max-w-md",children:"Try adjusting your search or filter criteria to find patients."})]}):m.jsx("div",{className:"mobile-grid gap-4 md:gap-6 animate-fade-in",children:r.map((e,n)=>m.jsx("div",{className:"animate-slide-up",style:{animationDelay:`${n*50}ms`},children:m.jsx(b6,{patient:e})},e.nationalId))})},w6=["Add referral","Adjust meds","Start antibiotics","Wound care upgrade","Frequency change"],x6=["fever","pain ","wound deterioration","device issue","other"],S6=({initialData:r,onSave:e,onCancel:n})=>{const[i,o]=Be.useState((r==null?void 0:r.status)||"Unchanged"),[u,f]=Be.useState((r==null?void 0:r.responseToPlan)||"good"),[h,v]=Be.useState((r==null?void 0:r.adherence)||"good"),[b,E]=Be.useState(new Set((r==null?void 0:r.newIssues)||[])),[j,z]=Be.useState((r==null?void 0:r.plan)||"Continue"),[ae,re]=Be.useState(new Set((r==null?void 0:r.planDetails)||[])),[ve,me]=Be.useState((r==null?void 0:r.nextFollowUp)||"37d"),[De,ke]=Be.useState((r==null?void 0:r.mdNote)||""),Pe=Re=>{E(P=>{const L=new Set(P);return L.has(Re)?L.delete(Re):L.add(Re),L})},xe=Re=>{re(P=>{const L=new Set(P);return L.has(Re)?L.delete(Re):L.add(Re),L})},ue=()=>{e({status:i,responseToPlan:u,adherence:h,newIssues:Array.from(b),plan:j,planDetails:Array.from(ae),nextFollowUp:ve,mdNote:De})};return m.jsxs("div",{className:"bg-blue-50/50 p-3 rounded-md border border-blue-200 space-y-3 text-sm",children:[m.jsx("h4",{className:"font-bold text-blue-800",children:"Doctor's Follow-up Note"}),m.jsxs("div",{className:"space-y-3",children:[m.jsx(Ft,{legend:"Status",children:m.jsx(En,{value:i,onChange:o,options:["Improved","Unchanged","Worsened"]})}),m.jsx(Ft,{legend:"Response to Last Plan",children:m.jsx(En,{value:u,onChange:f,options:["good","partial","poor"]})}),m.jsx(Ft,{legend:"Any new issues?",children:m.jsx(Ca,{value:b,onChange:Pe,options:x6})}),m.jsx(Ft,{legend:"Plan",children:m.jsx(En,{value:j,onChange:z,options:["Continue","Change"]})}),j==="Change"&&m.jsx(Ft,{legend:"Specify Change",children:m.jsx(Ca,{value:ae,onChange:xe,options:w6})}),m.jsx(Ft,{legend:"Next Follow-up",children:m.jsx(En,{value:ve,onChange:me,options:["2448h","37d","24w"]})}),m.jsx("textarea",{value:De,onChange:Re=>ke(Re.target.value),rows:2,placeholder:"Optional note...",className:"w-full p-2 border rounded-md"})]}),m.jsxs("div",{className:"flex justify-end gap-2",children:[m.jsx("button",{type:"button",onClick:n,className:"text-xs px-3 py-1 rounded-md text-gray-600 bg-gray-100 hover:bg-gray-200",children:"Cancel"}),m.jsxs("button",{type:"button",onClick:ue,className:"text-xs px-3 py-1 rounded-md text-white bg-blue-600 hover:bg-blue-700 flex items-center gap-1",children:[m.jsx(Oi,{size:14}),"Save Note"]})]})]})},T6=["dressing change","vaccine","meds given","education"],A6=({initialData:r,onSave:e,onCancel:n})=>{var ae,re,ve;const[i,o]=Be.useState((r==null?void 0:r.status)||"Unchanged"),[u,f]=Be.useState({temp:((ae=r==null?void 0:r.vitals)==null?void 0:ae.temp)||"",o2sat:((re=r==null?void 0:r.vitals)==null?void 0:re.o2sat)||"",pain:((ve=r==null?void 0:r.vitals)==null?void 0:ve.pain)||""}),[h,v]=Be.useState(new Set((r==null?void 0:r.tasks)||[])),[b,E]=Be.useState((r==null?void 0:r.nurseNote)||""),j=me=>{const De=new Set(h);De.has(me)?De.delete(me):De.add(me),v(De)},z=()=>{e({status:i,vitals:u,tasks:Array.from(h),nurseNote:b})};return m.jsxs("div",{className:"bg-green-50/50 p-3 rounded-md border border-green-200 space-y-3 text-sm",children:[m.jsx("h4",{className:"font-bold text-green-800",children:"Nurse's Follow-up Note"}),m.jsxs("div",{className:"space-y-3",children:[m.jsx(Ft,{legend:"Quick Vitals",children:m.jsxs("div",{className:"flex gap-2",children:[m.jsx("input",{value:u.temp,onChange:me=>f({...u,temp:me.target.value}),placeholder:"Temp",className:"p-1 w-20 border rounded"}),m.jsx("input",{value:u.o2sat,onChange:me=>f({...u,o2sat:me.target.value}),placeholder:"SpO %",className:"p-1 w-20 border rounded"}),m.jsx("input",{value:u.pain,onChange:me=>f({...u,pain:me.target.value}),placeholder:"Pain /10",className:"p-1 w-20 border rounded"})]})}),m.jsx(Ft,{legend:"Tasks Today",children:m.jsx(Ca,{value:h,onChange:j,options:T6})}),m.jsx(Ft,{legend:"Status",children:m.jsx(En,{value:i,onChange:o,options:["Improved","Unchanged","Worsened"]})}),m.jsx("textarea",{value:b,onChange:me=>E(me.target.value),rows:2,placeholder:"Optional note...",className:"w-full p-2 border rounded-md"})]}),m.jsxs("div",{className:"flex justify-end gap-2",children:[m.jsx("button",{type:"button",onClick:n,className:"text-xs px-3 py-1 rounded-md text-gray-600 bg-gray-100 hover:bg-gray-200",children:"Cancel"}),m.jsxs("button",{type:"button",onClick:z,className:"text-xs px-3 py-1 rounded-md text-white bg-green-600 hover:bg-green-700 flex items-center gap-1",children:[m.jsx(Oi,{size:14}),"Save Note"]})]})]})},I6=({initialData:r,onSave:e,onCancel:n})=>{const[i,o]=Be.useState(r||{changeSinceLast:{pain:"",function:""},tolerance:"good",hep:{status:"given",adherence:"good"},plan:"Continue"}),u=()=>{e(i)};return m.jsxs("div",{className:"bg-purple-50/50 p-3 rounded-md border border-purple-200 space-y-3 text-sm",children:[m.jsx("h4",{className:"font-bold text-purple-800",children:"PT Follow-up Note"}),m.jsxs("div",{className:"space-y-3",children:[m.jsx(Ft,{legend:"Change in Pain",children:m.jsx(En,{value:i.changeSinceLast.pain,onChange:f=>o(h=>({...h,changeSinceLast:{...h.changeSinceLast,pain:f}})),options:["","",""]})}),m.jsx(Ft,{legend:"Change in Function",children:m.jsx(En,{value:i.changeSinceLast.function,onChange:f=>o(h=>({...h,changeSinceLast:{...h.changeSinceLast,function:f}})),options:["","",""]})}),m.jsx(Ft,{legend:"Plan",children:m.jsx(En,{value:i.plan,onChange:f=>o(h=>({...h,plan:f})),options:["Continue","Change"]})}),m.jsx("textarea",{value:i.ptNote||"",onChange:f=>o(h=>({...h,ptNote:f.target.value})),rows:2,placeholder:"Optional note...",className:"w-full p-2 border rounded-md"})]}),m.jsxs("div",{className:"flex justify-end gap-2",children:[m.jsx("button",{type:"button",onClick:n,className:"text-xs px-3 py-1 rounded-md text-gray-600 bg-gray-100 hover:bg-gray-200",children:"Cancel"}),m.jsxs("button",{type:"button",onClick:u,className:"text-xs px-3 py-1 rounded-md text-white bg-purple-600 hover:bg-purple-700 flex items-center gap-1",children:[m.jsx(Oi,{size:14}),"Save Note"]})]})]})},N6=[" "," "," "," "," "],R6=({initialData:r,onSave:e,onCancel:n})=>{const[i,o]=Be.useState(r||{situationChange:" ",actionsTaken:[],plan:""}),u=h=>{o(v=>{const b=new Set(v.actionsTaken);return b.has(h)?b.delete(h):b.add(h),{...v,actionsTaken:Array.from(b)}})},f=()=>{e(i)};return m.jsxs("div",{className:"bg-yellow-50/50 p-3 rounded-md border border-yellow-200 space-y-3 text-sm",dir:"rtl",children:[m.jsx("h4",{className:"font-bold text-yellow-800",children:"  "}),m.jsxs("div",{className:"space-y-3",children:[m.jsx(Ft,{legend:"  ",children:m.jsx(En,{value:i.situationChange,onChange:h=>o(v=>({...v,situationChange:h})),options:[""," ",""]})}),m.jsx(Ft,{legend:" ",children:m.jsx(Ca,{value:new Set(i.actionsTaken),onChange:u,options:N6})}),m.jsx(Ft,{legend:"",children:m.jsx(En,{value:i.plan,onChange:h=>o(v=>({...v,plan:h})),options:["",""]})}),m.jsx("textarea",{value:i.swNote||"",onChange:h=>o(v=>({...v,swNote:h.target.value})),rows:2,placeholder:" ()...",className:"w-full p-2 border rounded-md"})]}),m.jsxs("div",{className:"flex justify-end gap-2",children:[m.jsx("button",{type:"button",onClick:n,className:"text-xs px-3 py-1 rounded-md text-gray-600 bg-gray-100 hover:bg-gray-200",children:""}),m.jsxs("button",{type:"button",onClick:f,className:"text-xs px-3 py-1 rounded-md text-white bg-yellow-600 hover:bg-yellow-700 flex items-center gap-1",children:[m.jsx(Oi,{size:14}),""]})]})]})},hn=({label:r,value:e})=>{if(!e||Array.isArray(e)&&e.length===0)return null;const n=Array.isArray(e)?e.join(", "):e;return m.jsxs("p",{children:[m.jsxs("strong",{className:"font-semibold",children:[r,":"]})," ",n]})},C6=({visit:r,patient:e})=>{const{doctorNote:n,nurseNote:i}=r;return m.jsxs("div",{className:"p-8 font-sans text-sm",style:{width:"210mm",height:"297mm"},children:[m.jsxs("header",{className:"flex items-center justify-between pb-4 border-b",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("img",{src:"https://i.imgur.com/8Q9Z3v1.png",alt:"Logo",className:"h-16 w-16 object-contain"}),m.jsxs("div",{children:[m.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Home Healthcare Visit Note"}),m.jsx("p",{className:"text-lg text-gray-600",children:"   - "})]})]}),m.jsxs("div",{className:"text-right text-xs text-gray-500",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Date:"})," ",new Date(r.date).toLocaleDateString()]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Team:"})," ",r.teamId]})]})]}),m.jsxs("section",{className:"grid grid-cols-2 gap-x-8 gap-y-2 mt-4 pb-4 border-b text-sm",children:[m.jsx("h2",{className:"col-span-2 text-base font-bold text-gray-700 mb-1",children:"Patient Information"}),m.jsx(hn,{label:"Name (EN)",value:e.nameAr}),m.jsx(hn,{label:"Name (AR)",value:e.nameAr}),m.jsx(hn,{label:"National ID",value:e.nationalId}),m.jsx(hn,{label:"MRN",value:e.nationalId}),m.jsx(hn,{label:"Area",value:e.areaId}),m.jsx(hn,{label:"Phone",value:e.phone})]}),(i==null?void 0:i.vitals)&&m.jsxs("section",{className:"mt-4 pb-4 border-b",children:[m.jsx("h2",{className:"text-base font-bold text-gray-700 mb-2",children:"Vital Signs"}),m.jsxs("div",{className:"grid grid-cols-6 gap-2 text-center",children:[m.jsxs("div",{className:"bg-gray-50 p-1 rounded-md",children:[m.jsx("div",{className:"text-xs font-bold text-gray-500",children:"BP"}),m.jsx("div",{className:"font-mono text-base",children:i.vitals.bp||"-"})]}),m.jsxs("div",{className:"bg-gray-50 p-1 rounded-md",children:[m.jsx("div",{className:"text-xs font-bold text-gray-500",children:"HR"}),m.jsx("div",{className:"font-mono text-base",children:i.vitals.hr||"-"})]}),m.jsxs("div",{className:"bg-gray-50 p-1 rounded-md",children:[m.jsx("div",{className:"text-xs font-bold text-gray-500",children:"RR"}),m.jsx("div",{className:"font-mono text-base",children:i.vitals.rr||"-"})]}),m.jsxs("div",{className:"bg-gray-50 p-1 rounded-md",children:[m.jsx("div",{className:"text-xs font-bold text-gray-500",children:"Temp"}),m.jsx("div",{className:"font-mono text-base",children:i.vitals.temp?`${i.vitals.temp}C`:"-"})]}),m.jsxs("div",{className:"bg-gray-50 p-1 rounded-md",children:[m.jsx("div",{className:"text-xs font-bold text-gray-500",children:"SpO"}),m.jsx("div",{className:"font-mono text-base",children:i.vitals.o2sat?`${i.vitals.o2sat}%`:"-"})]}),m.jsxs("div",{className:"bg-gray-50 p-1 rounded-md",children:[m.jsx("div",{className:"text-xs font-bold text-gray-500",children:"Pain"}),m.jsx("div",{className:"font-mono text-base",children:i.vitals.pain?`${i.vitals.pain}/10`:"-"})]})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-x-8 mt-4",children:[i&&m.jsxs("section",{children:[m.jsx("h2",{className:"text-base font-bold text-gray-700 mb-2",children:"Nursing Section"}),m.jsxs("div",{className:"space-y-1",children:[m.jsx(hn,{label:"Status",value:i.status}),m.jsx(hn,{label:"Wound Delta",value:i.woundDelta}),m.jsx(hn,{label:"Device Delta",value:i.deviceDelta}),m.jsx(hn,{label:"Tasks",value:i.tasks}),m.jsx(hn,{label:"Escalation",value:i.escalation}),m.jsx(hn,{label:"Note",value:i.nurseNote})]})]}),n&&m.jsxs("section",{children:[m.jsx("h2",{className:"text-base font-bold text-gray-700 mb-2",children:"Doctor Section"}),m.jsxs("div",{className:"space-y-1",children:[m.jsx(hn,{label:"Status",value:n.status}),m.jsx(hn,{label:"Response to Plan",value:n.responseToPlan}),m.jsx(hn,{label:"Adherence",value:n.adherence}),m.jsx(hn,{label:"New Issues",value:n.newIssues}),m.jsx(hn,{label:"Plan",value:n.plan}),m.jsx(hn,{label:"Plan Details",value:n.planDetails}),m.jsx(hn,{label:"Next Follow-up",value:n.nextFollowUp}),m.jsx(hn,{label:"Note",value:n.mdNote})]})]})]}),m.jsx("footer",{className:"mt-16 pt-4 border-t absolute bottom-8 w-[calc(100%-4rem)]",children:m.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[m.jsxs("div",{children:[m.jsx("p",{className:"font-semibold",children:r.nurseSign||"Nurse Signature"}),m.jsx("p",{className:"text-xs text-gray-500 border-t mt-1 pt-1",children:"Nurse"})]}),m.jsxs("div",{children:[m.jsx("p",{className:"font-semibold",children:r.doctorSign||"Doctor Signature"}),m.jsx("p",{className:"text-xs text-gray-500 border-t mt-1 pt-1",children:"Doctor"})]})]})})]})},as=({label:r,value:e})=>{if(!e||Array.isArray(e)&&e.length===0)return null;let n;return typeof e=="object"&&!Array.isArray(e)?n=Object.entries(e).map(([i,o])=>`${i}: ${o}`).join(", "):n=Array.isArray(e)?e.join(", "):e,m.jsxs("p",{children:[m.jsxs("strong",{className:"font-semibold",children:[r,":"]})," ",n]})},D6=({visit:r,patient:e})=>{const{ptNote:n}=r,i=e.assessments.find(o=>o.role===ut.PhysicalTherapist);return m.jsxs("div",{className:"p-8 font-sans text-sm",style:{width:"210mm",height:"297mm"},children:[m.jsxs("header",{className:"flex items-center justify-between pb-4 border-b",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Physical Therapy Note"}),m.jsx("p",{className:"text-lg text-gray-600",children:"   - "})]}),m.jsx("div",{className:"text-right text-xs text-gray-500",children:m.jsxs("p",{children:[m.jsx("strong",{children:"Date:"})," ",new Date(r.date).toLocaleDateString()]})})]}),m.jsxs("section",{className:"grid grid-cols-2 gap-x-8 gap-y-2 mt-4 pb-4 border-b text-sm",children:[m.jsx("h2",{className:"col-span-2 text-base font-bold text-gray-700 mb-1",children:"Patient Information"}),m.jsx(as,{label:"Name",value:e.nameAr}),m.jsx(as,{label:"National ID",value:e.nationalId}),m.jsx(as,{label:"Area",value:e.areaId}),m.jsx(as,{label:"Phone",value:e.phone})]}),m.jsxs("div",{className:"mt-4 space-y-4",children:[i&&m.jsxs("section",{children:[m.jsx("h2",{className:"text-base font-bold text-gray-700 mb-2 underline",children:"Assessment Summary"}),m.jsxs("div",{className:"space-y-1",children:[m.jsx(as,{label:"Dx Focus",value:i.dxFocus}),m.jsx(as,{label:"Phase",value:i.phase}),m.jsx(as,{label:"Function",value:i.function}),m.jsx(as,{label:"Interventions",value:i.interventions})]})]}),n&&m.jsxs("section",{children:[m.jsx("h2",{className:"text-base font-bold text-gray-700 mb-2 underline",children:"Follow-up Note"}),m.jsxs("div",{className:"space-y-1",children:[m.jsx(as,{label:"Changes Since Last",value:n.changeSinceLast}),m.jsx(as,{label:"Tolerance",value:n.tolerance}),m.jsx(as,{label:"HEP",value:n.hep}),m.jsx(as,{label:"Plan",value:n.plan}),m.jsx(as,{label:"Plan Focus",value:n.planFocus}),m.jsx(as,{label:"Note",value:n.ptNote})]})]})]}),m.jsx("footer",{className:"mt-16 pt-4 border-t absolute bottom-8 w-[calc(100%-4rem)]",children:m.jsxs("div",{children:[m.jsx("p",{className:"font-semibold",children:r.ptSign||"Therapist Signature"}),m.jsx("p",{className:"text-xs text-gray-500 border-t mt-1 pt-1",children:"Physical Therapist"})]})})]})},os=({label:r,value:e})=>{if(!e||Array.isArray(e)&&e.length===0)return null;let n;return typeof e=="object"&&!Array.isArray(e)?n=Object.entries(e).map(([i,o])=>o).join(", "):n=Array.isArray(e)?e.join(", "):e,m.jsxs("p",{children:[m.jsxs("strong",{className:"font-semibold",children:[r,":"]})," ",n]})},O6=({visit:r,patient:e})=>{var o;const{swNote:n}=r,i=e.assessments.find(u=>u.role===ut.SocialWorker);return m.jsxs("div",{className:"p-8 font-sans text-sm",style:{width:"210mm",height:"297mm"},dir:"rtl",children:[m.jsxs("header",{className:"flex items-center justify-between pb-4 border-b",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"  "}),m.jsx("p",{className:"text-lg text-gray-600",children:"   - "})]}),m.jsx("div",{className:"text-right text-xs text-gray-500",children:m.jsxs("p",{children:[m.jsx("strong",{children:":"})," ",new Date(r.date).toLocaleDateString()]})})]}),m.jsxs("section",{className:"grid grid-cols-2 gap-x-8 gap-y-2 mt-4 pb-4 border-b text-sm",children:[m.jsx("h2",{className:"col-span-2 text-base font-bold text-gray-700 mb-1",children:" "}),m.jsx(os,{label:"",value:e.nameAr}),m.jsx(os,{label:" ",value:e.nationalId}),m.jsx(os,{label:"",value:e.areaId}),m.jsx(os,{label:"",value:e.phone})]}),m.jsxs("div",{className:"mt-4 space-y-4",children:[i&&m.jsxs("section",{children:[m.jsx("h2",{className:"text-base font-bold text-gray-700 mb-2 underline",children:"  "}),m.jsxs("div",{className:"space-y-1",children:[m.jsx(os,{label:" ",value:i.residence}),m.jsx(os,{label:" ",value:i.economic}),m.jsx(os,{label:" ",value:(o=i.homeSafety)==null?void 0:o.risks}),m.jsx(os,{label:"",value:i.needs}),m.jsx(os,{label:" ",value:i.psychosocial}),m.jsx(os,{label:"",value:i.actions})]})]}),n&&m.jsxs("section",{children:[m.jsx("h2",{className:"text-base font-bold text-gray-700 mb-2 underline",children:" "}),m.jsxs("div",{className:"space-y-1",children:[m.jsx(os,{label:" ",value:n.situationChange}),m.jsx(os,{label:" ",value:n.actionsTaken}),m.jsx(os,{label:"",value:n.plan}),m.jsx(os,{label:"",value:n.swNote})]})]})]}),m.jsx("footer",{className:"mt-16 pt-4 border-t absolute bottom-8 w-[calc(100%-4rem)]",children:m.jsxs("div",{children:[m.jsx("p",{className:"font-semibold",children:r.swSign||"  "}),m.jsx("p",{className:"text-xs text-gray-500 border-t mt-1 pt-1",children:" "})]})})]})},M6=({visit:r})=>m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 text-sm md:text-base",children:[m.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 border-2 border-blue-200",children:[m.jsxs("h4",{className:"font-bold text-blue-800 flex items-center gap-2 mb-3",children:[m.jsx(pd,{size:16})," Doctor's Assessment"]}),r.doctorNote?m.jsxs("div",{className:"space-y-2 text-gray-700",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Status:"})," ",r.doctorNote.status]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Response:"})," ",r.doctorNote.responseToPlan]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Plan:"})," ",r.doctorNote.plan," ",r.doctorNote.planDetails?`(${r.doctorNote.planDetails.join(", ")})`:""]})]}),r.doctorNote.mdNote&&m.jsx("div",{className:"bg-white rounded-lg p-3 border-l-4 border-blue-500",children:m.jsxs("p",{className:"italic text-blue-700",children:['"',r.doctorNote.mdNote,'"']})})]}):m.jsxs("div",{className:"text-center py-4",children:[m.jsx(Dc,{size:24,className:"text-gray-400 mx-auto mb-2"}),m.jsx("p",{className:"italic text-gray-500",children:"Pending Assessment"})]}),r.doctorSign&&m.jsx("div",{className:"mt-3 pt-2 border-t border-blue-200",children:m.jsxs("p",{className:"text-blue-600 text-sm font-medium",children:[" Signed by: ",r.doctorSign]})})]}),m.jsxs("div",{className:"bg-green-50 rounded-xl p-4 border-2 border-green-200",children:[m.jsxs("h4",{className:"font-bold text-green-800 flex items-center gap-2 mb-3",children:[m.jsx(fd,{size:16})," Nursing Care"]}),r.nurseNote?m.jsxs("div",{className:"space-y-2 text-gray-700",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Status:"})," ",r.nurseNote.status]})]}),r.nurseNote.vitals&&m.jsxs("div",{className:"bg-white rounded-lg p-3 border-l-4 border-green-500",children:[m.jsx("p",{children:m.jsx("strong",{children:"Vitals:"})}),m.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-1 text-sm",children:[r.nurseNote.vitals.temp&&m.jsxs("span",{children:["T: ",r.nurseNote.vitals.temp,"C"]}),r.nurseNote.vitals.o2sat&&m.jsxs("span",{children:["SpO: ",r.nurseNote.vitals.o2sat,"%"]}),r.nurseNote.vitals.bp&&m.jsxs("span",{children:["BP: ",r.nurseNote.vitals.bp]}),r.nurseNote.vitals.hr&&m.jsxs("span",{children:["HR: ",r.nurseNote.vitals.hr]})]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Tasks:"})," ",r.nurseNote.tasks.join(", ")]})]}),r.nurseNote.nurseNote&&m.jsx("div",{className:"bg-white rounded-lg p-3 border-l-4 border-green-500",children:m.jsxs("p",{className:"italic text-green-700",children:['"',r.nurseNote.nurseNote,'"']})})]}):m.jsxs("div",{className:"text-center py-4",children:[m.jsx(Dc,{size:24,className:"text-gray-400 mx-auto mb-2"}),m.jsx("p",{className:"italic text-gray-500",children:"Pending Assessment"})]}),r.nurseSign&&m.jsx("div",{className:"mt-3 pt-2 border-t border-green-200",children:m.jsxs("p",{className:"text-green-600 text-sm font-medium",children:[" Signed by: ",r.nurseSign]})})]}),r.ptNote&&m.jsxs("div",{className:"space-y-2",children:[m.jsxs("h4",{className:"font-bold text-gray-600 flex items-center gap-1",children:[m.jsx(tg,{size:14})," PT Note"]}),m.jsxs("div",{className:"pl-2 border-l-2 border-purple-200 space-y-1 text-gray-700",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Tolerance:"})," ",r.ptNote.tolerance]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Plan:"})," ",r.ptNote.plan]}),r.ptNote.ptNote&&m.jsxs("p",{className:"italic",children:['"',r.ptNote.ptNote,'"']})]}),r.ptSign&&m.jsxs("p",{className:"text-gray-400 text-[10px] pt-1",children:["Signed by: ",r.ptSign]})]}),r.swNote&&m.jsxs("div",{className:"space-y-2",dir:"rtl",children:[m.jsxs("h4",{className:"font-bold text-gray-600 flex items-center gap-1",children:[m.jsx(eg,{size:14}),"   "]}),m.jsxs("div",{className:"pr-2 border-r-2 border-yellow-200 space-y-1 text-gray-700",children:[m.jsxs("p",{children:[m.jsx("strong",{children:":"})," ",r.swNote.situationChange]}),m.jsxs("p",{children:[m.jsx("strong",{children:":"})," ",r.swNote.actionsTaken.join(", ")]}),r.swNote.swNote&&m.jsxs("p",{className:"italic",children:['"',r.swNote.swNote,'"']})]}),r.swSign&&m.jsxs("p",{className:"text-gray-400 text-[10px] pt-1",children:["  : ",r.swSign]})]})]}),j6=({visit:r,patient:e})=>{const{state:n,dispatch:i}=cs(),[o,u]=Be.useState(!1);if(!e)return null;const f=n.currentRole;let h,v,b=!1;switch(f){case ut.Doctor:h=S6,v=r.doctorNote,b=!!r.doctorNote;break;case ut.Nurse:h=A6,v=r.nurseNote,b=!!r.nurseNote;break;case ut.PhysicalTherapist:h=I6,v=r.ptNote,b=!!r.ptNote;break;case ut.SocialWorker:h=R6,v=r.swNote,b=!!r.swNote;break}const E=ae=>{const re=n.staff.find(ve=>ve..includes(""))||{:f};i({type:"SAVE_VISIT_NOTE",payload:{visitId:`${r.patientId}_${r.date}`,role:f,note:ae,user:re.}}),u(!1)},j=ae=>{const re=window.open("","_blank");if(re){re.document.write('<html><head><title>Visit Note</title><script src="https://cdn.tailwindcss.com"><\/script></head><body><div id="print-root"></div></body></html>'),re.document.close();const ve=re.document.getElementById("print-root");ve&&(sm.createRoot(ve).render(ae),setTimeout(()=>{re.print(),re.close()},500))}},z=()=>{switch(r.status){case"Completed":return m.jsx(ma,{size:18,className:"text-green-500"});case"DoctorCompleted":return m.jsxs("div",{className:"flex items-center gap-1",title:"Doctor completed",children:[m.jsx(pd,{size:16,className:"text-green-500"}),m.jsx(Dc,{size:16,className:"text-yellow-500"})]});case"NurseCompleted":return m.jsxs("div",{className:"flex items-center gap-1",title:"Nurse completed",children:[m.jsx(Dc,{size:16,className:"text-yellow-500"}),m.jsx(fd,{size:16,className:"text-green-500"})]});default:return m.jsx(Dc,{size:18,className:"text-yellow-500"})}};return m.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 space-y-4",children:[m.jsxs("div",{className:"flex justify-between items-start",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center font-bold text-blue-800 bg-blue-100",children:_1(e.nameAr)}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-bold text-gray-800",children:e.nameAr}),m.jsxs("p",{className:"text-xs text-gray-500",children:[e.nationalId," | ",e.areaId]})]})]}),m.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold text-gray-600",children:[z(),m.jsx("span",{children:r.status})]})]}),o&&h?m.jsx(h,{initialData:v,onSave:E,onCancel:()=>u(!1)}):m.jsx(M6,{visit:r}),m.jsxs("div",{className:"border-t pt-3 flex justify-end items-center gap-2",children:[r.status==="Completed"&&m.jsxs("button",{onClick:()=>j(m.jsx(C6,{visit:r,patient:e})),className:"text-xs px-3 py-1 rounded-md text-gray-600 bg-gray-100 hover:bg-gray-200 flex items-center gap-1",children:[m.jsx(hl,{size:14})," Print DN/RN"]}),r.ptNote&&m.jsxs("button",{onClick:()=>j(m.jsx(D6,{visit:r,patient:e})),className:"text-xs px-3 py-1 rounded-md text-gray-600 bg-gray-100 hover:bg-gray-200 flex items-center gap-1",children:[m.jsx(hl,{size:14})," Print PT"]}),r.swNote&&m.jsxs("button",{onClick:()=>j(m.jsx(O6,{visit:r,patient:e})),className:"text-xs px-3 py-1 rounded-md text-gray-600 bg-gray-100 hover:bg-gray-200 flex items-center gap-1",children:[m.jsx(hl,{size:14})," Print SW"]}),h&&!o&&m.jsxs("button",{onClick:()=>u(!0),className:"text-xs px-3 py-1 rounded-md text-blue-600 bg-blue-50 hover:bg-blue-100 flex items-center gap-1 flex-shrink-0",children:[m.jsx(iE,{size:14})," ",b?"Edit Note":"Add Note"]})]})]})},k6=()=>{const{state:r}=cs(),e=new Date().toISOString().split("T")[0],n=r.visits.filter(i=>i.date===e);return m.jsxs("div",{className:"max-w-4xl mx-auto",children:[m.jsxs("h1",{className:"text-2xl font-bold mb-4",children:["Visits for ",e]}),r.teams.map(i=>{const o=n.filter(u=>u.teamId===i.id);return o.length===0?null:m.jsxs("div",{className:"mb-8",children:[m.jsx("h2",{className:"text-lg font-semibold text-gray-700 mb-3 border-b pb-2",children:i.name}),m.jsx("div",{className:"space-y-4",children:o.map(u=>m.jsx(j6,{visit:u,patient:r.patients.find(f=>f.nationalId===u.patientId)},u.patientId))})]},i.id)}),n.length===0&&m.jsx("div",{className:"text-center py-10 text-gray-500",children:m.jsx("p",{children:"No visits scheduled for today."})})]})},P6=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],L6=()=>{const{state:r,dispatch:e}=cs(),[n,i]=Be.useState(new Date),[o,u]=Be.useState("month"),[f,h]=Be.useState(null),[v,b]=Be.useState(null),E=new Date(n.getFullYear(),n.getMonth(),1),j=new Date(n.getFullYear(),n.getMonth()+1,0),z=new Date(E);z.setDate(z.getDate()-E.getDay());const ae=new Date(j);ae.setDate(ae.getDate()+(6-j.getDay()));const re=xe=>{i(new Date(n.getFullYear(),n.getMonth()+xe,1))},ve=[];let me=new Date(z);for(;me<=ae;)ve.push(new Date(me)),me.setDate(me.getDate()+1);const De=r.visits.reduce((xe,ue)=>((xe[ue.date]=xe[ue.date]||[]).push(ue),xe),{}),ke=()=>{f&&(window.confirm("Are you sure you want to cancel this visit?")&&e({type:"CANCEL_VISIT",payload:{patientId:f.visit.patientId,date:f.visit.date}}),h(null))},Pe=(xe,ue)=>{xe.stopPropagation(),h({x:xe.clientX,y:xe.clientY,visit:ue})};return Be.useEffect(()=>{const xe=()=>h(null);return window.addEventListener("click",xe),()=>window.removeEventListener("click",xe)},[]),m.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border-2 border-gray-200 overflow-hidden",children:[m.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-4 md:p-6",children:[m.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(nE,{size:24,className:"text-blue-200"}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl md:text-2xl font-bold",children:n.toLocaleString("default",{month:"long",year:"numeric"})}),m.jsx("p",{className:"text-blue-200 text-sm",children:"Schedule & Appointments"})]})]}),m.jsx("div",{className:"flex items-center gap-2",children:m.jsx("div",{className:"flex bg-white/20 rounded-xl p-1",children:["month","week","day"].map(xe=>m.jsx("button",{onClick:()=>u(xe),className:`px-3 py-2 text-sm font-medium rounded-lg transition-all duration-200 touch-target-44 ${o===xe?"bg-white text-blue-700 shadow-md":"text-white hover:bg-white/30"}`,children:xe.charAt(0).toUpperCase()+xe.slice(1)},xe))})})]}),m.jsxs("div",{className:"flex items-center justify-between mt-4",children:[m.jsx("button",{onClick:()=>re(-1),className:"p-2 md:p-3 rounded-xl hover:bg-white/20 transition-colors touch-target-44",children:m.jsx(WC,{size:20})}),m.jsx("button",{onClick:()=>i(new Date),className:"px-4 py-2 bg-white/20 rounded-xl text-sm font-medium hover:bg-white/30 transition-colors",children:"Today"}),m.jsx("button",{onClick:()=>re(1),className:"p-2 md:p-3 rounded-xl hover:bg-white/20 transition-colors touch-target-44",children:m.jsx(JC,{size:20})})]})]}),m.jsxs("div",{className:"p-4 md:p-6",children:[o==="month"&&m.jsxs("div",{className:"grid grid-cols-7 gap-1 md:gap-2",children:[P6.map(xe=>m.jsx("div",{className:"text-center text-sm md:text-base font-bold text-gray-700 py-3 bg-gray-50 rounded-lg",children:xe},xe)),ve.map((xe,ue)=>{const Re=xe.toISOString().split("T")[0],P=De[Re]||[],L=new Date().toISOString().split("T")[0]===Re,H=xe.getMonth()===n.getMonth();return m.jsxs("div",{className:`border-2 border-gray-200 rounded-xl h-32 md:h-36 p-2 flex flex-col transition-all duration-200 hover:shadow-md cursor-pointer ${H?"bg-white":"bg-gray-50"} ${L?"ring-2 ring-blue-500 bg-blue-50":""}`,onClick:()=>b(xe),children:[m.jsxs("div",{className:"flex items-center justify-between mb-2",children:[m.jsx("span",{className:`text-sm md:text-base font-bold ${L?"bg-blue-600 text-white rounded-full w-6 h-6 md:w-8 md:h-8 flex items-center justify-center":H?"text-gray-800":"text-gray-400"}`,children:xe.getDate()}),P.length>0&&m.jsx("span",{className:"bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:P.length})]}),m.jsxs("div",{className:"flex-1 space-y-1 overflow-y-auto",children:[P.slice(0,3).map(ne=>{const F=r.patients.find(G=>G.nationalId===ne.patientId),le=r.teams.find(G=>G.id===ne.teamId);return F?m.jsx("div",{onClick:G=>{G.stopPropagation(),Pe(G,ne)},className:`rounded-lg px-2 py-1 text-xs font-medium truncate cursor-pointer transition-colors ${ne.status==="Completed"?"bg-green-100 text-green-800 hover:bg-green-200":ne.status==="DoctorCompleted"||ne.status==="NurseCompleted"?"bg-yellow-100 text-yellow-800 hover:bg-yellow-200":"bg-blue-100 text-blue-800 hover:bg-blue-200"}`,title:`${F.nameAr} - ${le==null?void 0:le.name} (${ne.status})`,children:m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx(ng,{size:10}),m.jsx("span",{children:F.nameAr})]})},ne.patientId):null}),P.length>3&&m.jsxs("div",{className:"text-xs text-gray-500 text-center py-1",children:["+",P.length-3," more"]})]})]},ue)})]}),m.jsx("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-4 gap-4",children:[{label:"Total Visits",value:r.visits.length,color:"blue"},{label:"Completed",value:r.visits.filter(xe=>xe.status==="Completed").length,color:"green"},{label:"In Progress",value:r.visits.filter(xe=>xe.status==="DoctorCompleted"||xe.status==="NurseCompleted").length,color:"yellow"},{label:"Scheduled",value:r.visits.filter(xe=>xe.status==="Scheduled").length,color:"gray"}].map(xe=>m.jsxs("div",{className:`bg-${xe.color}-50 border-2 border-${xe.color}-200 rounded-xl p-4 text-center`,children:[m.jsx("div",{className:`text-2xl md:text-3xl font-bold text-${xe.color}-600`,children:xe.value}),m.jsx("div",{className:`text-sm text-${xe.color}-700 font-medium`,children:xe.label})]},xe.label))})]}),f&&m.jsx("div",{className:"fixed z-50 bg-white rounded-xl shadow-2xl border-2 border-gray-200 p-4 min-w-64 animate-fade-in",style:{top:Math.min(f.y+10,window.innerHeight-200),left:Math.min(f.x,window.innerWidth-280)},onClick:xe=>xe.stopPropagation(),children:(()=>{const xe=r.patients.find(Re=>Re.nationalId===f.visit.patientId),ue=r.teams.find(Re=>Re.id===f.visit.teamId);return m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center justify-between mb-3 pb-2 border-b border-gray-200",children:[m.jsx("h3",{className:"font-bold text-gray-800",children:"Visit Details"}),m.jsx("button",{onClick:()=>h(null),className:"p-1 hover:bg-gray-100 rounded-lg",children:m.jsx(Ra,{size:16})})]}),m.jsxs("div",{className:"space-y-2 text-sm",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Patient:"})," ",(xe==null?void 0:xe.nameAr)||"Unknown"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Team:"})," ",(ue==null?void 0:ue.name)||"Unknown"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Date:"})," ",new Date(f.visit.date).toLocaleDateString()]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Status:"}),m.jsx("span",{className:`ml-1 px-2 py-1 rounded-full text-xs font-medium ${f.visit.status==="Completed"?"bg-green-100 text-green-800":f.visit.status==="DoctorCompleted"||f.visit.status==="NurseCompleted"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:f.visit.status})]})]}),m.jsxs("div",{className:"flex gap-2 mt-4",children:[m.jsxs("button",{onClick:()=>{h(null)},className:"flex-1 bg-blue-500 text-white px-3 py-2 rounded-lg hover:bg-blue-600 transition-colors flex items-center justify-center gap-2 text-sm font-medium",children:[m.jsx(iE,{size:14}),"Edit"]}),m.jsxs("button",{onClick:ke,className:"flex-1 bg-red-500 text-white px-3 py-2 rounded-lg hover:bg-red-600 transition-colors flex items-center justify-center gap-2 text-sm font-medium",children:[m.jsx(Ra,{size:14}),"Cancel"]})]})]})})()})]})},V6=({visits:r,patients:e,date:n})=>{const i=r.reduce((u,f)=>{const h=e.find(v=>v.nationalId===f.patientId);return h&&h.areaId&&(u[h.areaId]=u[h.areaId]||[]).push(f),u},{}),o=Object.keys(i).sort();return m.jsxs("div",{className:"p-8 font-sans text-sm",style:{width:"210mm",minHeight:"297mm"},dir:"rtl",children:[m.jsxs("header",{className:"flex items-center justify-between pb-4 border-b",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"  "}),m.jsx("p",{className:"text-lg text-gray-600",children:"   - "})]}),m.jsx("div",{className:"text-right text-xs text-gray-500",children:m.jsxs("p",{children:[m.jsx("strong",{children:":"})," ",new Date(n).toLocaleDateString()]})})]}),m.jsx("div",{className:"mt-6 space-y-6",children:o.map(u=>m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-3 pb-2 border-b-2 border-gray-300",children:u}),m.jsx("div",{className:"space-y-4",children:i[u].map(f=>{const h=e.find(j=>j.nationalId===f.patientId);if(!h)return null;const v=`${h.areaId}, ${h.nameAr}`,b=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(v)}`,E=`https://api.qrserver.com/v1/create-qr-code/?size=100x100&data=${encodeURIComponent(b)}`;return m.jsxs("div",{className:"p-3 border rounded-lg bg-gray-50/50 flex items-center justify-between gap-4 break-inside-avoid",children:[m.jsxs("div",{className:"flex-grow",children:[m.jsx("h3",{className:"font-bold text-lg text-gray-800",children:h.nameAr}),m.jsx("p",{className:"text-gray-600",children:h.areaId}),m.jsx("p",{className:"text-gray-600 font-mono",dir:"ltr",children:h.phone||"  "}),m.jsx("a",{href:b,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-xs",children:"   "})]}),m.jsx("div",{className:"flex-shrink-0",children:m.jsx("img",{src:E,alt:"QR Code",className:"w-20 h-20 rounded border"})})]},h.nationalId)})})]},u))})]})},U6=({visit:r,patient:e})=>{const n=`${e.areaId}, ${e.nameAr}`,i=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(n)}`,o=`https://api.qrserver.com/v1/create-qr-code/?size=100x100&data=${encodeURIComponent(i)}`;return m.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 flex items-center justify-between",dir:"rtl",children:[m.jsxs("div",{className:"flex-grow",children:[m.jsx("h3",{className:"font-bold text-lg text-gray-800",children:e.nameAr}),m.jsxs("div",{className:"space-y-1 mt-2 text-sm text-gray-600",children:[m.jsxs("p",{className:"flex items-center gap-2",children:[m.jsx(Qh,{size:14}),m.jsx("span",{children:e.areaId})]}),m.jsxs("p",{className:"flex items-center gap-2",children:[m.jsx(aE,{size:14}),m.jsx("span",{className:"font-mono",dir:"ltr",children:e.phone||" "})]})]})]}),m.jsxs("div",{className:"flex items-center gap-4 flex-shrink-0",children:[m.jsx("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:"p-3 rounded-full bg-blue-100 text-blue-600 hover:bg-blue-200 transition-colors",title:"   ",children:m.jsx(Qh,{size:24})}),m.jsx("img",{src:o,alt:"QR Code",className:"w-24 h-24 rounded-md border"})]})]})},B6=()=>{const{state:r}=cs(),e=new Date().toISOString().split("T")[0],n=r.visits.filter(f=>f.date===e),i=n.reduce((f,h)=>{const v=r.patients.find(b=>b.nationalId===h.patientId);return v&&v.areaId&&(f[v.areaId]=f[v.areaId]||[]).push(h),f},{}),o=Object.keys(i).sort(),u=()=>{const f=window.open("","_blank");if(f){f.document.write('<html><head><title>Driver Route</title><script src="https://cdn.tailwindcss.com"><\/script></head><body><div id="print-root"></div></body></html>'),f.document.close();const h=f.document.getElementById("print-root");h&&(sm.createRoot(h).render(m.jsx(V6,{visits:n,patients:r.patients,date:e})),setTimeout(()=>{f.print(),f.close()},500))}};return m.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",dir:"rtl",children:m.jsxs("div",{className:"max-w-4xl mx-auto",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsxs("h1",{className:"text-2xl font-bold",children:["  - ",e]}),n.length>0&&m.jsxs("button",{onClick:u,className:"flex items-center gap-2 px-4 py-2 text-sm rounded-lg text-gray-700 bg-gray-200 hover:bg-gray-300",children:[m.jsx(hl,{size:16}),"  "]})]}),o.length>0?m.jsx("div",{className:"space-y-6",children:o.map(f=>m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-3 pb-2 border-b",children:f}),m.jsx("div",{className:"space-y-3",children:i[f].map(h=>{const v=r.patients.find(b=>b.nationalId===h.patientId);return v?m.jsx(U6,{visit:h,patient:v},h.patientId):null})})]},f))}):m.jsx("div",{className:"text-center py-16 text-gray-500",children:m.jsx("p",{className:"text-lg",children:"     ."})})]})})};class z6{constructor(e){this.isOnline=!0,this.syncQueue=[],this.config=e,this.initializeSync()}initializeSync(){window.addEventListener("online",()=>{this.isOnline=!0,this.processSyncQueue()}),window.addEventListener("offline",()=>{this.isOnline=!1}),setInterval(()=>{this.isOnline&&this.syncQueue.length>0&&this.processSyncQueue()},300*1e3)}async makeRequest(e,n,i="POST"){try{const o=`${this.config.baseUrl}${e}`,u={method:i,headers:{"Content-Type":"application/json",...this.config.apiKey&&{Authorization:`Bearer ${this.config.apiKey}`}},...i==="POST"&&{body:JSON.stringify(n)}},f=new AbortController,h=setTimeout(()=>f.abort(),this.config.timeout),v=await fetch(o,{...u,signal:f.signal});if(clearTimeout(h),!v.ok)throw new Error(`HTTP ${v.status}: ${v.statusText}`);return{success:!0,data:await v.json(),timestamp:new Date().toISOString()}}catch(o){return console.error("GAS API Error:",o),{success:!1,error:o instanceof Error?o.message:"Unknown error",timestamp:new Date().toISOString()}}}async uploadPatients(e){return this.isOnline?this.makeRequest("/patients/upload",{patients:e}):(this.queueForSync("uploadPatients",e),{success:!0,data:{uploaded:0,errors:[]},timestamp:new Date().toISOString()})}async syncPatient(e){return this.isOnline?this.makeRequest("/patients/sync",e):(this.queueForSync("syncPatient",e),{success:!0,data:e,timestamp:new Date().toISOString()})}async saveVisit(e){return this.isOnline?this.makeRequest("/visits/save",e):(this.queueForSync("saveVisit",e),{success:!0,data:e,timestamp:new Date().toISOString()})}async getVisitsByDateRange(e,n){return this.isOnline?this.makeRequest("/visits/range",{startDate:e,endDate:n}):{success:!1,error:"Offline - cannot fetch data",timestamp:new Date().toISOString()}}async saveAssessment(e){return this.isOnline?this.makeRequest("/assessments/save",e):(this.queueForSync("saveAssessment",e),{success:!0,data:e,timestamp:new Date().toISOString()})}async generateAndStorePDF(e,n){return this.isOnline?this.makeRequest("/pdf/generate",{type:e,data:n}):(this.queueForSync("generatePDF",{type:e,data:n}),{success:!1,error:"Offline - PDF generation queued",timestamp:new Date().toISOString()})}async listPDFs(e,n,i){return this.isOnline?this.makeRequest("/pdf/list",{patientId:e,startDate:n,endDate:i}):{success:!1,error:"Offline - cannot fetch PDF list",timestamp:new Date().toISOString()}}async importFromCSV(e,n){return this.isOnline?this.makeRequest("/data/import",{csvData:e,type:n}):(this.queueForSync("importCSV",{csvData:e,type:n}),{success:!1,error:"Offline - import queued",timestamp:new Date().toISOString()})}async exportToCSV(e,n){return this.isOnline?this.makeRequest("/data/export",{type:e,filters:n}):{success:!1,error:"Offline - cannot export data",timestamp:new Date().toISOString()}}queueForSync(e,n){this.syncQueue.push({type:e,data:n,timestamp:new Date().toISOString()}),this.syncQueue.length>100&&(this.syncQueue=this.syncQueue.slice(-50));try{localStorage.setItem("gas-sync-queue",JSON.stringify(this.syncQueue))}catch(i){console.warn("Failed to persist sync queue:",i)}}async processSyncQueue(){if(!this.isOnline||this.syncQueue.length===0)return;const e=[...this.syncQueue];this.syncQueue=[];for(const n of e)try{switch(n.type){case"uploadPatients":await this.uploadPatients(n.data);break;case"syncPatient":await this.syncPatient(n.data);break;case"saveVisit":await this.saveVisit(n.data);break;case"saveAssessment":await this.saveAssessment(n.data);break;case"generatePDF":await this.generateAndStorePDF(n.data.type,n.data.data);break;case"importCSV":await this.importFromCSV(n.data.csvData,n.data.type);break;default:console.warn("Unknown sync type:",n.type)}}catch(i){console.error("Sync failed for item:",n,i),this.syncQueue.push(n)}try{localStorage.setItem("gas-sync-queue",JSON.stringify(this.syncQueue))}catch(n){console.warn("Failed to persist sync queue:",n)}}loadPersistedQueue(){try{const e=localStorage.getItem("gas-sync-queue");e&&(this.syncQueue=JSON.parse(e))}catch(e){console.warn("Failed to load persisted sync queue:",e)}}async healthCheck(){return this.makeRequest("/health",{},"GET")}getSyncStatus(){return{isOnline:this.isOnline,queueLength:this.syncQueue.length,lastSync:localStorage.getItem("gas-last-sync")||"Never"}}}let Oc=null;function q6(r){return Oc=new z6(r),Oc.loadPersistedQueue(),Oc}function m1(){return Oc}function F6(){return Oc!==null}const dh={baseUrl:"https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec",timeout:3e4},H6=({patientId:r,showUpload:e=!0,showGenerate:n=!0})=>{const{currentUser:i}=Jc(),[o,u]=Be.useState([]),[f,h]=Be.useState(!0),[v,b]=Be.useState(""),[E,j]=Be.useState(""),[z,ae]=Be.useState(null),[re,ve]=Be.useState(!1),[me,De]=Be.useState(!1),[ke,Pe]=Be.useState(null),xe=[{value:"",label:" "},{value:"assessment",label:""},{value:"visit",label:""},{value:"document",label:""},{value:"report",label:""},{value:"general",label:""}];Be.useEffect(()=>{ue()},[r,v,E]);const ue=async()=>{try{h(!0);let F;r?F=await pa.getPdfsByPatient(r):v||E?F=await pa.searchPdfs(v,E):F=await pa.getAllPdfs(),u(F)}catch(F){console.error("Error loading PDFs:",F),Pe({type:"error",text:"    PDF"})}finally{h(!1)}},Re=async()=>{if(z)try{ve(!0);const F=await z.arrayBuffer(),le=new Uint8Array(F),G={filename:`${Date.now()}_${z.name}`,originalFilename:z.name,fileType:z.type,fileSize:z.size,content:le,patientId:r,category:"document",description:`Uploaded by ${(i==null?void 0:i.name)||"user"}`,uploadedBy:(i==null?void 0:i.email)||"unknown"};await pa.savePdf(G),Pe({type:"success",text:"   "}),ae(null),ue()}catch(F){console.error("Error uploading PDF:",F),Pe({type:"error",text:"   "})}finally{ve(!1)}},P=async()=>{if(r)try{De(!0),await pa.generatePatientCard(r,i==null?void 0:i.name),Pe({type:"success",text:"    "}),ue()}catch(F){console.error("Error generating patient card:",F),Pe({type:"error",text:"    "})}finally{De(!1)}},L=async(F,le)=>{try{const G=await ca.getPdfFile(F);if(!G)return;const gt=new Blob([G.content],{type:"application/pdf"}),Ct=URL.createObjectURL(gt),Ee=document.createElement("a");Ee.href=Ct,Ee.download=le,document.body.appendChild(Ee),Ee.click(),document.body.removeChild(Ee),URL.revokeObjectURL(Ct)}catch(G){console.error("Error downloading PDF:",G),Pe({type:"error",text:"   "})}},H=F=>{if(F===0)return"0 Bytes";const le=1024,G=["Bytes","KB","MB","GB"],gt=Math.floor(Math.log(F)/Math.log(le));return parseFloat((F/Math.pow(le,gt)).toFixed(2))+" "+G[gt]},ne=F=>{const le=xe.find(G=>G.value===F);return le?le.label:F};return m.jsxs("div",{className:"bg-white rounded-2xl border-2 border-gray-200 p-6 shadow-lg",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[m.jsx(xh,{size:20,className:"text-blue-600"}),m.jsx("h2",{className:"text-xl font-bold text-gray-800",children:r?" PDF ":"  PDF"})]}),ke&&m.jsxs("div",{className:`p-3 rounded-lg mb-4 flex items-center gap-2 ${ke.type==="success"?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:[ke.type==="success"?m.jsx(ma,{size:16}):m.jsx(Gh,{size:16}),m.jsx("span",{children:ke.text}),m.jsx("button",{onClick:()=>Pe(null),className:"mr-auto text-sm",children:""})]}),m.jsxs("div",{className:"space-y-4 mb-6",children:[m.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[m.jsxs("div",{className:"flex-1 relative",children:[m.jsx(oE,{size:20,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),m.jsx("input",{type:"text",placeholder:"   PDF...",value:v,onChange:F=>b(F.target.value),className:"w-full pr-10 pl-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",dir:"rtl"})]}),m.jsx("select",{value:E,onChange:F=>j(F.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:xe.map(F=>m.jsx("option",{value:F.value,children:F.label},F.value))})]}),m.jsxs("div",{className:"flex flex-wrap gap-2",children:[e&&m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"file",accept:".pdf",onChange:F=>{var le;return ae(((le=F.target.files)==null?void 0:le[0])||null)},className:"hidden",id:"pdf-upload"}),m.jsxs("label",{htmlFor:"pdf-upload",className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer transition-colors",children:[m.jsx(cE,{size:16}),"  PDF"]}),z&&m.jsxs("button",{onClick:Re,disabled:re,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors",children:[re?m.jsx(Cp,{size:16,className:"animate-spin"}):m.jsx(P4,{size:16})," "]})]}),n&&r&&m.jsxs("button",{onClick:P,disabled:me,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 transition-colors",children:[me?m.jsx(Cp,{size:16,className:"animate-spin"}):m.jsx(hl,{size:16}),"  "]})]}),z&&m.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:m.jsxs("p",{className:"text-sm text-blue-700",children:[" : ",z.name," (",H(z.size),")"]})})]}),f?m.jsxs("div",{className:"flex items-center justify-center py-8",children:[m.jsx(Cp,{size:24,className:"animate-spin text-blue-600"}),m.jsx("span",{className:"mr-2",children:" ..."})]}):o.length===0?m.jsxs("div",{className:"text-center py-8 text-gray-500",children:[m.jsx(xh,{size:48,className:"mx-auto mb-4 text-gray-300"}),m.jsx("p",{children:"   PDF"})]}):m.jsx("div",{className:"space-y-3",children:o.map(F=>m.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(xh,{size:20,className:"text-red-600"}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-medium text-gray-800",children:F.originalFilename}),m.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[m.jsxs("span",{children:[": ",ne(F.category)]}),m.jsxs("span",{children:[": ",H(F.fileSize)]}),F.uploadedAt&&m.jsxs("span",{children:[" : ",new Date(F.uploadedAt).toLocaleDateString("ar-SA")]})]}),F.description&&m.jsx("p",{className:"text-sm text-gray-500 mt-1",children:F.description})]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:()=>L(F.id,F.originalFilename),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",title:"",children:m.jsx(sE,{size:16})}),m.jsx("button",{className:"p-2 text-green-600 hover:bg-green-100 rounded-lg transition-colors",title:"",children:m.jsx(rE,{size:16})})]})]},F.id))})]})},G6=()=>{const{useNetlifyDb:r,switchToNetlifyDb:e,switchToFirebase:n,syncStatus:i,state:o}=Jc(),[u,f]=Be.useState(!1),[h,v]=Be.useState(dh),b=async()=>{if(r)try{f(!0),console.log(" Manual refresh: Force loading Netlify DB data..."),window.location.reload()}catch(P){console.error("Error refreshing data:",P)}finally{f(!1)}},[E,j]=Be.useState(!1),[z,ae]=Be.useState("disabled"),[re,ve]=Be.useState(null);Be.useEffect(()=>{const P=localStorage.getItem("gas-config");if(P)try{const H=JSON.parse(P);v(H),H.baseUrl&&H.baseUrl!==dh.baseUrl&&De(H)}catch(H){console.error("Failed to load GAS config:",H)}const L=setInterval(me,5e3);return()=>clearInterval(L)},[]);const me=()=>{if(F6()){const P=m1();P&&ve(P.getSyncStatus())}},De=async P=>{ae("checking");try{(await q6(P).healthCheck()).success?(j(!0),ae("connected"),localStorage.setItem("gas-config",JSON.stringify(P))):(j(!1),ae("error"))}catch(L){console.error("GAS connection failed:",L),j(!1),ae("error")}},ke=()=>{h.baseUrl&&h.baseUrl.trim()!==""&&De(h)},Pe=()=>{j(!1),ae("disabled"),ve(null),localStorage.removeItem("gas-config"),v(dh)},xe=async()=>{const P=m1();if(P)try{const L=await P.exportToCSV("patients");if(L.success&&L.data){const H=new Blob([L.data.csvData],{type:"text/csv"}),ne=URL.createObjectURL(H),F=document.createElement("a");F.href=ne,F.download=L.data.filename||"patients_export.csv",document.body.appendChild(F),F.click(),document.body.removeChild(F),URL.revokeObjectURL(ne)}}catch(L){console.error("Export failed:",L)}},ue=()=>{switch(z){case"checking":return m.jsx("div",{className:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"});case"connected":return m.jsx(ma,{size:16,className:"text-green-500"});case"error":return m.jsx(Gh,{size:16,className:"text-red-500"});default:return m.jsx(Sc,{size:16,className:"text-gray-400"})}},Re=()=>{switch(z){case"checking":return"Connecting...";case"connected":return"Connected to Google Apps Script";case"error":return"Connection failed";default:return"Not connected"}};return m.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[m.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-2xl p-6 shadow-lg",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(lE,{size:24,className:"text-blue-200"}),m.jsxs("div",{children:[m.jsx("h1",{className:"text-2xl font-bold",children:"Application Settings"}),m.jsx("p",{className:"text-blue-200",children:"Configure database backend and data management"})]})]})}),m.jsxs("div",{className:"bg-white rounded-2xl border-2 border-gray-200 p-6 shadow-lg",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[m.jsx(c1,{size:20,className:"text-blue-600"}),m.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Database Configuration"})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[r?m.jsx(h1,{size:20,className:"text-green-600"}):m.jsx(Sc,{size:20,className:"text-blue-600"}),m.jsxs("div",{children:[m.jsxs("p",{className:"font-medium text-gray-800",children:["Current Database: ",r?"Netlify DB (PostgreSQL)":"Firebase Firestore"]}),m.jsx("p",{className:"text-sm text-gray-600",children:r?"Using Netlify DB powered by Neon PostgreSQL":"Using Firebase Firestore with offline sync"}),m.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[" Patients: ",o.patients.filter(P=>P.status!=="deceased").length," active |  Staff: ",o.staff.length," |  Visits: ",o.visits.length]})]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(ma,{size:16,className:"text-green-600"}),m.jsx("span",{className:"text-sm text-green-600 font-medium",children:"Active"}),r&&m.jsx("button",{onClick:b,disabled:u,className:"ml-2 p-1.5 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors disabled:opacity-50",title:"    ",children:m.jsx(z4,{size:14,className:u?"animate-spin":""})})]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("button",{onClick:n,disabled:!r,className:`p-4 rounded-xl border-2 transition-all ${r?"border-gray-200 hover:border-blue-300 text-gray-700":"border-blue-500 bg-blue-50 text-blue-700"} ${r?"hover:bg-blue-50":"cursor-default"}`,children:[m.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[m.jsx(Sc,{size:20,className:r?"text-gray-500":"text-blue-600"}),m.jsx("span",{className:"font-medium",children:"Firebase Firestore"})]}),m.jsx("p",{className:"text-sm text-left",children:"Google's NoSQL cloud database with real-time sync and offline support"}),!r&&m.jsxs("div",{className:"mt-2 flex items-center gap-1 text-sm font-medium text-blue-600",children:[m.jsx(ma,{size:14}),"Currently Active"]})]}),m.jsxs("button",{onClick:e,disabled:r,className:`p-4 rounded-xl border-2 transition-all ${r?"border-green-500 bg-green-50 text-green-700":"border-gray-200 hover:border-green-300 text-gray-700"} ${r?"cursor-default":"hover:bg-green-50"}`,children:[m.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[m.jsx(h1,{size:20,className:r?"text-green-600":"text-gray-500"}),m.jsx("span",{className:"font-medium",children:"Netlify DB (PostgreSQL)"})]}),m.jsx("p",{className:"text-sm text-left",children:"Production-grade PostgreSQL database powered by Neon with Netlify integration"}),r&&m.jsxs("div",{className:"mt-2 flex items-center gap-1 text-sm font-medium text-green-600",children:[m.jsx(ma,{size:14}),"Currently Active"]})]})]}),i&&m.jsxs("div",{className:"p-4 bg-blue-50 rounded-xl",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx(d1,{size:16,className:"text-blue-600"}),m.jsx("span",{className:"font-medium text-blue-800",children:"Sync Status"})]}),m.jsxs("div",{className:"flex items-center gap-4 text-sm text-blue-700",children:[m.jsx("span",{className:"flex items-center gap-1",children:i.isOnline?"Online":"Offline"}),i.queueLength>0&&m.jsxs("span",{children:["Queue: ",i.queueLength," items"]})]})]}),r&&o.patients.length>100&&m.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-xl",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(ma,{size:20,className:"text-green-600 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-green-800 mb-1",children:"Data Import Successful"}),m.jsxs("p",{className:"text-sm text-green-700",children:["Your v3 healthcare database has been successfully imported to Netlify DB. All ",o.patients.filter(P=>P.status!=="deceased").length," active patients and Arabic data are now available."]})]})]})}),m.jsx("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-xl",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(Gh,{size:20,className:"text-amber-600 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-amber-800 mb-1",children:"Database Migration"}),m.jsx("p",{className:"text-sm text-amber-700",children:"When switching databases, your current data will be automatically synced to the new database. This process may take a few moments depending on the amount of data."})]})]})})]})]}),m.jsxs("div",{className:"bg-white rounded-2xl border-2 border-gray-200 p-6 shadow-lg opacity-75",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[m.jsx(Sc,{size:20,className:"text-gray-500"}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-bold text-gray-600",children:"Advanced Integration (Optional)"}),m.jsx("p",{className:"text-sm text-gray-500",children:"Additional external system integrations"})]})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[ue(),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-800",children:Re()}),re&&m.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mt-1",children:[m.jsxs("span",{className:"flex items-center gap-1",children:[re.isOnline?m.jsx(d1,{size:14}):m.jsx(uE,{size:14}),re.isOnline?"Online":"Offline"]}),m.jsxs("span",{children:["Queue: ",re.queueLength," items"]}),m.jsxs("span",{children:["Last sync: ",re.lastSync]})]})]})]}),E&&m.jsx("button",{onClick:Pe,className:"px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors font-medium",children:"Disconnect"})]}),!E&&m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Google Apps Script Web App URL"}),m.jsx("input",{type:"url",value:h.baseUrl,onChange:P=>v(L=>({...L,baseUrl:P.target.value})),placeholder:"https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:border-blue-500 focus:ring-4 focus:ring-blue-200 transition-all duration-200"}),m.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Enter the web app URL from your deployed Google Apps Script"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"API Key (Optional)"}),m.jsx("input",{type:"password",value:h.apiKey||"",onChange:P=>v(L=>({...L,apiKey:P.target.value})),placeholder:"Optional API key for authentication",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:border-blue-500 focus:ring-4 focus:ring-blue-200 transition-all duration-200"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Timeout (milliseconds)"}),m.jsx("input",{type:"number",value:h.timeout,onChange:P=>v(L=>({...L,timeout:parseInt(P.target.value)||3e4})),min:"5000",max:"120000",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:border-blue-500 focus:ring-4 focus:ring-blue-200 transition-all duration-200"})]}),m.jsx("button",{onClick:ke,disabled:!h.baseUrl||h.baseUrl===dh.baseUrl||z==="checking",className:"w-full bg-blue-600 text-white py-3 px-6 rounded-xl font-medium hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:z==="checking"?"Connecting...":"Connect to Google Apps Script"})]})]})]}),m.jsxs("div",{className:"bg-white rounded-2xl border-2 border-gray-200 p-6 shadow-lg",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[m.jsx(c1,{size:20,className:"text-blue-600"}),m.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Data Management"})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("button",{onClick:xe,disabled:!E,className:"flex items-center justify-center gap-3 p-4 border-2 border-gray-200 rounded-xl hover:border-blue-300 hover:bg-blue-50 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[m.jsx(sE,{size:20,className:"text-blue-600"}),m.jsxs("div",{className:"text-left",children:[m.jsx("p",{className:"font-medium text-gray-800",children:"Export Data"}),m.jsx("p",{className:"text-sm text-gray-600",children:"Download patient data as CSV"})]})]}),m.jsxs("div",{className:"flex items-center justify-center gap-3 p-4 border-2 border-gray-200 rounded-xl opacity-50",children:[m.jsx(cE,{size:20,className:"text-gray-400"}),m.jsxs("div",{className:"text-left",children:[m.jsx("p",{className:"font-medium text-gray-600",children:"Import Data"}),m.jsx("p",{className:"text-sm text-gray-500",children:"Upload CSV data (Coming soon)"})]})]})]})]}),m.jsxs("div",{className:"bg-white rounded-2xl border-2 border-gray-200 p-6 shadow-lg",children:[m.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Setup Instructions"}),m.jsxs("div",{className:"prose text-sm text-gray-600 space-y-3",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"font-bold text-gray-800",children:"1. Create Google Apps Script Project"}),m.jsxs("p",{children:["Go to ",m.jsx("a",{href:"https://script.google.com",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"script.google.com"})," and create a new project."]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-bold text-gray-800",children:"2. Add Required Libraries"}),m.jsx("p",{children:"Enable Google Drive API and Google Sheets API in your Apps Script project."})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-bold text-gray-800",children:"3. Deploy as Web App"}),m.jsx("p",{children:'Deploy your script as a web app with "Anyone" access permissions.'})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-bold text-gray-800",children:"4. Copy Web App URL"}),m.jsx("p",{children:"Copy the deployment URL and paste it in the configuration above."})]})]})]}),r&&m.jsx(H6,{showUpload:!0,showGenerate:!1})]})},g1=()=>{const{syncStatus:r}=Jc();return r.isOnline?r.queueLength>0?m.jsxs("div",{className:"fixed top-4 right-4 z-50 bg-yellow-500 text-white px-3 py-2 rounded-lg shadow-lg flex items-center gap-2",children:[m.jsx(Sc,{size:16}),m.jsxs("span",{className:"text-sm font-medium",children:["Syncing... (",r.queueLength,")"]})]}):null:m.jsxs("div",{className:"fixed top-4 right-4 z-50 bg-red-500 text-white px-3 py-2 rounded-lg shadow-lg flex items-center gap-2",children:[m.jsx(uE,{size:16}),m.jsx("span",{className:"text-sm font-medium",children:"Offline"})]})},Q6=()=>{var v,b;const{state:r,currentUser:e,isAuthenticated:n}=Jc(),[i,o]=Be.useState("patients"),[u,f]=Be.useState(!1);Be.useEffect(()=>{e&&e.mappedRole==="Driver"&&o("driver")},[e]);const h=async()=>{try{await ya.signOut(),window.location.reload()}catch(E){console.error("Logout error:",E)}};return n?r.currentRole===ut.Driver?m.jsxs("div",{className:"flex h-screen bg-gradient-to-br from-blue-50 to-indigo-50 font-sans text-gray-800",dir:"ltr",children:[m.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden",children:[m.jsx(f1,{activeView:i,setActiveView:o}),m.jsx("div",{className:"flex-1 overflow-y-auto p-3 md:p-4 lg:p-6 mobile-spacing",children:m.jsx("div",{className:"animate-fade-in",children:m.jsx(B6,{})})})]}),m.jsx(g1,{})]}):m.jsxs("div",{className:"flex h-screen bg-gradient-to-br from-blue-50 to-indigo-50 font-sans text-gray-800",dir:"ltr",children:[u&&m.jsxs("div",{className:"fixed inset-0 z-40 lg:hidden",children:[m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:()=>f(!1)}),m.jsxs("div",{className:"fixed left-0 top-0 bottom-0 w-80 bg-white shadow-xl z-50",children:[m.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[m.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"Filters & Search"}),m.jsx("button",{onClick:()=>f(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:m.jsx(Ra,{size:20})})]}),m.jsx("div",{className:"h-full overflow-hidden",children:m.jsx(p1,{})})]})]}),m.jsx("div",{className:"hidden lg:block",children:m.jsx(p1,{})}),m.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden",children:[m.jsx(f1,{activeView:i,setActiveView:o}),m.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 py-2 flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsxs("button",{onClick:()=>f(!0),className:"lg:hidden flex items-center gap-2 px-3 py-1.5 bg-blue-600 text-white rounded-lg font-medium text-sm",children:[m.jsx(D4,{size:16}),"Filters"]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:m.jsx("span",{className:"text-blue-600 font-bold text-sm",children:((b=(v=e==null?void 0:e.name)==null?void 0:v.split(" ")[0])==null?void 0:b.charAt(0))||"U"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-gray-800",children:e==null?void 0:e.name}),m.jsxs("p",{className:"text-xs text-gray-500",children:[e==null?void 0:e.role," - ",r.currentRole]})]})]})]}),m.jsx("button",{onClick:h,className:"px-3 py-1.5 text-sm text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:" "})]}),m.jsx("div",{className:"flex-1 overflow-y-auto p-3 md:p-4 lg:p-6 mobile-spacing",children:m.jsxs("div",{className:"animate-fade-in",children:[i==="patients"&&m.jsx(E6,{}),i==="visits"&&m.jsx(k6,{}),i==="scheduler"&&m.jsx(L6,{}),i==="settings"&&m.jsx(G6,{})]})})]}),m.jsx(g1,{})]}):null},$6=()=>{const[r,e]=Be.useState(null),[n,i]=Be.useState(!1),[o,u]=Be.useState(!0);Be.useEffect(()=>{const h=ya.getCurrentUser();h&&(e(h),i(!0)),u(!1)},[]);const f=h=>{e(h),i(!0)};return o?m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-600 to-indigo-800 flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"w-16 h-16 border-4 border-white border-t-transparent rounded-full animate-spin mb-4 mx-auto"}),m.jsx("p",{className:"text-white text-lg font-medium",children:"  ..."})]})}):n?m.jsx(OC,{children:m.jsx(jC,{children:m.jsx(Q6,{})})}):m.jsx(a6,{onLoginSuccess:f})},pE=document.getElementById("root");if(!pE)throw new Error("Could not find root element to mount to");const K6=Ww.createRoot(pE);K6.render(m.jsx(vc.StrictMode,{children:m.jsx($6,{})}));
